# translation of security_firewall.xml.po to Japanese
# Japanese translations for PACKAGE package
# PACKAGE パッケージに対する英訳.
#
# Automatically generated, 2018.
# Yasuhiko Kamata <belphegor@belbel.or.jp>, 2019, 2020, 2021, 2022, 2023, 2024, 2025.
msgid ""
msgstr ""
"Project-Id-Version: security_firewall.xml\n"
"Report-Msgid-Bugs-To: https://github.com/belphegor-belbel/doc-opensuse-ja\n"
"POT-Creation-Date: 2025-08-04 22:05+0000\n"
"PO-Revision-Date: 2025-06-18 07:14+0900\n"
"Last-Translator: Yasuhiko Kamata <belphegor@belbel.or.jp>\n"
"Language-Team: Japanese <opensuse-ja@opensuse.org>\n"
"Language: ja\n"
"MIME-Version: 1.0\n"
"Content-Type: text/plain; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"
"Plural-Forms: nplurals=1; plural=0;\n"
"X-Generator: KBabel 1.11.4\n"

#. Tag: title
#: security_firewall.xml:8
#, no-c-format
msgid "Masquerading and firewalls"
msgstr "マスカレードとファイアウオール"

#. Tag: date
#: security_firewall.xml:17
#, no-c-format
msgid "2025-06-12"
msgstr "2025-06-12"

#. Tag: para
#: security_firewall.xml:24
#, no-c-format
msgid "Whenever Linux is used in a network environment, you can use the kernel functions that allow the manipulation of network packets to maintain a separation between internal and external network areas. The Linux <systemitem>netfilter</systemitem> framework provides the means to establish an effective firewall that keeps different networks apart. Using iptables&mdash;a generic table structure for the definition of rule sets&mdash;precisely controls the packets allowed to pass a network interface. Such a packet filter can be set up using &firewalld; and its graphical interface <command>firewall-config</command> ."
msgstr "Linux マシンがネットワーク内に配置されていれば、カーネルの機能を利用してネットワークパケットの制御を行い、内部ネットワークと外部ネットワークを区別して扱ったり、パケットそのものを書き換えたりすることができます。 Linux では <systemitem>netfilter</systemitem> フレームワークが提供されていて、これによって様々なネットワークを個別に扱う効率的なファイアウオールを構築することができます。この <systemitem>netfilter</systemitem> フレームワークのフロントエンドが iptables で、ルールセットを定義するための汎用的なテーブル構造を作成することができます。これにより、ネットワークインターフェイスからの通過を許可するパケットを、正確に制御することができます。また、 &firewalld; やそのグラフィカルインターフェイスである <command>firewall-config</command> を利用することでも、パケットフィルタを構築することができます。"

#. Tag: para
#: security_firewall.xml:35
#, no-c-format
msgid "&productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> introduces &firewalld; as the new default software firewall, replacing &susefirewall;. This chapter provides guidance for configuring &firewalld;, and migrating from &susefirewall; for users who have upgraded from older &productname; releases."
msgstr "&productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> では新しいソフトウエアファイアウオールとして &firewalld; が提供されています。これは &susefirewall; を置き換えるべく提供されているものです。本章では &firewalld; の設定方法のほか、古いバージョンの &productname; リリースからアップグレードしたユーザ向けに、 &susefirewall; から &firewalld; への移行方法をも説明しています。"

#. Tag: title
#: security_firewall.xml:45
#, no-c-format
msgid "Packet filtering with iptables"
msgstr "iptables によるパケットフィルタリング"

#. Tag: para
#: security_firewall.xml:47
#, no-c-format
msgid "This section discusses the low-level details of packet filtering. The components <systemitem>netfilter</systemitem> and <systemitem>iptables</systemitem> are responsible for the filtering and manipulation of network packets and for network address translation (NAT). The filtering criteria and any actions associated with them are stored in chains, which must be matched one after another by individual network packets as they arrive. The chains to match are stored in tables. The <command>iptables</command> command allows you to alter these tables and rule sets."
msgstr "本章では、パケットフィルタリングに関してパケット寄りの詳細を説明しています。 <systemitem>netfilter</systemitem> と <systemitem>iptables</systemitem> のコンポーネントは、ネットワークパケットのフィルタリングや内容の変更、そしてネットワークアドレス変換 (NAT) に関する制御を行う仕組みです。フィルタリングの判断条件とそれに付属する制御内容はチェインという形で保持され、パケットが届くごとにそれぞれ 1 つずつ判断を行います。 <command>iptables</command> コマンドでは、これらのテーブルやルールの制御を行うことができます。"

#. Tag: para
#: security_firewall.xml:59
#, no-c-format
msgid "The Linux kernel maintains three tables, each for a particular category of functions of the packet filter:"
msgstr "Linux カーネルでは 3 種類のテーブルを管理しています。これらはそれぞれ別々のフィルタ機能に対応しています:"

#. Tag: term
#: security_firewall.xml:66
#, no-c-format
msgid "filter"
msgstr "filter"

#. Tag: para
#: security_firewall.xml:68
#, no-c-format
msgid "This table holds the bulk of the filter rules, because it implements the <emphasis>packet filtering</emphasis> mechanism in the stricter sense, which determines whether packets are let through ( <literal>ACCEPT</literal> ) or discarded ( <literal>DROP</literal> ), for example."
msgstr "このテーブルは、狭い意味での <emphasis>パケットフィルタリング</emphasis> を行うために提供されているテーブルで、様々なフィルタリングルールを設定して使用します。このテーブルでは、パケットの通過を許可する ( <literal>ACCEPT</literal> ) か拒否する ( <literal>DROP</literal> ) かを指定するなどして、ルールを構成します。"

#. Tag: term
#: security_firewall.xml:78
#, no-c-format
msgid "nat"
msgstr "nat"

#. Tag: para
#: security_firewall.xml:80
#, no-c-format
msgid "This table defines any changes to the source and target addresses of packets. Using these functions also allows you to implement <emphasis>masquerading</emphasis> , which is a special case of NAT used to link a private network with the Internet."
msgstr "このテーブルは、パケットの発信元と送信先のアドレスをそれぞれ変更するために使用するテーブルです。これらの機能を利用することで、プライベートネットワークをインターネットに接続する際に使用する、 <emphasis>マスカレード</emphasis> と呼ばれる処理を実現することができます。"

#. Tag: term
#: security_firewall.xml:89
#, no-c-format
msgid "mangle"
msgstr "mangle"

#. Tag: para
#: security_firewall.xml:91
#, no-c-format
msgid "The rules held in this table make it possible to manipulate values stored in IP headers (such as the type of service)."
msgstr "このテーブルは、 IP ヘッダなどに含まれている様々な値 (Type Of Service など) を制御するために使用するテーブルです。"

#. Tag: para
#: security_firewall.xml:99
#, no-c-format
msgid "These tables contain several predefined chains to match packets:"
msgstr "これらのテーブルに対して、それぞれ下記に示すチェインが用意されています:"

#. Tag: term
#: security_firewall.xml:105
#, no-c-format
msgid "PREROUTING"
msgstr "PREROUTING"

#. Tag: para
#: security_firewall.xml:107
#, no-c-format
msgid "This chain is applied to all incoming packets."
msgstr "このチェインは、届いた全てのパケットを処理するためのチェインです。"

#. Tag: term
#: security_firewall.xml:113
#, no-c-format
msgid "INPUT"
msgstr "INPUT"

#. Tag: para
#: security_firewall.xml:115
#, no-c-format
msgid "This chain is applied to packets destined for the system's internal processes."
msgstr "このチェインは、このシステムが送信先となっている全てのパケットを処理するためのチェインです。"

#. Tag: term
#: security_firewall.xml:122
#, no-c-format
msgid "FORWARD"
msgstr "FORWARD"

#. Tag: para
#: security_firewall.xml:124
#, no-c-format
msgid "This chain is applied to packets that are routed through the system."
msgstr "このチェインは、このシステムを通過していく全てのパケットを処理するためのチェインです。"

#. Tag: term
#: security_firewall.xml:131
#, no-c-format
msgid "OUTPUT"
msgstr "OUTPUT"

#. Tag: para
#: security_firewall.xml:133
#, no-c-format
msgid "This chain is applied to packets originating from the system itself."
msgstr "このチェインは、このシステムから発信される全てのパケットを処理するためのチェインです。"

#. Tag: term
#: security_firewall.xml:139
#, no-c-format
msgid "POSTROUTING"
msgstr "POSTROUTING"

#. Tag: para
#: security_firewall.xml:141
#, no-c-format
msgid "This chain is applied to all outgoing packets."
msgstr "このチェインは、発信される全てのパケットを処理するためのチェインです。"

#. Tag: para
#: security_firewall.xml:148
#, no-c-format
msgid "<xref linkend=\"fig-fire-table\"/> illustrates the paths along which a network packet may travel on a given system. For the sake of simplicity, the figure lists tables as parts of chains, but in reality these chains are held within the tables themselves."
msgstr "<xref linkend=\"fig-fire-table\"/> の図には、 Linux システム内におけるパケットの流通経路を示しています。単純化する目的でチェインの中にテーブルを記述していますが、実際にはこれらのチェインはテーブル内に含まれる形になっています。"

#. Tag: para
#: security_firewall.xml:155
#, no-c-format
msgid "In the simplest case, an incoming packet destined for the system itself arrives at the <literal>eth0</literal> interface. The packet is first referred to the <literal>PREROUTING</literal> chain of the <literal>mangle</literal> table then to the <literal>PREROUTING</literal> chain of the <literal>nat</literal> table. The following step, concerning the routing of the packet, determines that the actual target of the packet is a process of the system itself. After passing the <literal>INPUT</literal> chains of the <literal>mangle</literal> and the <literal>filter</literal> table, the packet finally reaches its target, provided that the rules of the <literal>filter</literal> table allow this."
msgstr "最もわかりやすい例として、 <literal>eth0</literal> のインターフェイスに対して、このシステム宛のパケットが届いた場合を考えてみます。パケットは最初、 <literal>mangle</literal> テーブル内の <literal>PREROUTING</literal> チェインで処理され、その後 <literal>nat</literal> テーブル内の <literal>PREROUTING</literal> チェインで処理が行われます。その後、パケットの経路 (ルーティング) を判断する処理を行い、パケットの送信先が自分自身であるかどうかを判断します。今回は自分自身が宛先なので、 <literal>mangle</literal> および <literal>filter</literal> の <literal>INPUT</literal> チェインで処理されたあと、 <literal>filter</literal> テーブル内で許可される設定になっていれば、対応するプログラムに渡されることになります。"

#. Tag: title
#: security_firewall.xml:169
#, no-c-format
msgid "iptables: a packet's possible paths"
msgstr "iptables: パケットの流通経路"

#. Tag: title
#: security_firewall.xml:181
#, no-c-format
msgid "Masquerading basics"
msgstr "基本的なマスカレード処理"

#. Tag: para
#: security_firewall.xml:183
#, no-c-format
msgid "Masquerading is the Linux-specific form of NAT (network address translation) and can be used to connect a small LAN with the Internet. LAN hosts use IP addresses from the private range (see <xref linkend=\"sec-network-addresses-route\"/> ) and on the Internet official IP addresses are used. To be able to connect to the Internet, a LAN host's private address is translated to an official one. This is done on the router, which acts as the gateway between the LAN and the Internet. The underlying principle is a simple one: The router has more than one network interface, typically a network card and a separate interface connecting with the Internet. While the latter links the router with the outside world, one or several others link it with the LAN hosts. With these hosts in the local network connected to the network card (such as <literal>eth0</literal> ) of the router, they can send any packets not destined for the local network to their default gateway or router."
msgstr "マスカレードとは Linux 固有の NAT (Network Address Translation; ネットワークアドレス変換) の一形態で、小規模な LAN をインターネットに接続する際に使用するものです。 LAN 内のホストにはプライベート IP アドレスの範囲 (詳しくは <xref linkend=\"sec-network-addresses-route\"/> をお読みください) 内にあるアドレスを割り当ててあり、インターネット側にはプロバイダなどから割り当てられたアドレスを使用している場合、インターネットに接続するには、 LAN 側の IP アドレスをインターネット側のアドレスに変換する作業が必要となります。通常、この処理は LAN とインターネットを結ぶルータが行うべき作業です。一般的な構成は非常にシンプルで、ルータには複数のネットワークインターフェイス (通常はネットワークカード) があり、それとは別にインターネットに接続しているインターフェイスが用意されています。 LAN 内のコンピュータは、このルータをデフォルトゲートウエイとして設定することで、外部 (つまりインターネット) の世界に出て行くことができるようになっています。"

#. Tag: title
#: security_firewall.xml:203
#, no-c-format
msgid "Using the correct network mask"
msgstr "正しいネットマスクの設定について"

#. Tag: para
#: security_firewall.xml:204
#, no-c-format
msgid "When configuring your network, make sure both the broadcast address and the netmask are the same for all local hosts. Failing to do so prevents packets from being routed properly."
msgstr "ネットワークを設定する際、ブロードキャストアドレスとネットマスクは、 LAN 内の全てのコンピュータで同じ値を設定する必要があります。設定の異なるコンピュータが存在すると、正しい経路を見つけられなくなってしまうことがあります。"

#. Tag: para
#: security_firewall.xml:211
#, no-c-format
msgid "As mentioned, whenever one of the LAN hosts sends a packet destined for an Internet address, it goes to the default router. However, the router must be configured before it can forward such packets. For security reasons, this is not enabled in a default installation. To enable it, add the line <literal>net.ipv4.ip_forward = 1</literal> in the file <filename>/etc/sysctl.conf</filename> . Alternatively do this via &yast;, for example by calling <command>yast routing ip-forwarding on</command> ."
msgstr "上述のとおり、 LAN 内のコンピュータがインターネットアドレス宛にパケットを送信する場合、デフォルトゲートウエイとして設定したルータに対して通信が行われます。ただし、ルータとして動作するにはあらかじめパケットを転送できるように設定しなければなりません。セキュリティ上の理由から、既定のインストールでは転送機能は有効化されません。有効化を行うには、 <filename>/etc/sysctl.conf</filename> ファイル内に <literal>net.ipv4.ip_forward = 1</literal> という行を追加してください。 &yast; から設定を行いたい場合は、 <command>yast routing ip-forwarding on</command> と入力して実行してください。"

#. Tag: para
#: security_firewall.xml:221
#, no-c-format
msgid "The target host of the connection can see your router, but knows nothing about the host in your internal network where the packets originated. This is why the technique is called masquerading. Because of the address translation, the router is the first destination of any reply packets. The router must identify these incoming packets and translate their target addresses, so packets can be forwarded to the correct host in the local network."
msgstr "接続先の (インターネット側の) ホストからは、ルータまでは到達可能であるものの、本来のパケット送信元である内部ネットワーク内のコンピュータまでは到達できないようにしています。このような仕組みをマスカレード (仮装や変装などの意味) と言います。アドレス変換の仕組みにより、ルータは応答パケットに対する第一の送信先となります。ルータ側ではこのパケットがどれに紐付くものであるのかを探して、本来の (LAN 側の) 送信元に配送します。"

#. Tag: para
#: security_firewall.xml:231
#, no-c-format
msgid "With the routing of inbound traffic depending on the masquerading table, there is no way to open a connection to an internal host from the outside. For such a connection, there would be no entry in the table. In addition, any connection already established has a status entry assigned to it in the table, so the entry cannot be used by another connection."
msgstr "内部側のネットワークパケットの配送はマスカレード処理用のテーブルに従って行われるため、外側 (インターネット側) から内側 (LAN 側) に接続を開くことはできなくなっています。これは、外部から内部に接続しようとしても、テーブル内に対応する項目が存在しないためです。これに加えて、既に確立されている接続に対しては、テーブル内でその状態を管理するようにもなっています。これにより、他の接続で使用されてしまうようなことがないようになっています。"

#. Tag: para
#: security_firewall.xml:239
#, no-c-format
msgid "As a consequence of all this, you might experience some problems with several application protocols, such as ICQ, cucme, IRC (DCC, CTCP), and FTP (in PORT mode). Web browsers, the standard FTP program, and many other programs use the PASV mode. This passive mode is much less problematic as far as packet filtering and masquerading are concerned."
msgstr "このような構造になっていることから、 ICQ, cucme, IRC (DCC, CTCP), FTP (PORT モード) などのプロトコルを使用した場合、接続がうまくいかない場合があります。 Web ブラウザや標準的な FTP プログラムなど、多数のプログラムは PASV モードを使用しますので、フィルタリングやマスカレードという観点では問題が発生しにくくなっています。"

#. Tag: title
#: security_firewall.xml:248
#, no-c-format
msgid "Firewalling basics"
msgstr "基本的なファイアウオール処理"

#. Tag: para
#: security_firewall.xml:250
#, no-c-format
msgid "<emphasis>Firewall</emphasis> is probably the term most widely used to describe a mechanism that controls the data flow between networks. Strictly speaking, the mechanism described in this section is called a <emphasis>packet filter</emphasis> . A packet filter regulates the data flow according to certain criteria, such as protocols, ports, and IP addresses. This allows you to block packets that, according to their addresses, are not supposed to reach your network. To allow public access to your Web server, for example, explicitly open the corresponding port. However, a packet filter does not scan the contents of packets with legitimate addresses, such as those directed to your Web server. For example, if incoming packets were intended to compromise a CGI program on your Web server, the packet filter would still let them through."
msgstr "<emphasis>ファイアウオール</emphasis> とはおそらく、ネットワーク間を流れるデータを制御する仕組みとして最もよく使われている用語でしょう。厳密に言うと、本章で説明している内容は <emphasis>パケットフィルタ</emphasis> と呼ばれる仕組みです。パケットフィルタはプロトコルやポート、 IP アドレスなどの条件を元に、データの流れを管理するための仕組みです。この仕組みによって、ネットワークに対して届いて欲しくないパケットを防ぐことができます。たとえば Web サーバなど、一般的に広くアクセスを許すサービスを提供するような場合、明示的に対応するポートを開くように設定する必要があります。しかしながら、一般にパケットフィルタではパケットの内容までは判断できませんので、アドレス情報などが間違っていない限り、 Web サーバとの通信はできてしまいます。つまり、 Web サーバ内で動作する CGI プログラムを不正に操作するようなパケットが届いたとしても、パケットフィルタではそれを防ぐことができず、通過させてしまうことになります。"

#. Tag: para
#: security_firewall.xml:265
#, no-c-format
msgid "A more effective but more complex mechanism is the combination of several types of systems, such as a packet filter interacting with an application gateway or proxy. In this case, the packet filter rejects any packets destined for disabled ports. Packets that are directed to the application gateway are accepted. This gateway or proxy pretends to be the actual client of the server. In a sense, such a proxy could be considered a masquerading host on the protocol level used by the application. One example for such a proxy is Squid, an HTTP and FTP proxy server. To use Squid, the browser must be configured to communicate via the proxy. Any HTTP pages or FTP files requested are served from the proxy cache and objects not found in the cache are fetched from the Internet by the proxy."
msgstr "より効率的で複雑な構成を取るとすれば、アプリケーションゲートウエイやプロキシなどとパケットフィルタを組み合わせて、多階層の防御を行う方法があります。この場合、パケットフィルタは許可していないポート宛の通信を拒否し、それを通過したパケットのみがアプリケーションゲートウエイやプロキシに渡されます。このゲートウエイやプロキシは、サーバとクライアントとの間の仲介役として動作し、アプリケーションが使用するプロトコルを直接解釈してやり取りを行います。このようなアプリケーションゲートウエイやプロキシとして代表的なものが Squid です。こちらは HTTP/FTP のプロキシサーバとして動作するもので、 HTTP ページや FTP ファイルへのアクセスは、プロキシキャッシュ内に記憶していればその内容をそのまま提供し、キャッシュ内に存在していなければ直接アクセスしてページを提供することができます。"

#. Tag: para
#: security_firewall.xml:280
#, no-c-format
msgid "The following section focuses on the packet filter that comes with &productname;. For further information about packet filtering and firewalling, read the <link xlink:href=\"https://tldp.org/HOWTO/Firewall-HOWTO.html\">Firewall HOWTO</link> ."
msgstr "下記の章では、 &productname; に付属しているパケットフィルタ機能について説明しています。パケットフィルタやファイアウオールに関する詳細は、 <link xlink:href=\"https://tldp.org/HOWTO/Firewall-HOWTO.html\">Firewall HOWTO</link> (英語) でも提供されています。"

#. Tag: title
#: security_firewall.xml:288
#, no-c-format
msgid "&firewalld;"
msgstr "&firewalld;"

#. Tag: title
#: security_firewall.xml:290
#, no-c-format
msgid "&firewalld; replaces &susefirewall;"
msgstr "&firewalld; による &susefirewall; の置き換えについて"

#. Tag: para
#: security_firewall.xml:291
#, no-c-format
msgid "&productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> introduces &firewalld; as the new default software firewall, replacing &susefirewall;. If you are upgrading from a release older than &productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> , &susefirewall; will be unchanged and you must manually upgrade to &firewalld; (see <xref linkend=\"sec-security-firewall-upgrade\"/> )."
msgstr "&productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> 15 では &susefirewall; の置き換えとして &firewalld; が新しい既定のファイアウオールになっています。 &productname; <phrase os=\"sles;sled\">15 GA</phrase> <phrase os=\"osuse\">15.0</phrase> 以前のバージョンからアップグレードしている場合は、 &susefirewall; が従来どおりインストールされたままの状態になりますので、手作業で &firewalld; に移行を行ってください (詳しくは <xref linkend=\"sec-security-firewall-upgrade\"/> をお読みください) 。"

#. Tag: para
#: security_firewall.xml:301
#, no-c-format
msgid "&firewalld; is a daemon that maintains the system's <command>iptables</command> rules and offers a D-Bus interface for operating on them. It comes with a command line utility <command>firewall-cmd</command> and a graphical user interface <command>firewall-config</command> for interacting with it. Since &firewalld; is running in the background and provides a well defined interface it allows other applications to request changes to the iptables rules, for example to set up virtual machine networking."
msgstr "&firewalld; はシステム内にある <command>iptables</command> のルールを管理し、 D-Bus インターフェイス経由で操作することのできるデーモンです。対応するコマンドラインユーティリティ <command>firewall-cmd</command> と、グラフィカルユーザインターフェイス <command>firewall-config</command> がそれぞれ用意されています。 &firewalld; は裏で動作する仕組みであることから、たとえば仮想マシンのネットワーク設定を行うなど、 iptables のルールに対してアプリケーション側から変更要求を送信することができるようになっています。"

#. Tag: para
#: security_firewall.xml:311
#, no-c-format
msgid "&firewalld; implements different security zones. Several predefined zones like <literal>internal</literal> and <literal>public</literal> exist. The administrator can define additional custom zones if desired. Each zone contains its own set of iptables rules. Each network interface is a member of exactly one zone. Individual connections can also be assigned to a zone based on the source addresses."
msgstr "&firewalld; ではセキュリティゾーンと呼ばれる仕組みを提供しています。既定の設定では、 <literal>internal</literal> (内部) や <literal>public</literal> (公共) などのゾーンが用意されています。それ以外のゾーンが必要な場合でも、管理者側で自由に設定することができます。各ゾーンにはそれぞれ対応する iptables のルールを設定することができます。また、ネットワークインターフェイスはいずれか 1 つのゾーンに属するように設定するほか、発信元のアドレスをベースにして接続ごとにゾーンを割り当てることもできます。"

#. Tag: para
#: security_firewall.xml:320
#, no-c-format
msgid "Each zone represents a certain level of trust. For example the <literal>public</literal> zone is not trusted, because other computers in this network are not under your control (suitable for Internet or wireless hotspot connections). On the other hand the <literal>internal</literal> zone is used for networks that <emphasis>are</emphasis> under your control, like a home or company network. By utilizing zones this way, a host can offer different kinds of services to trusted networks and untrusted networks in a defined way."
msgstr "それぞれのゾーンは信頼レベルを表していて、たとえば <literal>public</literal> はインターネットや無線ホットスポットに対して設定すべきゾーンで、最も信頼レベルの低いネットワークを表しています。逆に <literal>internal</literal> は、家庭内のネットワークや企業内のネットワークなど、最も信頼できるネットワークを表しています。このように信頼レベルを分けることで、接続されるネットワークごとに異なるルールを適用できるようにしています。"

#. Tag: para
#: security_firewall.xml:331
#, no-c-format
msgid "For more information about the predefined zones and their meaning in &firewalld;, refer to its manual at <link xlink:href=\"https://www.firewalld.org/documentation/zone/predefined-zones.html\"/> ."
msgstr "&firewalld; の既定で設定されているゾーンとその意味について、詳しくは <link xlink:href=\"https://www.firewalld.org/documentation/zone/predefined-zones.html\"/> (英語) にあるマニュアルをお読みください。"

#. Tag: title
#: security_firewall.xml:338
#, no-c-format
msgid "No zone assigned behavior"
msgstr "ゾーンを割り当てない場合の動作について"

#. Tag: para
#: security_firewall.xml:339
#, no-c-format
msgid "The initial state for network interfaces is to be assigned to no zone at all. In this case the network interface will be implicitly handled in the default zone, which can be determined by calling <command>firewall-cmd --get-default-zone</command> . If not configured otherwise, the default zone is the <literal>public</literal> zone."
msgstr "ネットワークインターフェイスに対する設定を行っていない場合、そのインターフェイスには何もゾーンが割り当てられません。この場合、 <command>firewall-cmd --get-default-zone</command> で表示される既定のゾーンが割り当てられます。既定のゾーンを何も設定していない場合、既定値は <literal>public</literal> (公共) になっています。"

#. Tag: para
#: security_firewall.xml:348
#, no-c-format
msgid "The &firewalld; packet filtering model allows any outgoing connections to pass. Outgoing connections are connections that are actively established by the local host. Incoming connections that are established by remote hosts are blocked if the respective service is not allowed in the zone in question. Therefore, each of the interfaces with incoming traffic must be placed in a suitable zone to allow for the desired services to be accessible. For each of the zones, define the services or protocols you need."
msgstr "&firewalld; のパケットフィルタリングでは、接続の開始側については基本的に許可される設定になっています。接続の開始側とは、手元のコンピュータから相手のコンピュータに対して、接続を始める種類の接続を意味しています。逆に、接続を受け入れる側の場合は、ゾーンの設定で明示的に許可を指定しない限り、アクセスが拒否されるようになっています。そのため、何らかのサービスの接続を受け入れるインターフェイスに対しては、適切なゾーンを指定しておいて、ゾーン内で必要なサービスの許可を設定してください。"

#. Tag: para
#: security_firewall.xml:359
#, no-c-format
msgid "An important concept of &firewalld; is the distinction between two separate configurations: the <emphasis>runtime</emphasis> and the <emphasis>permanent</emphasis> configuration. The runtime configuration represents the currently active rules, while the permanent configuration represents the saved rules that will be applied when restarting &firewalld;. This allows to add temporary rules that will be discarded after restarting &firewalld;, or to experiment with new rules while being able to revert back to the original state. When you are changing the configuration, you need to be aware of which configuration you are editing. How this is done is discussed in <xref linkend=\"sec-security-firewall-firewalld-configurations\"/> ."
msgstr "&firewalld; では、もう 1 つ重要な考え方があります。それは <emphasis>一時的な</emphasis> 設定と <emphasis>恒久的な</emphasis> 設定です。一時的な設定とは現在動作中のルールそのものを表していて、恒久的な設定とは次回の &firewalld; の再起動で適用される、保存済みのルールを表しています。これにより、次に &firewalld; を再起動するまでの間、一時的に適用するルールを設定することができますので、実験的にルールを追加してみて、うまくいかなければ元に戻すと言ったことが容易に実現できるようになっています。なお、設定を変更する際には、どちらの設定を編集しているのかをよくお確かめください。こちらについての詳細は、 <xref linkend=\"sec-security-firewall-firewalld-configurations\"/> で説明しています。"

#. Tag: para
#: security_firewall.xml:372
#, no-c-format
msgid "To perform the &firewalld; configuration using the graphical user interface <command>firewall-config</command> refer to its <link xlink:href=\"https://www.firewalld.org/documentation/utilities/firewall-config.html\">documentation</link> . In the following section we will be looking at how to perform typical &firewalld; configuration tasks using <command>firewall-cmd</command> on the command line."
msgstr "&firewalld; をグラフィカルユーザインターフェイス <command>firewall-config</command> で操作したい場合は、 <link xlink:href=\"https://www.firewalld.org/documentation/utilities/firewall-config.html\">ドキュメンテーション</link> (英語) をお読みになることをお勧めします。以下の章では、コマンドライン経由で利用する <command>firewall-cmd</command> で &firewalld; の制御を行っています。"

#. Tag: title
#: security_firewall.xml:381
#, no-c-format
msgid "Configuring the firewall with &nm;"
msgstr "&nm; によるファイアウオールの設定"

#. Tag: para
#: security_firewall.xml:382
#, no-c-format
msgid "The &nm; supports a basic configuration of &firewalld; by selecting zones."
msgstr "&nm; ではゾーンを選択することで、 &firewalld; の基本的な設定を行うことができます。"

#. Tag: para
#: security_firewall.xml:386
#, no-c-format
msgid "When editing a wired or wireless connection, go to the <emphasis>Identity</emphasis> tab in the configuration window and use the <literal>Firewall Zone</literal> drop-down box."
msgstr "有線もしくは無線接続を編集する際、設定ウインドウ内の <emphasis>Identity</emphasis> タブを選択し、 <literal>Firewall Zone</literal> のドロップダウンボックスから選択を行ってください。"

#. Tag: title
#: security_firewall.xml:394
#, no-c-format
msgid "Configuring the firewall with &yast;"
msgstr "&yast; によるファイアウオールの設定"

#. Tag: para
#: security_firewall.xml:395
#, no-c-format
msgid "The <command>yast firewall</command> module supports a basic configuration of &firewalld;. It provides a zone selector, services selector, and ports selector. It does not support creating custom iptables rules, and limits zone creation and customization to selecting services and ports."
msgstr "<command>yast firewall</command> では &firewalld; の基本的な設定を行うことができます。ゾーンやサービス、ポートを選択することができますが、独自の iptables ルールを作成することはできませんし、ゾーンの作成やサービスとポートの選択に関するカスタマイズには制限があります。"

#. Tag: title
#: security_firewall.xml:403
#, no-c-format
msgid "Changing settings in running mode"
msgstr "動作中の設定変更について"

#. Tag: para
#: security_firewall.xml:404
#, no-c-format
msgid "&yast; respects the settings in <filename>/etc/firewalld/firewalld.conf</filename> , where the default value for <option>FlushAllOnReload</option> is set to <literal>no</literal> . Therefore, &yast; does not change settings in running mode. For example, if you have assigned an interface to a different zone with &yast;, restart the firewalld daemon for the change to take effect."
msgstr "&yast; は <filename>/etc/firewalld/firewalld.conf</filename> の設定に従って動作するようになっていますが、この中の <option>FlushAllOnReload</option> という設定は、既定値が <literal>no</literal> になっています。そのため、 &yast; は設定をすぐには反映させなくなっています。たとえば &yast; でインターフェイスのゾーンを変更したりした場合、設定を反映させるには firewalld の再起動が必要となります。"

#. Tag: title
#: security_firewall.xml:415
#, no-c-format
msgid "Configuring the firewall on the command line"
msgstr "コマンドラインからのファイアウオール設定"

#. Tag: title
#: security_firewall.xml:417
#, no-c-format
msgid "Firewall start-up"
msgstr "ファイアウオールの起動"

#. Tag: para
#: security_firewall.xml:419
#, no-c-format
msgid "&firewalld; will be installed and enabled by default. It is a regular &systemd; service that can be configured via <command>systemctl</command> or the &yast; Services Manager."
msgstr "&firewalld; は既定でインストールされ、有効化されます。 &firewalld; は通常の &systemd; サービスとして設定されていますので、 <command>systemctl</command> や &ycc_runlevel; で設定することができます。"

#. Tag: title
#: security_firewall.xml:426
#, no-c-format
msgid "Automatic firewall configuration"
msgstr "自動的なファイアウオール設定について"

#. Tag: para
#: security_firewall.xml:427
#, no-c-format
msgid "After the installation, &yast; automatically starts &firewalld; and leaves all interfaces in the default <literal>public</literal> zone. If a server application is configured and activated on the system, &yast; can adjust the firewall rules via the options <guimenu>Open Ports on Selected Interface in Firewall</guimenu> or <guimenu>Open Ports on Firewall</guimenu> in the server configuration modules. Some server module dialogs include a <guimenu>Firewall Details</guimenu> button for activating additional services and ports."
msgstr "インストールを行うと、 &yast; は &firewalld; を自動的に起動して、全てのインターフェイスを既定値の <literal>public</literal> ゾーンに割り当てます。何らかのサーバアプリケーションをインストールしていて、システム内で有効化している場合は、 &yast; 側で <guimenu>ファイアウオールでポートを開くインターフェイス</guimenu> でインターフェイスを選択するか、もしくは <guimenu>ファイアウオールでポートを開く</guimenu> を選択することで、自動的にファイアウオールの設定を行うことができます。また、サーバモジュールによっては、 <guimenu>ファイアウオールの詳細</guimenu> ボタンを押すことで、追加のサービスやポートを開くように設定することもできます。"

#. Tag: title
#: security_firewall.xml:440
#, no-c-format
msgid "Runtime versus permanent configuration"
msgstr "一時的な設定と恒久的な設定の違い"

#. Tag: para
#: security_firewall.xml:442
#, no-c-format
msgid "By default, all <command>firewall-cmd</command> commands operate on the runtime configuration. You can apply most operations to the permanent configuration <emphasis>only</emphasis> by adding the <literal>--permanent</literal> parameter. When doing so, the change affects the permanent configuration and will not be effective immediately in the runtime configuration. There is currently no way to add a rule to both runtime and permanent configurations in a single invocation. To achieve this you can apply all necessary changes to the runtime configuration and when all is working as expected issue the following command:"
msgstr "既定では、 <command>firewall-cmd</command> は一時的な設定に対して作用し、恒久的な設定は変更しません。恒久的に設定を変更したい場合は、 <literal>--permanent</literal> オプションを追加してください。なお、 <literal>--permanent</literal> オプションを指定した場合、一時的な設定には反映されず、即時に反映されることもありません。現時点では両方に対して一回で設定する機能は用意されていませんが、一時的な設定を恒久的な設定にコピーすることは可能です。コピーを行うには、下記のように実行します:"

#. Tag: screen
#: security_firewall.xml:455
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --runtime-to-permanent</command>"
msgstr "&prompt.root;<command>firewall-cmd --runtime-to-permanent</command>"

#. Tag: para
#: security_firewall.xml:457
#, no-c-format
msgid "This writes all current runtime rules into the permanent configuration. Any temporary modifications you or other programs may have made to the firewall in other contexts are made permanent this way. If you are unsure about this, you can also take the opposite approach to be on the safe side: Add new rules to the permanent configuration and reload &firewalld; to make them active."
msgstr "上記を実行することで、現時点での一時的な設定を恒久的な設定として書き込むことができます。これにより、コマンドラインやその他のプログラムなどで一時的な設定に書き込んだ場合でも、それを恒久的に保存することができるようになります。ただし、より安全に作業を行いたい場合は、恒久的な設定に新しいルールを追加して、 &firewalld; を再起動することで有効化することもできます。"

#. Tag: para
#: security_firewall.xml:467
#, no-c-format
msgid "Some configuration items, like the default zone, are shared by both the runtime and permanent configurations. Changing them reflects in both configurations at once."
msgstr "なお、既定のゾーンなど一部の設定は、一時的な設定と恒久的な設定で異なる管理を行っていません。これらの設定を変更した場合は、両方の設定に対して反映されます。"

#. Tag: para
#: security_firewall.xml:474
#, no-c-format
msgid "To revert the runtime configuration to the permanent configuration and thereby discard any temporary changes, two possibilities exist, either via the &firewalld; command line interface or via &systemd;:"
msgstr "逆に、一時的に設定を変更していて、その変更を取り消したい場合は、下記のいずれかを実行してください。前者は &firewalld; のコマンドラインインターフェイスを介して、後者は &systemd; を介して実施しています:"

#. Tag: screen
#: security_firewall.xml:480
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --reload</command>"
msgstr "&prompt.root;<command>firewall-cmd --reload</command>"

#. Tag: screen
#: security_firewall.xml:482
#, no-c-format
msgid "&prompt.root;<command>systemctl reload firewalld</command>"
msgstr "&prompt.root;<command>systemctl reload firewalld</command>"

#. Tag: para
#: security_firewall.xml:484
#, no-c-format
msgid "For brevity the examples in the following sections will always operate on the runtime configuration, if applicable. Adjust them accordingly to make them permanent."
msgstr "以下の章では、記述を簡略化する目的で、常に一時的な設定に対して作業を行っています。恒久的な設定に書き込みたい場合は、対応するオプションを付与して実行してください。"

#. Tag: title
#: security_firewall.xml:492
#, no-c-format
msgid "Assignment of interfaces to zones"
msgstr "インターフェイスのゾーンへの割り当て"

#. Tag: para
#: security_firewall.xml:494
#, no-c-format
msgid "You can list all network interfaces currently assigned to a zone like this:"
msgstr "ゾーンが割り当てられている全てのネットワークインターフェイスを表示したい場合は、下記のように実行します:"

#. Tag: screen
#: security_firewall.xml:497
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --zone=public --list-interfaces</command>\n"
"eth0"
msgstr "&prompt.root;<command>firewall-cmd --zone=public --list-interfaces</command>\n"
"eth0"

#. Tag: para
#: security_firewall.xml:500
#, no-c-format
msgid "Similarly you can query which zone a specific interface is assigned to:"
msgstr "同様に、インターフェイス名を指定してゾーンを問い合わせることもできます:"

#. Tag: screen
#: security_firewall.xml:504
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --get-zone-of-interface=eth0</command>\n"
"public"
msgstr "&prompt.root;<command>firewall-cmd --get-zone-of-interface=eth0</command>\n"
"public"

#. Tag: para
#: security_firewall.xml:507
#, no-c-format
msgid "The following command lines assign an interface to a zone. The variant using <literal>--add-interface</literal> works if <literal>eth0</literal> is not already assigned to another zone. The variant using <literal>--change-interface</literal> always works, removing <literal>eth0</literal> from its current zone if necessary:"
msgstr "下記のコマンドラインは、インターフェイスをゾーンに割り当てるコマンドラインです。なお、 <literal>--add-interface</literal> は <literal>eth0</literal> がどのゾーンにも割り当てられていない場合にのみ動作します。 <literal>--change-interface</literal> は、どちらの場合でも動作します。この場合、既にゾーンへの割り当てが存在していると、そのゾーンに対する割り当てを外す動作になります:"

#. Tag: screen
#: security_firewall.xml:515
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --zone=internal --add-interface=eth0</command>\n"
"&prompt.root;<command>firewall-cmd --zone=internal --change-interface=eth0</command>"
msgstr "&prompt.root;<command>firewall-cmd --zone=internal --add-interface=eth0</command>\n"
"&prompt.root;<command>firewall-cmd --zone=internal --change-interface=eth0</command>"

#. Tag: para
#: security_firewall.xml:518
#, no-c-format
msgid "Any operations without an explicit <literal>--zone</literal> argument will implicitly operate on the default zone. This pair of commands can be used for getting and setting the default zone assignment:"
msgstr "なお、明示的に <literal>--zone</literal> オプションでゾーンを指定しない場合は、既定のゾーンが指定されたものとして扱われます。下記のコマンドは、それぞれ既定のゾーンが何であるのかを問い合わせ、既定のゾーンを特定のゾーンに設定するコマンドです:"

#. Tag: screen
#: security_firewall.xml:524
#, no-c-format
msgid ""
"&prompt.root;<command>firewall-cmd --get-default-zone</command>\n"
"dmz\n"
"&prompt.root;<command>firewall-cmd --set-default-zone=public</command>"
msgstr ""
"&prompt.root;<command>firewall-cmd --get-default-zone</command>\n"
"dmz\n"
"&prompt.root;<command>firewall-cmd --set-default-zone=public</command>"

#. Tag: para
#: security_firewall.xml:529
#, no-c-format
msgid "Any network interfaces not explicitly assigned to a zone are automatically part of the default zone. Changing the default zone reassigns all those network interfaces immediately for the permanent and runtime configurations. You should never use a trusted zone like <literal>internal</literal> as the default zone, to avoid unexpected exposure to threats. For example, hotplugged network interfaces like USB Ethernet interfaces would automatically become part of the trusted zone in such cases."
msgstr "特定のゾーンに割り当てられていないネットワークインターフェイスは、自動的に既定のゾーンに割り当てられているものとして扱われます。また、既定のゾーンの変更は即時に反映され、かつ恒久的にも保存されます。そのため、 <literal>internal</literal> などのセキュリティの低いゾーンを既定のゾーンに設定したりしてはなりません。これにより、お使いのコンピュータを不用意に危険にさらすことになってしまいます。たとえば USB イーサネットなどのホットプラグ型インターフェイスを接続した場合、既定のゾーンが <literal>internal</literal> ゾーンであるとすると、接続を開始した直後からネットワークの接続を信頼してしまうことになります。"

#. Tag: para
#: security_firewall.xml:540
#, no-c-format
msgid "Interfaces that are not explicitly part of any zone do not appear in the zone interface list. There is currently no command to list unassigned interfaces. Due to this it is best to avoid unassigned network interfaces during regular operation."
msgstr "また、ゾーンのインターフェイス一覧には、明示的にゾーンが指定されているもの以外は表示されないことにも注意してください。現時点では、ゾーンの割り当てのないインターフェイスを表示するコマンドはありません。このような理由から、通常使用するネットワークインターフェイスについては、必ずゾーンを割り当てるようにしておいてください。"

#. Tag: title
#: security_firewall.xml:550
#, no-c-format
msgid "Making network services accessible"
msgstr "ネットワークサービスにアクセスできるようにする設定"

#. Tag: para
#: security_firewall.xml:552
#, no-c-format
msgid "&firewalld; has a concept of <emphasis>services</emphasis> . A service consists of definitions of ports and protocols. These definitions logically belong together in the context of a given network service like a Web or mail server protocol. The following commands can be used to get information about predefined services and their details:"
msgstr "&firewalld; には <emphasis>サービス</emphasis> という考え方があります。サービスは 1 つ以上のポートやプロトコルの定義から構成されるもので、 Web やメールサーバのプロトコルなどのように、まとめて使用することになるポートやプロトコルを一括で指定できるように構成しているものです。下記のコマンドでは、サービス名を指定してその詳細情報を取得しています:"

#. Tag: screen
#: security_firewall.xml:560
#, no-c-format
msgid ""
"&prompt.root;<command>firewall-cmd --get-services</command>\n"
"[...] dhcp dhcpv6 dhcpv6-client dns docker-registry [...]\n"
"&prompt.root;<command>firewall-cmd --info-service dhcp</command>\n"
"dhcp\n"
"  ports: 67/udp\n"
"  protocols:\n"
"  source-ports:\n"
"  modules:\n"
"  destination:"
msgstr ""
"&prompt.root;<command>firewall-cmd --get-services</command>\n"
"[...] dhcp dhcpv6 dhcpv6-client dns docker-registry [...]\n"
"&prompt.root;<command>firewall-cmd --info-service dhcp</command>\n"
"dhcp\n"
"  ports: 67/udp\n"
"  protocols:\n"
"  source-ports:\n"
"  modules:\n"
"  destination:"

#. Tag: para
#: security_firewall.xml:570
#, no-c-format
msgid "These service definitions can be used for easily making the associated network functionality accessible in a zone. This command line opens the HTTP Web server port in the internal zone, for example:"
msgstr "これらのサービス定義は、ゾーン内で特定の機能をまとめて有効化したい場合に使用します。たとえば下記のようにコマンドを入力して実行すると、 <literal>internal</literal> ゾーンに対して HTTP (Web サーバ) のポートを開くことができます:"

#. Tag: screen
#: security_firewall.xml:576
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --add-service=http --zone=internal</command>"
msgstr "&prompt.root;<command>firewall-cmd --add-service=http --zone=internal</command>"

#. Tag: para
#: security_firewall.xml:578
#, no-c-format
msgid "The removal of a service from a zone is performed using the counterpart command <literal>--remove-service</literal> . You can also define custom services using the <literal>--new-service</literal> subcommand. Refer to <link xlink:href=\"https://www.firewalld.org/documentation/howto/add-a-service.html\"/> for more details on how to do this."
msgstr "特定のゾーンに対してサービスの許可を取り消したい場合は、逆のサブコマンドである <literal>--remove-service</literal> を使用します。新しくサービスを定義したい場合は、 <literal>--new-service</literal> サブコマンドを使用します。詳しくは <link xlink:href=\"https://www.firewalld.org/documentation/howto/add-a-service.html\"/> (英語) をお読みください。"

#. Tag: para
#: security_firewall.xml:586
#, no-c-format
msgid "If you just want to open a single port by number, you can use the following approach. This will open TCP port 8000 in the internal zone:"
msgstr "ポート番号を直接指定してポートを開きたい場合は、下記のように入力して実行します。下記の例では、 <literal>internal</literal> ゾーンに対して TCP ポート 8000 を開きます:"

#. Tag: screen
#: security_firewall.xml:591
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --add-port=8000/tcp --zone=internal</command>"
msgstr "&prompt.root;<command>firewall-cmd --add-port=8000/tcp --zone=internal</command>"

#. Tag: para
#: security_firewall.xml:593
#, no-c-format
msgid "For removal use the counterpart command <literal>--remove-port</literal> ."
msgstr "ポートを閉じたい場合は、逆のサブコマンドである <literal>--remove-port</literal> をお使いください。"

#. Tag: title
#: security_firewall.xml:598
#, no-c-format
msgid "Temporarily opening a service or port"
msgstr "一時的にサービスやポートを開く設定について"

#. Tag: para
#: security_firewall.xml:599
#, no-c-format
msgid "&firewalld; supports a <literal>--timeout</literal> parameter that allows to open a service or port for a limited time duration. This can be helpful for quick testing and making sure that closing the service or port is not forgotten. To allow the <literal>imap</literal> service in the <literal>internal</literal> zone for 5 minutes, you would call"
msgstr "&firewalld; には特定のサービスやポートを指定した時間内のみ開くことのできる、 <literal>--timeout</literal> というパラメータが用意されています。これは簡易的なテストに有用な仕組みで、サービスやポートを閉じ忘れることを防止することができます。たとえば <literal>internal</literal> ゾーンに対して 5 分間だけ <literal>imap</literal> サービスを許可したい場合は、下記のように実行します:"

#. Tag: screen
#: security_firewall.xml:606
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --add-service=imap --zone=internal --timeout=5m</command>"
msgstr "&prompt.root;<command>firewall-cmd --add-service=imap --zone=internal --timeout=5m</command>"

#. Tag: title
#: security_firewall.xml:612
#, no-c-format
msgid "Lockdown mode"
msgstr "ロックダウンモード"

#. Tag: para
#: security_firewall.xml:614
#, no-c-format
msgid "&firewalld; offers a <emphasis>lockdown mode</emphasis> that prevents changes to the firewall rules while it is active. Since applications can automatically change the firewall rules via the D-Bus interface, and depending on the PolicyKit rules regular users may be able to do the same, it can be helpful to prevent changes in some situations. You can find more information about this at <link xlink:href=\"https://fedoraproject.org/wiki/Features/FirewalldLockdown\"/> ."
msgstr "&firewalld; には、そのファイアウオールのルールが有効な間は変更を禁止することのできる、 <emphasis>ロックダウンモード</emphasis> が用意されています。アプリケーション側からは D-Bus インターフェイスを介して自動的にファイアウオールのルールを変更することができてしまうほか、 PolicyKit のルールに従って一般ユーザからも同じことを実施できてしまいますので、状況によっては変更の防止が有用となることがあります。詳しくは <link xlink:href=\"https://fedoraproject.org/wiki/Features/FirewalldLockdown\"/> をお読みください。"

#. Tag: para
#: security_firewall.xml:624
#, no-c-format
msgid "It is important to understand that the lockdown mode feature provides no real security, but merely protection against accidental or benign attempts to change the firewall. The way the lockdown mode is currently implemented in &firewalld; provides no security against malicious intent, as is pointed out at <link xlink:href=\"https://seclists.org/oss-sec/2017/q3/139\"/> ."
msgstr "なお、ロックダウンモードは実際のセキュリティを提供するものではなく、不用意に設定を変更してしまったりする行為を防止するための仕組みです。 &firewalld; でのロックダウンモードは、不正アクセスからの防御にはなっていないことに注意してください。詳しくは <link xlink:href=\"https://seclists.org/oss-sec/2017/q3/139\"/> (英語) をお読みください。"

#. Tag: title
#: security_firewall.xml:636
#, no-c-format
msgid "Adding custom <command>iptables</command> rules"
msgstr "独自の <command>iptables</command> ルールの追加"

#. Tag: para
#: security_firewall.xml:638
#, no-c-format
msgid "&firewalld; claims exclusive control over the host's <systemitem>netfilter</systemitem> rules. You should never modify firewall rules using other tools like <command>iptables</command> . Doing so could confuse &firewalld; and break security or functionality."
msgstr "&firewalld; はコンピュータ内の <systemitem>netfilter</systemitem> ルールに対して、排他的にアクセスすることによって成り立っています。そのため、 <command>iptables</command> のようなコマンドで、ファイアウオールのルールを直接書き換えたりすべきではありません。これにより、 &firewalld; の動作が不安定になってしまったり、セキュリティや機能性が損なわれてしまったりする危険性があります。"

#. Tag: para
#: security_firewall.xml:645
#, no-c-format
msgid "If you need to add custom firewall rules that aren't covered by &firewalld; features then there are two ways to do so. To directly pass raw <command>iptables</command> syntax you can use the <literal>--direct</literal> option. It expects the table, chain, and priority as initial arguments and the rest of the command line is passed as is to <command>iptables</command> . The following example adds a connection tracking rule for the forwarding filter table:"
msgstr "&firewalld; ではカバーしていない独自のファイアウオールルールを追加する必要がある場合は、 2 種類ある方法のうちのいずれかを実施してください。 1 つは <command>iptables</command> で設定する内容をそのまま &firewalld; に投げる方法で、この場合は <literal>--direct</literal> オプションを指定します。このとき、 <command>iptables</command> を実行する際のテーブルやチェイン、優先度に関する指定を行う必要があります。下記の例では、 FORWARD チェインに対して独自の追跡 (tracking) ルールを追加しています:"

#. Tag: screen
#: security_firewall.xml:655
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd  --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o eth1 \\\n"
"    -p tcp --dport 80 -m state --state NEW,RELATED,ESTABLISHED -j ACCEPT</command>"
msgstr "&prompt.root;<command>firewall-cmd  --direct --add-rule ipv4 filter FORWARD 0 -i eth0 -o eth1 \\\n"
"    -p tcp --dport 80 -m state --state NEW,RELATED,ESTABLISHED -j ACCEPT</command>"

#. Tag: para
#: security_firewall.xml:658
#, no-c-format
msgid "Additionally, &firewalld; implements so called <emphasis>rich rules</emphasis> , an extended syntax for specifying <command>iptables</command> rules in an easier way. You can find the syntax specification at <link xlink:href=\"https://www.firewalld.org/documentation/man-pages/firewalld.richlanguage.html\"/> . The following example drops all IPv4 packets originating from a certain source address:"
msgstr "それ以外にも、 &firewalld; では <emphasis>リッチルール</emphasis> と呼ばれる仕組みにも対応しています。この方法のほうが <command>iptables</command> のルールを簡単に指定することができます。詳しくは <link xlink:href=\"https://www.firewalld.org/documentation/man-pages/firewalld.richlanguage.html\"/> (英語) をお読みください。下記の例では、特定の発信元アドレスからの IPv4 パケットを drop (処理せず落とす) する設定を行っています:"

#. Tag: screen
#: security_firewall.xml:668
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --zone=public --add-rich-rule='rule family=\"ipv4\" \\\n"
"    source address=\"192.168.2.4\" drop'</command>"
msgstr "&prompt.root;<command>firewall-cmd --zone=public --add-rich-rule='rule family=\"ipv4\" \\\n"
"    source address=\"192.168.2.4\" drop'</command>"

#. Tag: title
#: security_firewall.xml:673
#, no-c-format
msgid "Routing, forwarding, and masquerading"
msgstr "ルーティング／フォワード／マスカレード"

#. Tag: para
#: security_firewall.xml:675
#, no-c-format
msgid "&firewalld; is not designed to run as a fully fledged router. The basic functionality for typical home router setups is available. For a corporate production router you should not use &firewalld;, however, but use dedicated router and firewall devices instead. The following provides just a few pointers on what to look for to utilize routing in &firewalld;:"
msgstr "&firewalld; は完全機能のルータとして動作するようには設計されていません。ですが、一般的な家庭用ルータ程度の設定であれば可能です。企業内の本番環境で使用されるようなルータの場合は、 &firewalld; を使用すべきではありません。ルータやファイアウオールとして専用に設計された機器をお使いください。下記の章では、 &firewalld; 内でルーティングを扱うにあたっての、いくつかの情報源を示しています:"

#. Tag: para
#: security_firewall.xml:685
#, no-c-format
msgid "First of all IP forwarding needs to be enabled as outlined in <xref linkend=\"sec-security-firewall-masq\"/> ."
msgstr "IP プロトコルの経路制御を有効化するのに必要な情報は、 <xref linkend=\"sec-security-firewall-masq\"/> に概要があります。"

#. Tag: para
#: security_firewall.xml:691
#, no-c-format
msgid "To enable IPv4 masquerading, for example in the <literal>external</literal> zone, issue the following command."
msgstr "たとえば <literal>external</literal> ゾーンに対して IPv4 マスカレードを有効化したい場合は、下記のコマンドを実行します。"

#. Tag: screen
#: security_firewall.xml:695
#, no-c-format
msgid "&prompt.root;<command>firewall-cmd --zone=external --add-masquerade</command>"
msgstr "&prompt.root;<command>firewall-cmd --zone=external --add-masquerade</command>"

#. Tag: para
#: security_firewall.xml:698
#, no-c-format
msgid "&firewalld; can also enable port forwarding. The following command forwards local TCP connections on port 80 to another host:"
msgstr "&firewalld; ではポート転送の設定も行うことができます。たとえば下記のコマンドを実行すると、ポート 80 宛に届いた通信を他のホストに転送することができます:"

#. Tag: screen
#: security_firewall.xml:702
#, no-c-format
msgid "<?dbfo keep-together=\"always\"?>&prompt.root;<command>firewall-cmd --zone=public \\\n"
"    --add-forward-port=port=80:proto=tcp:toport=80:toaddr=192.168.1.10</command>"
msgstr "<?dbfo keep-together=\"always\"?>&prompt.root;<command>firewall-cmd --zone=public \\\n"
"    --add-forward-port=port=80:proto=tcp:toport=80:toaddr=192.168.1.10</command>"

#. Tag: title
#: security_firewall.xml:710
#, no-c-format
msgid "Accessing services listening on dynamic ports"
msgstr "動的にポートを割り当てるタイプのサービスへのアクセス"

#. Tag: para
#: security_firewall.xml:712
#, no-c-format
msgid "Some network services do not listen on predefined port numbers. Instead they operate based on the <literal>portmapper</literal> or <literal>rpcbind</literal> protocol. We will use the term <literal>rpcbind</literal> from here on. When one of these services starts, it chooses a random local port and talks to <literal>rpcbind</literal> to make the port number known. <literal>rpcbind</literal> itself is listening on a well known port. Remote systems can then query <literal>rpcbind</literal> about the network services it knows about and on which ports they are listening. Not many programs use this approach anymore today. Popular examples are Network Information Services (NIS; <command>ypserv</command> and <command>ypbind</command> ) and the Network File System (NFS) version 3."
msgstr "ネットワークサービスによっては、特定のポート番号で待ち受けていないものがあります。この場合、 <literal>portmapper</literal> や <literal>rpcbind</literal> のプロトコルをベースにして動作しています (以降は <literal>rpcbind</literal> と表現します) 。これらのサービスが開始されると、ローカル側のポートをランダムに選択したあと、 <literal>rpcbind</literal> と通信を行って、このポートを既知のものとして使用するようにします。 <literal>rpcbind</literal> それ自身は特定の (既知の) ポート上で動作します。ネットワーク上離れたシステムからは、 <literal>rpcbind</literal> に対して問い合わせを行い、どのポートで動作しているのかを確認します。現在、この仕組みはそれほど多くのプログラムで使用していないものですが、 Network Information Services (NIS; <command>ypserv</command> および <command>ypbind</command> ) と Network File System (NFS) バージョン 3 で使用されています。"

#. Tag: title
#: security_firewall.xml:728
#, no-c-format
msgid "About NFSv4"
msgstr "NFSv4 について"

#. Tag: para
#: security_firewall.xml:729
#, no-c-format
msgid "The newer NFSv4 requires the single well-known TCP port 2049. For protocol version 4.0, the kernel parameter <literal>fs.nfs.nfs_callback_tcpport</literal> may need to be set to a static port (see <xref linkend=\"ex-security-firewall-nfscallback\"/> ). Starting with protocol version 4.1 this setting has also become unnecessary."
msgstr "新しい NFSv4 では、 TCP ポート 2049 という既知のポート単独で動作するようになっています。プロトコルバージョン 4.0 では、カーネルのパラメータ <literal>fs.nfs.nfs_callback_tcpport</literal> で固定のポートを指定する必要があります (詳しくは <xref linkend=\"ex-security-firewall-nfscallback\"/> をお読みください) 。プロトコルバージョン 4.1 以降であれば、この設定も不要となっています。"

#. Tag: para
#: security_firewall.xml:739
#, no-c-format
msgid "The dynamic nature of the <literal>rpcbind</literal> protocol makes it difficult to make the affected services behind the firewall accessible. &firewalld; does not support these services by itself. For manual configuration, see <xref linkend=\"sec-security-firewall-firewalld-rpcports-static\"/> . Alternatively, &productname; provides a helper script. For details, see <xref linkend=\"sec-security-firewall-firewalld-rpcports-helper\"/> ."
msgstr "<literal>rpcbind</literal> プロトコルを使用する仕組みでは、動的にポートが設定されるため、ファイアウオール経由でサービスにアクセスできるようにすることが難しくなっています。 &firewalld; では、それ単体でこれらのサービスに対応することができません。手作業で作業を行う場合は、 <xref linkend=\"sec-security-firewall-firewalld-rpcports-static\"/> をお読みください。それ以外にも、 &productname; にはヘルパースクリプトが用意されています。詳しくは <xref linkend=\"sec-security-firewall-firewalld-rpcports-helper\"/> をお読みください。"

#. Tag: title
#: security_firewall.xml:749
#, no-c-format
msgid "Configuring static ports"
msgstr "ポートを固定するための設定"

#. Tag: para
#: security_firewall.xml:750
#, no-c-format
msgid "One possibility is to configure all involved network services to use fixed port numbers. Once this is done, the fixed ports can be opened in &firewalld; and everything should work. The actual port numbers used are at your discretion but should not clash with any well-known port numbers assigned to other services. See <xref linkend=\"tab-security-firewall-sysconfigports\"/> for a list of the available configuration items for NIS and NFSv3 services. Depending on your actual NIS or NFS configuration, not all of these ports may be required for your setup."
msgstr "問題を解決するための方法のうちの 1 つとして、各ネットワークサービスの使用するポートを固定する方法があります。これを設定することで、 &firewalld; でポートを開くように設定することができるようになり、全てが問題なく動作するようになります。ポート番号の指定は自由に決めることができますが、他のサービスで使用されてしまうことを防ぐため、既知の (いわゆる well-known な) ポート範囲以外から設定しておくことをお勧めします。 NIS や NFSv3 のサービスに対する設定項目の一覧については、 <xref linkend=\"tab-security-firewall-sysconfigports\"/> をお読みください。ただし、 NIS や NFS の設定によっては、これら全てのポートを設定する必要がない場合もあります。"

#. Tag: title
#: security_firewall.xml:762
#, no-c-format
msgid "Important sysconfig variables for static port configuration"
msgstr "ポートを固定させるための主な sysconfig 変数"

#. Tag: para
#: security_firewall.xml:770
#, no-c-format
msgid "File Path"
msgstr "ファイルパス"

#. Tag: para
#: security_firewall.xml:775
#, no-c-format
msgid "Variable Name"
msgstr "変数名"

#. Tag: para
#: security_firewall.xml:780
#, no-c-format
msgid "Example Value"
msgstr "値の例"

#. Tag: entry
#: security_firewall.xml:788
#, no-c-format
msgid "<filename> /etc/sysconfig/nfs </filename>"
msgstr "<filename> /etc/sysconfig/nfs </filename>"

#. Tag: entry
#: security_firewall.xml:793
#, no-c-format
msgid "MOUNTD_PORT"
msgstr "MOUNTD_PORT"

#. Tag: entry
#: security_firewall.xml:796
#, no-c-format
msgid "21001"
msgstr "21001"

#. Tag: entry
#: security_firewall.xml:801
#, no-c-format
msgid "STATD_PORT"
msgstr "STATD_PORT"

#. Tag: entry
#: security_firewall.xml:804
#, no-c-format
msgid "21002"
msgstr "21002"

#. Tag: entry
#: security_firewall.xml:809
#, no-c-format
msgid "LOCKD_TCPPORT"
msgstr "LOCKD_TCPPORT"

#. Tag: entry
#: security_firewall.xml:817
#, no-c-format
msgid "LOCKD_UDPPORT"
msgstr "LOCKD_UDPPORT"

#. Tag: entry
#: security_firewall.xml:820
#, no-c-format
msgid "21003"
msgstr "21003"

#. Tag: entry
#: security_firewall.xml:825
#, no-c-format
msgid "RQUOTAD_PORT"
msgstr "RQUOTAD_PORT"

#. Tag: entry
#: security_firewall.xml:828
#, no-c-format
msgid "21004"
msgstr "21004"

#. Tag: entry
#: security_firewall.xml:833
#, no-c-format
msgid "<filename> /etc/sysconfig/ypbind </filename>"
msgstr "<filename> /etc/sysconfig/ypbind </filename>"

#. Tag: entry
#: security_firewall.xml:838
#, no-c-format
msgid "YPBIND_OPTIONS"
msgstr "YPBIND_OPTIONS"

#. Tag: entry
#: security_firewall.xml:841
#, no-c-format
msgid "-p 24500"
msgstr "-p 24500"

#. Tag: entry
#: security_firewall.xml:846
#, no-c-format
msgid "<filename> /etc/sysconfig/ypserv </filename>"
msgstr "<filename> /etc/sysconfig/ypserv </filename>"

#. Tag: entry
#: security_firewall.xml:851
#, no-c-format
msgid "YPXFRD_ARGS"
msgstr "YPXFRD_ARGS"

#. Tag: entry
#: security_firewall.xml:854
#, no-c-format
msgid "-p 24501"
msgstr "-p 24501"

#. Tag: entry
#: security_firewall.xml:859
#, no-c-format
msgid "YPSERV_ARGS"
msgstr "YPSERV_ARGS"

#. Tag: entry
#: security_firewall.xml:862
#, no-c-format
msgid "-p 24502"
msgstr "-p 24502"

#. Tag: entry
#: security_firewall.xml:867
#, no-c-format
msgid "YPPASSWDD_ARGS"
msgstr "YPPASSWDD_ARGS"

#. Tag: entry
#: security_firewall.xml:870
#, no-c-format
msgid "--port 24503"
msgstr "--port 24503"

#. Tag: para
#: security_firewall.xml:878
#, no-c-format
msgid "You need to restart any related services that are affected by these static port configurations for the changes to take effect. You can see the currently assigned rpcbind ports by using the command <command>rpcinfo -p</command> . On success, the statically configured ports should show up there."
msgstr "設定を反映させるには、対応するサービスをそれぞれ再起動する必要があります。なお、 <command>rpcinfo -p</command> と入力して実行することで、割り当てられた rpcbind のポートを表示することもできます。正しく設定がされていれば、ここに固定のポートが表示されるはずです。"

#. Tag: para
#: security_firewall.xml:886
#, no-c-format
msgid "Apart from the port configuration for network services running in user space, there are also ports that are used by the Linux kernel directly when it comes to NFS. One of these ports is <literal>nfs_callback_tcpport</literal> . It is only required for NFS protocol versions older than 4.1. There is a sysctl named <literal>fs.nfs.nfs_callback_tcpport</literal> to configure this port. This sysctl node only appears dynamically when NFS mounts are active. Therefore it is best to configure the port via kernel module parameters. This can be achieved by creating a file as shown in <xref linkend=\"ex-security-firewall-nfscallback\"/> ."
msgstr "ユーザスペース内で動作しているネットワーク向けのポート設定とは別に、 Linux カーネルが NFS に対して直接使用するポートも存在しています。これらのポートのうちの 1 つは <literal>nfs_callback_tcpport</literal> と呼ばれます。このポートは、バージョン 4.1 以前の NFS プロトコルでのみ必要となります。ここで使用するポートは、 sysctl の <literal>fs.nfs.nfs_callback_tcpport</literal> で設定することができます。この sysctl ノードは、 NFS マウントが有効な場合にのみ動的に現れます。そのため、この設定はカーネルモジュールのパラメータとして設定しておくことが最適です。これは <xref linkend=\"ex-security-firewall-nfscallback\"/> で示している設定で実現することができます。"

#. Tag: title
#: security_firewall.xml:900
#, no-c-format
msgid "Callback port configuration for the <literal>nfs</literal> kernel module in <filename>/etc/modprobe.d/60-nfs.conf</filename>"
msgstr "<filename>/etc/modprobe.d/60-nfs.conf</filename> 内での <literal>nfs</literal> カーネルモジュールに対するコールバックポートの設定"

#. Tag: screen
#: security_firewall.xml:901
#, no-c-format
msgid "options nfs callback_tcpport=21005\n"
msgstr "options nfs callback_tcpport=21005\n"

#. Tag: para
#: security_firewall.xml:905
#, no-c-format
msgid "To make this change effective it is easiest to reboot the machine. Otherwise all NFS services need to be stopped and the <literal>nfs</literal> kernel module needs to be reloaded. To verify the active NFS callback port, check the output of <command>cat /sys/module/nfs/parameters/callback_tcpport</command> ."
msgstr "この設定を反映させるのに最も簡単な方法は、マシンの再起動です。マシンを再起動しないで適用するには、 NFS 関連のサービスを全て停止させて <literal>nfs</literal> カーネルモジュールを読み込みなおす必要があります。なお、現時点での NFS コールバックポートを確認したい場合は、 <command>cat /sys/module/nfs/parameters/callback_tcpport</command> と入力して実行してください。"

#. Tag: para
#: security_firewall.xml:913
#, no-c-format
msgid "For easy handling of the now statically configured RPC ports, it is useful to create a new &firewalld; service definition. This service definition groups all related ports and, for example, makes it easy to make them accessible in a specific zone. In <xref linkend=\"ex-security-firewall-newrpcservice\"/> this is done for the NFS ports as they have been configured in the accompanying examples."
msgstr "このようにして RPC 関連のポートを固定化したら、あとは新しい &firewalld; サービス定義を作成して、使用するようにすると便利です。このサービス定義は関連する全てのポートを含むもので、これによって一括でポートを許可するように設定することができます。 <xref linkend=\"ex-security-firewall-newrpcservice\"/> には、新しくサービスを定義して、それらの固定ポートをサービス内に設定し、使用するまでの手順を示しています。"

#. Tag: title
#: security_firewall.xml:923
#, no-c-format
msgid "Commands to define a new &firewalld; RPC service for NFS"
msgstr "NFS 向けの新しい &firewalld; RPC サービスの設定コマンド"

#. Tag: screen
#: security_firewall.xml:924
#, no-c-format
msgid ""
"&prompt.root;<command>firewall-cmd --permanent --new-service=nfs-rpc</command>\n"
"&prompt.root;<command>firewall-cmd --permanent --service=nfs-rpc --set-description=\"NFS related, statically configured RPC ports\"</command>\n"
"# add UDP and TCP ports for the given sequence\n"
"&prompt.root;<command>for port in 21001 21002 21003 21004; do\n"
"    firewall-cmd --permanent --service=nfs-rpc --add-port ${port}/udp --add-port ${port}/tcp\n"
"done</command>\n"
"# the callback port is TCP only\n"
"&prompt.root;<command>firewall-cmd --permanent --service=nfs-rpc --add-port 21005/tcp</command>\n"
"\n"
"# show the complete definition of the new custom service\n"
"&prompt.root;<command>firewall-cmd --info-service=nfs-rpc --permanent -v</command>\n"
"nfs-rpc\n"
"  summary:\n"
"  description: NFS and related, statically configured RPC ports\n"
"  ports: 4711/tcp 21001/udp 21001/tcp 21002/udp 21002/tcp 21003/udp 21003/tcp 21004/udp 21004/tcp\n"
"  protocols:\n"
"  source-ports:\n"
"  modules:\n"
"  destination:\n"
"\n"
"# reload firewalld to make the new service definition available\n"
"&prompt.root;<command>firewall-cmd --reload</command>\n"
"\n"
"# the new service definition can now be used to open the ports for example in the internal zone\n"
"&prompt.root;<command>firewall-cmd --add-service=nfs-rpc --zone=internal</command>\n"
msgstr ""
"&prompt.root;<command>firewall-cmd --permanent --new-service=nfs-rpc</command>\n"
"&prompt.root;<command>firewall-cmd --permanent --service=nfs-rpc --set-description=\"NFS related, statically configured RPC ports\"</command>\n"
"# TCP/UDP ポートを順序通りにサービスに追加する\n"
"&prompt.root;<command>for port in 21001 21002 21003 21004; do\n"
"    firewall-cmd --permanent --service=nfs-rpc --add-port ${port}/udp --add-port ${port}/tcp\n"
"done</command>\n"
"# コールバックポートは TCP のみ\n"
"&prompt.root;<command>firewall-cmd --permanent --service=nfs-rpc --add-port 21005/tcp</command>\n"
"\n"
"# 新しく定義したサービスの詳細表示\n"
"&prompt.root;<command>firewall-cmd --info-service=nfs-rpc --permanent -v</command>\n"
"nfs-rpc\n"
"  summary:\n"
"  description: NFS and related, statically configured RPC ports\n"
"  ports: 4711/tcp 21001/udp 21001/tcp 21002/udp 21002/tcp 21003/udp 21003/tcp 21004/udp 21004/tcp\n"
"  protocols:\n"
"  source-ports:\n"
"  modules:\n"
"  destination:\n"
"\n"
"# firewalld を再読み込みさせて、新しいサービス定義を利用できるようにする\n"
"&prompt.root;<command>firewall-cmd --reload</command>\n"
"\n"
"# 新しいサービス定義を internal ゾーンに追加する\n"
"&prompt.root;<command>firewall-cmd --add-service=nfs-rpc --zone=internal</command>\n"

#. Tag: title
#: security_firewall.xml:954
#, no-c-format
msgid "Using <package>firewall-rpcbind-helper</package> for configuring static ports"
msgstr "固定のポートを設定するための <package>firewall-rpcbind-helper</package> の使用"

#. Tag: para
#: security_firewall.xml:955
#, no-c-format
msgid "The steps to configure static ports as shown in the previous section can be simplified by using the &suse; helper tool <command>firewall-rpc-helper.py</command> . Install it with <command>zypper in firewalld-rpcbind-helper</command> ."
msgstr "上記の章で示した固定のポートを設定するための手順は、 &suse; が提供する <command>firewall-rpc-helper.py</command> というツールを使用することで、より簡単に行うことができます。このツールは、 <command>zypper in firewalld-rpcbind-helper</command> でインストールすることができます。"

#. Tag: para
#: security_firewall.xml:961
#, no-c-format
msgid "The tool allows interactive configuration of the service patterns discussed in the previous section. It can also display current port assignments and can be used for scripting. For details, see <command>firewall-rpc-helper.py --help</command> ."
msgstr "このツールは、上記の章で実施したサービス設定を対話に設定するツールです。このほか、現時点でのポートの割り当てを表示することができるほか、スクリプト内で使用することもできるようになっています。詳しくは <command>firewall-rpc-helper.py --help</command> を実行して出力された内容をお読みください。"

#. Tag: title
#: security_firewall.xml:969
#, no-c-format
msgid "nftables as the default back-end"
msgstr "既定のバックエンドとしての nftables の使用"

#. Tag: para
#: security_firewall.xml:970
#, no-c-format
msgid "The default back-end for &firewalld; is nftables. nftables is a framework by the Linux <systemitem>netfilter</systemitem> project that provides packet filtering, network address translation (NAT) and other similar functionalities. nftables reuses the existing Netfilter subsystems such as the connection tracking system, user space queueing, logging and the hook infrastructure. nftables is a replacement for iptables, ip6tables, arptables, ebtables and ipset."
msgstr "&firewalld; では、既定のバックエンドとして nftables を使用します。 nftables は Linux <systemitem>netfilter</systemitem> プロジェクトが提供するフレームワークで、パケットフィルタリングのほか、ネットワークアドレス変換 (NAT) 等の機能を提供します。また、 nftables はコネクショントラッキングやユーザスペースキューイング、ロギングやフック機能などの既存の netfilter サブシステムを流用した仕組みで、 iptables, ip6tables,  arptables, ebtables, ipset 等の代替として機能するものとなっています。"

#. Tag: para
#: security_firewall.xml:976
#, no-c-format
msgid "The advantages of using nftables include:"
msgstr "nftables を使用することの利点としては、下記のようなものがあります:"

#. Tag: para
#: security_firewall.xml:981
#, no-c-format
msgid "One framework for both the IPv4 and IPv6 protocols."
msgstr "IPv4, IPv6 の両プロトコルに対して 1 つのフレームワークで対応できます。"

#. Tag: para
#: security_firewall.xml:986
#, no-c-format
msgid "Rules are applied atomically instead of fetching, updating and storing a complete rule set."
msgstr "ルールはルールセット全体の再読み込みや更新、保存などを行うことなく適用することができます。"

#. Tag: para
#: security_firewall.xml:991
#, no-c-format
msgid "Monitor trace events in the <emphasis>nft</emphasis> tool, debug and trace the ruleset via <emphasis>nftrace</emphasis> ."
msgstr "イベントの追跡は <emphasis>nft</emphasis> ツールで、ルールセットのデバッグやトレースは <emphasis>nftrace</emphasis> でそれぞれ行うことができます。"

#. Tag: para
#: security_firewall.xml:996
#, no-c-format
msgid "The <command>nft</command> command line tool compiles into VM bytecode in netlink format. During the rule set retrieval, the VM bytecode in netlink format is translated back into the original ruleset representation."
msgstr "<command>nft</command> コマンドラインツールは、ルールを netlink 形式の VM バイトコードにコンパイルします。逆にルールセットを取り出す際は、 VM バイトコードを元のルールセット表記に翻訳して出力します。"

#. Tag: para
#: security_firewall.xml:1002
#, no-c-format
msgid "<emphasis role=\"bold\">A basic nftables configuration file:</emphasis>"
msgstr "<emphasis role=\"bold\">基本的な nftables の設定ファイル:</emphasis>"

#. Tag: screen
#: security_firewall.xml:1003
#, no-c-format
msgid ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/usr/sbin/nft -f\n"
"\n"
"    flush ruleset\n"
"\n"
"    # This matches IPv4 and IPv6\n"
"    table inet filter {\n"
"        # chain names are up to you.\n"
"        # what part of the traffic they cover,\n"
"        # depends on the type table.\n"
"        chain input {\n"
"            type filter hook input priority 0; policy accept;\n"
"        }\n"
"        chain forward {\n"
"            type filter hook forward priority 0; policy accept;\n"
"        }\n"
"        chain output {\n"
"            type filter hook output priority 0; policy accept;\n"
"        }\n"
"    }\n"
"  "
msgstr ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/usr/sbin/nft -f\n"
"\n"
"    flush ruleset\n"
"\n"
"    # IPv4 と IPv6 の両方にマッチします\n"
"    table inet filter {\n"
"        # チェイン名は任意に設定できます。\n"
"        # どのトラフィックを処理するのかについては、\n"
"        # type 以下で指定します。\n"
"        chain input {\n"
"            type filter hook input priority 0; policy accept;\n"
"        }\n"
"        chain forward {\n"
"            type filter hook forward priority 0; policy accept;\n"
"        }\n"
"        chain output {\n"
"            type filter hook output priority 0; policy accept;\n"
"        }\n"
"    }\n"
"  "

#. Tag: para
#: security_firewall.xml:1024
#, no-c-format
msgid "In the above example, all traffic is allowed because all chains have the policy <emphasis>accept</emphasis> . Note that, in reality, this is a bad practice, as firewalls should deny traffic by default."
msgstr "上記の例では、全てのチェインで <emphasis>accept</emphasis> ポリシーを設定していることから、全てのトラフィックを許可することになります。もちろん実際には全てのトラフィックが既定で拒否されますので、必要なトラフィックのみを許可するように設定するのが適切です。"

#. Tag: para
#: security_firewall.xml:1026
#, no-c-format
msgid "<emphasis role=\"bold\">A basic nftables configuration file with masquerade:</emphasis>"
msgstr "<emphasis role=\"bold\">マスカレードを使用する nftables の設定:</emphasis>"

#. Tag: screen
#: security_firewall.xml:1027
#, no-c-format
msgid ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/sbin/nft -f\n"
"\n"
"    flush ruleset\n"
"\n"
"    table ip nat {\n"
"      chain prerouting {\n"
"        type nat hook prerouting priority 0; policy accept;\n"
"      }\n"
"\n"
"      # for all packets to WAN, after routing, replace source address with primary IP of WAN interface\n"
"      chain postrouting {\n"
"        type nat hook postrouting priority 100; policy accept;\n"
"        oifname \"wan0\" masquerade\n"
"      }\n"
"    }\n"
"  "
msgstr ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/sbin/nft -f\n"
"\n"
"    flush ruleset\n"
"\n"
"    table ip nat {\n"
"      chain prerouting {\n"
"        type nat hook prerouting priority 0; policy accept;\n"
"      }\n"
"\n"
"      # WAN 宛に送信される全てのトラフィックに対して、経路の判断後に\n"
"      # 発信元アドレスを WAN インターフェイスのプライマリ IP アドレスに置き換えます。\n"
"      chain postrouting {\n"
"        type nat hook postrouting priority 100; policy accept;\n"
"        oifname \"wan0\" masquerade\n"
"      }\n"
"    }\n"
"  "

#. Tag: para
#: security_firewall.xml:1044
#, no-c-format
msgid "If you have a static IP, it would be slightly faster to use source nat (SNAT) instead of masquerade. The router replaces the source with a predefined IP instead of looking up the outgoing IP for every packet."
msgstr "固定 IP の環境であれば、マスカレードではなくソース NAT (SNAT) を使用したほうが少しだけ高速になります。これは、それぞれの発信パケットの置き換え時にあらかじめ IP アドレスが分かっていたほうが、手っ取り早く処理できるためです。"

#. Tag: para
#: security_firewall.xml:1046
#, no-c-format
msgid "<emphasis role=\"bold\">An nftables configuration file with some rules applied:</emphasis>"
msgstr "<emphasis role=\"bold\">いくつかのルールを適用した nftables の設定ファイル:</emphasis>"

#. Tag: screen
#: security_firewall.xml:1047
#, no-c-format
msgid ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/usr/sbin/nft -f\n"
"\n"
"flush ruleset\n"
"\n"
"table inet filter {\n"
"    chain base_checks {\n"
"        ## another set, this time for connection tracking states.\n"
"        # allow established/related connections\n"
"        ct state {established, related} accept;\n"
"\n"
"        # early drop of invalid connections\n"
"        ct state invalid drop;\n"
"    }\n"
"\n"
"    chain input {\n"
"        type filter hook input priority 0; policy drop;\n"
"\n"
"        # allow from loopback\n"
"        iif \"lo\" accept;\n"
"\n"
"        jump base_checks;\n"
"\n"
"        # allow icmp and igmp\n"
"        ip6 nexthdr icmpv6 icmpv6 type { echo-request, echo-reply, packet-too-big, time-exceeded, parameter-problem, destination-unreachable, packet-too-big, mld-listener-query, mld-listener-report, mld-listener-reduction, nd-router-solicit, nd-router-advert, nd-neighbor-solicit, nd-neighbor-advert, ind-neighbor-solicit, ind-neighbor-advert, mld2-listener-report } accept;\n"
"        ip protocol icmp icmp type { echo-request, echo-reply, destination-unreachable, router-solicitation, router-advertisement, time-exceeded, parameter-problem } accept;\n"
"        ip protocol igmp accept;\n"
"\n"
"        # for testing reject with logging\n"
"        counter log prefix \"[nftables] input reject \" reject;\n"
"    }\n"
"    chain forward {\n"
"        type filter hook forward priority 0; policy accept;\n"
"    }\n"
"    chain output {\n"
"        type filter hook output priority 0; policy accept;\n"
"    }\n"
"}\n"
"  "
msgstr ""
"&prompt.user; cat /etc/nftables.conf\n"
"    #!/usr/sbin/nft -f\n"
"\n"
"flush ruleset\n"
"\n"
"table inet filter {\n"
"    chain base_checks {\n"
"        ## 接続状態の確認を行う追加のルールセットです。\n"
"        # 確立済みの接続や関連する接続は自動的に許可します\n"
"        ct state {established, related} accept;\n"
"\n"
"        # 不正な接続に対しては早めに廃棄します\n"
"        ct state invalid drop;\n"
"    }\n"
"\n"
"    chain input {\n"
"        type filter hook input priority 0; policy drop;\n"
"\n"
"        # ループバック接続を許可します\n"
"        iif \"lo\" accept;\n"
"\n"
"        jump base_checks;\n"
"\n"
"        # ICMP, IGMP を許可します\n"
"        ip6 nexthdr icmpv6 icmpv6 type { echo-request, echo-reply, packet-too-big, time-exceeded, parameter-problem, destination-unreachable, packet-too-big, mld-listener-query, mld-listener-report, mld-listener-reduction, nd-router-solicit, nd-router-advert, nd-neighbor-solicit, nd-neighbor-advert, ind-neighbor-solicit, ind-neighbor-advert, mld2-listener-report } accept;\n"
"        ip protocol icmp icmp type { echo-request, echo-reply, destination-unreachable, router-solicitation, router-advertisement, time-exceeded, parameter-problem } accept;\n"
"        ip protocol igmp accept;\n"
"\n"
"        # ログを記録して拒否するテストです\n"
"        counter log prefix \"[nftables] input reject \" reject;\n"
"    }\n"
"    chain forward {\n"
"        type filter hook forward priority 0; policy accept;\n"
"    }\n"
"    chain output {\n"
"        type filter hook output priority 0; policy accept;\n"
"    }\n"
"}\n"
"  "

#. Tag: para
#: security_firewall.xml:1086
#, no-c-format
msgid "In the above example:"
msgstr "上記の例は、下記のようになっています:"

#. Tag: para
#: security_firewall.xml:1089
#, no-c-format
msgid "The chain policy is to drop and add a reject rule at the end, which means all incoming traffic is blocked."
msgstr "input チェインの既定値は drop (廃棄) で、末尾に reject (拒否) ルールが設定されているため、全ての到着トラフィックをブロックする設定になっています。"

#. Tag: para
#: security_firewall.xml:1094
#, no-c-format
msgid "All traffic on the <literal>localhost</literal> interface is allowed."
msgstr "<literal>localhost</literal> インターフェイスの全てのトラフィックを許可しています。"

#. Tag: para
#: security_firewall.xml:1099
#, no-c-format
msgid "The <literal>base_checks</literal> chain handles all packets that are related to established connections. This ensures that incoming packets for outgoing connections are not blocked."
msgstr "<literal>base_checks</literal> チェインでは、全てのパケットに対して既存の接続に関係したものであるかどうかを確認しています。これにより、こちらからの接続に対する応答はブロックされないようになります。"

#. Tag: para
#: security_firewall.xml:1105
#, no-c-format
msgid "ICMP and IGMP packets are allowed by utilizing a set and specific type names."
msgstr "ICMP, IGMP の各パケットは、タイプ名を指定したセットを使用することでそれぞれ許可しています。"

#. Tag: para
#: security_firewall.xml:1110
#, no-c-format
msgid "A counter keeps a count of both the total number of packets and bytes it has seen since it was last reset. With nftables, you must specify a counter for each rule you want to count."
msgstr "カウンタは、直近にリセットされた時点からの合計パケット数や合計バイト数を保持する仕組みです。 nftables の場合、カウンタを実装したいルールでそれぞれ指定しなければなりません。"

#. Tag: para
#: security_firewall.xml:1118
#, no-c-format
msgid "For more information about nftables, see:"
msgstr "nftables に関する詳細については、下記をお読みください:"

#. Tag: para
#: security_firewall.xml:1121
#, no-c-format
msgid "Upstream documentation <link xlink:href=\"https://www.netfilter.org/projects/nftables/index.html\"> </link>"
msgstr "提供元のドキュメンテーション: <link xlink:href=\"https://www.netfilter.org/projects/nftables/index.html\"> </link>"

#. Tag: para
#: security_firewall.xml:1126
#, no-c-format
msgid "nftables man page <link xlink:href=\"https://www.netfilter.org/projects/nftables/manpage.html\"> </link>"
msgstr "nftables のマニュアルページ: <link xlink:href=\"https://www.netfilter.org/projects/nftables/manpage.html\"> </link>"

#. Tag: title
#: security_firewall.xml:1138
#, no-c-format
msgid "Migrating from &susefirewall;"
msgstr "&susefirewall; からの移行"

#. Tag: title
#: security_firewall.xml:1140
#, no-c-format
msgid "Creating a &firewalld; configuration for &ay;"
msgstr "&ay; での &firewalld; 設定の作成について"

#. Tag: para
#: security_firewall.xml:1141
#, no-c-format
msgid "See the <citetitle>Firewall Configuration</citetitle> section of the &ayguide; to learn how to create a &firewalld; configuration for &ay;."
msgstr "&ay; で &firewalld; の設定を作成する方法について、詳しくは &ayguide; 内の <citetitle>ファイアウオール設定</citetitle> の章をお読みください。"

#. Tag: para
#: security_firewall.xml:1152
#, no-c-format
msgid "When upgrading from <phrase os=\"sles;sled\">any service pack of &productname; 12</phrase> <phrase os=\"osuse\">any version of &productname; before 15.0</phrase> to &productname; &productnumber;, &susefirewall; is not changed and remains active. There is no automatic migration, so you must migrate to &firewalld; manually. &firewalld; includes a helper migration script, <command>susefirewall2-to-firewalld</command> . Depending on the complexity of your &susefirewall; configuration, the script may perform a perfect migration, or it may fail. Most likely it will partially succeed and you have to review your new &firewalld; configuration and make adjustments."
msgstr "<phrase os=\"sles;sled\">&productname; 12 の任意のサービスパック</phrase> <phrase os=\"osuse\">&productname; 15.0 以前の任意のバージョン</phrase> から&productname; &productnumber; にアップグレードした場合は、 &susefirewall; はそのまま保持され、動作し続けるようになっています。 &susefirewall; から &firewalld; への自動的な移行の仕組みは提供されていないことから、移行作業は手作業で実施する必要があります。ただし、 &firewalld; には <command>susefirewall2-to-firewalld</command> と呼ばれる移行支援ツールが用意されていますので、こちらをお使いいただくことができます。ですが、このツールはご利用いただいている &susefirewall; の設定の複雑さによって、全く問題なく移行できる場合から、全く支援にならない場合までさまざまな結果になります。通常は部分的に移行が行われ、残りは手作業で &firewalld; の設定を調整して対応する必要が発生します。"

#. Tag: para
#: security_firewall.xml:1164
#, no-c-format
msgid "The resulting configuration makes &firewalld; behave somewhat like &susefirewall;. To take full advantage of &firewalld;'s features, you may elect to create a new configuration, rather than trying to migrate your old configuration. It is safe to run the <command>susefirewall2-to-firewalld</command> script with no options, as it makes no permanent changes to your system. However, if you are administering the system remotely you could get locked out."
msgstr "このツールが生成した設定は、 &susefirewall; と同じような動作になるようになります。そのような背景から、 &firewalld; の機能を完全に発揮するには、既存の設定の移行ではなく全く新しく設定を作成し直すことをお考えください。また、 <command>susefirewall2-to-firewalld</command> に何もオプションを付けずに実行した場合は、恒久的な変更は行われなくなっていますが、ネットワーク上離れた場所から管理を行っているような場合は、移行によって締め出されてしまうこともあります。"

#. Tag: para
#: security_firewall.xml:1172
#, no-c-format
msgid "Install and run <command>susefirewall2-to-firewalld</command> :"
msgstr "<command>susefirewall2-to-firewalld</command> をインストールして実行するには、下記の手順を実施します:"

#. Tag: screen
#: security_firewall.xml:1175
#, no-c-format
msgid ""
"&prompt.root;zypper in susefirewall2-to-firewalld\n"
"&prompt.root;susefirewall2-to-firewalld\n"
"INFO: Reading the /etc/sysconfig/SuSEfirewall2 file\n"
"INFO: Ensuring all firewall services are in a well-known state.\n"
"INFO: This will start/stop/restart firewall services and it's likely\n"
"INFO: to cause network disruption.\n"
"INFO: If you do not wish for this to happen, please stop the script now!\n"
"5...4...3...2...1...Lets do it!\n"
"INFO: Stopping firewalld\n"
"INFO: Restarting SuSEfirewall2_init\n"
"INFO: Restarting SuSEfirewall2\n"
"INFO: DIRECT: Adding direct rule=\"ipv4 -t filter -A INPUT -p udp -m udp --dport 5353 -m pkttype\n"
"  --pkt-type multicast -j ACCEPT\"\n"
"[...]\n"
"INFO: Enabling direct rule=ipv6 -t filter -A INPUT -p udp -m udp --dport 546 -j ACCEPT\n"
"INFO: Enabling direct rule=ipv6 -t filter -A INPUT -p udp -m udp --dport 5353 -m pkttype\n"
"  --pkt-type multicast -j ACCEPT\n"
"INFO: Enable logging for denied packets\n"
"INFO: ##########################################################\n"
"INFO:\n"
"INFO: The dry-run has been completed. Please check the above output to ensure\n"
"INFO: that everything looks good.\n"
"INFO:\n"
"INFO: ###########################################################\n"
"INFO: Stopping firewalld\n"
"INFO: Restarting SuSEfirewall2_init\n"
"INFO: Restarting SuSEfirewall2\n"
msgstr ""
"&prompt.root;zypper in susefirewall2-to-firewalld\n"
"&prompt.root;susefirewall2-to-firewalld\n"
"INFO: Reading the /etc/sysconfig/SuSEfirewall2 file\n"
"INFO: Ensuring all firewall services are in a well-known state.\n"
"INFO: This will start/stop/restart firewall services and it's likely\n"
"INFO: to cause network disruption.\n"
"INFO: If you do not wish for this to happen, please stop the script now!\n"
"5...4...3...2...1...Lets do it!\n"
"INFO: Stopping firewalld\n"
"INFO: Restarting SuSEfirewall2_init\n"
"INFO: Restarting SuSEfirewall2\n"
"INFO: DIRECT: Adding direct rule=\"ipv4 -t filter -A INPUT -p udp -m udp --dport 5353 -m pkttype\n"
"  --pkt-type multicast -j ACCEPT\"\n"
"[...]\n"
"INFO: Enabling direct rule=ipv6 -t filter -A INPUT -p udp -m udp --dport 546 -j ACCEPT\n"
"INFO: Enabling direct rule=ipv6 -t filter -A INPUT -p udp -m udp --dport 5353 -m pkttype\n"
"  --pkt-type multicast -j ACCEPT\n"
"INFO: Enable logging for denied packets\n"
"INFO: ##########################################################\n"
"INFO:\n"
"INFO: The dry-run has been completed. Please check the above output to ensure\n"
"INFO: that everything looks good.\n"
"INFO:\n"
"INFO: ###########################################################\n"
"INFO: Stopping firewalld\n"
"INFO: Restarting SuSEfirewall2_init\n"
"INFO: Restarting SuSEfirewall2\n"

#. Tag: para
#: security_firewall.xml:1203
#, no-c-format
msgid "This results in a lot of output, which you may wish to direct to a file for easier review:"
msgstr "このスクリプトを実行するとさまざまな出力が生成されますが、これをファイルに保存しておくことで、後からゆっくり読むことができるようになります:"

#. Tag: screen
#: security_firewall.xml:1206
#, no-c-format
msgid "&prompt.root;susefirewall2-to-firewalld | tee newfirewallrules.txt"
msgstr "&prompt.root;susefirewall2-to-firewalld | tee newfirewallrules.txt"

#. Tag: para
#: security_firewall.xml:1207
#, no-c-format
msgid "The script supports these options:"
msgstr "このスクリプトには、下記のオプションが用意されています:"

#. Tag: term
#: security_firewall.xml:1212
#, no-c-format
msgid "<command>-c</command>"
msgstr "<command>-c</command>"

#. Tag: para
#: security_firewall.xml:1214
#, no-c-format
msgid "Commit changes. The script makes changes to the system, so make sure you only use this option if you are really happy with the proposed changes. This <emphasis>will</emphasis> reset your current &firewalld; configuration, so make sure you make backups!"
msgstr "変更点を恒久的に保存します。提示された設定で問題が無い場合にのみ、このオプションを指定してください。また、既存の &firewalld; の設定は <emphasis>リセットされます</emphasis> ので、必ずバックアップを採取しておいてください！"

#. Tag: term
#: security_firewall.xml:1222
#, no-c-format
msgid "<command>-d</command>"
msgstr "<command>-d</command>"

#. Tag: para
#: security_firewall.xml:1224
#, no-c-format
msgid "Super noisy. Use it to file bug reports but be careful to mask sensitive information."
msgstr "動作に関する詳細な情報を出力します。このスクリプトのバグを報告したい場合などに有用ですが、機密情報が含まれることもあります。"

#. Tag: term
#: security_firewall.xml:1230
#, no-c-format
msgid "<command>-h</command>"
msgstr "<command>-h</command>"

#. Tag: para
#: security_firewall.xml:1232
#, no-c-format
msgid "This message."
msgstr "このメッセージを表示します。"

#. Tag: term
#: security_firewall.xml:1238
#, no-c-format
msgid "<command>-q</command>"
msgstr "<command>-q</command>"

#. Tag: para
#: security_firewall.xml:1240
#, no-c-format
msgid "No output. Errors will not be printed either!"
msgstr "出力を抑制します。エラーメッセージも表示されなくなります！"

#. Tag: term
#: security_firewall.xml:1246
#, no-c-format
msgid "<command>-v</command>"
msgstr "<command>-v</command>"

#. Tag: para
#: security_firewall.xml:1248
#, no-c-format
msgid "Verbose mode. It will print warnings and other informative messages."
msgstr "冗長モードを指定します。警告メッセージやその他の情報に関するメッセージが出力されるようになります。"

#. Tag: title
#: security_firewall.xml:1257
#, no-c-format
msgid "More information"
msgstr "さらなる情報"

#. Tag: para
#: security_firewall.xml:1258
#, no-c-format
msgid "The most up-to-date information and other documentation about the &firewalld; package is found in <filename>/usr/share/doc/packages/firewalld</filename> . The home page of the netfilter and iptables project, <link xlink:href=\"https://www.netfilter.org\"/> , provides a large collection of documents about iptables in general in many languages."
msgstr "&firewalld; パッケージに対する最新の情報と、その他のドキュメンテーションについては、 <filename>/usr/share/doc/packages/firewalld</filename> 内で提供されています。 netfilter および iptables プロジェクトの Web ページは <link xlink:href=\"https://www.netfilter.org\"/> にあります。こちらには、多数の言語に対応した iptables 関連の文書が多数用意されています。"

