# SOME DESCRIPTIVE TITLE.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: https://github.com/belphegor-belbel/doc-opensuse-ja\n"
"POT-Creation-Date: 2022-12-14 06:05+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <someuser@example.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/x-po; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. Tag: title
#: storage_multipath.xml:8
#, no-c-format
msgid "Managing multipath I/O for devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:15
#, no-c-format
msgid "This section describes how to manage failover and path load balancing for multiple paths between the servers and block storage devices by using Multipath I/O (MPIO)."
msgstr ""

#. Tag: title
#: storage_multipath.xml:21
#, no-c-format
msgid "Understanding multipath I/O"
msgstr ""

#. Tag: para
#: storage_multipath.xml:23
#, no-c-format
msgid "Multipathing is the ability of a server to communicate with the same physical or logical block storage device across multiple physical paths between the host bus adapters in the server and the storage controllers for the device, typically in Fibre Channel (FC) or iSCSI SAN environments."
msgstr ""

#. Tag: para
#: storage_multipath.xml:30
#, no-c-format
msgid "Linux multipathing provides connection fault tolerance and can provide load balancing across the active connections. When multipathing is configured and running, it automatically isolates and identifies device connection failures, and reroutes I/O to alternate connections."
msgstr ""

#. Tag: para
#: storage_multipath.xml:37
#, no-c-format
msgid "Multipathing provides fault tolerance against connection failures, but not against failures of the storage device itself. The latter is achieved with complementary techniques like mirroring."
msgstr ""

#. Tag: title
#: storage_multipath.xml:44
#, no-c-format
msgid "Multipath terminology"
msgstr ""

#. Tag: term
#: storage_multipath.xml:47
#, no-c-format
msgid "Storage array"
msgstr ""

#. Tag: para
#: storage_multipath.xml:49
#, no-c-format
msgid "A hardware device with many disks and multiple fabrics connections (controllers) that provides SAN storage to clients. Storage arrays typically have RAID and failover features and support multipathing. Historically, active/passive (failover) and active/active (load-balancing) storage array configurations were distinguished. These concepts still exist but they are merely special cases of the concepts of path groups and access states supported by modern hardware."
msgstr ""

#. Tag: term
#: storage_multipath.xml:61
#, no-c-format
msgid "Host, host system"
msgstr ""

#. Tag: para
#: storage_multipath.xml:63
#, no-c-format
msgid "The computer running &productname; which acts as a client system for a <emphasis>storage array</emphasis> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:70
#, no-c-format
msgid "Multipath map, multipath device"
msgstr ""

#. Tag: para
#: storage_multipath.xml:72
#, no-c-format
msgid "A set of <emphasis>path devices</emphasis> . It represents a storage volume on a storage array and is seen as a single block device by the host system."
msgstr ""

#. Tag: term
#: storage_multipath.xml:80
#, no-c-format
msgid "Path device"
msgstr ""

#. Tag: para
#: storage_multipath.xml:82
#, no-c-format
msgid "A member of a multipath map, typically a SCSI device. Each path device represents a unique connection between the host computer and the actual storage volume, for example, a logical unit from an iSCSI session."
msgstr ""

#. Tag: term
#: storage_multipath.xml:90
#, no-c-format
msgid "WWID"
msgstr ""

#. Tag: para
#: storage_multipath.xml:92
#, no-c-format
msgid "&ldquo;World Wide Identifier&rdquo;. <systemitem>multipath-tools</systemitem> uses the WWID to determine which low-level devices should be assembled into a multipath map. The WWID must be distinguished from the configurable <emphasis>map name</emphasis> (see <xref linkend=\"sec-multipath-names\"/> )."
msgstr ""

#. Tag: term
#: storage_multipath.xml:102
#, no-c-format
msgid "uevent, udev event"
msgstr ""

#. Tag: para
#: storage_multipath.xml:104
#, no-c-format
msgid "An event sent by the kernel to user space and processed by the <command>udev</command> subsystem. Uevents are generated when devices are added, removed, or change their properties."
msgstr ""

#. Tag: term
#: storage_multipath.xml:112
#, no-c-format
msgid "Device mapper"
msgstr ""

#. Tag: para
#: storage_multipath.xml:114
#, no-c-format
msgid "A framework in the Linux kernel for creating virtual block devices. I/O operations to mapped devices are redirected to the underlying block devices. Device mappings may be stacked. The device mapper implements its own event signaling, also known as &ldquo;device mapper events&rdquo; or &ldquo;dm events&rdquo;."
msgstr ""

#. Tag: term
#: storage_multipath.xml:124
#, no-c-format
msgid "initramfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:126
#, no-c-format
msgid "The initial RAM file system, also referred to as &ldquo;initial RAM disk&rdquo; (initrd) for historical reasons (see <xref linkend=\"sec-boot-terminology\"/> )."
msgstr ""

#. Tag: term
#: storage_multipath.xml:134
#, no-c-format
msgid "ALUA"
msgstr ""

#. Tag: para
#: storage_multipath.xml:136
#, no-c-format
msgid "&ldquo;Asymmetric Logical Unit Access&rdquo;, a concept introduced with the SCSI standard SCSI-3. Storage volumes can be accessed via multiple ports, which are organized in port groups with different states (active, standby, etc.). ALUA defines SCSI commands to query the port groups and their states and change the state of a port group. Modern storage arrays that support SCSI usually support ALUA, too."
msgstr ""

#. Tag: title
#: storage_multipath.xml:150
#, no-c-format
msgid "Hardware support"
msgstr ""

#. Tag: para
#: storage_multipath.xml:152
#, no-c-format
msgid "The multipathing drivers and tools are available on all architectures supported by &productname;. The generic, protocol-agnostic driver works with most multipath-capable storage hardware on the market. Some storage array vendors provide their own multipathing management tools. Consult the vendorâ€™s hardware documentation to determine what settings are required."
msgstr ""

#. Tag: title
#: storage_multipath.xml:161
#, no-c-format
msgid "Multipath implementations: device mapper and NVMe"
msgstr ""

#. Tag: para
#: storage_multipath.xml:162
#, no-c-format
msgid "The traditional, generic implementation of multipathing under Linux uses the device mapper framework. For most device types like SCSI devices, device mapper multipathing is the only available implementation. Device mapper multipath is highly configurable and flexible."
msgstr ""

#. Tag: para
#: storage_multipath.xml:168
#, no-c-format
msgid "The Linux <emphasis>NVM Express</emphasis> (NVMe) kernel subsystem implements multipathing natively in the kernel. This implementation creates less computational overhead for NVMe devices, which are typically fast devices with very low latencies. Native NVMe multipathing requires no user space component. Since &slea; 15, native multipathing has been the default for NVMe multipath devices. For details, refer to <xref linkend=\"sec-nvmeof-host-configuration-multipathing\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:177
#, no-c-format
msgid "This chapter documents device mapper multipath and its user-space component, <systemitem>multipath-tools</systemitem> . <systemitem>multipath-tools</systemitem> also has limited support for native NVMe multipathing (see <xref linkend=\"sec-multipath-conf-misc\" xrefstyle=\"SecTitleOnPage\"/> )."
msgstr ""

#. Tag: title
#: storage_multipath.xml:187
#, no-c-format
msgid "Storage array autodetection for multipathing"
msgstr ""

#. Tag: para
#: storage_multipath.xml:188
#, no-c-format
msgid "Device mapper multipath is a generic technology. Multipath device detection requires only that the low-level (for example, SCSI) devices are detected by the kernel, and that device properties reliably identify multiple low-level devices as being different &ldquo;paths&rdquo; to the same volume rather than actually different devices."
msgstr ""

#. Tag: para
#: storage_multipath.xml:195
#, no-c-format
msgid "The <filename>multipath-tools</filename> package detects storage arrays by their vendor and product names. It provides built-in configuration defaults for a large variety of storage products. Consult the hardware documentation of your storage array: some vendors provide specific recommendations for Linux multipathing configuration."
msgstr ""

#. Tag: para
#: storage_multipath.xml:202
#, no-c-format
msgid "If you need to apply changes to the built-in configuration for your storage array, read <xref linkend=\"sec-multipath-conf-file\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:207
#, no-c-format
msgid "Disclaimer about built-in hardware properties"
msgstr ""

#. Tag: para
#: storage_multipath.xml:208
#, no-c-format
msgid "<filename>multipath-tools</filename> has built-in presets for many storage arrays. The existence of such presets for a given storage product <emphasis>does not imply</emphasis> that the vendor of the storage product has tested the product with <systemitem>dm-multipath</systemitem> , nor that the vendor endorses or supports the use of <systemitem>dm-multipath</systemitem> with the product. Always consult the original vendor documentation for support-related questions."
msgstr ""

#. Tag: title
#: storage_multipath.xml:221
#, no-c-format
msgid "Storage arrays that require specific hardware handlers"
msgstr ""

#. Tag: para
#: storage_multipath.xml:222
#, no-c-format
msgid "Some storage arrays require special commands for failover from one path to the other, or non-standard error-handling methods. These special commands and methods are implemented by hardware handlers in the Linux kernel. Modern SCSI storage arrays support the &ldquo;Asymmetric Logical Unit Access&rdquo; (ALUA) hardware handler defined in the SCSI standard. Besides ALUA, the &slea; kernel contains hardware handlers for Netapp E-Series (RDAC), the Dell/EMC CLARiiON CX family of arrays, and legacy arrays from HP."
msgstr ""

#. Tag: para
#: storage_multipath.xml:232
#, no-c-format
msgid "Since Linux kernel 4.4, the Linux kernel has automatically detected hardware handlers for most arrays, including all arrays supporting ALUA. The only requirement is that the device handler modules are loaded at the time the respective devices are probed. The <systemitem>multipath-tools</systemitem> package ensures this by installing appropriate configuration files. Once a device handler is attached to a given device, it cannot be changed anymore."
msgstr ""

#. Tag: title
#: storage_multipath.xml:244
#, no-c-format
msgid "Planning for multipathing"
msgstr ""

#. Tag: para
#: storage_multipath.xml:246
#, no-c-format
msgid "Use the guidelines in this section when planning your multipath I/O solution."
msgstr ""

#. Tag: title
#: storage_multipath.xml:252
#, no-c-format
msgid "Prerequisites"
msgstr ""

#. Tag: para
#: storage_multipath.xml:255
#, no-c-format
msgid "The storage array you use for the multipathed device must support multipathing. For more information, see <xref linkend=\"sec-multipath-hardware\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:262
#, no-c-format
msgid "You need to configure multipathing only if multiple physical paths exist between host bus adapters in the server and host bus controllers for the block storage device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:269
#, no-c-format
msgid "For some storage arrays, the vendor provides its own multipathing software to manage multipathing for the arrayâ€™s physical and logical devices. In this case, you should follow the vendorâ€™s instructions for configuring multipathing for those devices."
msgstr ""

#. Tag: para
#: storage_multipath.xml:277
#, no-c-format
msgid "When using multipathing in a virtualization environment, the multipathing is controlled in the host server environment. Configure multipathing for the device before you assign it to a virtual guest machine."
msgstr ""

#. Tag: title
#: storage_multipath.xml:287
#, no-c-format
msgid "Multipath installation types"
msgstr ""

#. Tag: para
#: storage_multipath.xml:288
#, no-c-format
msgid "We distinguish installation types by the way the root device is handled. <xref linkend=\"sec-multipath-installing\"/> describes how the different setups are created during and after installation."
msgstr ""

#. Tag: title
#: storage_multipath.xml:294
#, no-c-format
msgid "Root file system on multipath (SAN-boot)"
msgstr ""

#. Tag: para
#: storage_multipath.xml:295
#, no-c-format
msgid "The root file system is on a multipath device. This is typically the case for diskless servers that use SAN storage exclusively. On such systems, multipath support is required for booting, and multipathing must be enabled in the initramfs."
msgstr ""

#. Tag: title
#: storage_multipath.xml:303
#, no-c-format
msgid "Root file system on a local disk"
msgstr ""

#. Tag: para
#: storage_multipath.xml:304
#, no-c-format
msgid "The root file system (and possibly some other file systems) is on local storage, for example, on a directly attached SATA disk or local RAID, but the system additionally uses file systems in the multipath SAN storage. This system type can be configured in three different ways:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:312
#, no-c-format
msgid "Multipath setup for local disk"
msgstr ""

#. Tag: para
#: storage_multipath.xml:314
#, no-c-format
msgid "All block devices are part of multipath maps, including the local disk. The root device appears as a degraded multipath map with just one path. This configuration is created if multipathing was enabled during the initial system installation with &yast;."
msgstr ""

#. Tag: term
#: storage_multipath.xml:323
#, no-c-format
msgid "Local disk is excluded from multipath"
msgstr ""

#. Tag: para
#: storage_multipath.xml:325
#, no-c-format
msgid "In this configuration, multipathing is enabled in the initramfs, but the root device is explicitly excluded from multipath (see <xref linkend=\"sec-multipath-blacklist\"/> ). <xref linkend=\"pr-multipath-disable-root\"/> describes how to set up this configuration."
msgstr ""

#. Tag: term
#: storage_multipath.xml:335
#, no-c-format
msgid "Multipath disabled in the initramfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:337
#, no-c-format
msgid "This setup is created if multipathing was not enabled during the initial system installation with &yast;. This configuration is rather fragile; consider using one of the other options instead."
msgstr ""

#. Tag: title
#: storage_multipath.xml:349
#, no-c-format
msgid "Disk management tasks"
msgstr ""

#. Tag: para
#: storage_multipath.xml:350
#, no-c-format
msgid "Use third-party SAN array management tools or the user interface of your storage array to create logical devices and assign them to hosts. Make sure to configure the host credentials correctly on both sides."
msgstr ""

#. Tag: para
#: storage_multipath.xml:355
#, no-c-format
msgid "You can add or remove volumes to a running host, but detecting the changes may require rescanning SCSI targets and reconfiguring multipathing on the host. See <xref linkend=\"sec-multipath-best-practice-scandev\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:361
#, no-c-format
msgid "Storage processors"
msgstr ""

#. Tag: para
#: storage_multipath.xml:362
#, no-c-format
msgid "On some disk arrays, the storage array manages the traffic through storage processors. One processor is active and the other one is passive until there is a failure. If you are connected to the passive storage processor, you might not see the expected LUNs, or you might see the LUNs but encounter I/O errors when you try to access them."
msgstr ""

#. Tag: para
#: storage_multipath.xml:369
#, no-c-format
msgid "If a disk array has more than one storage processor, ensure that the SAN switch has a connection to the active storage processor that owns the LUNs you want to access."
msgstr ""

#. Tag: title
#: storage_multipath.xml:378
#, no-c-format
msgid "Software RAID and complex storage stacks"
msgstr ""

#. Tag: para
#: storage_multipath.xml:379
#, no-c-format
msgid "Multipathing is set up on top of basic storage devices such as SCSI disks. In a multi-layered storage stack, multipathing is always the bottom layer. Other layers such as software RAID, Logical Volume Management, block device encryption, etc. are layered on top of it. Therefore, for each device that has multiple I/O paths and that you plan to use in a software RAID, you must configure the device for multipathing before you attempt to create the software RAID device."
msgstr ""

#. Tag: title
#: storage_multipath.xml:391
#, no-c-format
msgid "High-availability solutions"
msgstr ""

#. Tag: para
#: storage_multipath.xml:392
#, no-c-format
msgid "High-availability solutions for clustering storage resources run on top of the multipathing service on each node. Make sure that the configuration settings in the <filename>/etc/multipath.conf</filename> file on each node are consistent across the cluster."
msgstr ""

#. Tag: para
#: storage_multipath.xml:398
#, no-c-format
msgid "Make sure that multipath devices have the same name across all devices. Refer to <xref linkend=\"sec-multipath-names\"/> for details."
msgstr ""

#. Tag: para
#: storage_multipath.xml:402
#, no-c-format
msgid "The Distributed Replicated Block Device (DRBD) high-availability solution for mirroring devices across a LAN runs on top of multipathing. For each device that has multiple I/O paths and that you plan to use in a DRDB solution, you must configure the device for multipathing before you configure DRBD."
msgstr ""

#. Tag: para
#: storage_multipath.xml:409
#, no-c-format
msgid "Special care must be taken when using multipathing together with clustering software that relies on shared storage for fencing, such as <command>pacemaker</command> with <command>sbd</command> . See <xref linkend=\"sec-multipath-policies-cluster\"/> for details."
msgstr ""

#. Tag: title
#: storage_multipath.xml:418
#, no-c-format
msgid "Installing &productname; on multipath systems"
msgstr ""

#. Tag: para
#: storage_multipath.xml:420
#, no-c-format
msgid "No special installation parameters are required for the installation of &productname; on systems with multipath hardware."
msgstr ""

#. Tag: title
#: storage_multipath.xml:426
#, no-c-format
msgid "Installing without connected multipath devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:427
#, no-c-format
msgid "You may want to perform installation on a local disk, without configuring the fabric and the storage first, with the intention to add multipath SAN devices to the system later. In this case, the installation will proceed like on a non-multipath system. After installation, <systemitem>multipath-tools</systemitem> will be installed, but the &systemd; service <filename>multipathd.service</filename> will be disabled. The system will be configured as described in <xref linkend=\"vl-multipath-planning-type-noroot-noinitrd\"/> in <xref linkend=\"sec-multipath-planning-type-noroot\"/> . Before adding SAN hardware, you will need to enable and start <filename>multipathd.service</filename> . We recommend creating a <literal>blacklist</literal> entry in the <filename>/etc/multipath.conf</filename> for the root device (see <xref linkend=\"sec-multipath-blacklist\"/> )."
msgstr ""

#. Tag: title
#: storage_multipath.xml:446
#, no-c-format
msgid "Installing with connected multipath devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:447
#, no-c-format
msgid "If multipath devices are connected to the system at installation time, &yast; will detect them and display a pop-up window asking you whether multipath should be enabled before entering the partitioning stage."
msgstr ""

#. Tag: textobject
#: storage_multipath.xml:454
#, no-c-format
msgid "<phrase> &yast; multipath dialog</phrase>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:465
#, no-c-format
msgid "If you select &ldquo;No&rdquo; at this prompt (not recommended), the installation will proceed as in <xref linkend=\"sec-multipath-installing-nomp\"/> . In the partitioning stage, do not use/edit devices that will later be part of a multipath map."
msgstr ""

#. Tag: para
#: storage_multipath.xml:471
#, no-c-format
msgid "If you select &ldquo;Yes&rdquo; at the multipath prompt, <command>multipathd</command> will run during the installation. No device will be added to the <literal>blacklist</literal> section of <filename>/etc/multipath.conf</filename> , thus all SCSI and DASD devices, including local disks, will appear as multipath devices in the partitioning dialogs. After installation, all SCSI and DASD devices will be multipath devices, as described in <xref linkend=\"sec-multipath-planning-type-root\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:482
#, no-c-format
msgid "Disabling multipathing for the root disk after installation"
msgstr ""

#. Tag: para
#: storage_multipath.xml:483
#, no-c-format
msgid "This procedure assumes that you installed on a local disk and enabled multipathing during installation, so that the root device is on multipath now, but you prefer to set up the system as described in <xref linkend=\"vl-multipath-planning-type-noroot-ignore\"/> in <xref linkend=\"sec-multipath-planning-type-noroot\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:491
#, no-c-format
msgid "Check your system for <filename>/dev/mapper/...</filename> references to your local root device, and replace them with references that will still work if the device is not a multipath map anymore (see <xref linkend=\"sec-multipath-referring\"/> ). If the following command finds no references, you do not need to apply changes:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:498
#, no-c-format
msgid "&prompt.sudo;grep -rl /dev/mapper/ /etc"
msgstr ""

#. Tag: para
#: storage_multipath.xml:501
#, no-c-format
msgid "Switch to <literal>by-uuid</literal> persistent device policy for <command>dracut</command> (see <xref linkend=\"sec-multipath-initrd-persistent\"/> ):"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:506
#, no-c-format
msgid "&prompt.user;echo 'persistent_policy=\"by-uuid\"' | \\\n"
      "      sudo tee /etc/dracut.conf.d/10-persistent-policy.conf"
msgstr ""

#. Tag: para
#: storage_multipath.xml:510
#, no-c-format
msgid "Determine the WWID of the root device:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:513
#, no-c-format
msgid "&prompt.user;multipathd show paths format \"%i %d %w %s\"\n"
      "0:2:0:0 sda 3600605b009e7ed501f0e45370aaeb77f IBM,ServeRAID M5210\n"
      "...\n"
      "\t"
msgstr ""

#. Tag: para
#: storage_multipath.xml:517
#, no-c-format
msgid "This command prints all paths devices with their WWIDs and vendor/product information. You will be able to identify the root device (here, the ServeRAID device) and note the WWID."
msgstr ""

#. Tag: para
#: storage_multipath.xml:524
#, no-c-format
msgid "Create a blacklist entry in <filename>/etc/multipath.conf</filename> (see <xref linkend=\"sec-multipath-blacklist\"/> ) with the WWID you just determined (do <emphasis>not</emphasis> apply these settings just yet):"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:529
#, no-c-format
msgid "blacklist {\n"
      "    wwid 3600605b009e7ed501f0e45370aaeb77f\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:534
#, no-c-format
msgid "Rebuild the initramfs:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:540
#, no-c-format
msgid "Reboot. Your system should boot with a non-multipath root disk."
msgstr ""

#. Tag: title
#: storage_multipath.xml:548
#, no-c-format
msgid "Updating &slea; on multipath systems"
msgstr ""

#. Tag: para
#: storage_multipath.xml:550
#, no-c-format
msgid "When updating your system online, you can proceed as described in <xref linkend=\"cha-upgrade-online\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:555
#, no-c-format
msgid "The offline update of your system is similar to the fresh installation as described in <xref linkend=\"sec-multipath-installing\"/> . There is no <literal>blacklist</literal> , thus if the user selects to enable multipath, the root device will appear as a multipath device, even if it is normally not. When <command>dracut</command> builds the initramfs during the update procedure, it sees a different storage stack as it would see on the booted system. See <xref linkend=\"sec-multipath-initrd-persistent\"/> and <xref linkend=\"sec-multipath-referring\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:567
#, no-c-format
msgid "Multipath management tools"
msgstr ""

#. Tag: para
#: storage_multipath.xml:569
#, no-c-format
msgid "The multipathing support in &productname; is based on the Device Mapper Multipath module of the Linux kernel and the <systemitem>multipath-tools</systemitem> user space package."
msgstr ""

#. Tag: para
#: storage_multipath.xml:575
#, no-c-format
msgid "The generic multipathing capability is handled by the Device Mapper Multipath (DM-MP) module. For details, refer to <xref linkend=\"sec-multipath-mpiotools-dm\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:581
#, no-c-format
msgid "The packages <systemitem class=\"resource\">multipath-tools</systemitem> and <systemitem class=\"resource\">kpartx</systemitem> provide tools that handle automatic path discovery and grouping. The tools are the following:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:589
#, no-c-format
msgid "<command>multipathd</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:591
#, no-c-format
msgid "The daemon to set up and monitor multipath maps, and a command-line client to communicate with the daemon process. See <xref linkend=\"sec-multipath-mpiotools-multipathd\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:599
#, no-c-format
msgid "<command>multipath</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:601
#, no-c-format
msgid "The command-line tool for multipath operations. See <xref linkend=\"sec-multipath-mpiotools-multipath\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:608
#, no-c-format
msgid "<command>kpartx</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:610
#, no-c-format
msgid "The command-line tool for managing &ldquo;partitions&rdquo; on multipath devices. See <xref linkend=\"sec-multipath-configuration-partitioning\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:617
#, no-c-format
msgid "<command>mpathpersist</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:619
#, no-c-format
msgid "The command-line tool for managing SCSI persistent reservations. See <xref linkend=\"sec-multipath-mpiotools-mpathpersist\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:628
#, no-c-format
msgid "Device mapper multipath module"
msgstr ""

#. Tag: para
#: storage_multipath.xml:629
#, no-c-format
msgid "The Device Mapper Multipath (DM-MP) module <filename>dm-multipath.ko</filename> provides the generic multipathing capability for Linux. DM-MPIO is the preferred solution for multipathing on &productname; for SCSI and DASD devices, and can be used for NVMe devices as well."
msgstr ""

#. Tag: title
#: storage_multipath.xml:637
#, no-c-format
msgid "Using DM-MP for NVMe devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:638
#, no-c-format
msgid "Since &productname; 15, native NVMe multipathing (see <xref linkend=\"sec-multipath-hardware-implementations\"/> ) has been recommended for NVMe and used by default. To disable native NVMe multipathing and use device mapper multipath instead ( <emphasis>not recommended</emphasis> ), boot with the kernel parameter <literal>nvme-core.multipath=0</literal> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:647
#, no-c-format
msgid "The Device Mapper Multipath module handles the following tasks:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:652
#, no-c-format
msgid "Distributing load over multiple paths inside the active path group."
msgstr ""

#. Tag: para
#: storage_multipath.xml:657
#, no-c-format
msgid "Noticing I/O errors on path devices, and marking these as failed, so that no I/O will be sent to them."
msgstr ""

#. Tag: para
#: storage_multipath.xml:663
#, no-c-format
msgid "Switching path groups when all paths in the active path group have failed."
msgstr ""

#. Tag: para
#: storage_multipath.xml:669
#, no-c-format
msgid "Either failing or queuing I/O on the multipath device if all paths have failed, depending on configuration."
msgstr ""

#. Tag: para
#: storage_multipath.xml:675
#, no-c-format
msgid "The following tasks are handled by the user-space components in the <systemitem>multipath-tools</systemitem> package, not by the Device Mapper Multipath module:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:682
#, no-c-format
msgid "Discovering devices representing different paths to the same storage device and assembling multipath maps from them."
msgstr ""

#. Tag: para
#: storage_multipath.xml:688
#, no-c-format
msgid "Collecting path devices with similar properties into path groups."
msgstr ""

#. Tag: para
#: storage_multipath.xml:693
#, no-c-format
msgid "Monitoring path devices actively for failure or reinstantiation."
msgstr ""

#. Tag: para
#: storage_multipath.xml:698
#, no-c-format
msgid "Monitoring of addition and removal of path devices."
msgstr ""

#. Tag: para
#: storage_multipath.xml:703
#, no-c-format
msgid "The Device Mapper Multipath module does not provide an easy-to-use user interface for setup and configuration."
msgstr ""

#. Tag: para
#: storage_multipath.xml:709
#, no-c-format
msgid "For details about the components from the <systemitem>multipath-tools</systemitem> package, refer to <xref linkend=\"sec-multipath-mpiotools-multipathd\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:715
#, no-c-format
msgid "Failures that multipath prevents"
msgstr ""

#. Tag: para
#: storage_multipath.xml:716
#, no-c-format
msgid "DM-MPIO protects against failures in the paths to the device, and not failures in the device itself, such as media errors. The latter kind of errors must be prevented by other means, such as replication."
msgstr ""

#. Tag: title
#: storage_multipath.xml:725
#, no-c-format
msgid "The <command>multipathd</command> daemon"
msgstr ""

#. Tag: para
#: storage_multipath.xml:726
#, no-c-format
msgid "<command>multipathd</command> is the most important part of a modern Linux device mapper multipath setup. It is normally started through the systemd service <filename>multipathd.service</filename> (see <xref linkend=\"sec-multipath-configuration-start\"/> )."
msgstr ""

#. Tag: para
#: storage_multipath.xml:732
#, no-c-format
msgid "<command>multipathd</command> serves the following tasks (some of them depend on the configuration):"
msgstr ""

#. Tag: para
#: storage_multipath.xml:738
#, no-c-format
msgid "On startup, detects path devices and sets up multipath maps from detected devices."
msgstr ""

#. Tag: para
#: storage_multipath.xml:744
#, no-c-format
msgid "Monitors uevents and device mapper events, adding or removing path mappings to multipath maps as necessary and initiating failover or failback operations."
msgstr ""

#. Tag: para
#: storage_multipath.xml:751
#, no-c-format
msgid "Sets up new maps on the fly when new path devices are discovered."
msgstr ""

#. Tag: para
#: storage_multipath.xml:756
#, no-c-format
msgid "Checks path devices at regular intervals to detect failure, and tests failed paths to reinstate them if they become operational again."
msgstr ""

#. Tag: para
#: storage_multipath.xml:762
#, no-c-format
msgid "When all paths fail, <command>multipathd</command> either fails the map, or switches the map device to queuing mode for a given time interval."
msgstr ""

#. Tag: para
#: storage_multipath.xml:768
#, no-c-format
msgid "Handles path state changes and switches path groups or regroups paths, as necessary."
msgstr ""

#. Tag: para
#: storage_multipath.xml:774
#, no-c-format
msgid "Tests paths for &ldquo;marginal&rdquo; state, i.e. shaky fabrics conditions that cause path state flipping between operational and non-operational."
msgstr ""

#. Tag: para
#: storage_multipath.xml:781
#, no-c-format
msgid "Handles SCSI persistent reservation keys for path devices if configured. See <xref linkend=\"sec-multipath-mpiotools-mpathpersist\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:787
#, no-c-format
msgid "<command>multipathd</command> also serves as a command-line client to process interactive commands by sending them to the running daemon. The general syntax to send commands to the daemon is as follows:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:792
#, no-c-format
msgid "&prompt.sudo;multipathd <replaceable>COMMAND</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:793
#, no-c-format
msgid "or"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:796
#, no-c-format
msgid "&prompt.sudo;multipathd -k'<replaceable>COMMAND</replaceable>'"
msgstr ""

#. Tag: para
#: storage_multipath.xml:797
#, no-c-format
msgid "There is also an interactive mode that allows sending multiple subsequent commands:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:801
#, no-c-format
msgid "&prompt.sudo;multipathd -k"
msgstr ""

#. Tag: title
#: storage_multipath.xml:803
#, no-c-format
msgid "How multipath and multipathd work together"
msgstr ""

#. Tag: para
#: storage_multipath.xml:804
#, no-c-format
msgid "Many <command>multipathd</command> commands have <command>multipath</command> equivalents. For example, <command>multipathd show topology</command> does the same thing as <command>multipath -ll</command> . The notable difference is that the multipathd command inquires the internal state of the running <command>multipathd</command> daemon, whereas multipath obtains information directly from the kernel and I/O operations."
msgstr ""

#. Tag: para
#: storage_multipath.xml:813
#, no-c-format
msgid "If the multipath daemon is running, we recommend making modifications to the system by using the <command>multipathd</command> commands. Otherwise, the daemon may notice configuration changes and react to them. In some situations, the daemon might even try to undo the applied changes. <command>multipath</command> automatically delegates certain possibly dangerous commands, like destroying and flushing maps, to <command>multipathd</command> if a running daemon is detected."
msgstr ""

#. Tag: para
#: storage_multipath.xml:823
#, no-c-format
msgid "The list below describes frequently used <command>multipathd</command> commands:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:829
#, no-c-format
msgid "show topology"
msgstr ""

#. Tag: para
#: storage_multipath.xml:831
#, no-c-format
msgid "Shows the current map topology and properties. See <xref linkend=\"sec-multipath-best-practice-status\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:839
#, no-c-format
msgid "show paths"
msgstr ""

#. Tag: para
#: storage_multipath.xml:841
#, no-c-format
msgid "Shows the currently known path devices."
msgstr ""

#. Tag: term
#: storage_multipath.xml:847
#, no-c-format
msgid "show paths format \" <replaceable>FORMAT STRING</replaceable> \""
msgstr ""

#. Tag: para
#: storage_multipath.xml:849
#, no-c-format
msgid "Shows the currently known path devices using a format string. Use <command>show wildcards</command> to see a list of supported format specifiers."
msgstr ""

#. Tag: term
#: storage_multipath.xml:857
#, no-c-format
msgid "show maps"
msgstr ""

#. Tag: para
#: storage_multipath.xml:859
#, no-c-format
msgid "Shows the currently configured map devices."
msgstr ""

#. Tag: term
#: storage_multipath.xml:865
#, no-c-format
msgid "show maps format <replaceable>FORMAT STRING</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:867
#, no-c-format
msgid "Shows the currently configured map devices using a format string. Use <command>show wildcards</command> to see a list of supported format specifiers."
msgstr ""

#. Tag: term
#: storage_multipath.xml:875
#, no-c-format
msgid "show config local"
msgstr ""

#. Tag: para
#: storage_multipath.xml:877
#, no-c-format
msgid "Shows the current configuration that multipathd is using."
msgstr ""

#. Tag: term
#: storage_multipath.xml:883
#, no-c-format
msgid "reconfigure"
msgstr ""

#. Tag: para
#: storage_multipath.xml:885
#, no-c-format
msgid "Rereads configuration files, rescans devices, and sets up maps again. This is basically equivalent to a restart of <command>multipathd</command> . A few options cannot be modified without a restart. They are mentioned in the man page <systemitem>multipath.conf(5)</systemitem> . The <option>reconfigure</option> command reloads only map devices that have changed in some way. To force the reloading of every map device, use <command>reconfigure all</command> (available since &sles;&nbsp;15 SP4; on previous versions, <option>reconfigure</option> reloaded every map)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:899
#, no-c-format
msgid "del map <replaceable>MAP DEVICE NAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:901
#, no-c-format
msgid "Unconfigure and delete the given map device and its partitions. <replaceable>MAP DEVICE NAME</replaceable> can be a device node name like <filename>dm-0</filename> , a WWID, or a map name. The command fails if the device is in use."
msgstr ""

#. Tag: term
#: storage_multipath.xml:910
#, no-c-format
msgid "switchgroup map <replaceable>MAP DEVICE NAME</replaceable> group <replaceable>N</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:912
#, no-c-format
msgid "Switch to the path group with the given numeric index (starting at 1). This is useful for maps with manual failback (see <xref linkend=\"sec-multipath-policies-default\"/> )."
msgstr ""

#. Tag: para
#: storage_multipath.xml:920
#, no-c-format
msgid "Additional commands are available to modify path states, enable or disable queuing, and more. See <systemitem>multipathd(8)</systemitem> for details."
msgstr ""

#. Tag: title
#: storage_multipath.xml:927
#, no-c-format
msgid "The <command>multipath</command> command"
msgstr ""

#. Tag: para
#: storage_multipath.xml:928
#, no-c-format
msgid "Even though multipath setup is mostly automatic and handled by <command>multipathd</command> , <command>multipath</command> is still useful for some administration tasks. Several examples of the command usage follow:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:936
#, no-c-format
msgid "multipath"
msgstr ""

#. Tag: para
#: storage_multipath.xml:938
#, no-c-format
msgid "Detects path devices and configures all multipath maps that it finds."
msgstr ""

#. Tag: term
#: storage_multipath.xml:944
#, no-c-format
msgid "multipath -d"
msgstr ""

#. Tag: para
#: storage_multipath.xml:946
#, no-c-format
msgid "Similar to <command>multipath</command> , but does not set up any maps (&ldquo;dry run&rdquo;)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:953
#, no-c-format
msgid "multipath <replaceable>DEVICENAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:955
#, no-c-format
msgid "Configures a specific multipath device. <replaceable>DEVICENAME</replaceable> can denote a member path device by its device node name ( <filename>/dev/sdb</filename> ) or device number in <literal>major:minor</literal> format. Alternatively, it can be the WWID or name of a multipath map."
msgstr ""

#. Tag: term
#: storage_multipath.xml:965
#, no-c-format
msgid "multipath -f <replaceable>DEVICENAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:967
#, no-c-format
msgid "Unconfigures (\"flushes\") a multipath map and its partition mappings. The command will fail if the map or one of its partitions is in use. See above for possible values of <replaceable>DEVICENAME</replaceable> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:975
#, no-c-format
msgid "multipath -F"
msgstr ""

#. Tag: para
#: storage_multipath.xml:977
#, no-c-format
msgid "Unconfigures (\"flushes\") all multipath maps and their partition mappings. The command will fail for maps in use."
msgstr ""

#. Tag: term
#: storage_multipath.xml:984
#, no-c-format
msgid "multipath -ll"
msgstr ""

#. Tag: para
#: storage_multipath.xml:986
#, no-c-format
msgid "Displays the status and topology of all currently configured multipath devices. See <xref linkend=\"sec-multipath-best-practice-status\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:994
#, no-c-format
msgid "multipath -ll <replaceable>DEVICENAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:996
#, no-c-format
msgid "Displays the status of a specified multipath device. See above for possible values of <replaceable>DEVICENAME</replaceable> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1003
#, no-c-format
msgid "multipath -t"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1005
#, no-c-format
msgid "Shows the internal hardware table and the active configuration of multipath. Refer to <systemitem>multipath.conf(5)</systemitem> for details about the configuration parameters."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1013
#, no-c-format
msgid "multipath -T"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1015
#, no-c-format
msgid "Has a similar function as the <command>multipath -t</command> command but shows only hardware entries matching the hardware detected on the host."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1023
#, no-c-format
msgid "The option <option>-v</option> controls the verbosity of the output. The provided value overrides the <option>verbosity</option> option in <filename>/etc/multipath.conf</filename> . See <xref linkend=\"sec-multipath-conf-misc\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1032
#, no-c-format
msgid "SCSI persistent reservations and <command>mpathpersist</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1033
#, no-c-format
msgid "The <command>mpathpersist</command> utility is used to manage SCSI persistent reservations on Device Mapper Multipath devices. Persistent reservations serve to restrict access to SCSI Logical Units to certain SCSI initiators. In multipath configurations, it is important to use the same reservation keys for all I_T nexuses (paths) for a given volume; otherwise, creating a reservation on one path device would cause I/O errors on other paths."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1042
#, no-c-format
msgid "Use this utility with the <literal>reservation_key</literal> attribute in the <filename>/etc/multipath.conf</filename> file to set persistent reservations for SCSI devices. If (and only if) this option is set, the <command>multipathd</command> daemon checks persistent reservations for newly discovered paths or reinstated paths."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1049
#, no-c-format
msgid "You can add the attribute to the <literal>defaults</literal> section or the <literal>multipaths</literal> section of <filename>multipath.conf</filename> . For example:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1054
#, no-c-format
msgid "multipaths {\n"
      "    multipath {\n"
      "        wwid             3600140508dbcf02acb448188d73ec97d\n"
      "        alias            yellow\n"
      "        reservation_key  0x123abc\n"
      "    }\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1061
#, no-c-format
msgid "After setting the <literal>reservation_key</literal> parameter for all mpath devices applicable for persistent management, reload the configuration using <command>multipathd reconfigure</command> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1067
#, no-c-format
msgid "Using &ldquo; <option>reservation_key file</option> &rdquo;"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1068
#, no-c-format
msgid "If the special value <literal>reservation_key file</literal> is used in the <literal>defaults</literal> section of <filename>multipath.conf</filename> , reservation keys can be managed dynamically in the file <filename>/etc/multipath/prkeys</filename> using <command>mpathpersist</command> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1075
#, no-c-format
msgid "This is the recommended way to handle persistent reservations with multipath maps. It is available from &productname; 12 SP4."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1080
#, no-c-format
msgid "Use the command <command>mpathpersist</command> to query and set persistent reservations for multipath maps consisting of SCSI devices. Refer to the manual page <systemitem>mpathpersist(8)</systemitem> for details. The command-line options are the same as those of the <command>sg_persist</command> from the <systemitem>sg3_utils</systemitem> package. The <systemitem>sg_persist(8)</systemitem> manual page explains the semantics of the options in detail."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1089
#, no-c-format
msgid "In the following examples, <replaceable>DEVICE</replaceable> denotes a device mapper multipath device like <filename>/dev/mapper/mpatha</filename> . The commands below are listed with long options for better readability. All options have single-letter replacements, like in <command>mpathpersist -oGS 123abc <replaceable>DEVICE</replaceable></command> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1099
#, no-c-format
msgid "mpathpersist --in --read-keys <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1101
#, no-c-format
msgid "Read the registered reservation keys for the device."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1107
#, no-c-format
msgid "mpathpersist --in --read-reservation <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1109
#, no-c-format
msgid "Show existing reservations for the device."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1115
#, no-c-format
msgid "mpathpersist --out --register --param-sark=123abc <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1117
#, no-c-format
msgid "Register a reservation key for the device. This will add the reservation key for all I_T nexuses (path devices) on the host."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1124
#, no-c-format
msgid "mpathpersist --out --reserve --param-rk=123abc --prout-type=5 <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1126
#, no-c-format
msgid "Create a reservation of type 5 (&ldquo;write exclusive - registrants only&rdquo;) for the device, using the previously registered key."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1133
#, no-c-format
msgid "mpathpersist --out --release --param-rk=123abc --prout-type=5 <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1135
#, no-c-format
msgid "Release a reservation of type 5 for the device."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1141
#, no-c-format
msgid "mpathpersist --out --register-ignore --param-sark=0 <replaceable>DEVICE</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1143
#, no-c-format
msgid "Delete a previously existing reservation key from the device."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1152
#, no-c-format
msgid "Configuring the system for multipathing"
msgstr ""

#. Tag: title
#: storage_multipath.xml:1157
#, no-c-format
msgid "Enabling, starting, and stopping multipath services"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1158
#, no-c-format
msgid "To enable multipath services to start at boot time, run the following command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1162
#, no-c-format
msgid "&prompt.sudo;systemctl enable multipathd"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1163
#, no-c-format
msgid "To manually start the service in the running system, enter:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1166
#, no-c-format
msgid "&prompt.sudo;systemctl start multipathd"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1167
#, no-c-format
msgid "To restart the service, enter:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1170
#, no-c-format
msgid "&prompt.sudo;systemctl restart multipathd"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1171
#, no-c-format
msgid "In most situations, restarting the service is not necessary. To simply have <command>multipathd</command> reload its configuration, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1175
#, no-c-format
msgid "&prompt.sudo;systemctl reload multipathd"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1176
#, no-c-format
msgid "To check the status of the service, enter:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1179
#, no-c-format
msgid "&prompt.sudo;systemctl status multipathd"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1180
#, no-c-format
msgid "To stop the multipath services in the current session, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1183
#, no-c-format
msgid "\n"
      "&prompt.sudo;systemctl stop multipathd multipathd.socket\n"
      "   "
msgstr ""

#. Tag: para
#: storage_multipath.xml:1186
#, no-c-format
msgid "Stopping the service does not remove existing multipath maps. To remove unused maps, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1190
#, no-c-format
msgid "&prompt.sudo;multipath -F"
msgstr ""

#. Tag: title
#: storage_multipath.xml:1192
#, no-c-format
msgid "Keep <filename>multipathd.service</filename> enabled"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1193
#, no-c-format
msgid "We strongly recommend keeping <filename>multipathd.service</filename> always enabled and running on systems with multipath hardware. The service does support <command>systemd</command> 's socket activation mechanism, but it is discouraged to rely on that. Multipath maps will not be set up during boot if the service is disabled."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1202
#, no-c-format
msgid "Disabling multipath"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1203
#, no-c-format
msgid "If you need to disable multipath despite the warning above, for example, because a third-party multipathing software is going to be deployed, proceed as follows. Be sure that the system uses no hard-coded references to multipath devices (see <xref linkend=\"sec-multipath-trouble-ref\"/> )."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1209
#, no-c-format
msgid "To disable multipathing <emphasis>just for a single system boot</emphasis> , use the kernel parameter <literal>multipath=off</literal> . This affects both the booted system and the initramfs, which does not need to be rebuilt in this case."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1215
#, no-c-format
msgid "To disable multipathd services <emphasis>permanently</emphasis> , so that they will not be started on future system boots, run the following commands:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1220
#, no-c-format
msgid "&prompt.sudo;systemctl disable multipathd multipathd.socket\n"
      "&prompt.sudo;dracut --force --omit multipath\n"
      ""
msgstr ""

#. Tag: para
#: storage_multipath.xml:1223
#, no-c-format
msgid "(Whenever you disable or enable the multipath services, rebuild the <systemitem>initramfs</systemitem> . See <xref linkend=\"sec-multipath-initrd-sync\"/> .)"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1228
#, no-c-format
msgid "If you want to make sure multipath devices do not get set up, <emphasis>even when running <command>multipath</command> manually</emphasis> , add the following lines at the end of <filename>/etc/multipath.conf</filename> before rebuilding the initramfs:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1234
#, no-c-format
msgid "blacklist {\n"
      "    wwid .*\n"
      "}"
msgstr ""

#. Tag: title
#: storage_multipath.xml:1241
#, no-c-format
msgid "Preparing SAN devices for multipathing"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1242
#, no-c-format
msgid "Before configuring multipath I/O for your SAN devices, prepare the SAN devices, as necessary, by doing the following:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1248
#, no-c-format
msgid "Configure and zone the SAN with the vendorâ€™s tools."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1253
#, no-c-format
msgid "Configure permissions for host LUNs on the storage arrays with the vendorâ€™s tools."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1259
#, no-c-format
msgid "If &productname; ships no driver for the host bus adapter (HBA), install a Linux driver from the HBA vendor. See the vendorâ€™s specific instructions for more details."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1266
#, no-c-format
msgid "If multipath devices are detected and <filename>multipathd.service</filename> is enabled, multipath maps should be created automatically. If this does not happen, <xref linkend=\"sec-multipath-trouble-steps\" xrefstyle=\"SecTitleOnPage\"/> lists some shell commands that can be used to examine the situation. When the LUNs are not seen by the HBA driver, check the zoning setup in the SAN. In particular, check whether LUN masking is active and whether the LUNs are correctly assigned to the server."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1276
#, no-c-format
msgid "If the HBA driver can see LUNs, but no corresponding block devices are created, additional kernel parameters may be needed. See <citetitle>TID 3955167: Troubleshooting SCSI (LUN) Scanning Issues</citetitle> in the &suse; Knowledge base at <link xlink:href=\"https://www.suse.com/support/kb/doc.php?id=3955167\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1286
#, no-c-format
msgid "Partitions on multipath devices and <command>kpartx</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1287
#, no-c-format
msgid "Multipath maps can have partitions like their path devices. Partition table scanning and device node creation for partitions is done in user space by the <command>kpartx</command> tool. <command>kpartx</command> is automatically invoked by udev rules; there is usually no need to run it manually. See <xref linkend=\"sec-multipath-referring\"/> for ways to refer to multipath partitions."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1296
#, no-c-format
msgid "Disabling invocation of <command>kpartx</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1297
#, no-c-format
msgid "The <literal>skip_kpartx</literal> option in <filename>/etc/multipath.conf</filename> can be used to disable invocation of <command>kpartx</command> on selected multipath maps. This may be useful on virtualization hosts, for example."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1304
#, no-c-format
msgid "Partition tables and partitions on multipath devices can be manipulated as usual, using &yast; or tools like <command>fdisk</command> or <command>parted</command> . Changes applied to the partition table will be noted by the system when the partitioning tool exits. If this does not work (usually because a device is busy), try <command>multipathd reconfigure</command> , or reboot the system."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1315
#, no-c-format
msgid "Keeping the initramfs synchronized"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1317
#, no-c-format
msgid "Make sure that the initial RAM file system (initramfs) and the booted system behave consistently regarding the use of multipathing for all block devices. Rebuild the initramfs after applying multipath configuration changes."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1324
#, no-c-format
msgid "If multipathing is enabled in the system, it also needs to be enabled in the <filename>initramfs</filename> and vice versa. The only exception to this rule is the option <xref linkend=\"vl-multipath-planning-type-noroot-noinitrd\"/> in <xref linkend=\"sec-multipath-planning-type-noroot\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1331
#, no-c-format
msgid "The multipath configuration must be synchronized between the booted system and the initramfs. Therefore, if you change any of the files: <filename>/etc/multipath.conf</filename> , <filename>/etc/multipath/wwids</filename> , <filename>/etc/multipath/bindings</filename> , or other configuration files, or udev rules related to device identification, rebuild initramfs using the command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1340
#, no-c-format
msgid "&prompt.sudo;dracut -f"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1341
#, no-c-format
msgid "If the <filename>initramfs</filename> and the system are not synchronized, the system will not boot properly, and the start-up procedure may result in an emergency shell. See <xref linkend=\"sec-multipath-trouble\"/> for instructions on how to avoid or repair such a scenario."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1348
#, no-c-format
msgid "Enabling or disabling multipathing in the initramfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1349
#, no-c-format
msgid "Special care must be taken if the initramfs is rebuilt in non-standard situations, for example, from a rescue system or after booting with the kernel parameter <literal>multipath=off</literal> . <command>dracut</command> will automatically include multipathing support in the initramfs if and only if it detects that the root file system is on a multipath device while the initramfs is being built. In such cases, it is necessary to enable or disable multipathing explicitly."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1358
#, no-c-format
msgid "To enable multipath support in the <filename>initramfs</filename> , run the command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1362
#, no-c-format
msgid "&prompt.sudo;dracut --force --add multipath"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1363
#, no-c-format
msgid "To disable multipath support in <filename>initramfs</filename> , run the command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1367
#, no-c-format
msgid "&prompt.sudo;dracut --force --omit multipath"
msgstr ""

#. Tag: title
#: storage_multipath.xml:1370
#, no-c-format
msgid "Persistent device names in the initramfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1371
#, no-c-format
msgid "When <command>dracut</command> generates the initramfs, it must refer to disks and partitions to be mounted in a persistent manner, to make sure the system will boot correctly. When <command>dracut</command> detects multipath devices, it will use the DM-MP device names such as"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1377
#, no-c-format
msgid "/dev/mapper/3600a098000aad73f00000a3f5a275dc8-part1"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1378
#, no-c-format
msgid "for this purpose by default. This is good if the system <emphasis>always</emphasis> runs in multipath mode. But if the system is started without multipathing, as described in <xref linkend=\"sec-multipath-initrd-disable\"/> , booting with such an initramfs will fail, because the <filename>/dev/mapper</filename> devices will not exist. See <xref linkend=\"sec-multipath-referring\"/> for another possible problem scenario, and some background information."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1387
#, no-c-format
msgid "To prevent this from happening, change <command>dracut</command> 's persistent device naming policy by using the <option>--persistent-policy</option> option. We recommend setting the <literal>by-uuid</literal> use policy:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1393
#, no-c-format
msgid "&prompt.sudo;dracut --force --omit multipath --persistent-policy=by-uuid"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1394
#, no-c-format
msgid "See also <xref linkend=\"pr-multipath-disable-root\"/> and <xref linkend=\"sec-multipath-trouble-ref\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1402
#, no-c-format
msgid "Multipath configuration"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1404
#, no-c-format
msgid "The built-in <systemitem>multipath-tools</systemitem> defaults work well for most setups. If customizations are needed, a configuration file needs to be created. The main configuration file is <filename>/etc/multipath.conf</filename> . In addition, files in <filename>/etc/multipath/conf.d/</filename> are taken into account. See <xref linkend=\"sec-multipath-conf-file-precedence\"/> for additional information."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1415
#, no-c-format
msgid "Vendor recommendations and built-in hardware defaults"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1416
#, no-c-format
msgid "Some storage vendors publish recommended values for multipath options in their documentation. These values often represent what the vendor has tested in their environment and found most suitable for the storage product. See the disclaimer in <xref linkend=\"sec-multipath-hardware-autodetect\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1422
#, no-c-format
msgid "<systemitem>multipath-tools</systemitem> has built-in defaults for many storage arrays that are derived from the published vendor recommendations. Run <command>multipath -T</command> to see the current settings for your devices and compare them to vendor recommendations."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1431
#, no-c-format
msgid "Creating <filename>/etc/multipath.conf</filename>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1432
#, no-c-format
msgid "It is recommended that you create a minimal <filename>/etc/multipath.conf</filename> that just contains those settings you want to change. In many cases, you do not need to create <filename>/etc/multipath.conf</filename> at all."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1438
#, no-c-format
msgid "If you prefer working with a configuration template that contains all possible configuration directives, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1442
#, no-c-format
msgid "multipath -T &gt;/etc/multipath.conf"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1443
#, no-c-format
msgid "See also <xref linkend=\"sec-multipath-best-practice-config\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1451
#, no-c-format
msgid "<filename>multipath.conf</filename> syntax"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1452
#, no-c-format
msgid "The <filename>/etc/multipath.conf</filename> file uses a hierarchy of sections, subsections, and option/value pairs."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1458
#, no-c-format
msgid "White space separates tokens. Consecutive white space characters are collapsed into a single space, unless quoted (see below)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1464
#, no-c-format
msgid "The hash ( <literal>#</literal> ) and exclamation mark ( <literal>!</literal> ) characters cause the rest of the line to be discarded as a comment."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1471
#, no-c-format
msgid "Sections and subsections are started with a section name and an opening brace ( <literal>{</literal> ) on the same line, and end with a closing brace ( <literal>}</literal> ) on a line on its own."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1478
#, no-c-format
msgid "Options and values are written on one line. Line continuations are unsupported."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1484
#, no-c-format
msgid "Options and section names must be keywords. The allowed keywords are documented in <systemitem>multipath.conf(5)</systemitem> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1490
#, no-c-format
msgid "Values may be enclosed in double quotes ( <literal>\"</literal> ). They must be enclosed in quotes if they contain white space or comment characters. A double quote character inside a value is represented by a pair of double quotes ( <literal>\"\"</literal> )."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1498
#, no-c-format
msgid "The values of some options are POSIX regular expressions (see <systemitem>regex(7)</systemitem> ). They are case sensitive and not anchored, so &ldquo; <literal>bar</literal> &rdquo; matches &ldquo; <literal>rhabarber</literal> &rdquo;, but not &ldquo;Barbie&rdquo;."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1506
#, no-c-format
msgid "The following example illustrates the syntax:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1509
#, no-c-format
msgid "\n"
      "section {\n"
      "    subsection {\n"
      "        option1 value\n"
      "        option2      \"complex value!\"\n"
      "        option3    \"value with \"\"quoted\"\" word\"\n"
      "    } ! subsection end\n"
      "} # section end\n"
      "    "
msgstr ""

#. Tag: title
#: storage_multipath.xml:1519
#, no-c-format
msgid "Additional configuration files and precedence rules"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1520
#, no-c-format
msgid "After <filename>/etc/multipath.conf</filename> , the tools read files matching the pattern <filename>/etc/multipath.conf.d/*.conf</filename> . The additional files follow the same syntax rules as <filename>/etc/multipath.conf</filename> . Sections and options can occur multiple times. If <emphasis>the same option in the same section</emphasis> is set in multiple files, or on multiple lines in the same file, the last value takes precedence. Separate precedence rules apply between <filename>multipath.conf</filename> sections, see below."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1534
#, no-c-format
msgid "<filename>multipath.conf</filename> sections"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1535
#, no-c-format
msgid "The <filename>/etc/multipath.conf</filename> file is organized into the following sections. Some options can occur in more than one section. See <systemitem>multipath.conf(5)</systemitem> for details."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1542
#, no-c-format
msgid "defaults"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1544
#, no-c-format
msgid "General default settings."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1548
#, no-c-format
msgid "Overriding built-in device properties"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1549
#, no-c-format
msgid "Built-in hardware-specific device properties take precedence over the settings in the <literal>defaults</literal> section. Changes must therefore be made in the <literal>devices</literal> section or in the <literal>overrides</literal> section."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1559
#, no-c-format
msgid "blacklist"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1561
#, no-c-format
msgid "Lists devices to ignore. See <xref linkend=\"sec-multipath-blacklist\" xrefstyle=\"HeadingOnPage\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1568
#, no-c-format
msgid "blacklist_exceptions"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1570
#, no-c-format
msgid "Lists devices to be multipathed even though they are matched by the blacklist. See <xref linkend=\"sec-multipath-blacklist\" xrefstyle=\"HeadingOnPage\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1578
#, no-c-format
msgid "devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1580
#, no-c-format
msgid "Settings specific to the storage controller. This section is a collection of <literal>device</literal> subsections. Values in this section override values for the same options in the <filename>defaults</filename> section, and the built-in settings of <systemitem>multipath-tools</systemitem> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1587
#, no-c-format
msgid "<literal>device</literal> entries in the <literal>devices</literal> section are matched against the vendor and product of a device using regular expressions. These entries will be &ldquo;merged&rdquo;, setting all options from matching sections for the device. If the same option is set in multiple matching <literal>device</literal> sections, the last device entry takes precedence, even if it is less &ldquo;specific&rdquo; than preceding entries. This applies also if the matching entries appear in different configuration files (see <xref linkend=\"sec-multipath-conf-file-precedence\"/> ). In the following example, a device <literal>SOMECORP STORAGE</literal> will use <literal>fast_io_fail_tmo 15</literal> ."
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1600
#, no-c-format
msgid "\n"
      "devices {\n"
      "    device {\n"
      "        vendor SOMECORP\n"
      "        product STOR\n"
      "        fast_io_fail_tmo 10\n"
      "    }\n"
      "    device {\n"
      "        vendor SOMECORP\n"
      "        product .*\n"
      "        fast_io_fail_tmo 15\n"
      "    }\n"
      "}"
msgstr ""

#. Tag: term
#: storage_multipath.xml:1616
#, no-c-format
msgid "multipaths"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1618
#, no-c-format
msgid "Settings for individual multipath devices. This section is a list of <literal>multipath</literal> subsections. Values override the <literal>defaults</literal> and <literal>devices</literal> sections."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1626
#, no-c-format
msgid "overrides"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1628
#, no-c-format
msgid "Settings that override values from all other sections."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1637
#, no-c-format
msgid "Applying <filename>multipath.conf</filename> modifications"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1638
#, no-c-format
msgid "To apply the configuration changes, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1641
#, no-c-format
msgid "&prompt.sudo;multipathd reconfigure"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1642
#, no-c-format
msgid "Do not forget to synchronize with the configuration in the initramfs. See <xref linkend=\"sec-multipath-initrd-sync\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1647
#, no-c-format
msgid "Do not apply settings using <command>multipath</command>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1648
#, no-c-format
msgid "Do not apply new settings with the <command>multipath</command> command while <command>multipathd</command> is running. This may result in an inconsistent and possibly broken setup."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1655
#, no-c-format
msgid "Verifying a modified setup"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1656
#, no-c-format
msgid "It is possible to test modified settings first before they are applied, by running:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1660
#, no-c-format
msgid "&prompt.sudo;multipath -d -v2"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1661
#, no-c-format
msgid "This command shows new maps to be created with the proposed topology, but not whether maps will be removed/flushed. To obtain more information, run with increased verbosity:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1666
#, no-c-format
msgid "&prompt.sudo;multipath -d -v3 2&gt;&amp;1 | less"
msgstr ""

#. Tag: title
#: storage_multipath.xml:1671
#, no-c-format
msgid "Configuring policies for failover, queuing, and failback"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1673
#, no-c-format
msgid "The goal of multipath I/O is to provide connectivity fault tolerance between the storage system and the server. The desired default behavior depends on whether the server is a stand-alone server or a node in a high-availability cluster."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1680
#, no-c-format
msgid "This section discusses the most important <systemitem>multipath-tools</systemitem> configuration parameters for achieving fault tolerance."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1688
#, no-c-format
msgid "polling_interval"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1690
#, no-c-format
msgid "The time interval (in seconds) between health checks for path devices. The default is 5 seconds. Failed devices are checked at this time interval. For healthy devices, the time interval may be increased up to <literal>max_polling_interval</literal> seconds."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1699
#, no-c-format
msgid "detect_checker"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1701
#, no-c-format
msgid "If this is set to <literal>yes</literal> (default, recommended), <command>multipathd</command> automatically detects the best path checking algorithm."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1709
#, no-c-format
msgid "path_checker"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1711
#, no-c-format
msgid "The algorithm used to check path state. If you need to enable the checker, disable <literal>detect_checker</literal> as follows:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:1715
#, no-c-format
msgid "\n"
      "defaults {\n"
      "\t  detect_checker no\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1719
#, no-c-format
msgid "The following list contains only the most important algorithms. See <systemitem>multipath.conf(5)</systemitem> for the full list."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1725
#, no-c-format
msgid "tur"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1727
#, no-c-format
msgid "Send TEST UNIT READY command. This is the default for SCSI devices with ALUA support."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1734
#, no-c-format
msgid "directio"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1736
#, no-c-format
msgid "Read a device sector using asynchronous I/O (aio)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1742
#, no-c-format
msgid "rdac"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1744
#, no-c-format
msgid "Device-specific checker for NetAPP E-Series and similar arrays."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1750
#, no-c-format
msgid "none"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1752
#, no-c-format
msgid "No path checking is performed."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1761
#, no-c-format
msgid "checker_timeout"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1763
#, no-c-format
msgid "If a device does not respond to a path checker command in the given time, it is considered failed. The default is the kernel's SCSI command timeout for the device (usually 30 seconds)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1771
#, no-c-format
msgid "fast_io_fail_tmo"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1773
#, no-c-format
msgid "If an error on the SCSI transport layer is detected (for example on a Fibre Channel remote port), the kernel transport layer waits for this amount of time (in seconds) for the transport to recover. After that, the path device fails with &ldquo;transport offline&rdquo; state. This is very useful for multipath, because it allows a quick path failover for a frequently occurring class of errors. The value must match typical time scale for reconfiguration in the fabric. The default value of 5 seconds works well for Fibre Channel. Other transports, like iSCSI, may require longer timeouts."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1787
#, no-c-format
msgid "dev_loss_tmo"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1789
#, no-c-format
msgid "If a SCSI transport endpoint (for example a Fibre Channel remote port) is not reachable any more, the kernel waits for this amount of time (in seconds) for the port to reappear until it removes the SCSI device node for good. Device node removal is a complex operation which is prone to race conditions or deadlocks and should best be avoided. We therefore recommend setting this to a high value. The special value <literal>infinity</literal> is supported. The default is 10 minutes. To avoid deadlock situations, <command>multipathd</command> ensures that I/O queuing (see <literal>no_path_retry</literal> ) is stopped before <literal>dev_loss_tmo</literal> expires."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1804
#, no-c-format
msgid "no_path_retry"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1806
#, no-c-format
msgid "Determine what happens if all paths of a given multipath map have failed. The possible values are:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:1812
#, no-c-format
msgid "fail"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1814
#, no-c-format
msgid "Fail I/O on the multipath map. This will cause I/O errors in upper layers such as mounted file systems. The affected file systems, and possibly the entire host, will enter degraded mode."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1822
#, no-c-format
msgid "queue"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1824
#, no-c-format
msgid "I/O on the multipath map is queued in the device mapper layer and sent to the device when path devices become available again. This is the safest option to avoid losing data, but it can have negative effects if the path devices do not get reinstated for a long time. Processes reading from the device will hang in uninterruptible sleep ( <literal>D</literal> ) state. Queued data occupies memory, which becomes unavailable for processes. Eventually, memory will be exhausted."
msgstr ""

#. Tag: para
#: storage_multipath.xml:1839
#, no-c-format
msgid "<replaceable>N</replaceable> is a positive integer. Keep the map device in queuing mode for <replaceable>N</replaceable> polling intervals. When the time elapses, <command>multipathd</command> fails the map device. If <literal>polling_interval</literal> is 5 seconds and <literal>no_path_retry</literal> is 6, <command>multipathd</command> will queue I/O for approximately 6 * 5s = 30s before failing I/O on the map device."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1854
#, no-c-format
msgid "flush_on_last_del"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1856
#, no-c-format
msgid "If set to <literal>yes</literal> and all path devices of a map are deleted (as opposed to just failed), fail all I/O in the map before removing it. The default is <literal>no</literal> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1864
#, no-c-format
msgid "deferred_remove"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1866
#, no-c-format
msgid "If set to <literal>yes</literal> and all path devices of a map are deleted, wait for holders to close the file descriptors for the map device before flushing and removing it. If paths reappear before the last holder closed the map, the deferred remove operation will be cancelled. The default is <literal>no</literal> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1876
#, no-c-format
msgid "failback"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1878
#, no-c-format
msgid "If a failed path device in an inactive path group recovers, <command>multipathd</command> reevaluates the path group priorities of all path groups (see <xref linkend=\"sec-multipath-grouping\"/> ). After the reevaluation, the highest-priority path group may be one of the currently inactive path groups. This parameter determines what happens in this situation."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1887
#, no-c-format
msgid "Observe vendor recommendations"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1888
#, no-c-format
msgid "The optimal failback policy depends on the property of the storage device. It is therefore strongly encouraged to verify <option>failback</option> settings with the storage vendor."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1896
#, no-c-format
msgid "manual"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1898
#, no-c-format
msgid "Nothing happens unless the administrator runs a <command>multipathd switchgroup</command> (see <xref linkend=\"sec-multipath-mpiotools-multipathd\"/> )."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1906
#, no-c-format
msgid "immediate"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1908
#, no-c-format
msgid "The highest-priority path group is activated immediately. This is often beneficial for performance, especially on stand-alone servers, but it should not be used for arrays on which the change of the path group is a costly operation."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1917
#, no-c-format
msgid "followover"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1919
#, no-c-format
msgid "Like <literal>immediate</literal> , but only perform failback when the path that has just become active is the only healthy path in its path group. This is useful for cluster configurations: It keeps a node from automatically failing back when another node requested a failover before."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1929
#, no-c-format
msgid "<replaceable>N</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1931
#, no-c-format
msgid "<replaceable>N</replaceable> is a positive integer. Wait for <replaceable>N</replaceable> polling intervals before activating the highest priority path group. If the priorities change again during this time, the wait period starts anew."
msgstr ""

#. Tag: term
#: storage_multipath.xml:1943
#, no-c-format
msgid "eh_deadline"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1945
#, no-c-format
msgid "Set an approximate upper limit for the time (in seconds) spent in SCSI error handling if devices are unresponsive and SCSI commands time out without error response. When the deadline has elapsed, the kernel will perform a full HBA reset."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1962
#, no-c-format
msgid "Queuing policy on stand-alone servers"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1963
#, no-c-format
msgid "When you configure multipath I/O for a stand-alone server, a <literal>no_path_retry</literal> setting with value <literal>queue</literal> protects the server operating system from receiving I/O errors as long as possible. It queues messages until a multipath failover occurs. If &ldquo;infinite&rdquo; queuing is not desired (see above), select a numeric value that is deemed high enough for the storage paths to recover under ordinary circumstances (see above)."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1975
#, no-c-format
msgid "Queuing policy on clustered servers"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1976
#, no-c-format
msgid "When you configure multipath I/O for a node in a high-availability cluster, you want multipath to report the I/O failure to trigger the resource failover instead of waiting for a multipath failover to be resolved. In cluster environments, you must modify the <literal>no_path_retry </literal> setting so that the cluster node receives an I/O error in relation to the cluster verification process (recommended to be 50% of the heartbeat tolerance) if the connection is lost to the storage system. In addition, you want the multipath <literal>failback</literal> to be set to <literal>manual</literal> or <literal>followover</literal> to avoid a ping-pong of resources because of path failures."
msgstr ""

#. Tag: title
#: storage_multipath.xml:1991
#, no-c-format
msgid "Configuring path grouping and priorities"
msgstr ""

#. Tag: para
#: storage_multipath.xml:1993
#, no-c-format
msgid "Path devices in multipath maps are grouped in <emphasis>path groups</emphasis> , also called <emphasis>priority groups</emphasis> . Only one path group receives I/O at any given time. <command>multipathd</command> assigns <emphasis>priorities</emphasis> to path groups. Out of the path groups with active paths, the group with the highest priority is activated according to the configured failback policy for the map (see <xref linkend=\"sec-multipath-policies-default\" xrefstyle=\"SecTitleOnPage\"/> ). The priority of a path group is the average of the priorities of the active path devices in the path group. The priority of a path device is an integer value calculated from the device properties (see the description of the <literal>prio</literal> option below)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2007
#, no-c-format
msgid "This section describes the <filename>multipath.conf</filename> configuration parameters relevant for priority determination and path grouping."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2014
#, no-c-format
msgid "path_grouping_policy"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2016
#, no-c-format
msgid "Specifies the method used to combine paths into groups. Only the most important policies are listed here; see <systemitem>multipath.conf(5)</systemitem> for other less frequently used values."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2024
#, no-c-format
msgid "failover"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2026
#, no-c-format
msgid "One path per path group. This setting is useful for traditional &ldquo;active/passive&rdquo; storage arrays."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2033
#, no-c-format
msgid "multibus"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2035
#, no-c-format
msgid "All paths in one path group. This is useful for traditional &ldquo;active/active&rdquo; arrays."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2042
#, no-c-format
msgid "group_by_prio"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2044
#, no-c-format
msgid "Path devices with the same path priority are grouped together. This option is useful for modern arrays that support asymmetric access states, like ALUA. Combined with the <literal>alua</literal> or <literal>sysfs</literal> priority algorithms, the priority groups set up by <command>multipathd</command> will match the primary target port groups that the storage array reports through ALUA-related SCSI commands."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2056
#, no-c-format
msgid "Using the same policy names, the path grouping policy for a multipath map can be changed temporarily with the command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2060
#, no-c-format
msgid "&prompt.sudo;multipath -p <replaceable>POLICY_NAME</replaceable> <replaceable>MAP_NAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2066
#, no-c-format
msgid "If set to <literal>on</literal> or <literal>fpin</literal> , &ldquo;marginal&rdquo; path devices are sorted into a separate path group. This is independent of the path grouping algorithm in use. See <xref linkend=\"sec-multipath-marginal\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2075
#, no-c-format
msgid "detect_prio"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2077
#, no-c-format
msgid "If this is set to <literal>yes</literal> (default, recommended), <command>multipathd</command> automatically detects the best algorithm to set the priority for a storage device and ignores the <literal>prio</literal> setting. In practice, this means using the <literal>sysfs</literal> prio algorithm if ALUA support is detected."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2087
#, no-c-format
msgid "prio"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2089
#, no-c-format
msgid "Determines the method to derive priorities for path devices. If you override this, disable <literal>detect_prio</literal> as follows:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2093
#, no-c-format
msgid "\n"
      "defaults {\n"
      "\t  detect_prio no\n"
      "}\n"
      "\t"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2098
#, no-c-format
msgid "The following list contains only the most important methods. Several other methods are available, mainly to support legacy hardware. See <systemitem>multipath.conf(5)</systemitem> for the full list."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2105
#, no-c-format
msgid "alua"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2107
#, no-c-format
msgid "Uses SCSI-3 ALUA access states to derive path priority values. The optional <literal>exclusive_pref_bit</literal> argument can be used to change the behavior for devices that have the ALUA &ldquo;preferred primary target port group&rdquo; (PREF) bit set:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2113
#, no-c-format
msgid "\n"
      "\tprio alua\n"
      "\tprio_args exclusive_pref_bit\n"
      "\t      "
msgstr ""

#. Tag: para
#: storage_multipath.xml:2117
#, no-c-format
msgid "If this option is set, &ldquo;preferred&rdquo; paths get a priority bonus over other active/optimized paths. Otherwise, all active/optimized paths are assigned the same priority."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2125
#, no-c-format
msgid "sysfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2127
#, no-c-format
msgid "Like <literal>alua</literal> , but instead of sending SCSI commands to the device, it obtains the access states from <systemitem>sysfs</systemitem> . This causes less I/O load than <literal>alua</literal> , but is not suitable for all storage arrays with ALUA support."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2137
#, no-c-format
msgid "const"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2139
#, no-c-format
msgid "Uses a constant value for all paths."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2145
#, no-c-format
msgid "path_latency"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2147
#, no-c-format
msgid "Measures I/O latency (time from I/O submission to completion) on path devices, and assigns higher priority to devices with lower latency. See <systemitem>multipath.conf(5)</systemitem> for details. This algorithm is still experimental."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2156
#, no-c-format
msgid "weightedpath"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2158
#, no-c-format
msgid "Assigns a priority to paths based on their name, serial number, Host:Bus:Target:Lun ID (HBTL), or Fibre Channel WWN. The priority value does not change over time. The method requires a <literal>prio_args</literal> argument, see <systemitem>multipath.conf(5)</systemitem> for details. For example:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2165
#, no-c-format
msgid "\n"
      "\tprio weightedpath\n"
      "\tprio_args \"hbtl 2:.*:.*:.* 10 hbtl 3:.*:.*:.* 20 hbtl .* 1\"\n"
      "\t      "
msgstr ""

#. Tag: para
#: storage_multipath.xml:2169
#, no-c-format
msgid "This assigns devices on SCSI host 3 a higher priority than devices on SCSI host 2, and all others a lower priority."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2179
#, no-c-format
msgid "prio_args"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2181
#, no-c-format
msgid "Some <literal>prio</literal> algorithms require extra arguments. These are specified in this option, with syntax depending on the algorithm. See above."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2189
#, no-c-format
msgid "hardware_handler"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2191
#, no-c-format
msgid "The name of a kernel module that the kernel uses to activate path devices when switching path groups. This option has no effect with recent kernels because hardware handlers are autodetected. See <xref linkend=\"sec-multipath-hardware-handlers\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2201
#, no-c-format
msgid "path_selector"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2203
#, no-c-format
msgid "The name of a kernel module that is used for load balancing between the paths of the active path group. The available choices depend on the kernel configuration. For historical reasons, the name must always be enclosed in quotes and followed by a &ldquo;0&rdquo; in <filename>multipath.conf</filename> , like this:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2210
#, no-c-format
msgid "path_selector \"queue-length 0\""
msgstr ""

#. Tag: term
#: storage_multipath.xml:2213
#, no-c-format
msgid "service-time"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2215
#, no-c-format
msgid "Estimates the time pending I/O will need to complete on all paths, and selects the path with the lowest value. This is the default."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2222
#, no-c-format
msgid "historical-service-time"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2224
#, no-c-format
msgid "Estimates future service time based on the historical service time (about which it keeps a moving average) and the number of outstanding requests. Estimates the time pending I/O will need to complete on all paths, and selects the path with the lowest value."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2233
#, no-c-format
msgid "queue-length"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2235
#, no-c-format
msgid "Selects the path with the lowest number of currently pending I/O requests."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2242
#, no-c-format
msgid "round-robin"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2244
#, no-c-format
msgid "Switches paths in round-robin fashion. The number of requests submitted to a path before switching to the next one can be adjusted with the options <literal>rr_min_io_rq</literal> and <literal>rr_weight</literal> ."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2253
#, no-c-format
msgid "io-affinity"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2255
#, no-c-format
msgid "This path selector currently does not work with <systemitem>multipath-tools</systemitem> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2266
#, no-c-format
msgid "After modifying the <filename>/etc/multipath.conf</filename> file, apply your settings as described in <xref linkend=\"sec-multipath-conf-file-apply\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2274
#, no-c-format
msgid "Selecting devices for multipathing"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2276
#, no-c-format
msgid "On systems with multipath devices, you might want to avoid setting up multipath maps on some devices (typically local disks). <systemitem>multipath-tools</systemitem> offers various means for configuring which devices should be considered multipath path devices."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2284
#, no-c-format
msgid "multipath on local disks"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2285
#, no-c-format
msgid "In general, there is nothing wrong with setting up &ldquo;degraded&rdquo; multipath maps with just a single device on top of local disks. It works fine and requires no extra configuration. However, some administrators find this confusing or generally oppose this sort of unnecessary multipathing. Also, the multipath layer causes a slight performance overhead. See also <xref linkend=\"sec-multipath-planning-type-noroot\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2302
#, no-c-format
msgid "The <literal>blacklist</literal> section in <filename>multipath.conf</filename>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2303
#, no-c-format
msgid "The <filename>/etc/multipath.conf</filename> file can contain a <literal>blacklist</literal> section that lists all devices that should be ignored by <command>multipathd</command> and <command>multipath</command> . The following example illustrates possible ways of excluding devices:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2310
#, no-c-format
msgid "blacklist {\n"
      "    wwid 3600605b009e7ed501f0e45370aaeb77f <co xml:id=\"mp-co-bl-wwid\"/>\n"
      "    device {  <co xml:id=\"mp-co-bl-device\"/>\n"
      "        vendor ATA\n"
      "        product .*\n"
      "    }\n"
      "    protocol scsi:sas <co xml:id=\"mp-co-bl-prot\"/>\n"
      "    property SCSI_IDENT_LUN_T10 <co xml:id=\"mp-co-bl-prop\"/>\n"
      "    devnode \"!^dasd[a-z]*\" <co xml:id=\"mp-co-bl-devnode\"/>\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2322
#, no-c-format
msgid "<literal>wwid</literal> entries are ideal for excluding specific devices, for example, the root disk."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2328
#, no-c-format
msgid "This <literal>device</literal> section excludes all ATA devices (the regular expression for <literal>product</literal> matches anything)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2334
#, no-c-format
msgid "Excluding by <literal>protocol</literal> allows excluding devices using certain bus types, here SAS. Other common protocol values are <literal>scsi:fcp</literal> , <literal>scsi:iscsi</literal> , and <literal>ccw</literal> . See <systemitem>multipath.conf(5)</systemitem> for more. To see the protocols that paths in your systems are using, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2342
#, no-c-format
msgid "&prompt.sudo;multipathd show paths format \"%d %P\""
msgstr ""

#. Tag: para
#: storage_multipath.xml:2343
#, no-c-format
msgid "This form is supported since &productnameshort;&nbsp;15 SP1 and &productnameshort;&nbsp;12 SP5."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2349
#, no-c-format
msgid "This <literal>property</literal> entry excludes devices that have a certain udev property (no matter what the value of the property is)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2355
#, no-c-format
msgid "Excluding devices by <literal>devnode</literal> is only recommended for classes of devices using regular expressions, like in the example, which excludes everything but DASD devices. Using this for individual devices like <filename>sda</filename> is discouraged because device node names are not persistent."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2362
#, no-c-format
msgid "The example illustrates special syntax that is only supported in the <literal>blacklist</literal> and <literal>blacklist_exceptions</literal> sections: Prefixing the regular expression with an exclamation mark ( <literal>!</literal> ) negates the match. Note that the exclamation mark must appear within double quotes."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2372
#, no-c-format
msgid "By default, <systemitem>multipath-tools</systemitem> ignores all devices except SCSI, DASD, or NVMe. Technically, the built-in devnode exclude list is this negated regular expression:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2377
#, no-c-format
msgid "devnode !^(sd[a-z]|dasd[a-z]|nvme[0-9])"
msgstr ""

#. Tag: title
#: storage_multipath.xml:2381
#, no-c-format
msgid "The <literal>blacklist exceptions</literal> section in <filename>multipath.conf</filename>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2382
#, no-c-format
msgid "Sometimes it is desired to configure only very specific devices for multipathing. In this case, devices are excluded by default, and exceptions are defined for devices that should be part of a multipath map. The <literal>blacklist_exceptions</literal> section exists for this purpose. It is typically used like in the following example, which excludes everything except storage with product string &ldquo;NETAPP&rdquo;:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2390
#, no-c-format
msgid "blacklist {\n"
      "     wwid .*\n"
      "}\n"
      "blacklist_exceptions {\n"
      "     device {\n"
      "         vendor ^NETAPP$\n"
      "         product .*\n"
      "     }\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2399
#, no-c-format
msgid "The <literal>blacklist_exceptions</literal> section supports all methods described for the <literal>blacklist</literal> section above."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2403
#, no-c-format
msgid "The <literal>property</literal> directive in <literal>blacklist_exceptions</literal> is mandatory because every device <emphasis>must</emphasis> have at least one of the &ldquo;allowed&rdquo; udev properties to be considered a path device for multipath (the value of the property does not matter). The built-in default for <literal>property</literal> is"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2411
#, no-c-format
msgid "property (SCSI_IDENT_|ID_WWN)"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2412
#, no-c-format
msgid "Only devices that have at least one udev property matching this regular expression will be included."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2419
#, no-c-format
msgid "Other options affecting device selection"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2420
#, no-c-format
msgid "Besides the <literal>blacklist</literal> options, there are several other settings in <filename>/etc/multipath.conf</filename> that affect which devices are considered multipath path devices."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2427
#, no-c-format
msgid "find_multipaths"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2429
#, no-c-format
msgid "This option controls the behavior of <command>multipath</command> and <command>multipathd</command> when a device that is not excluded is first encountered. The possible values are:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:2436
#, no-c-format
msgid "greedy"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2438
#, no-c-format
msgid "Every device non-excluded by <literal>blacklist</literal> in <filename>/etc/multipath.conf</filename> is included. This is the default on &sle;. If this setting is active, the only way to prevent devices from being added to multipath maps is setting them as excluded."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2448
#, no-c-format
msgid "strict"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2450
#, no-c-format
msgid "Every device is excluded, even if it is not present in the <literal>blacklist</literal> section of <filename>/etc/multipath.conf</filename> , unless its WWID is listed in the file <filename>/etc/multipath/wwids</filename> . It requires manual maintenance of the WWIDs file (see note below)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2460
#, no-c-format
msgid "yes"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2462
#, no-c-format
msgid "Devices are included if they meet the conditions for <literal>strict</literal> , or if at least one other device with the same WWID exists in the system."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2470
#, no-c-format
msgid "smart"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2472
#, no-c-format
msgid "If a new WWID is first encountered, it is temporarily marked as multipath path device. <command>multipathd</command> waits for some time for additional paths with the same WWID to appear. If this happens, the multipath map is set up as usual. Otherwise, when the timeout expires, the single device is released to the system as non-multipath device. The timeout is configurable with the option <option>find_multipaths_timeout</option> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2481
#, no-c-format
msgid "This option depends on <command>systemd</command> features which are only available on &sles;&nbsp;15."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2489
#, no-c-format
msgid "Maintaining <filename>/etc/multipath/wwids</filename>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2490
#, no-c-format
msgid "<systemitem>multipath-tools</systemitem> keeps a record of previously setup multipath maps in the file <filename>/etc/multipath/wwids</filename> (the &ldquo;WWIDs file&rdquo;). Devices with WWIDs listed in this file are considered multipath path devices. The file is important for multipath device selection for all values of <option>find_multipaths</option> except <literal>greedy</literal> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2499
#, no-c-format
msgid "If <option>find_multipaths</option> is set to <literal>yes</literal> or <literal>smart</literal> , <command>multipathd</command> adds WWIDs to <filename>/etc/multipath/wwids</filename> after setting up new maps, so that these maps will be detected more quickly in the future."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2505
#, no-c-format
msgid "The WWIDs file can be manually modified:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2509
#, no-c-format
msgid "\n"
      "&prompt.sudo;multipath -a 3600a098000aad1e3000064e45f2c2355 <co xml:id=\"mp-co-wwid-a\"/>\n"
      "&prompt.sudo;multipath -w /dev/sdf <co xml:id=\"mp-co-wwid-w\"/>\n"
      "       "
msgstr ""

#. Tag: para
#: storage_multipath.xml:2515
#, no-c-format
msgid "This command adds the given WWID to <filename>/etc/multipath/wwids</filename> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2521
#, no-c-format
msgid "This command removes the WWID of the given device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2527
#, no-c-format
msgid "In the <literal>strict</literal> mode, this is the only way to add new multipath devices. After modifying the WWIDs file, run <command>multipathd reconfigure</command> to apply the changes. We recommend rebuilding the initramfs after applying changes to the WWIDs file (see <xref linkend=\"sec-multipath-initrd-sync\"/> )."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2538
#, no-c-format
msgid "allow_usb_devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2540
#, no-c-format
msgid "If this option is set to <literal>yes</literal> , USB storage devices are considered for multipathing. The default is <literal>no</literal> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2550
#, no-c-format
msgid "Multipath device names and WWIDs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2552
#, no-c-format
msgid "<command>multipathd</command> and <command>multipath</command> internally use WWIDs to identify devices. WWIDs are also used as map names by default. For convenience, <systemitem>multipath-tools</systemitem> supports assigning simpler, easier memorizable names to multipath devices."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2560
#, no-c-format
msgid "WWIDs and device Identification"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2561
#, no-c-format
msgid "It is crucial for multipath operation to reliably detect devices that represent paths to the same storage volume. <systemitem>multipath-tools</systemitem> uses the device's World Wide Identification (WWID) for this purpose (sometimes also referred to as Universally Unique ID (UUID) or Unique ID (UID â€” do not confuse with &ldquo;User ID&rdquo;). The WWID of a map device is always the same as the WWID of its path devices."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2570
#, no-c-format
msgid "By default, WWIDs of path devices are inferred from udev properties of the devices, which are determined in udev rules, either by reading device attributes from the sysfs file system or by using specific I/O commands. To see the udev properties of a device, run:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2576
#, no-c-format
msgid "&prompt.user;udevadm info /dev/<replaceable>sdx</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2577
#, no-c-format
msgid "The udev properties used by <systemitem>multipath-tools</systemitem> to derive WWIDs are:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2583
#, no-c-format
msgid "<literal>ID_SERIAL</literal> for SCSI devices (do not confuse this with the device's &ldquo;serial number&rdquo;)"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2589
#, no-c-format
msgid "<literal>ID_UID</literal> for DASD devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2594
#, no-c-format
msgid "<literal>ID_WWN</literal> for NVMe devices"
msgstr ""

#. Tag: title
#: storage_multipath.xml:2600
#, no-c-format
msgid "Avoid changing WWIDs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2601
#, no-c-format
msgid "It is impossible to change the WWID of a multipath map which is in use. If the WWID of mapped path devices changes because of a configuration change, the map needs to be destroyed, and a new map needs to be set up with the new WWID. This cannot be done while the old map is in use. In extreme cases, data corruption may result from WWID changes. It must therefore be <emphasis>strictly avoided</emphasis> to apply configuration changes that would cause map WWIDs to change."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2610
#, no-c-format
msgid "It is allowed to enable the <literal>uid_attrs</literal> option in <filename>/etc/multipath.conf</filename> , see <xref linkend=\"sec-multipath-conf-misc\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2619
#, no-c-format
msgid "Setting aliases for multipath maps"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2620
#, no-c-format
msgid "Arbitrary map names can be set in the <literal>multipaths</literal> section of <filename>/etc/multipath.conf</filename> as follows:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2624
#, no-c-format
msgid "multipaths {\n"
      "    multipath {\n"
      "        wwid 3600a098000aad1e3000064e45f2c2355\n"
      "        alias postgres\n"
      "    }\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2630
#, no-c-format
msgid "Aliases are expressive, but they need to be assigned to each map individually, which may be cumbersome on large systems."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2637
#, no-c-format
msgid "Using autogenerated user-friendly names"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2638
#, no-c-format
msgid "<systemitem>multipath-tools</systemitem> also supports autogenerated aliases, so-called &ldquo;user-friendly names&rdquo;. The naming scheme of the aliases follows the pattern: mpath <replaceable>INDEX</replaceable> , where <replaceable>INDEX</replaceable> is a lower case letter (starting with <literal>a</literal> ). So the first autogenerated alias is <literal>mpatha</literal> , the next one is <literal>mpathb</literal> , <literal>mpathc</literal> to <literal>mpathz</literal> . After that follows <literal>mpathaa</literal> , <literal>mpathab</literal> , and so on."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2648
#, no-c-format
msgid "Map names are only useful if they are persistent. <systemitem>multipath-tools</systemitem> keeps track of the assigned names in the file <filename>/etc/multipath/bindings</filename> (the &ldquo;bindings file&rdquo;). When a new map is created, the WWID is first looked up in this file. If it is not found, the lowest available user-friendly name is assigned to it."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2656
#, no-c-format
msgid "Explicit aliases as discussed in <xref linkend=\"sec-multipath-alias\"/> take precedence over user-friendly names."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2660
#, no-c-format
msgid "The following options in <filename>/etc/multipath.conf</filename> affect user-friendly names:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:2666
#, no-c-format
msgid "user_friendly_names"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2668
#, no-c-format
msgid "If set to <literal>yes</literal> , user-friendly names are assigned and used. Otherwise, the WWID is used as a map name unless an alias is configured."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2676
#, no-c-format
msgid "alias_prefix"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2678
#, no-c-format
msgid "The prefix used to create user-friendly names, <literal>mpath</literal> by default."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2686
#, no-c-format
msgid "Map names in high-availability clusters"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2687
#, no-c-format
msgid "For cluster operations, device names must be identical across all nodes in the cluster. The <systemitem>multipath-tools</systemitem> configuration must be kept synchronized between nodes. If <literal>user_friendly_names</literal> is used, <command>multipathd</command> may modify the <filename>/etc/multipath/bindings</filename> file at runtime. Such modifications must be replicated dynamically to all nodes. The same applies to <filename>/etc/multipath/wwids</filename> (see <xref linkend=\"sec-multipath-device-select-other\" xrefstyle=\"SecTitleOnPage\"/> )."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2700
#, no-c-format
msgid "Changing map names at runtime"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2701
#, no-c-format
msgid "It is possible to change map names at runtime. Use any of the methods described in this section and run <command>multipathd reconfigure</command> , and the map names will change without disrupting the system operation."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2711
#, no-c-format
msgid "Referring to multipath maps"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2712
#, no-c-format
msgid "Technically, multipath maps are Device Mapper devices, which have generic names of the form <filename>/dev/dm-<replaceable>n</replaceable></filename> with an integer number <replaceable>n</replaceable> . These names are not persistent. They should <emphasis>never</emphasis> be used to refer to the multipath maps. <command>udev</command> creates various symbolic links to these devices, which are more suitable as persistent references. These links differ with respect to their invariance against certain configuration changes. The following typical example shows various symlinks all pointing to the same device."
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2724
#, no-c-format
msgid "/dev/disk/by-id/dm-name-mpathb<co xml:id=\"mp-ref-dm-name\"/> -&gt; ../../dm-1\n"
      "/dev/disk/by-id/dm-uuid-mpath-3600a098000aad73f00000a3f5a275dc8<co xml:id=\"mp-ref-dm-uuid\"/> -&gt; ../../dm-1\n"
      "/dev/disk/by-id/scsi-3600a098000aad73f00000a3f5a275dc8<co xml:id=\"mp-ref-scsi\"/> -&gt; ../../dm-1\n"
      "/dev/disk/by-id/wwn-0x600a098000aad73f00000a3f5a275dc8<co xml:id=\"mp-ref-wwn\"/> -&gt; ../../dm-1\n"
      "/dev/mapper/mpathb<co xml:id=\"mp-ref-mapper\"/> -&gt; ../dm-1"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2731
#, no-c-format
msgid "These two links use the map name to refer to the map. Thus, the links will change if the map name changes, for example, if you enable or disable user-friendly names."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2738
#, no-c-format
msgid "This link uses the device mapper UUID, which is the WWID used by <systemitem>multipath-tools</systemitem> prefixed by the string <literal>dm-uuid-mpath-</literal> . It is independent of the map name."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2743
#, no-c-format
msgid "The device mapper UUID is the preferred form to ensure that <emphasis>only multipath devices</emphasis> are referenced. For example, the following line in <filename>/etc/lvm/lvm.conf</filename> rejects all devices except multipath maps:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2749
#, no-c-format
msgid "filter = [ \"a|/dev/disk/by-id/dm-uuid-mpath-.*|\", \"r|.*|\" ]"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2752
#, no-c-format
msgid "These are links that would normally point to path devices. The multipath device took them over, because it has a higher udev link priority (see <systemitem>udev(7)</systemitem> ). When the map is destroyed or multipathing is turned off, they will still exist and point to one of the path devices instead. This provides a means to reference a device by its WWID, whether or not multipathing is active."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2763
#, no-c-format
msgid "For <emphasis role=\"bold\">partitions</emphasis> on multipath maps created by the <command>kpartx</command> tool, there are similar symbolic links, derived from the parent device name or WWID and the partition number:"
msgstr ""

#. Tag: informalexample
#: storage_multipath.xml:2768
#, no-c-format
msgid " <screen>/dev/disk/by-id/dm-name-mpatha-part2 -&gt; ../../dm-5\n"
      "/dev/disk/by-id/dm-uuid-part2-mpath-3600a098000aad1e300000b4b5a275d45 -&gt; ../../dm-5\n"
      "/dev/disk/by-id/scsi-3600a098000aad1e300000b4b5a275d45-part2 -&gt; ../../dm-5\n"
      "/dev/disk/by-id/wwn-0x600a098000aad1e300000b4b5a275d45-part2 -&gt; ../../dm-5\n"
      "/dev/disk/by-partuuid/1c2f70e0-fb91-49f5-8260-38eacaf7992b -&gt; ../../dm-5\n"
      "/dev/disk/by-uuid/f67c49e9-3cf2-4bb7-8991-63568cb840a4 -&gt; ../../dm-5\n"
      "/dev/mapper/mpatha-part2 -&gt; ../dm-5\n"
      "</screen> "
msgstr ""

#. Tag: para
#: storage_multipath.xml:2778
#, no-c-format
msgid "Note that partitions often have <filename>by-uuid</filename> links, too, referring not to the device itself but to the file system it contains. These links are often preferable. They are invariant even if the file system is copied to a different device or partition."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2785
#, no-c-format
msgid "Map names in the initramfs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2786
#, no-c-format
msgid "When <command>dracut</command> builds an initramfs, it creates hard-coded references to devices in the initramfs, using <filename>/dev/mapper/$MAP_NAME</filename> references by default. These hard-coded references will not be found during boot if the map names used in the initramfs do not match the names used during building the initramfs, causing boot failure. Normally this will not happen, because <command>dracut</command> will add all multipath configuration files to the initramfs. But problems can occur if the initramfs is built from a different environment, for example, in the rescue system or during an offline update. To prevent this boot failure, change <command>dracut</command> 's <literal>persistent_policy</literal> setting, as explained in <xref linkend=\"sec-multipath-initrd-persistent\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2804
#, no-c-format
msgid "Miscellaneous options"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2806
#, no-c-format
msgid "This section lists some useful <filename>multipath.conf</filename> options that were not mentioned so far. See <systemitem>multipath.conf(5)</systemitem> for a full list."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2814
#, no-c-format
msgid "verbosity"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2816
#, no-c-format
msgid "Controls the log verbosity of both <command>multipath</command> and <command>multipathd</command> . The command-line option <option>-v</option> overrides this setting for both commands. The value can be between 0 (only fatal errors) and 4 (verbose logging). The default is 2."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2826
#, no-c-format
msgid "uid_attrs"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2828
#, no-c-format
msgid "This option enables an optimization for processing udev events, so-called &ldquo;uevent merging&rdquo;. It is useful in environments in which hundreds of path devices may fail or reappear simultaneously. In order to make sure that path WWIDs do not change (see <xref linkend=\"sec-multipath-conf-file-wwid\" xrefstyle=\"SecTitleOnPage\"/> ), the value should be set exactly like this:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2837
#, no-c-format
msgid "defaults {\n"
      "     uid_attrs \"sd:ID_SERIAL dasd:ID_UID nvme:ID_WWN\"\n"
      "}"
msgstr ""

#. Tag: term
#: storage_multipath.xml:2843
#, no-c-format
msgid "skip_kpartx"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2845
#, no-c-format
msgid "If set to <literal>yes</literal> for a multipath device (default is <literal>no</literal> ), do not create partition devices on top of the given device (see <xref linkend=\"sec-multipath-configuration-partitioning\" xrefstyle=\"SecTitleOnPage\"/> ). Useful for multipath devices used by virtual machines. Previous &productname; releases achieved the same effect with the parameter &ldquo; <literal>features 1 no_partitions</literal> &rdquo;."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2859
#, no-c-format
msgid "max_sectors_kb"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2861
#, no-c-format
msgid "Limits the maximum amount of data sent in a single I/O request for all path devices of the multipath map."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2868
#, no-c-format
msgid "ghost_delay"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2870
#, no-c-format
msgid "On active/passive arrays, it can happen that passive paths (in &ldquo;ghost&rdquo; state) are probed before active paths. If the map was activated immediately and I/O was sent, this would cause a possibly costly path activation. This parameter specifies the time (in seconds) to wait for active paths of the map to appear before activating the map. The default is <literal>no</literal> (no ghost delay)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2881
#, no-c-format
msgid "recheck_wwid"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2883
#, no-c-format
msgid "If set to <literal>yes</literal> (default is <literal>no</literal> ), double-checks the WWID of restored paths after failure, and removes them if the WWID has changed. This is a safety measure against data corruption."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2892
#, no-c-format
msgid "enable_foreign"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2894
#, no-c-format
msgid "<systemitem>multipath-tools</systemitem> provides a plugin API for other multipathing backends than Device Mapper multipath. The API supports monitoring and displaying information about the multipath topology using standard commands like <command>multipath -ll</command> . Modifying the topology is unsupported."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2901
#, no-c-format
msgid "The value of <literal>enable_foreign</literal> is a regular expression to match against foreign library names. The default value is &ldquo; <literal>NONE</literal> &rdquo;."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2906
#, no-c-format
msgid "&productname; ships the <literal>nvme</literal> plugin, which adds support for the native NVMe multipathing (see <xref linkend=\"sec-multipath-hardware-implementations\" xrefstyle=\"SecTitleOnPage\"/> ). To enable the <literal>nvme</literal> plugin, set"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:2913
#, no-c-format
msgid "defaults {\n"
      "    enable_foreign nvme\n"
      "}"
msgstr ""

#. Tag: title
#: storage_multipath.xml:2921
#, no-c-format
msgid "Handling unreliable (&ldquo;marginal&rdquo;) path devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2922
#, no-c-format
msgid "Unstable conditions in the fabric can cause path devices to behave erratically. They exhibit frequent I/O errors, recover, and fail again. Such path devices are also denoted &ldquo;marginal&rdquo; or &ldquo;shaky&rdquo; paths. This section summarizes the options that <systemitem>multipath-tools</systemitem> provides to deal with this problem."
msgstr ""

#. Tag: title
#: storage_multipath.xml:2931
#, no-c-format
msgid "multipathd's marginal path checking algorithm"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2932
#, no-c-format
msgid "If a path device exhibits a second failure (good â†’ bad transition) before <literal>marginal_path_double_failed_time</literal> elapses after the first failure, <command>multipathd</command> starts monitoring the path at a rate of 10 requests per second, for a monitoring period of <literal>marginal_path_err_sample_time</literal> . If the error rate during the monitoring period exceeds <literal>marginal_path_err_rate_threshold</literal> , the path is classified as marginal. After <literal>marginal_path_err_recheck_gap_time</literal> , the path transitions to normal state again."
msgstr ""

#. Tag: para
#: storage_multipath.xml:2944
#, no-c-format
msgid "This algorithm is used if all four numeric <literal>marginal_path_</literal> parameters are set to a positive value, and <literal>marginal_pathgroups</literal> is not set to <literal>fpin</literal> . It is available since &sles;&nbsp;15&nbsp;SP1 and &sles;&nbsp;12&nbsp;SP5."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2954
#, no-c-format
msgid "marginal_path_double_failed_time"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2956
#, no-c-format
msgid "Maximum time (in seconds) between two path failures that triggers path monitoring."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2963
#, no-c-format
msgid "marginal_path_err_sample_time"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2965
#, no-c-format
msgid "Length (in seconds) of the path monitoring interval."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2971
#, no-c-format
msgid "marginal_path_err_rate_threshold"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2973
#, no-c-format
msgid "Minimum error rate (per thousand I/Os)."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2979
#, no-c-format
msgid "marginal_path_err_recheck_gap_time"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2981
#, no-c-format
msgid "Time (in seconds) to keep the path in marginal state."
msgstr ""

#. Tag: term
#: storage_multipath.xml:2987
#, no-c-format
msgid "marginal_pathgroups"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2989
#, no-c-format
msgid "This option is available since &productnameshort;&nbsp;15SP3. Possible values are:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:2995
#, no-c-format
msgid "off"
msgstr ""

#. Tag: para
#: storage_multipath.xml:2997
#, no-c-format
msgid "Marginal state is determined by <command>multipathd</command> (see above). Marginal paths are not reinstated as long as they remain in marginal state. This is the default, and the behavior in &sles; releases before SP3, where the <literal>marginal_pathgroups</literal> option was unavailable."
msgstr ""

#. Tag: term
#: storage_multipath.xml:3007
#, no-c-format
msgid "on"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3009
#, no-c-format
msgid "Similar to the <literal>off</literal> option, but instead of keeping them in the failed state, marginal paths are moved to a separate path group, which will be assigned a lower priority than all other path groups (see <xref linkend=\"sec-multipath-grouping\" xrefstyle=\"SecTitleOnPage\"/> ). Paths in this path group will only be used for I/O if all paths in other path groups have failed."
msgstr ""

#. Tag: term
#: storage_multipath.xml:3022
#, no-c-format
msgid "fpin"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3024
#, no-c-format
msgid "This setting is available from &productnameshort;&nbsp;15SP4. Marginal path state is derived from FPIN events (see below). Marginal paths are moved into a separate path group, as described for <literal>off</literal> . This setting requires no further host-side configuration. It is the recommended way to handle marginal paths on Fibre Channel fabrics that support FPIN."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3033
#, no-c-format
msgid "FPIN-based marginal path detection"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3034
#, no-c-format
msgid "<command>multipathd</command> listens for Fibre Channel Performance Impact Notifications (FPIN). If an FPIN-LI (Link Integrity) event is received for a path device, the path will enter marginal state. This state will last until a RSCN or Link up event is received on the Fibre channel adapter the device is connected to."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3048
#, no-c-format
msgid "A simpler algorithm using the parameters <literal>san_path_err_threshold</literal> , <literal>san_path_err_forget_rate</literal> , and <literal>san_path_err_recovery time</literal> is also available and recommended for &sles;&nbsp;15 (GA). See the &ldquo;Shaky paths detection&rdquo; section in <systemitem>multipath.conf(5)</systemitem> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3059
#, no-c-format
msgid "Best practice"
msgstr ""

#. Tag: title
#: storage_multipath.xml:3062
#, no-c-format
msgid "Best practices for configuration"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3063
#, no-c-format
msgid "The large number of configuration directives is daunting at first. Usually, you can get good results with an empty configuration, unless you are in a clustering environment."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3068
#, no-c-format
msgid "Here are some general recommendations for stand-alone servers. They are <emphasis>not mandatory</emphasis> . See the documentation of the respective parameters in the previous sections for background information."
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3073
#, no-c-format
msgid "\n"
      "defaults {\n"
      "    deferred_remove      yes\n"
      "    find_multipaths      smart\n"
      "    enable_foreign       nvme\n"
      "    marginal_pathgroups  fpin    # 15.4 only, if supported by fabric\n"
      "}\n"
      "devices {\n"
      "    # A catch-all device entry.\n"
      "    device {\n"
      "        vendor                .*\n"
      "        product               .*\n"
      "        dev_loss_tmo          infinity\n"
      "        no_path_retry         60            # 5 minutes\n"
      "        path_grouping_policy  group_by_prio\n"
      "        path_selector         \"historical-service-time 0\"\n"
      "        reservation_key       file          # if using SCSI persistent reservations\n"
      "    }\n"
      "    # Follow up with specific device entries below, they will take precedence.\n"
      "}"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3093
#, no-c-format
msgid "After modifying the <filename>/etc/multipath.conf</filename> file, apply your settings as described in <xref linkend=\"sec-multipath-conf-file-apply\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3101
#, no-c-format
msgid "Interpreting multipath I/O status"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3102
#, no-c-format
msgid "For a quick overview of the multipath subsystem, use <command>multipath -ll</command> or <command>multipathd show topology</command> . The output of these commands has the same format. The former command reads the kernel state, while the latter prints the status of the multipath daemon. Normally both states are equal. Here is an example of the output:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3110
#, no-c-format
msgid "&prompt.sudo;multipathd show topology\n"
      "mpatha<co xml:id=\"mp-co-top-name\"/> (3600a098000aad1e300000b4b5a275d45<co xml:id=\"mp-co-top-wwid\"/>) dm-0<co xml:id=\"mp-co-top-dev\"/> NETAPP,INF-01-00<co xml:id=\"mp-co-top-prod\"/>\n"
      "size=64G features='3 queue_if_no_path pg_init_retries 50'<co xml:id=\"mp-co-top-feat\"/> hwhandler='1 alua'<co xml:id=\"mp-co-top-hwh\"/> wp=rw<co xml:id=\"mp-co-top-wp\"/>\n"
      "|-+- <co xml:id=\"mp-co-top-pg\"/>policy='historical-service-time 2'<co xml:id=\"mp-co-top-ps\"/> prio=50<co xml:id=\"mp-co-top-prio\"/> status=active<co xml:id=\"mp-co-top-pgst\"/>\n"
      "| |-<co xml:id=\"mp-co-top-pp\"/> 3:0:0:1<co xml:id=\"mp-co-top-hbtl\"/> sdb 8:16<co xml:id=\"mp-co-top-sd\"/> active<co xml:id=\"mp-co-top-dmst\"/> ready<co xml:id=\"mp-co-top-st\"/> running<co xml:id=\"mp-co-top-devst\"/>\n"
      "| `- 4:0:0:1 sdf 8:80  active ready running\n"
      "`-+- policy='historical-service-time 2' prio=10 status=enabled\n"
      "  `- 4:0:1:1 sdj 8:144 active ready running"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3120
#, no-c-format
msgid "The map name."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3125
#, no-c-format
msgid "The map WWID (if different from the map name)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3130
#, no-c-format
msgid "The device node name of the map device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3135
#, no-c-format
msgid "The vendor and product name."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3140
#, no-c-format
msgid "A path group. The indented lines below the path group list the path devices that belong to it."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3146
#, no-c-format
msgid "The path selector algorithm used by the path group. The \"2\" can be ignored."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3152
#, no-c-format
msgid "The priority of the path group."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3157
#, no-c-format
msgid "The status of the path group ( <literal>active</literal> , <literal>enabled</literal> , or <literal>disabled</literal> ). The active path group is the one that I/O is currently sent to."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3164
#, no-c-format
msgid "A path device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3169
#, no-c-format
msgid "The bus ID of the device (here, a SCSI Host:Bus:Target:Lun ID)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3174
#, no-c-format
msgid "The device node name and major/minor number of the path device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3179
#, no-c-format
msgid "The kernel device mapper state of the path ( <literal>active</literal> or <literal>failed</literal> )."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3185
#, no-c-format
msgid "The multipath path device state (see below)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3190
#, no-c-format
msgid "The state of the path device in the kernel. This is a device-type specific value. For SCSI, it is either <literal>running</literal> or <literal>offline</literal> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3198
#, no-c-format
msgid "The multipath path device states are:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3208
#, no-c-format
msgid "<literal>ready</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3213
#, no-c-format
msgid "The path is healthy and up"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3220
#, no-c-format
msgid "<literal>ghost</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3225
#, no-c-format
msgid "A passive path in an active/passive array"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3232
#, no-c-format
msgid "<literal>faulty</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3237
#, no-c-format
msgid "The path is down or unreachable"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3244
#, no-c-format
msgid "<literal>i/o timeout</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3249
#, no-c-format
msgid "A checker command timed out"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3256
#, no-c-format
msgid "<literal>i/o pending</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3261
#, no-c-format
msgid "Waiting for the completion of a path checker command"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3268
#, no-c-format
msgid "<literal>delayed</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3273
#, no-c-format
msgid "Path reinstantiation is delayed to avoid \"flapping\""
msgstr ""

#. Tag: para
#: storage_multipath.xml:3280
#, no-c-format
msgid "<literal>shaky</literal>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3285
#, no-c-format
msgid "An unreliable path (emc path checker only)"
msgstr ""

#. Tag: title
#: storage_multipath.xml:3296
#, no-c-format
msgid "Using LVM2 on multipath devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3297
#, no-c-format
msgid "LVM2 has built-in support for detecting multipath devices. It is activated by default in <filename>/etc/lvm/lvm.conf</filename> :"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3301
#, no-c-format
msgid "multipath_component_detection=1"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3302
#, no-c-format
msgid "This works reliably only if LVM2 is also configured to obtain information about device properties from udev:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3306
#, no-c-format
msgid "external_device_info_source=\"udev\""
msgstr ""

#. Tag: para
#: storage_multipath.xml:3307
#, no-c-format
msgid "This is the default in &sle;&nbsp;15 SP4, but not in earlier releases. It is also possible (although normally not necessary) to create a filter expression for LVM2 to ignore all devices except multipath devices. See <xref linkend=\"sec-multipath-referring\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3316
#, no-c-format
msgid "Resolving stalled I/O"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3317
#, no-c-format
msgid "If all paths fail concurrently and I/O is queued, applications may stall for a long time. To resolve this, you can use the following procedure:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3323
#, no-c-format
msgid "Enter the following command at a terminal prompt:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3326
#, no-c-format
msgid "&prompt.sudo;multipathd disablequeueing map <replaceable>MAPNAME</replaceable>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3327
#, no-c-format
msgid "Replace <literal><replaceable>MAPNAME</replaceable></literal> with the correct WWID or mapped alias name for the device."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3331
#, no-c-format
msgid "This command immediately causes all queued I/O to fail and propagates the error to the calling application. File systems will observe I/O errors and switch to read-only mode."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3338
#, no-c-format
msgid "Reactivate queuing by entering the following command:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3341
#, no-c-format
msgid "&prompt.sudo;multipathd restorequeueing <replaceable>MAPNAME</replaceable>"
msgstr ""

#. Tag: title
#: storage_multipath.xml:3347
#, no-c-format
msgid "MD RAID on multipath devices"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3348
#, no-c-format
msgid "MD RAID arrays on top of multipathing are set up automatically by the system's udev rules. No special configuration in <filename>/etc/mdadm.conf</filename> is necessary."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3356
#, no-c-format
msgid "Scanning for new devices without rebooting"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3357
#, no-c-format
msgid "If your system has already been configured for multipathing and you need to add storage to the SAN, you can use the <command>rescan-scsi-bus.sh</command> script to scan for the new devices. The general syntax for the command follows:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3363
#, no-c-format
msgid "&prompt.sudo;rescan-scsi-bus.sh [-a] [-r] --hosts=2-3,5"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3364
#, no-c-format
msgid "Where the options have the following meaning:"
msgstr ""

#. Tag: term
#: storage_multipath.xml:3369
#, no-c-format
msgid "-a"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3371
#, no-c-format
msgid "the option ensures that all SCSI targets are scanned, otherwise only already existing targets will be scanned for new LUNs."
msgstr ""

#. Tag: term
#: storage_multipath.xml:3378
#, no-c-format
msgid "-r"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3380
#, no-c-format
msgid "the option enables the removal of devices which have been removed on the storage side."
msgstr ""

#. Tag: term
#: storage_multipath.xml:3387
#, no-c-format
msgid "--hosts"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3389
#, no-c-format
msgid "the option specifies the list of host bus adapters to scan (the default is to scan all)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3396
#, no-c-format
msgid "Run <command>rescan-scsi-bus.sh --help</command> for help on additional options."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3400
#, no-c-format
msgid "If <command>multipathd</command> is running and new SAN devices are discovered, they should be automatically set up as multipath maps according to the configuration described in <xref linkend=\"sec-multipath-select-devices\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3407
#, no-c-format
msgid "Dell/EMC PowerPath environments"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3408
#, no-c-format
msgid "In EMC PowerPath environments, do not use the <filename>rescan-scsi-bus.sh</filename> utility provided with the operating system or the HBA vendor scripts for scanning the SCSI buses. To avoid potential file system corruption, EMC requires that you follow the procedure provided in the vendor documentation for EMC PowerPath for Linux."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3420
#, no-c-format
msgid "Troubleshooting MPIO"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3422
#, no-c-format
msgid "If a system runs into emergency mode on a system with multipath, printing messages about missing devices, the reason is almost always one of these:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3429
#, no-c-format
msgid "Inconsistent configuration of multipath device selection"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3434
#, no-c-format
msgid "Use of non-existing device references"
msgstr ""

#. Tag: title
#: storage_multipath.xml:3441
#, no-c-format
msgid "Understanding device selection issues"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3442
#, no-c-format
msgid "A block device can only either be part of a multipath map or be used directly (mounted as file system, used as swap, LVM physical volume, or otherwise). If a device is already mounted, an attempt by multipathd to make it part of a multipath map will fail with a &ldquo;Device or resource busy&rdquo; error. Vice-versa, the same error results if <command>systemd</command> attempts to mount a device which has already been made part of a multipath map."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3451
#, no-c-format
msgid "Storage device activation during boot is handled by a complex interaction between <command>systemd</command> , <systemitem>udev</systemitem> , <command>multipathd</command> and some other tools. <systemitem>udev</systemitem> rules play a central role. They set device properties that indicate to other subsystems how a device should be used. The multipath-related udev rules set the following properties for devices that are selected for multipathing:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3460
#, no-c-format
msgid "SYSTEMD_READY=0\n"
      "DM_MULTIPATH_DEVICE_PATH=1"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3462
#, no-c-format
msgid "Partition devices inherit these properties from their parents."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3465
#, no-c-format
msgid "If these properties are not set correctly, if some tool does not respect them, or if they get set too late, a race condition between <command>multipathd</command> and some other subsystem may result. Only one of the contenders can win the race; the other one will see a &ldquo;Device or resource busy&rdquo; error."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3472
#, no-c-format
msgid "One problem in this context is that the tools of the LVM2 suite do not evaluate udev properties by default. They rely on their own logic for determining whether a device is a multipath component, which sometimes does not match the logic of the rest of the system. A workaround for this is described in <xref linkend=\"sec-multipath-lvm\"/> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3480
#, no-c-format
msgid "Example of boot deadlock"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3481
#, no-c-format
msgid "Consider a system with multipathing where the root device is not multipathed, and no devices are excluded from multipath (see <xref linkend=\"vl-multipath-planning-type-noroot-noinitrd\"/> in <xref linkend=\"sec-multipath-planning-type-noroot\"/> ). The root file system is mounted in the initramfs. <command>systemd</command> switches to the root file system and <command>multipathd</command> starts up. Because the device is already mounted, <command>multipathd</command> fails to set up the multipath map for it. Because the root device is not configured in <literal>blacklist</literal> , it is considered a multipath device, and <literal>SYSTEMD_READY=0</literal> is set for it."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3493
#, no-c-format
msgid "Later in the boot process, the system attempts to mount additional file systems like <filename>/var</filename> and <filename>/home</filename> . Usually, these file systems will be on the same device as the root file system, by default as BTRFS subvolumes of the root file system itself. But systemd cannot mount them because of <literal>SYSTEMD_READY=0</literal> . <emphasis>We are in a deadlock</emphasis> : The dm-multipath device cannot be created, and the underlying device is blocked for systemd. The additional file systems cannot be mounted, resulting in boot failure."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3503
#, no-c-format
msgid "<emphasis role=\"bold\">A solution to this problem already exists.</emphasis> <command>multipathd</command> detects this situation and releases the device to <command>systemd</command> which can then proceed mounting the file system. However, it is important to understand the general problem, which can still occur in more subtle ways."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3514
#, no-c-format
msgid "Understanding device referencing issues"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3515
#, no-c-format
msgid "An example of a device referencing issue has been given in <xref linkend=\"sec-multipath-initrd-persistent\"/> . Typically, there are multiple symbolic links pointing to a device node (see <xref linkend=\"sec-multipath-referring\"/> ). But these links do not always exist; <command>udev</command> creates them according to the current udev rules. For example, if multipathing is off, symbolic links under <filename>/dev/mapper/</filename> for multipath devices will be missing. Thus, any reference to a <filename>/dev/mapper/</filename> device will fail."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3526
#, no-c-format
msgid "Such references can appear in various places, notably in <filename>/etc/fstab</filename> and <filename>/etc/crypttab</filename> , in the initramfs, or even on the kernel command line."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3531
#, no-c-format
msgid "The safest way to circumvent this problem is to avoid using the kind of device references that are not persistent between boots or depend on system configuration. We generally recommend referring to file systems (and similar entities like swap space) by properties of the file system itself (like UUID or label) rather than the containing device. If such references are not available and device references are required, for example, in <filename>/etc/crypttab</filename> , the options should be evaluated carefully. For example, in <xref linkend=\"sec-multipath-referring\"/> , the best option might be the <filename>/dev/disk/by-id/wwn-</filename> link because it would also work with <literal>multipath=off</literal> ."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3546
#, no-c-format
msgid "Troubleshooting steps in emergency mode"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3547
#, no-c-format
msgid "As there are many error situations that differ in subtle ways, it is impossible to provide a step-by-step recovery guide. But with the background knowledge from the previous subsections, you should be able to figure out the problem if a system runs into emergency mode because of multipathing issues. Before you begin debugging, make sure you have checked the following questions:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3557
#, no-c-format
msgid "Is the multipath service enabled?"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3562
#, no-c-format
msgid "Is the multipath dracut module included in the initramfs?"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3567
#, no-c-format
msgid "Is my root device configured as a multipath device? If not, is the root device properly excluded from multipath as described in <xref linkend=\"sec-multipath-blacklist\"/> , or are you relying on the absence of the multipath module in the initramfs (see <xref linkend=\"sec-multipath-planning-type-noroot\"/> )?"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3576
#, no-c-format
msgid "Does the system enter emergency mode before or after switching to the real root file system?"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3582
#, no-c-format
msgid "If you are unsure with respect to the last question, here is a sample dracut emergency prompt as it would be printed before switching root:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3586
#, no-c-format
msgid "Generating \"/run/initramfs/rdsosreport.txt\"\n"
      "Entering emergency mode. Exit the shell to continue.\n"
      "Type \"journalctl\" to view system logs.\n"
      "\n"
      "You might want to save \"/run/initramfs/rdsosreport.txt\" to a USB stick or /boot\n"
      "after mounting them and attach it to a bug report.\n"
      "\n"
      "Give root password for maintenance\n"
      "(or press Control-D to continue):"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3595
#, no-c-format
msgid "The mention of <filename>rdsosreport.txt</filename> is a clear indication that the system is still running from the initramfs. If you are still uncertain, log in and check for the existence of the file <filename>/etc/initrd-release</filename> . This file exists only in an initramfs environment."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3602
#, no-c-format
msgid "If emergency mode is entered after switching root, the emergency prompt looks similar, but <filename>rdsosreport.txt</filename> is not mentioned:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3606
#, no-c-format
msgid "Timed out waiting for device dev-disk-by\\x2duuid-c4a...cfef77d.device.\n"
      "[DEPEND] Dependency failed for Local File Systems.\n"
      "[DEPEND] Dependency failed for Postfix Mail Transport Agent.\n"
      "Welcome to emergency shell\n"
      "Give root password for maintenance\n"
      "(or press Control-D to continue):"
msgstr ""

#. Tag: title
#: storage_multipath.xml:3613
#, no-c-format
msgid "Steps for analyzing the situation in emergency mode"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3615
#, no-c-format
msgid "Try to figure out what failed by examining failed systemd units and the journal."
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3619
#, no-c-format
msgid "&prompt.root;systemctl --failed\n"
      "&prompt.root;journalctl -b -o short-monotonic"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3621
#, no-c-format
msgid "When looking at the journal, determine the <emphasis>first</emphasis> failed unit. When you have found the first failure, examine the messages before and around that point in time very carefully. Are there any warnings or other suspicious messages?"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3627
#, no-c-format
msgid "Watch out for the root switch (\" <literal>Switching root.</literal> \") and for messages about SCSI devices, device mapper, multipath, and LVM2. Look for <command>systemd</command> messages about devices and file systems (\" <literal>Found device</literal> â€¦\", \" <literal>Mounting</literal> â€¦\", \" <literal>Mounted</literal> â€¦\")."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3636
#, no-c-format
msgid "Examine the existing devices, both low-level devices and device mapper devices (note that some of the commands below may not be available in the initramfs):"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3641
#, no-c-format
msgid "&prompt.root;cat /proc/partitions\n"
      "&prompt.root;ls -l /sys/class/block\n"
      "&prompt.root;ls -l /dev/disk/by-id/* /dev/mapper/*\n"
      "&prompt.root;dmsetup ls --tree\n"
      "&prompt.root;lsblk\n"
      "&prompt.root;lsscsi\n"
      ""
msgstr ""

#. Tag: para
#: storage_multipath.xml:3648
#, no-c-format
msgid "From the output of the commands above, you should get an idea whether the low-level devices were successfully probed, and whether any multipath maps and multipath partitions were set up."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3655
#, no-c-format
msgid "If the device mapper multipath setup is not as you expect, examine the udev properties, in particular, <literal>SYSTEMD_READY</literal> (see above)"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3660
#, no-c-format
msgid "&prompt.root;udevadm info -e"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3663
#, no-c-format
msgid "If the previous step showed unexpected udev properties, something may have gone wrong during udev rule processing. Check other properties, in particular, those used for device identification (see <xref linkend=\"sec-multipath-conf-file-wwid\" xrefstyle=\"SecTitleOnPage\"/> ). If the udev properties are correct, check the journal for <command>multipathd</command> messages again. Look for \" <literal>Device or resource busy</literal> \" messages."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3675
#, no-c-format
msgid "If the system failed to mount or otherwise activate a device, it is often helpful to try activating this device manually:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3679
#, no-c-format
msgid "&prompt.root;mount /var\n"
      "&prompt.root;swapon -a\n"
      "&prompt.root;vgchange -a y"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3682
#, no-c-format
msgid "Mostly, the manual activation will succeed and allow to proceed with system boot (usually by simply logging out from the emergency shell) and examine the situation further in the booted system."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3687
#, no-c-format
msgid "If manual activation fails, you will probably see error messages that provide clues about what is going wrong. You can also try the commands again with increased verbosity."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3694
#, no-c-format
msgid "At this point, you should have some idea what went wrong (if not, contact &suse; support and be prepared to answer most of the questions raised above)."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3699
#, no-c-format
msgid "You should be able to correct the situation with a few shell commands, exit the emergency shell, and boot successfully. You will still need to adjust your configuration to make sure the same problem will not occur again in the future."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3705
#, no-c-format
msgid "Otherwise, you will need to boot the rescue system, set up the devices manually to <command>chroot</command> into the real root file system, and attempt to fix the problem based on the insight you got in the previous steps. Be aware that in this situation, the storage stack for the root file system may differ from normal. Depending on your setup, you may have force addition or omission of dracut modules when building a new initramfs. See also <xref linkend=\"sec-multipath-initrd-disable\" xrefstyle=\"SecTitleOnPage\"/> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3718
#, no-c-format
msgid "If the problem occurs frequently or even on every boot attempt, try booting with increased verbosity in order to get more information about the failure. The following kernel parameters, or a combination of them, are often helpful:"
msgstr ""

#. Tag: screen
#: storage_multipath.xml:3725
#, no-c-format
msgid "udev.log-priority=debug<co xml:id=\"mp-co-kparm-udev\"/>\n"
      "systemd.log_level=debug<co xml:id=\"mp-co-kparm-sl\"/>\n"
      "scsi_mod.scsi_logging_level=020400<co xml:id=\"mp-co-kparm-sc\"/>\n"
      "rd.debug<co xml:id=\"mp-co-kparm-rd\"/>\n"
      "\t  "
msgstr ""

#. Tag: para
#: storage_multipath.xml:3732
#, no-c-format
msgid "Increase the log level of <command>systemd-udevd</command> and udev rule processing."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3738
#, no-c-format
msgid "Increase the log level of <command>systemd</command> ."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3743
#, no-c-format
msgid "Increase the logging level of the kernel's SCSI subsystem."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3748
#, no-c-format
msgid "Trace the scripts in the initramfs."
msgstr ""

#. Tag: para
#: storage_multipath.xml:3754
#, no-c-format
msgid "In addition, it may make sense to enable logging for certain drivers and configure a serial console to capture the output during boot."
msgstr ""

#. Tag: title
#: storage_multipath.xml:3763
#, no-c-format
msgid "Technical information documents"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3764
#, no-c-format
msgid "For more information about troubleshooting multipath I/O issues on SUSE Linux Enterprise Server, see the following Technical Information Documents (TIDs) in the &suse; Knowledgebase:"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3771
#, no-c-format
msgid "<link xlink:href=\"https://www.suse.com/support/kb/doc/?id=000016331\"><citetitle>Using LVM on local and SAN attached devices</citetitle></link>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3777
#, no-c-format
msgid "<link xlink:href=\"https://www.suse.com/support/kb/doc/?id=000017521\"><citetitle>Using LVM on Multipath (DM MPIO) Devices</citetitle></link>"
msgstr ""

#. Tag: para
#: storage_multipath.xml:3783
#, no-c-format
msgid "<link xlink:href=\"https://www.suse.com/support/kb/doc/?id=000017762\"><citetitle>HOWTO: Add, Resize and Remove LUN without restarting SLES</citetitle></link>"
msgstr ""

