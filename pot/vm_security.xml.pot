# SOME DESCRIPTIVE TITLE.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: https://github.com/belphegor-belbel/doc-opensuse-ja\n"
"POT-Creation-Date: 2026-01-16 22:16+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <someuser@example.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/x-po; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. Tag: title
#: vm_security.xml:8
#, no-c-format
msgid "Enhancing virtual machine security with AMD SEV-SNP"
msgstr ""

#. Tag: meta
#: vm_security.xml:10
#, no-c-format
msgid "Enable AMD Secure Encrypted Virtualization-Secure Nested Paging (SEV-SNP) to enhance security isolation and data protection in virtual machines"
msgstr ""

#. Tag: para
#: vm_security.xml:12
#, no-c-format
msgid "You can enhance the security of your virtual machines with AMD Secure Encrypted Virtualization-Secure Nested Paging (SEV-SNP). The AMD SEV-SNP feature isolates virtual machines from the host system and other VMs, protecting the data and code. This feature encrypts data and ensures that all changes with the code and data in the VM are detected or tracked. Since this isolates VMs, the other VMs or the host machine are not affected by threats."
msgstr ""

#. Tag: para
#: vm_security.xml:21
#, no-c-format
msgid "This section explains the steps to enable and use AMD SEV-SNP on your AMD EPYC server with &productname; &productnumber;."
msgstr ""

#. Tag: date
#: vm_security.xml:32
#, no-c-format
msgid "2025-06-12"
msgstr ""

#. Tag: title
#: vm_security.xml:40
#, no-c-format
msgid "Supported hardware"
msgstr ""

#. Tag: para
#: vm_security.xml:42
#, no-c-format
msgid "A system with an AMD EPYC (3rd Gen or newer) is required to run AMD SEV-SNP virtual machines. The BIOS of the AMD machine must provide the necessary options to enable support for confidential computing on the platform."
msgstr ""

#. Tag: title
#: vm_security.xml:49
#, no-c-format
msgid "Setting up the base system"
msgstr ""

#. Tag: para
#: vm_security.xml:50
#, no-c-format
msgid "The &vmhost; requires minor configuration changes prior to running AMD SEV-SNP enabled &vmguest;s. The default IOMMU configuration in SUSE Linux Enterprise Server 15 SP7 is passthrough mode. To use the AMD SEV-SNP feature, the IOMMU must be configured in non-passthrough mode. This is required to prevent peripheral devices from accessing memory that belongs to an encrypted &vmguest;, compromising its data integrity. The MSR kernel module is required to use the optional <command>snphost</command> tool."
msgstr ""

#. Tag: para
#: vm_security.xml:59
#, no-c-format
msgid "To automatically load the <literal>msr</literal> module at boot:"
msgstr ""

#. Tag: screen
#: vm_security.xml:62
#, no-c-format
msgid "&prompt.sudo; <command>echo \"msr\" &gt; /etc/modules-load.d/msr.conf</command>"
msgstr ""

#. Tag: para
#: vm_security.xml:65
#, no-c-format
msgid "To disable the IOMMU configuration in &productname; &productnumber;, open the <filename>/etc/default/grub</filename> file and add <literal>iommu=nopt</literal> to the <varname>GRUB_CMDLINE_LINUX_DEFAULT</varname> variable."
msgstr ""

#. Tag: para
#: vm_security.xml:72
#, no-c-format
msgid "To update the bootloader configuration, run the command:"
msgstr ""

#. Tag: screen
#: vm_security.xml:75
#, no-c-format
msgid "&prompt.sudo;; <command>update-bootloader</command>"
msgstr ""

#. Tag: para
#: vm_security.xml:78
#, no-c-format
msgid "The system is now ready to be restarted with the confidential computing kernel. It is not selected as the default kernel in the bootloader, so be sure to select it in the boot menu."
msgstr ""

#. Tag: title
#: vm_security.xml:87
#, no-c-format
msgid "Verifying setup"
msgstr ""

#. Tag: para
#: vm_security.xml:89
#, no-c-format
msgid "You can verify the installation and configuration of the &vmhost; using dmesg or the optional <command>snphost</command> tool."
msgstr ""

#. Tag: para
#: vm_security.xml:95
#, no-c-format
msgid "To check the initialization result of the AMD Secure Processor in the kernel log when the kernel is running, run the command:"
msgstr ""

#. Tag: screen
#: vm_security.xml:99
#, no-c-format
msgid "&prompt.sudo; <command>dmesg | grep -i ccp</command>\n"
      "[ 10.103166] ccp 0000:42:00.1: enabling device (0000 -&gt; 0002)\n"
      "[ 10.114951] ccp 0000:42:00.1: no command queues available\n"
      "[ 10.127137] ccp 0000:42:00.1: sev enabled\n"
      "[ 10.133152] ccp 0000:42:00.1: psp enabled\n"
      "[ 10.240817] ccp 0000:42:00.1: SEV firmware update successful\n"
      "[ 11.128307] ccp 0000:42:00.1: SEV API:1.55 build:8\n"
      "[ 11.135057] ccp 0000:42:00.1: SEV-SNP API:1.55 build:8"
msgstr ""

#. Tag: para
#: vm_security.xml:107
#, no-c-format
msgid "The message about the SEV-SNP API version indicates the successful initialization of the AMD Secure Processor. Sometimes it happens that these messages do not appear in the kernel log. In this case, the BIOS settings or the IOMMU configuration are often the root cause."
msgstr ""

#. Tag: title
#: vm_security.xml:117
#, no-c-format
msgid "Launching an AMD SEV-SNP virtual machine"
msgstr ""

#. Tag: para
#: vm_security.xml:119
#, no-c-format
msgid "You can run AMD SEV-SNP protected virtual machines using the &libvirt; framework once the confidential computing kernel is booted and the AMD Secure Processor is initialized."
msgstr ""

#. Tag: para
#: vm_security.xml:124
#, no-c-format
msgid "&libvirt; has several ways of setting up new virtual machines. This document uses a prepared disk image and the virt-manager graphical user interface."
msgstr ""

#. Tag: para
#: vm_security.xml:131
#, no-c-format
msgid "Connect virt-manager to the AMD EPYC host and create a new virtual machine."
msgstr ""

#. Tag: para
#: vm_security.xml:136
#, no-c-format
msgid "In the Create a new virtual machine window, select the details:"
msgstr ""

#. Tag: para
#: vm_security.xml:141
#, no-c-format
msgid "Select how you want to install the operating system."
msgstr ""

#. Tag: para
#: vm_security.xml:146
#, no-c-format
msgid "Select the ISO or CD-ROM install media."
msgstr ""

#. Tag: para
#: vm_security.xml:151
#, no-c-format
msgid "Select the memory and CPU settings."
msgstr ""

#. Tag: para
#: vm_security.xml:156
#, no-c-format
msgid "Select the required storage details."
msgstr ""

#. Tag: para
#: vm_security.xml:163
#, no-c-format
msgid "In the fifth step, verify the details and select <guilabel>Customize configuration before install</guilabel> ."
msgstr ""

#. Tag: title
#: vm_security.xml:168
#, no-c-format
msgid "Create Virtual Machine"
msgstr ""

#. Tag: textobject
#: vm_security.xml:173
#, no-c-format
msgid "<phrase>Select Customize configuration before install</phrase>"
msgstr ""

#. Tag: para
#: vm_security.xml:182
#, no-c-format
msgid "Click <guilabel>Finish</guilabel> ."
msgstr ""

#. Tag: para
#: vm_security.xml:187
#, no-c-format
msgid "Select the XML tab in the virtual machine configuration window."
msgstr ""

#. Tag: para
#: vm_security.xml:190
#, no-c-format
msgid "In the XML tab, you can edit the XML configuration of the virtual machine used by the &libvirt; back-end."
msgstr ""

#. Tag: title
#: vm_security.xml:195
#, no-c-format
msgid "<guimenu>XML</guimenu> view of virtual machine configuration"
msgstr ""

#. Tag: textobject
#: vm_security.xml:200
#, no-c-format
msgid "<phrase>Click XML tab</phrase>"
msgstr ""

#. Tag: para
#: vm_security.xml:209
#, no-c-format
msgid "To protect the virtual machine with AMD SEV-SNP, set the correct firmware by modifying the <literal>os</literal> section as shown below:"
msgstr ""

#. Tag: title
#: vm_security.xml:214
#, no-c-format
msgid "Set firmware"
msgstr ""

#. Tag: textobject
#: vm_security.xml:219
#, no-c-format
msgid "<phrase>Set firmware</phrase>"
msgstr ""

#. Tag: para
#: vm_security.xml:226
#, no-c-format
msgid "The <literal>loader</literal> line sets the firmware to the SEV version of OVMF."
msgstr ""

#. Tag: para
#: vm_security.xml:231
#, no-c-format
msgid "Add a <literal>launchSecurity</literal> section. For AMD SEV-SNP, the section looks like this:"
msgstr ""

#. Tag: title
#: vm_security.xml:236
#, no-c-format
msgid "launchSecurity"
msgstr ""

#. Tag: textobject
#: vm_security.xml:241
#, no-c-format
msgid "<phrase>Add launchSecurity</phrase>"
msgstr ""

#. Tag: para
#: vm_security.xml:250
#, no-c-format
msgid "Click <guilabel>Apply</guilabel> and then click the <guilabel>Details</guilabel> tab."
msgstr ""

#. Tag: para
#: vm_security.xml:255
#, no-c-format
msgid "Select CPUs in the left-hand list and set the CPU <guilabel>Model</guilabel> to <literal>host-model</literal> :"
msgstr ""

#. Tag: title
#: vm_security.xml:260
#, no-c-format
msgid "The <guimenu>Details</guimenu> view of virtual machine configuration"
msgstr ""

#. Tag: textobject
#: vm_security.xml:265
#, no-c-format
msgid "<phrase>Select CPU model</phrase>"
msgstr ""

#. Tag: para
#: vm_security.xml:274
#, no-c-format
msgid "Click <guilabel>Apply</guilabel> and then click <guilabel>Begin Installation</guilabel> ."
msgstr ""

#. Tag: para
#: vm_security.xml:277
#, no-c-format
msgid "This starts the virtual machine and installs it according to your settings. The virtual machine boots up once the process is complete, and you can verify the AMD SEV-SNP protection."
msgstr ""

#. Tag: title
#: vm_security.xml:286
#, no-c-format
msgid "Verifying the AMD SEV-SNP virtual machine"
msgstr ""

#. Tag: para
#: vm_security.xml:288
#, no-c-format
msgid "From the appearance of the virtual machine, one cannot tell whether it runs in a confidential computing environment. But there are several ways to verify that from within the virtual machine."
msgstr ""

#. Tag: para
#: vm_security.xml:294
#, no-c-format
msgid "The kernel log will contain messages describing the state of AMD memory encryption features within the virtual machine. To check the kernel log, run the following command:"
msgstr ""

#. Tag: screen
#: vm_security.xml:299
#, no-c-format
msgid "&prompt.sudo; <command>dmesg | grep -i sev-snp</command>\n"
      "[ 1.986186] Memory Encryption Features active: AMD SEV SEV-ES SEV-SNP"
msgstr ""

#. Tag: para
#: vm_security.xml:302
#, no-c-format
msgid "The presence of the SEV-SNP feature in the kernel log, among other active memory encryption features, shows that it is active for the virtual machine."
msgstr ""

#. Tag: para
#: vm_security.xml:307
#, no-c-format
msgid "You can use the optional <command>snpguest</command> tool to verify if the SEV-SNP feature is active in the virtual machine. Similar to <command>snphost</command> , the <command>snpguest</command> tool requires the MSR kernel module. The following example demonstrates using <command>snpguest</command> to check the status of memory encryption features within the virtual machine:"
msgstr ""

#. Tag: screen
#: vm_security.xml:315
#, no-c-format
msgid "&prompt.sudo; <command>modprobe msr &amp;&amp; snpguest ok</command>\n"
      "[ PASS ] - SEV: ENABLED\n"
      "[ PASS ] - SEV-ES: ENABLED\n"
      "[ PASS ] - SNP: ENABLED\n"
      ""
msgstr ""

#. Tag: para
#: vm_security.xml:321
#, no-c-format
msgid "There are also cryptographically secure ways to prove the security of the AMD SEV-SNP environment."
msgstr ""

#. Tag: title
#: vm_security.xml:328
#, no-c-format
msgid "Attesting the AMD SEV-SNP Virtual Machine"
msgstr ""

#. Tag: para
#: vm_security.xml:330
#, no-c-format
msgid "Once SEV-SNP activation has been verified, the integrity of the confidential VM can be established through attestation, which provides cryptographic proof that it runs on genuine AMD hardware under a verified firmware and TCB level, backed by a trusted certificate hierarchy."
msgstr ""

#. Tag: para
#: vm_security.xml:336
#, no-c-format
msgid "Note that the steps here perform local attestation verification only. It verifies the report signature and certificate chain from inside the guest and ensures that the attestation data matches the platform state. This workflow does not include remote attestation, where the attestation report is sent to an external verifier or service that independently validates the platform trust and enforces access to secrets or workload authorization."
msgstr ""

#. Tag: para
#: vm_security.xml:343
#, no-c-format
msgid "The attestation process involves two tools: <command>snpguest</command> and <command>snphost</command> ."
msgstr ""

#. Tag: title
#: vm_security.xml:348
#, no-c-format
msgid "Generating and verifying the attestation report"
msgstr ""

#. Tag: para
#: vm_security.xml:350
#, no-c-format
msgid "Inside the guest, the <command>snpguest</command> tool can be used to perform the attestation workflow. This process generates an attestation report, fetches the corresponding AMD certificate chain, and verifies that the report is cryptographically signed by a valid platform key."
msgstr ""

#. Tag: para
#: vm_security.xml:359
#, no-c-format
msgid "Generate an attestation report and a corresponding request file. The <option>--random</option> flag includes random data for uniqueness:"
msgstr ""

#. Tag: screen
#: vm_security.xml:363
#, no-c-format
msgid "&prompt.sudo;<command>snpguest report attestation-report.bin request-file.bin --random</command>"
msgstr ""

#. Tag: para
#: vm_security.xml:367
#, no-c-format
msgid "Fetch the AMD CA and ASK certificates from the Key Distribution Service (KDS) in DER format. Replace <literal>genoa</literal> with your processor model if different:"
msgstr ""

#. Tag: screen
#: vm_security.xml:371
#, no-c-format
msgid "&prompt.sudo;<command>snpguest fetch ca der genoa ./certs-kds</command>"
msgstr ""

#. Tag: para
#: vm_security.xml:375
#, no-c-format
msgid "Fetch the Versioned Chip Endorsement Key (VCEK) using the generated attestation report:"
msgstr ""

#. Tag: screen
#: vm_security.xml:379
#, no-c-format
msgid "&prompt.sudo;<command>snpguest fetch vcek der genoa ./certs-kds attestation-report.bin</command>"
msgstr ""

#. Tag: para
#: vm_security.xml:383
#, no-c-format
msgid "Verify the attestation report against the fetched certificates:"
msgstr ""

#. Tag: screen
#: vm_security.xml:386
#, no-c-format
msgid "&prompt.sudo;<command>snpguest verify attestation ./certs-kds attestation-report.bin</command>\n"
      "\n"
      "Reported TCB Boot Loader from certificate matches the attestation report.\n"
      "Reported TCB TEE from certificate matches the attestation report.\n"
      "Reported TCB SNP from certificate matches the attestation report.\n"
      "Reported TCB Microcode from certificate matches the attestation report.\n"
      "Chip ID from certificate matches the attestation report.\n"
      "VEK signed the Attestation Report!\n"
      "          "
msgstr ""

#. Tag: para
#: vm_security.xml:399
#, no-c-format
msgid "The extended attestation workflow using the <command>snpguest certificates</command> command relies on QEMU functionality that is not currently available."
msgstr ""

#. Tag: title
#: vm_security.xml:408
#, no-c-format
msgid "Validating AMD certificates on the host"
msgstr ""

#. Tag: para
#: vm_security.xml:409
#, no-c-format
msgid "The host can optionally fetch and verify the AMD certificate chain used to validate guest attestation reports."
msgstr ""

#. Tag: para
#: vm_security.xml:416
#, no-c-format
msgid "Fetch the AMD CA and ASK certificates from AMD’s Key Distribution Service (KDS):"
msgstr ""

#. Tag: screen
#: vm_security.xml:419
#, no-c-format
msgid "&prompt.sudo; snphost fetch ca pem ./certs"
msgstr ""

#. Tag: para
#: vm_security.xml:423
#, no-c-format
msgid "Fetch the chip endorsement certificate (VCEK or VLEK) for the platform:"
msgstr ""

#. Tag: screen
#: vm_security.xml:426
#, no-c-format
msgid "&prompt.sudo; snphost fetch vek pem ./certs"
msgstr ""

#. Tag: para
#: vm_security.xml:430
#, no-c-format
msgid "Verify the integrity of the fetched certificate chain:"
msgstr ""

#. Tag: screen
#: vm_security.xml:433
#, no-c-format
msgid "&prompt.sudo; <command>snphost verify ./certs</command>\n"
      "• = self signed, ⬑ = signs, •̷ = invalid self sign, ⬑̸ = invalid signs\n"
      "\n"
      "ARK •\n"
      "ARK ⬑ ASK\n"
      "ASK ⬑ VCEK\n"
      "          "
msgstr ""

