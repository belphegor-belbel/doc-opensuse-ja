# SOME DESCRIPTIVE TITLE.
# FIRST AUTHOR <EMAIL@ADDRESS>, YEAR.
#
#, fuzzy
msgid ""
msgstr ""
"Project-Id-Version: PACKAGE VERSION\n"
"Report-Msgid-Bugs-To: https://github.com/belphegor-belbel/doc-opensuse-ja\n"
"POT-Creation-Date: 2019-05-20 03:45+0000\n"
"PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n"
"Last-Translator: FULL NAME <EMAIL@ADDRESS>\n"
"Language-Team: LANGUAGE <someuser@example.org>\n"
"MIME-Version: 1.0\n"
"Content-Type: text/x-po; charset=UTF-8\n"
"Content-Transfer-Encoding: 8bit\n"

#. Tag: title
#: libvirt_configuration_virsh.xml:8
#, no-c-format
msgid "Configuring Virtual Machines with virsh"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:11
#, no-c-format
msgid "You can use <command>virsh</command> to configure the &vmguest; in addition to using the Virtual Machine Manager. <command>virsh</command> is a command line tool that manages virtual machines created by VM software, such as KVM, Xen, VMWare, and LXC. With <command>virsh</command> , you can control the state of a VM, edit the configuration of a VM or even migrate a VM to another host. The following section shows the management of a VM with virsh. Examples include modifying memory allocation, input devices, CPU settings, and video configuration."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:27
#, no-c-format
msgid "Editing the VM Configuration"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:29
#, no-c-format
msgid "The configuration of a VM is stored in a XML file in <filename>/etc/libvirtd/qemu/</filename> and looks like this:"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:35
#, no-c-format
msgid "Example XML Configuration file"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:36
#, no-c-format
msgid "\n"
      "    &lt;domain type='kvm'&gt;\n"
      "      &lt;name&gt;sles15&lt;/name&gt;\n"
      "      &lt;uuid&gt;ab953e2f-9d16-4955-bb43-1178230ee625&lt;/uuid&gt;\n"
      "      &lt;memory unit='KiB'&gt;2097152&lt;/memory&gt;\n"
      "      &lt;currentMemory unit='KiB'&gt;2097152&lt;/currentMemory&gt;\n"
      "      &lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;\n"
      "      &lt;os&gt;\n"
      "        &lt;type arch='x86_64' machine='pc-i440fx-2.11'&gt;hvm&lt;/type&gt;\n"
      "      &lt;/os&gt;\n"
      "      &lt;features&gt;...&lt;/features&gt;\n"
      "      &lt;cpu mode='custom' match='exact' check='partial'&gt;\n"
      "        &lt;model fallback='allow'&gt;Skylake-Client-IBRS&lt;/model&gt;\n"
      "      &lt;/cpu&gt;\n"
      "      &lt;clock&gt;...&lt;/clock&gt;\n"
      "      &lt;on_poweroff&gt;destroy&lt;/on_poweroff&gt;\n"
      "      &lt;on_reboot&gt;restart&lt;/on_reboot&gt;\n"
      "      &lt;on_crash&gt;destroy&lt;/on_crash&gt;\n"
      "      &lt;pm&gt;\n"
      "        &lt;suspend-to-mem enabled='no'/&gt;\n"
      "        &lt;suspend-to-disk enabled='no'/&gt;\n"
      "      &lt;/pm&gt;\n"
      "      &lt;devices&gt;\n"
      "        &lt;emulator&gt;/usr/bin/qemu-system-x86_64&lt;/emulator&gt;\n"
      "        &lt;disk type='file' device='disk'&gt;...&lt;/disk&gt;\n"
      "      &lt;/devices&gt;\n"
      "      ...\n"
      "    &lt;/domain&gt;\n"
      "    "
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:67
#, no-c-format
msgid "If you want to edit the configuration of the &vmguest;, check if the guest is offline:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:72
#, no-c-format
msgid "&prompt.sudo;<command>virsh list --inactive</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:74
#, no-c-format
msgid "If your &vmguest; is in this list, you can safely edit its configuration with:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:79
#, no-c-format
msgid "&prompt.sudo;<command>virsh edit <replaceable>NAME_OF_VM_GUEST</replaceable></command>\n"
      "    "
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:82
#, no-c-format
msgid "Before saving the changes, <command>virsh</command> validates your input against a RelaxNG schema."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:88
#, no-c-format
msgid "Changing the Machine Type"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:90
#, no-c-format
msgid "When installing with the <command>virt-install</command> tool, the machine type for a &vmguest; is <emphasis>pc-i440fx</emphasis> by default. The machine type is stored in the &vmguest;'s configuration file in the <tag>type</tag> element:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:98
#, no-c-format
msgid "&lt;type arch='x86_64' machine='pc-i440fx-2.3'&gt;hvm&lt;/type&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:100
#, no-c-format
msgid "As an example, the following procedure shows how to change this value to the machine type <literal>q35</literal> . The value <literal>q35</literal> is an Intel* chipset and includes <xref linkend=\"gloss.vt.acronym.pcie\"/> , supports up to 12 USB ports, and has support for <xref linkend=\"gloss.vt.acronym.sata\"/> and <xref linkend=\"gloss.vt.acronym.iommu\"/> . <!-- IRQ routing has also been improved. -->"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:112
#, no-c-format
msgid "Changing Machine Type"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:123
#, no-c-format
msgid "Edit the configuration for this &vmguest;:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:129
#, no-c-format
msgid "Replace the value of the <tag class=\"attribute\">machine</tag> attribute with <tag class=\"attvalue\">pc-q35-2.0</tag> :"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:136
#, no-c-format
msgid "&lt;type arch='x86_64' machine='pc-q35-2.0'&gt;hvm&lt;/type&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:145
#, no-c-format
msgid "Check if the machine type has changed. Log in to the &vmguest; and run the following command:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:149
#, no-c-format
msgid "&prompt.sudo;<command>dmidecode | grep Product</command>\n"
      "Product Name: Standard PC (Q35 + ICH9, 2009)"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:155
#, no-c-format
msgid "Machine Type Update Recommendations"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:156
#, no-c-format
msgid "Whenever the QEMU version on the host system is upgraded (for example, when upgrading the &vmhost; to a new service pack), upgrade the machine type of the &vmguest;s to the latest available version. To check, use the command <command>qemu-system-x86_64 -M help</command> on the &vmhost;."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:162
#, no-c-format
msgid "The default machine type <literal>pc-i440fx</literal> , for example, is regularly updated. If your &vmguest; still runs with a machine type of <literal>pc-i440fx-1.<replaceable>X</replaceable></literal> , we strongly recommend an update to <literal>pc-i440fx-2.<replaceable>X</replaceable></literal> . This allows taking advantage of the most recent updates and corrections in machine definitions, and ensures better future compatibility."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:174
#, no-c-format
msgid "Configuring CPU Allocation"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:176
#, no-c-format
msgid "The number of allocated CPUs is stored in the &vmguest;'s XML configuration file in <filename>/etc/libvirt/qemu/</filename> in the <tag class=\"attribute\">vcpu</tag> element:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:183
#, no-c-format
msgid "&lt;vcpu placement='static'&gt;1&lt;/vcpu&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:185
#, no-c-format
msgid "In this example, the &vmguest; has only one allocated CPU. The following procedure shows how to change the number of allocated CPUs for the &vmguest;:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:192
#, no-c-format
msgid "Check whether your &vmguest; is inactive:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:195
#, no-c-format
msgid "&prompt.sudo;<command>virsh list --inactive</command>\n"
      "Id    Name                           State\n"
      "----------------------------------------------------\n"
      "-     sles15                         shut off"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:207
#, no-c-format
msgid "Change the number of allocated CPUs:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:210
#, no-c-format
msgid "&lt;vcpu placement='static'&gt;2&lt;/vcpu&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:213
#, no-c-format
msgid "Restart the &vmguest;:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:219
#, no-c-format
msgid "Check if the number of the CPUs in the VM has changed."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:222
#, no-c-format
msgid "\n"
      "&prompt.sudo;<command>virsh vcpuinfo sled15</command>\n"
      "VCPU:           0\n"
      "CPU:            N/A\n"
      "State:          N/A\n"
      "CPU time        N/A\n"
      "CPU Affinity:   yy\n"
      "\n"
      "VCPU:           1\n"
      "CPU:            N/A\n"
      "State:          N/A\n"
      "CPU time        N/A\n"
      "CPU Affinity:   yy\n"
      "      "
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:240
#, no-c-format
msgid "Changing Boot Options"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:242
#, no-c-format
msgid "The boot menu of the &vmguest; can be found in the <tag>os</tag> element and usually looks like this:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:248
#, no-c-format
msgid "&lt;os&gt;\n"
      "  &lt;type&gt;hvm&lt;/type&gt;\n"
      "  &lt;loader&gt;readonly='yes' secure='no' type='rom'/&gt;/usr/lib/xen/boot/hvmloader&lt;/loader&gt;\n"
      "  &lt;nvram template='/usr/share/OVMF/OVMF_VARS.fd'/&gt;/var/lib/libvirt/nvram/guest_VARS.fd&lt;/nvram&gt;\n"
      "  &lt;boot dev='hd'/&gt;\n"
      "  &lt;boot dev='cdrom'/&gt;\n"
      "  &lt;bootmenu enable='yes' timeout='3000'/&gt;\n"
      "  &lt;smbios mode='sysinfo'/&gt;\n"
      "  &lt;bios useserial='yes' rebootTimeout='0'/&gt;\n"
      "  &lt;/os&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:259
#, no-c-format
msgid "In this example, two devices are available, <tag class=\"attvalue\">hd</tag> and <tag class=\"attvalue\">cdrom</tag> . The configuration also reflects the actual boot order, so the <tag class=\"attvalue\">cdrom</tag> comes before the <tag class=\"attvalue\">hd</tag> ."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:272
#, no-c-format
msgid "Changing Boot Order"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:273
#, no-c-format
msgid "The &vmguest;'s boot order is represented through the order of devices in the XML configuration file. As the devices are interchangeable, it is possible to change the boot order of the &vmguest;."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:280
#, no-c-format
msgid "Open the &vmguest;'s XML configuration."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:286
#, no-c-format
msgid "Change the sequence of the bootable devices."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:289
#, no-c-format
msgid "\n"
      "...\n"
      "&lt;boot dev='cdrom'/&gt;\n"
      "&lt;boot dev='hd'/&gt;\n"
      "...\n"
      "      "
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:297
#, no-c-format
msgid "Check if the boot order was changed successfully by looking at the boot menu in the BIOS of the &vmguest;."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:306
#, no-c-format
msgid "Using Direct Kernel Boot"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:307
#, no-c-format
msgid "Direct Kernel Boot allows you to boot from a kernel and initrd stored on the host. Set the path to both files in the <tag>kernel</tag> and <tag>initrd</tag> elements:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:315
#, no-c-format
msgid "&lt;os&gt;\n"
      "    ...\n"
      "  &lt;kernel&gt;/root/f8-i386-vmlinuz&lt;/kernel&gt;\n"
      "  &lt;initrd&gt;/root/f8-i386-initrd&lt;/initrd&gt;\n"
      "    ...\n"
      "&lt;os&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:321
#, no-c-format
msgid "To enable Direct Kernel Boot:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:332
#, no-c-format
msgid "Inside the <tag>os</tag> element, add a <tag>kernel</tag> element and the path to the kernel file on the host:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:339
#, no-c-format
msgid "...\n"
      "&lt;kernel&gt;/root/f8-i386-vmlinuz&lt;/kernel&gt;\n"
      "..."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:344
#, no-c-format
msgid "Add an <tag>initrd</tag> element and the path to the initrd file on the host."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:349
#, no-c-format
msgid "...\n"
      "&lt;initrd&gt;/root/f8-i386-initrd&lt;/initrd&gt;\n"
      "..."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:354
#, no-c-format
msgid "Start your VM to boot from the new kernel."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:363
#, no-c-format
msgid "Configuring Memory Allocation"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:365
#, no-c-format
msgid "The amount of memory allocated for the &vmguest; can also be configured with virsh. It is stored in the <tag>memory</tag> element. Follow these steps:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:374
#, no-c-format
msgid "Open the &vmguest;'s XML configuration:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:380
#, no-c-format
msgid "Search for the <tag>memory</tag> element and set the amount of allocated RAM:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:385
#, no-c-format
msgid "...\n"
      "&lt;memory unit='KiB'&gt;524288&lt;/memory&gt;\n"
      "..."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:390
#, no-c-format
msgid "Check the amount of allocated RAM in your VM by running:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:393
#, no-c-format
msgid "&prompt.user;<command>cat /proc/meminfo</command>"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:398
#, no-c-format
msgid "Adding a PCI Device"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:400
#, no-c-format
msgid "To assign a PCI device to &vmguest; with <command>virsh</command> , follow these steps:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:407
#, no-c-format
msgid "Identify the host PCI device to assign to the &vmguest;. In the following example, we are assigning a DEC network card to the guest:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:411
#, no-c-format
msgid "&prompt.sudo;<command>lspci -nn</command>\n"
      "[...]\n"
      "<emphasis role=\"bold\">03:07.0</emphasis> Ethernet controller [0200]: Digital Equipment Corporation DECchip \\\n"
      "21140 [FasterNet] [1011:0009] (rev 22)\n"
      "[...]"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:416
#, no-c-format
msgid "Write down the device ID ( <literal>03:07.0</literal> in this case)."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:421
#, no-c-format
msgid "Gather detailed information about the device using <command>virsh nodedev-dumpxml <replaceable>ID</replaceable></command> . To get the <replaceable>ID</replaceable> , replace the colon and the period in the device ID ( <literal>03:07.0</literal> ) with underscores. Prefix the result with <quote>pci_0000_</quote> : <literal>pci_0000_03_07_0</literal> ."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:428
#, no-c-format
msgid "&prompt.sudo;<command>virsh nodedev-dumpxml pci_0000_03_07_0</command>\n"
      "&lt;device&gt;\n"
      "  &lt;name&gt;pci_0000_03_07_0&lt;/name&gt;\n"
      "  &lt;path&gt;/sys/devices/pci0000:00/0000:00:14.4/0000:03:07.0&lt;/path&gt;\n"
      "  &lt;parent&gt;pci_0000_00_14_4&lt;/parent&gt;\n"
      "  &lt;driver&gt;\n"
      "    &lt;name&gt;tulip&lt;/name&gt;\n"
      "  &lt;/driver&gt;\n"
      "  &lt;capability type='pci'&gt;\n"
      "    <emphasis role=\"bold\">&lt;domain&gt;0&lt;/domain&gt;\n"
      "    &lt;bus&gt;3&lt;/bus&gt;\n"
      "    &lt;slot&gt;7&lt;/slot&gt;\n"
      "    &lt;function&gt;0&lt;/function&gt;</emphasis>\n"
      "    &lt;product id='0x0009'&gt;DECchip 21140 [FasterNet]&lt;/product&gt;\n"
      "    &lt;vendor id='0x1011'&gt;Digital Equipment Corporation&lt;/vendor&gt;\n"
      "    &lt;numa node='0'/&gt;\n"
      "  &lt;/capability&gt;\n"
      "&lt;/device&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:446
#, no-c-format
msgid "Write down the values for domain, bus, and function (see the previous XML code printed in bold)."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:452
#, no-c-format
msgid "Detach the device from the host system prior to attaching it to the &vmguest;:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:456
#, no-c-format
msgid "&prompt.sudo;<command>virsh nodedev-detach pci_0000_03_07_0</command>\n"
      "  Device pci_0000_03_07_0 detached"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:459
#, no-c-format
msgid "Multi-Function PCI Devices"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:460
#, no-c-format
msgid "When using a multi-function PCI device that does not support FLR (function level reset) or PM (power management) reset, you need to detach all its functions from the &vmhost;. The whole device must be reset for security reasons. <systemitem>libvirt</systemitem> will refuse to assign the device if one of its functions is still in use by the &vmhost; or another &vmguest;."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:471
#, no-c-format
msgid "Convert the domain, bus, slot, and function value from decimal to hexadecimal. In our example, domain = 0, bus = 3, slot = 7, and function = 0. Ensure that the values are inserted in the right order:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:476
#, no-c-format
msgid "&prompt.user;<command>printf \"&lt;address domain='0x%x' bus='0x%x' slot='0x%x' function='0x%x'/&gt;\\n\" 0 3 7 0</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:477
#, no-c-format
msgid "This results in:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:480
#, no-c-format
msgid "&lt;address domain='0x0' bus='0x3' slot='0x7' function='0x0'/&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:483
#, no-c-format
msgid "Run <command>virsh edit</command> on your domain, and add the following device entry in the <literal>&lt;devices&gt;</literal> section using the result from the previous step:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:488
#, no-c-format
msgid "&lt;hostdev mode='subsystem' type='pci' managed='yes'&gt;\n"
      "  &lt;source&gt;\n"
      "    &lt;address domain='0x0' bus='0x03' slot='0x07' function='0x0'/&gt;\n"
      "  &lt;/source&gt;\n"
      "&lt;/hostdev&gt;"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:494
#, no-c-format
msgid "<literal>managed</literal> Compared to <literal>unmanaged</literal>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:495
#, no-c-format
msgid "<systemitem>libvirt</systemitem> recognizes two modes for handling PCI devices: they can be either <literal>managed</literal> or <literal>unmanaged</literal> . In the managed case, <systemitem>libvirt</systemitem> handles all details of unbinding the device from the existing driver if needed, resetting the device, binding it to <systemitem>vfio-pci</systemitem> before starting the domain, etc. When the domain is terminated or the device is removed from the domain, <systemitem>libvirt</systemitem> unbinds from <systemitem>vfio-pci</systemitem> and rebinds to the original driver in the case of a managed device. If the device is unmanaged, the user must ensure all of these management aspects of the device are done before assigning it to a domain, and after the device is no longer used by the domain."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:511
#, no-c-format
msgid "In the example above, the <literal>managed='yes'</literal> option means that the device is managed. To switch the device mode to unmanaged, set <literal>managed='no'</literal> in the listing above. If you do so, you need to take care of the related driver with the <command>virsh nodedev-detach</command> and <command>virsh nodedev-reattach</command> commands. Prior to starting the &vmguest; you need to detach the device from the host by running <command>virsh nodedev-detach pci_0000_03_07_0</command> . In case the &vmguest; is not running, you can make the device available for the host by running <command>virsh nodedev-reattach pci_0000_03_07_0</command> ."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:525
#, no-c-format
msgid "Shut down the &vmguest; and disable &selnx; if it is running on the host."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:531
#, no-c-format
msgid "Start your &vmguest; to make the assigned PCI device available."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:539
#, no-c-format
msgid "Adding a USB Device"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:541
#, no-c-format
msgid "To assign a USB device to &vmguest; using <command>virsh</command> , follow these steps:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:548
#, no-c-format
msgid "Identify the host USB device to assign to the &vmguest;:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:551
#, no-c-format
msgid "&prompt.sudo;<command>lsusb</command>\n"
      "[...]\n"
      "Bus 001 Device 003: ID <emphasis role=\"bold\">0557:2221</emphasis> ATEN International Co., Ltd Winbond Hermon\n"
      "[...]"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:555
#, no-c-format
msgid "Write down the vendor and product IDs. In our example, the vendor ID is <literal>0557</literal> and the product ID is <literal>2221</literal> ."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:561
#, no-c-format
msgid "Run <command>virsh edit</command> on your domain, and add the following device entry in the <literal>&lt;devices&gt;</literal> section using the values from the previous step:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:566
#, no-c-format
msgid "&lt;hostdev mode='subsystem' type='usb'&gt;\n"
      "  &lt;source startupPolicy='optional'&gt;\n"
      "   <emphasis role=\"bold\">&lt;vendor id='0557'/&gt;\n"
      "   &lt;product id='2221'/&gt;</emphasis>\n"
      "  &lt;/source&gt;\n"
      "&lt;/hostdev&gt;"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:573
#, no-c-format
msgid "Vendor/Product or Device's Address"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:574
#, no-c-format
msgid "Instead of defining the host device with <tag class=\"emptytag\">vendor</tag> and <tag class=\"emptytag\">product</tag> IDs, you can use the <tag class=\"emptytag\">address</tag> element as described for host PCI devices in <xref linkend=\"sec.libvirt.config.pci.virsh\"/> ."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:587
#, no-c-format
msgid "Shut down the &vmguest; and disable &selnx; if it is running on the host. available."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:591
#, no-c-format
msgid "&prompt.sudo;<command>setsebool -P virt_use_sysfs 1</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:594
#, no-c-format
msgid "Start your &vmguest; to make the assigned PCI device available"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:602
#, no-c-format
msgid "Adding SR-IOV Devices"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:604
#, no-c-format
msgid "Single Root I/O Virtualization ( <xref linkend=\"vt.io.sriov\"/> ) capable <xref linkend=\"gloss.vt.acronym.pcie\"/> devices can replicate their resources, so they appear to be multiple devices. Each of these <quote>pseudo-devices</quote> can be assigned to a &vmguest;."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:611
#, no-c-format
msgid "<xref linkend=\"vt.io.sriov\"/> is an industry specification that was created by the Peripheral Component Interconnect Special Interest Group (PCI-SIG) consortium. It introduces physical functions (PF) and virtual functions (VF). PFs are full <xref linkend=\"gloss.vt.acronym.pcie\"/> functions used to manage and configure the device. PFs also can move data. VFs lack the configuration and management part—they only can move data and a reduced set of configuration functions. As VFs do not have all <xref linkend=\"gloss.vt.acronym.pcie\"/> functions, the host operating system or the <xref linkend=\"gloss.vt.hypervisor\"/> must support <xref linkend=\"vt.io.sriov\"/> to be able to access and initialize VFs. The theoretical maximum for VFs is 256 per device (consequently the maximum for a dual-port Ethernet card would be 512). In practice this maximum is much lower, since each VF consumes resources."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:628
#, no-c-format
msgid "Requirements"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:629
#, no-c-format
msgid "The following requirements must be met to use <xref linkend=\"vt.io.sriov\"/> :"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:635
#, no-c-format
msgid "An <xref linkend=\"vt.io.sriov\"/> -capable network card (as of <phrase role=\"productname\"><phrase os=\"sles\">SUSE Linux Enterprise Server</phrase></phrase> <phrase role=\"productnumber\"><phrase os=\"sles;sled\">15</phrase></phrase> , only network cards support <xref linkend=\"vt.io.sriov\"/> )"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:644
#, no-c-format
msgid "An AMD64/Intel 64 host supporting hardware virtualization (AMD-V or Intel VT-x) <phrase os=\"sles;sled\">, see <xref linkend=\"sec.kvm.requires.hardware\"/> for more information</phrase>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:651
#, no-c-format
msgid "A chipset that supports device assignment (AMD-Vi or Intel <xref linkend=\"gloss.vt.acronym.vtd\"/> )"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:657
#, no-c-format
msgid "&libvirt; 0.9.10 or better"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:662
#, no-c-format
msgid "<xref linkend=\"vt.io.sriov\"/> drivers must be loaded and configured on the host system"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:668
#, no-c-format
msgid "A host configuration that meets the requirements listed at <xref linkend=\"ann.vt.io.require\"/>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:674
#, no-c-format
msgid "A list of the PCI addresses of the VF(s) that will be assigned to &vmguest;s"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:681
#, no-c-format
msgid "Checking if a Device is SR-IOV-Capable"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:682
#, no-c-format
msgid "The information whether a device is SR-IOV-capable can be obtained from its PCI descriptor by running <command>lspci</command> . A device that supports <xref linkend=\"vt.io.sriov\"/> reports a capability similar to the following:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:688
#, no-c-format
msgid "Capabilities: [160 v1] Single Root I/O Virtualization (<xref linkend=\"vt.io.sriov\"/>)"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:691
#, no-c-format
msgid "Adding an SR-IOV Device at &vmguest; Creation"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:692
#, no-c-format
msgid "Before adding an SR-IOV device to a &vmguest; when initially setting it up, the &vmhost; already needs to be configured as described in <xref linkend=\"sec.libvirt.config.io.config\"/> ."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:701
#, no-c-format
msgid "Loading and Configuring the SR-IOV Host Drivers"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:702
#, no-c-format
msgid "To access and initialize VFs, an SR-IOV-capable driver needs to be loaded on the host system."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:708
#, no-c-format
msgid "Before loading the driver, make sure the card is properly detected by running <command>lspci</command> . The following example shows the <command>lspci</command> output for the dual-port Intel 82576NS network card:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:714
#, no-c-format
msgid "&prompt.sudo;<command>/sbin/lspci | grep 82576</command>\n"
      "01:00.0 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "01:00.1 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "04:00.0 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "04:00.1 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:719
#, no-c-format
msgid "In case the card is not detected, it is likely that the hardware virtualization support in the BIOS/EFI has not been enabled. To check if hardware virtualization support is enabled, look at the settings in the host's BIOS."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:727
#, no-c-format
msgid "Check whether the <xref linkend=\"vt.io.sriov\"/> driver is already loaded by running <command>lsmod</command> . In the following example a check for the igb driver (for the Intel 82576NS network card) returns a result. That means the driver is already loaded. If the command returns nothing, the driver is not loaded."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:734
#, no-c-format
msgid "&prompt.sudo;<command>/sbin/lsmod | egrep \"^igb \"</command>\n"
      "igb                   185649  0"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:738
#, no-c-format
msgid "Skip the following step if the driver is already loaded. If the <xref linkend=\"vt.io.sriov\"/> driver is not yet loaded, the non- <xref linkend=\"vt.io.sriov\"/> driver needs to be removed first, before loading the new driver. Use <command>rmmod</command> to unload a driver. The following example unloads the non- <xref linkend=\"vt.io.sriov\"/> driver for the Intel 82576NS network card:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:747
#, no-c-format
msgid "&prompt.sudo;<command>/sbin/rmmod igbvf</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:750
#, no-c-format
msgid "Load the <xref linkend=\"vt.io.sriov\"/> driver subsequently using the <command>modprobe</command> command—the VF parameter ( <literal>max_vfs</literal> ) is mandatory:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:755
#, no-c-format
msgid "&prompt.sudo;<command>/sbin/modprobe igb max_vfs=8</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:759
#, no-c-format
msgid "As an alternative, you can also load the driver via SYSFS:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:764
#, no-c-format
msgid "Find the PCI ID of the physical NIC by listing Ethernet devices:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:767
#, no-c-format
msgid "&prompt.sudo;<command>lspci | grep Eth</command>\n"
      "06:00.0 Ethernet controller: Emulex Corporation OneConnect NIC (Skyhawk) (rev 10)\n"
      "06:00.1 Ethernet controller: Emulex Corporation OneConnect NIC (Skyhawk) (rev 10)"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:772
#, no-c-format
msgid "To enable VFs, echo the number of desired VFs to load to the <literal>sriov_numvfs</literal> parameter:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:776
#, no-c-format
msgid "&prompt.sudo;<command>echo 1 &gt; /sys/bus/pci/devices/0000:06:00.1/sriov_numvfs</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:779
#, no-c-format
msgid "Verify that the VF NIC was loaded:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:782
#, no-c-format
msgid "&prompt.sudo;<command>lspci | grep Eth</command>\n"
      "06:00.0 Ethernet controller: Emulex Corporation OneConnect NIC (Skyhawk) (rev 10)\n"
      "06:00.1 Ethernet controller: Emulex Corporation OneConnect NIC (Skyhawk) (rev 10)\n"
      "06:08.0 Ethernet controller: Emulex Corporation OneConnect NIC (Skyhawk) (rev 10)"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:788
#, no-c-format
msgid "Obtain the maximum number of VFs available:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:791
#, no-c-format
msgid "&prompt.sudo;<command>lspci -vvv -s 06:00.1 | grep 'Initial VFs'</command>\n"
      "                       Initial VFs: 32, Total VFs: 32, Number of VFs: 0,\n"
      "Function Dependency Link: 01"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:796
#, no-c-format
msgid "Create a <filename>/etc/systemd/system/before.service</filename> file which loads VF via SYSFS on boot:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:800
#, no-c-format
msgid "[Unit]\n"
      "Before=\n"
      "[Service]\n"
      "Type=oneshot\n"
      "RemainAfterExit=true\n"
      "ExecStart=/bin/bash -c \"echo 1 &gt; /sys/bus/pci/devices/0000:06:00.1/sriov_numvfs\"\n"
      "# beware, executable is run directly, not through a shell, check the man pages\n"
      "# systemd.service and systemd.unit for full syntax\n"
      "[Install]\n"
      "# target in which to start the service\n"
      "WantedBy=multi-user.target\n"
      "#WantedBy=graphical.target"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:814
#, no-c-format
msgid "Prior to starting the VM, it is required to create another service file ( <filename>after-local.service</filename> ) pointing to <filename>/etc/init.d/after.local</filename> script that detaches the NIC. Otherwise the VM would fail to start:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:820
#, no-c-format
msgid "[Unit]\n"
      "Description=/etc/init.d/after.local Compatibility\n"
      "After=libvirtd.service\n"
      "Requires=libvirtd.service\n"
      "[Service]\n"
      "Type=oneshot\n"
      "ExecStart=/etc/init.d/after.local\n"
      "RemainAfterExit=true\n"
      "\n"
      "[Install]\n"
      "WantedBy=multi-user.target"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:833
#, no-c-format
msgid "Copy it to <filename>/etc/systemd/system</filename> ."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:836
#, no-c-format
msgid "#! /bin/sh\n"
      "# ...\n"
      "virsh nodedev-detach pci_0000_06_08_0"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:839
#, no-c-format
msgid "Save it as <filename>/etc/init.d/after.local</filename> ."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:844
#, no-c-format
msgid "Reboot the machine and check if the SR-IOV driver is loaded by re-running the <command>lspci</command> command from the first step of this procedure. If the SR-IOV driver was loaded successfully you should see additional lines for the VFs:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:850
#, no-c-format
msgid "01:00.0 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "01:00.1 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "01:10.0 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "01:10.1 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "01:10.2 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "[...]\n"
      "04:00.0 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "04:00.1 Ethernet controller: Intel Corporation 82576NS Gigabit Network Connection (rev 01)\n"
      "04:10.0 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "04:10.1 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "04:10.2 Ethernet controller: Intel Corporation 82576 Virtual Function (rev 01)\n"
      "[...]"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:867
#, no-c-format
msgid "Adding a VF Network Device to a &vmguest;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:868
#, no-c-format
msgid "When the <xref linkend=\"vt.io.sriov\"/> hardware is properly set up on the &vmhost;, you can add VFs to &vmguest;s. To do so, you need to collect some data first."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:874
#, no-c-format
msgid "Adding a VF Network Device to an Existing &vmguest;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:875
#, no-c-format
msgid "The following procedure uses example data. Make sure to replace it by appropriate data from your setup."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:880
#, no-c-format
msgid "Use the <command>virsh nodedev-list</command> command to get the PCI address of the VF you want to assign and its corresponding PF. Numerical values from the <command>lspci</command> output shown in <xref linkend=\"sec.libvirt.config.io.config\"/> (for example <literal>01:00.0</literal> or <literal>04:00.1</literal> ) are transformed by adding the prefix \"pci_0000_\" and by replacing colons and dots with underscores. So a PCI ID listed as \"04:00.0\" by <command>lspci</command> is listed as \"pci_0000_04_00_0\" by virsh. The following example lists the PCI IDs for the second port of the Intel 82576NS network card:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:891
#, no-c-format
msgid "&prompt.sudo;<command>virsh nodedev-list | grep 0000_04_</command>\n"
      "<emphasis role=\"bold\">pci_0000_04_00_0</emphasis>\n"
      "<emphasis role=\"bold\">pci_0000_04_00_1</emphasis>\n"
      "pci_0000_04_10_0\n"
      "pci_0000_04_10_1\n"
      "pci_0000_04_10_2\n"
      "pci_0000_04_10_3\n"
      "pci_0000_04_10_4\n"
      "pci_0000_04_10_5\n"
      "pci_0000_04_10_6\n"
      "pci_0000_04_10_7\n"
      "pci_0000_04_11_0\n"
      "pci_0000_04_11_1\n"
      "pci_0000_04_11_2\n"
      "pci_0000_04_11_3\n"
      "pci_0000_04_11_4\n"
      "pci_0000_04_11_5"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:908
#, no-c-format
msgid "The first two entries represent the <emphasis role=\"bold\">PFs</emphasis> , whereas the other entries represent the VFs."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:914
#, no-c-format
msgid "Run the following command <command>virsh nodedev-dumpxml</command> on the PCI ID of the VF you want to add:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:918
#, no-c-format
msgid "&prompt.sudo;<command>virsh nodedev-dumpxml pci_0000_04_10_0</command>\n"
      "&lt;device&gt;\n"
      "  &lt;name&gt;pci_0000_04_10_0&lt;/name&gt;\n"
      "  &lt;parent&gt;pci_0000_00_02_0&lt;/parent&gt;\n"
      "  &lt;capability type='pci'&gt;\n"
      "    <emphasis role=\"bold\">&lt;domain&gt;0&lt;/domain&gt;\n"
      "    &lt;bus&gt;4&lt;/bus&gt;\n"
      "    &lt;slot&gt;16&lt;/slot&gt;\n"
      "    &lt;function&gt;0&lt;/function&gt;</emphasis>\n"
      "    &lt;product id='0x10ca'&gt;82576 Virtual Function&lt;/product&gt;\n"
      "    &lt;vendor id='0x8086'&gt;Intel Corporation&lt;/vendor&gt;\n"
      "    &lt;capability type='phys_function'&gt;\n"
      "      &lt;address domain='0x0000' bus='0x04' slot='0x00' function='0x0'/&gt;\n"
      "    &lt;/capability&gt;\n"
      "  &lt;/capability&gt;\n"
      "&lt;/device&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:934
#, no-c-format
msgid "The following data is needed for the next step:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:939
#, no-c-format
msgid "<literal>&lt;domain&gt;0&lt;/domain&gt;</literal>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:944
#, no-c-format
msgid "<literal>&lt;bus&gt;4&lt;/bus&gt;</literal>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:949
#, no-c-format
msgid "<literal>&lt;slot&gt;16&lt;/slot&gt;</literal>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:954
#, no-c-format
msgid "<literal>&lt;function&gt;0&lt;/function&gt;</literal>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:961
#, no-c-format
msgid "Create a temporary XML file (for example <filename>/tmp/vf-interface.xml</filename> containing the data necessary to add a VF network device to an existing &vmguest;. The minimal content of the file needs to look like the following:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:967
#, no-c-format
msgid "&lt;interface type='hostdev'&gt;<co xml:id=\"sriov.iface\"/>\n"
      " &lt;source&gt;\n"
      "  &lt;address type='pci' domain='0' bus='11' slot='16' function='0'2/&gt;<co xml:id=\"sriov.data\"/>\n"
      " &lt;/source&gt;\n"
      "&lt;/interface&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:974
#, no-c-format
msgid "VFs do not get a fixed MAC address; it changes every time the host reboots. When adding network devices the <quote>traditional</quote> way with <tag class=\"attribute\">hostdev</tag> , it would require to reconfigure the &vmguest;'s network device after each reboot of the host, because of the MAC address change. To avoid this kind of problem, &libvirt; introduced the <tag class=\"attvalue\">hostdev</tag> value, that sets up network-specific data <emphasis>before</emphasis> assigning the device."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:986
#, no-c-format
msgid "Specify the data you acquired in the previous step here."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:993
#, no-c-format
msgid "In case a device is already attached to the host, it cannot be attached to a &vmguest;. To make it available for guests, detach it from the host first:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:998
#, no-c-format
msgid "&prompt.sudo;<command>virsh nodedev-detach pci_0000_04_10_0</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1001
#, no-c-format
msgid "Add the VF interface to an existing &vmguest;:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1004
#, no-c-format
msgid "&prompt.sudo;<command>virsh attach-device <replaceable>GUEST</replaceable> /tmp/vf-interface.xml --<replaceable>OPTION</replaceable></command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1005
#, no-c-format
msgid "<replaceable>GUEST</replaceable> needs to be replaced by the domain name, ID or UUID of the &vmguest;. -- <replaceable>OPTION</replaceable> can be one of the following:"
msgstr ""

#. Tag: term
#: libvirt_configuration_virsh.xml:1012
#, no-c-format
msgid "<option>--persistent</option>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1015
#, no-c-format
msgid "This option will always add the device to the domain's persistent XML. In addition, if the domain is running, it will be hotplugged."
msgstr ""

#. Tag: term
#: libvirt_configuration_virsh.xml:1022
#, no-c-format
msgid "<option>--config</option>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1025
#, no-c-format
msgid "This option will only affect the persistent XML, even if the domain is running. The device will only show up in the &vmguest; on next boot."
msgstr ""

#. Tag: term
#: libvirt_configuration_virsh.xml:1032
#, no-c-format
msgid "<option>--live</option>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1035
#, no-c-format
msgid "This option will only affect a running domain. If the domain is inactive, the operation will fail. The device is not persisted in the XML and will not be available in the &vmguest; on next boot."
msgstr ""

#. Tag: term
#: libvirt_configuration_virsh.xml:1043
#, no-c-format
msgid "<option>--current</option>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1046
#, no-c-format
msgid "This option affects the current state of the domain. If the domain is inactive, the device is added to the persistent XML and will be available on next boot. If the domain is active, the device is hotplugged but not added to the persistent XML."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1057
#, no-c-format
msgid "To detach a VF interface, use the <command>virsh detach-device</command> command, which also takes the options listed above."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1066
#, no-c-format
msgid "Dynamic Allocation of VFs from a Pool"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1067
#, no-c-format
msgid "If you define the PCI address of a VF into a &vmguest;'s configuration statically as described in <xref linkend=\"sec.libvirt.config.io.attach\"/> , it is hard to migrate such guest to another host. The host must have identical hardware in the same location on the PCI bus, or the &vmguest; configuration must be modified prior to each start."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1074
#, no-c-format
msgid "Another approach is to create a &libvirt; network with a device pool that contains all the VFs of an <xref linkend=\"vt.io.sriov\"/> device. The &vmguest; then references this network, and each time it is started, a single VF is dynamically allocated to it. When the &vmguest; is stopped, the VF is returned to the pool, available for another guest."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1082
#, no-c-format
msgid "Defining Network with Pool of VFs on &vmhost;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1083
#, no-c-format
msgid "The following example of network definition creates a pool of all VFs for the <xref linkend=\"vt.io.sriov\"/> device with its physical function (PF) at the network interface <literal>eth0</literal> on the host:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1088
#, no-c-format
msgid "&lt;network&gt;\n"
      "  &lt;name&gt;passthrough&lt;/name&gt;\n"
      "    &lt;forward mode='hostdev' managed='yes'&gt;\n"
      "      &lt;pf dev='eth0'/&gt;\n"
      "    &lt;/forward&gt;\n"
      "  &lt;/network&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1094
#, no-c-format
msgid "To use this network on the host, save the above code to a file, for example <filename>/tmp/passthrough.xml</filename> , and execute the following commands. Remember to replace <literal>eth0</literal> with the real network interface name of your <xref linkend=\"vt.io.sriov\"/> device's PF:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1101
#, no-c-format
msgid "&prompt.sudo;<command>virsh net-define /tmp/passthrough.xml</command>\n"
      "&prompt.sudo;<command>virsh net-autostart passthrough</command>\n"
      "&prompt.sudo;<command>virsh net-start passthrough</command>"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1106
#, no-c-format
msgid "Configuring &vmguest;s to Use VF from the Pool"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1107
#, no-c-format
msgid "The following example of &vmguest; device interface definition uses a VF of the <xref linkend=\"vt.io.sriov\"/> device from the pool created in <xref linkend=\"libvirt.config.io.pool.host\"/> . &libvirt; automatically derives the list of all VFs associated with that PF the first time the guest is started."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1114
#, no-c-format
msgid "&lt;interface type='network'&gt;\n"
      "  &lt;source network='passthrough'&gt;\n"
      "&lt;/interface&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1117
#, no-c-format
msgid "After the first &vmguest; starts that uses the network with the pool of VFs, verify the list of associated VFs. Do so by running <command>virsh net-dumpxml passthrough</command> on the host."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1122
#, no-c-format
msgid "&lt;network connections='1'&gt;\n"
      "  &lt;name&gt;passthrough&lt;/name&gt;\n"
      "  &lt;uuid&gt;a6a26429-d483-d4ed-3465-4436ac786437&lt;/uuid&gt;\n"
      "  &lt;forward mode='hostdev' managed='yes'&gt;\n"
      "    &lt;pf dev='eth0'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x10' function='0x1'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x10' function='0x3'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x10' function='0x5'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x10' function='0x7'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x11' function='0x1'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x11' function='0x3'/&gt;\n"
      "    &lt;address type='pci' domain='0x0000' bus='0x02' slot='0x11' function='0x5'/&gt;\n"
      "  &lt;/forward&gt;\n"
      "  &lt;/network&gt;"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1140
#, no-c-format
msgid "Configuring Storage Devices"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1142
#, no-c-format
msgid "Storage devices are defined within the <tag>disk</tag> element. The usual <tag>disk</tag> element supports several attributes. The following two attributes are the most important:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1153
#, no-c-format
msgid "The <tag class=\"attribute\">type</tag> attribute describes the source of the virtual disk device. Valid values are <tag class=\"attvalue\">file</tag> , <tag class=\"attvalue\">block</tag> , <tag class=\"attvalue\">dir</tag> , <tag class=\"attvalue\">network</tag> , or <tag class=\"attvalue\">volume</tag> ."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1171
#, no-c-format
msgid "The <tag class=\"attribute\">device</tag> attribute indicates how the disk is exposed to the &vmguest; OS. As an example, possible values can include <tag class=\"attvalue\">floppy</tag> , <tag class=\"attvalue\">disk</tag> , <tag class=\"attvalue\">cdrom</tag> , and others."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1187
#, no-c-format
msgid "The following child elements are the most important:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1193
#, no-c-format
msgid "<tag>driver</tag> contains the driver and the bus. Those are used by the &vmguest; to work with the new disk device."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1200
#, no-c-format
msgid "The <tag>target</tag> element contains the device name, under which the new disk is shown in the &vmguest;. It also contains the optional bus attribute, which defines the type of bus, on which the new disk should operate."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1210
#, no-c-format
msgid "The following procedure shows how to add storage devices to the &vmguest;:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1222
#, no-c-format
msgid "Add a <tag>disk</tag> element inside the <tag>disk</tag> element together with the attributes <tag class=\"attvalue\">type</tag> and <tag class=\"attvalue\">device</tag> ."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1233
#, no-c-format
msgid "&lt;disk type='file' device='disk'&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1236
#, no-c-format
msgid "Specify a <tag>driver</tag> element and use the default values:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1241
#, no-c-format
msgid "&lt;driver name='qemu' type='qcow2'/&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1244
#, no-c-format
msgid "Create a disk image, which will be used as a source for the new virtual disk device:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1248
#, no-c-format
msgid "&prompt.sudo;<command>qemu-img create -f qcow2 /var/lib/libvirt/images/sles15.qcow2 32G</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1251
#, no-c-format
msgid "Add the path for the disk source:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1254
#, no-c-format
msgid "&lt;source file='/var/lib/libvirt/images/sles15.qcow2'/&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1257
#, no-c-format
msgid "Define the target device name in the &vmguest; and the bus, on which the disk should work:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1261
#, no-c-format
msgid "&lt;target dev='vda' bus='virtio'/&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1264
#, no-c-format
msgid "Restart your VM:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1267
#, no-c-format
msgid "&prompt.sudo;<command>virsh start sles15</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1271
#, no-c-format
msgid "Your new storage device should be available in the &vmguest; OS."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1276
#, no-c-format
msgid "Configuring Video Devices"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1278
#, no-c-format
msgid "When using the Virtual Machine Manager, only the Video device model can be defined. The amount of allocated VRAM or 2D/3D acceleration can only be changed in the XML configuration."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1285
#, no-c-format
msgid "Changing the Amount of Allocated VRAM"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1294
#, no-c-format
msgid "Change the size of the allocated VRAM:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1297
#, no-c-format
msgid "&lt;video&gt;\n"
      "&lt;model type='vga' vram='65535' heads='1'&gt;\n"
      "...\n"
      "&lt;/model&gt;\n"
      "&lt;/video&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1304
#, no-c-format
msgid "Check if the amount of VRAM in the VM has changed by looking at the amount in the Virtual Machine Manager."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1313
#, no-c-format
msgid "Changing the State of 2D/3D Acceleration"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1316
#, no-c-format
msgid "Edit the configuration for an existing &vmguest;:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1319
#, no-c-format
msgid "&prompt.sudo;<command>virsh edit sles15</command>"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1322
#, no-c-format
msgid "To enable/disable 2D/3D acceleration, change the value of <literal>accel3d</literal> and <literal>accel2d</literal> accordingly."
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1326
#, no-c-format
msgid "&lt;video&gt;\n"
      "&lt;acceleration accel3d='yes' accel2d='no'&gt;\n"
      "...\n"
      "&lt;/model&gt;\n"
      "&lt;/video&gt;"
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1334
#, no-c-format
msgid "Enabling 2D/3D Acceleration"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1335
#, no-c-format
msgid "Only <literal>vbox</literal> video devices are capable of 2D/3D acceleration. You cannot enable it on other video devices."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1343
#, no-c-format
msgid "Using Macvtap to Share &vmhost; Network Interfaces"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1345
#, no-c-format
msgid "Macvtap provides direct attachment of a &vmguest; virtual interface to a host network interface. The macvtap-based interface extends the &vmhost; network interface and has its own MAC address on the same Ethernet segment. Typically, this is used to make both the &vmguest; and the &vmhost; show up directly on the switch that the &vmhost; is connected to."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1354
#, no-c-format
msgid "Macvtap Cannot Be Used with a Linux Bridge"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1355
#, no-c-format
msgid "Macvtap cannot be used with network interfaces already connected to a Linux bridge. Before attempting to create the macvtap interface, remove the interface from the bridge."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1363
#, no-c-format
msgid "&vmguest; to &vmhost; Communication with Macvtap"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1364
#, no-c-format
msgid "When using macvtap, a &vmguest; can communicate with other &vmguest;s, and with other external hosts on the network. But it cannot communicate with the &vmhost; on which the &vmguest; runs. This is the defined behavior of macvtap, because of the way the &vmhost;'s physical Ethernet is attached to the macvtap bridge. Traffic from the &vmguest; into that bridge that is forwarded to the physical interface cannot be bounced back up to the &vmhost;'s IP stack. Similarly, traffic from the &vmhost;'s IP stack that is sent to the physical interface cannot be bounced back up to the macvtap bridge for forwarding to the &vmguest;."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1377
#, no-c-format
msgid "Virtual network interfaces based on macvtap are supported by libvirt by specifying an interface type of <literal>direct</literal> . For example:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1382
#, no-c-format
msgid "&lt;interface type='direct'&gt;\n"
      "   &lt;mac address='aa:bb:cc:dd:ee:ff'/&gt;\n"
      "   &lt;source dev='eth0' mode='bridge'/&gt;\n"
      "   &lt;model type='virtio'/&gt;\n"
      "   &lt;/interface&gt;"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1388
#, no-c-format
msgid "The operation mode of the macvtap device can be controlled with the <literal>mode</literal> attribute. The following list show its possible values and a description for each:"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1396
#, no-c-format
msgid "<literal>vepa</literal> : All &vmguest; packets are sent to an external bridge. Packets whose destination is a &vmguest; on the same &vmhost; as where the packet originates from are sent back to the &vmhost; by the VEPA capable bridge (today's bridges are typically not VEPA capable)."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1404
#, no-c-format
msgid "<literal>bridge</literal> : Packets whose destination is on the same &vmhost; as where they originate from are directly delivered to the target macvtap device. Both origin and destination devices need to be in <literal>bridge</literal> mode for direct delivery. If either one of them is in <literal>vepa</literal> mode, a VEPA capable bridge is required."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1413
#, no-c-format
msgid "<literal>private</literal> : All packets are sent to the external bridge and will only be delivered to a target &vmguest; on the same &vmhost; if they are sent through an external router or gateway and that device sends them back to the &vmhost;. This procedure is followed if either the source or destination device is in private mode."
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1422
#, no-c-format
msgid "<literal>passthrough</literal> : A special mode that gives more power to the network interface. All packets will be forwarded to the interface, allowing virtio &vmguest;s to change the MAC address or set promiscuous mode to bridge the interface or create VLAN interfaces on top of it. Note that a network interface is not shareable in <literal>passthrough</literal> mode. Assigning an interface to a &vmguest; will disconnect it from the &vmhost;. For this reason SR-IOV virtual functions are often assigned to the &vmguest; in <literal>passthrough</literal> mode."
msgstr ""

#. Tag: title
#: libvirt_configuration_virsh.xml:1437
#, no-c-format
msgid "Disabling a Memory Balloon Device"
msgstr ""

#. Tag: para
#: libvirt_configuration_virsh.xml:1438
#, no-c-format
msgid "Memory Balloon has become a default option for KVM. The device will be added to the &vmguest; explicitly, so you do not need to add this element in the &vmguest;'s XML configuration. However, if you want to disable Memory Balloon in the &vmguest; for any reason, you need to set <literal>model='none'</literal> as shown below:"
msgstr ""

#. Tag: screen
#: libvirt_configuration_virsh.xml:1446
#, no-c-format
msgid "&lt;devices&gt;\n"
      "   &lt;memballoon model='none'/&gt;\n"
      "&lt;/device&gt;"
msgstr ""

