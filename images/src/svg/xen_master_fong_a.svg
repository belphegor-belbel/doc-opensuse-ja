<?xml version="1.0"?>
<svg width="1165" height="860" xmlns="http://www.w3.org/2000/svg">

  <!-- marker definition -->
  <defs>
    <marker id="arrow_red_end" markerUnits="strokeWidth" markerWidth="5" markerHeight="5"
      viewBox="0 0 10 10" refX="5" refY="5" orient="auto">
      <polygon points="0,0 10,5 0,10" style="fill:red"/>
    </marker>

    <marker id="arrow_red_start" markerUnits="strokeWidth" markerWidth="5" markerHeight="5"
      viewBox="0 0 10 10" refX="5" refY="5" orient="auto">
      <polygon points="10,0 0,5 10,10" style="fill:red"/>
    </marker>

    <marker id="arrow_deepskyblue_end" markerUnits="strokeWidth" markerWidth="5" markerHeight="5"
      viewBox="0 0 10 10" refX="5" refY="5" orient="auto">
      <polygon points="0,0 10,5 0,10" style="fill:deepskyblue"/>
    </marker>

    <marker id="arrow_deepskyblue_start" markerUnits="strokeWidth" markerWidth="5" markerHeight="5"
      viewBox="0 0 10 10" refX="5" refY="5" orient="auto">
      <polygon points="10,0 0,5 10,10" style="fill:deepskyblue"/>
    </marker>
  </defs>

  <!-- Virtual Machine Host Server -->
  <text x="132.5" y="20" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">仮想マシンホストサーバ</text>

  <rect x="20" y="60" width="225" height="180" rx="10" ry="10" style="fill:gold"/>
  <text x="188.5" y="80" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; fill:red; font-weight:bold">openSUSE</text>
  <text x="188.5" y="100" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; fill:red; font-weight:bold">ホスト OS</text>

  <rect x="25" y="40" width="100" height="80" rx="10" ry="10" style="fill:silver"/>
  <text x="75" y="60" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">VM 管理</text>
  <text x="75" y="80" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.75em">アプリケーション</text>
  <text x="75" y="100" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.75em">(外部)</text>

  <rect x="25" y="140" width="100" height="80" rx="10" ry="10" style="fill:none; stroke:gray; stroke-width:2"/>
  <text x="75" y="160" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">VM 管理</text>
  <text x="75" y="180" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.75em">アプリケーション</text>
  <text x="75" y="200" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.75em">(内部)</text>

  <rect x="140" y="140" width="100" height="80" rx="10" ry="10" style="fill:none; stroke:red"/>
  <text x="190" y="170" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">CIMOM</text>
  <text x="190" y="190" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">エージェント</text>

  <rect x="20" y="240" width="225" height="180" rx="10" ry="10" style="fill:yellowgreen"/>
  <text x="188" y="320" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">Linux</text>
  <text x="188" y="340" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">カーネル</text>

  <rect x="20" y="280" width="122.5" height="140" rx="10" ry="10" style="fill:whitesmoke"/>
  <text x="81.25" y="340" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">物理</text>
  <text x="81.25" y="360" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">ドライバ</text>

  <!-- Virtual Machine #1 -->
  <text x="412.5" y="20" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">仮想マシン #1</text>

  <rect x="320" y="40" width="225" height="180" rx="10" ry="10" style="fill:lemonchiffon"/>
  <rect x="320" y="220" width="225" height="180" rx="10" ry="10" style="fill:khaki"/>

  <rect x="310" y="50" width="225" height="180" rx="10" ry="10" style="fill:wheat"/>
  <rect x="310" y="230" width="225" height="180" rx="10" ry="10" style="fill:yellow"/>

  <rect x="300" y="60" width="225" height="180" rx="10" ry="10" style="fill:burlywood"/>
  <rect x="300" y="240" width="225" height="180" rx="10" ry="10" style="fill:gold"/>
  <text x="412.5" y="80" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">準仮想化 OS</text>
  <text x="412.5" y="100" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">[Linux]</text>
  <text x="468.75" y="320" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">Linux</text>
  <text x="468.75" y="340" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">カーネル</text>

  <rect x="300" y="280" width="122.5" height="60" rx="10" ry="10" style="fill:whitesmoke"/>
  <text x="356.25" y="310" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">I/O システム</text>

  <rect x="300" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="330" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">仮想</text>
  <text x="330" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <rect x="362.5" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="392.5" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">物理</text>
  <text x="392.5" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <!-- Virtual Machine 2 -->
  <text x="712.5" y="20" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">仮想マシン #2</text>

  <rect x="620" y="40" width="225" height="180" rx="10" ry="10" style="fill:lightpink"/>
  <rect x="620" y="220" width="225" height="180" rx="10" ry="10" style="fill:coral"/>

  <rect x="610" y="50" width="225" height="180" rx="10" ry="10" style="fill:pink"/>
  <rect x="610" y="230" width="225" height="180" rx="10" ry="10" style="fill:tomato"/>

  <rect x="600" y="60" width="225" height="180" rx="10" ry="10" style="fill:hotpink"/>
  <rect x="600" y="240" width="225" height="180" rx="10" ry="10" style="fill:orangered"/>
  <text x="712.5" y="80" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">準仮想化 OS</text>
  <text x="712.5" y="100" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">[NetWare]</text>
  <text x="768.75" y="320" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">NetWare</text>
  <text x="768.75" y="340" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">カーネル</text>

  <rect x="600" y="280" width="122.5" height="60" rx="10" ry="10" style="fill:whitesmoke"/>
  <text x="656.25" y="310" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">I/O システム</text>

  <rect x="600" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="630" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">仮想</text>
  <text x="630" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <rect x="662.5" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="692.5" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">物理</text>
  <text x="692.5" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <!-- Virtual Machine 3 -->
  <text x="1012.5" y="20" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">仮想マシン #3</text>

  <rect x="920" y="40" width="225" height="180" rx="10" ry="10" style="fill:aliceblue"/>
  <rect x="920" y="220" width="225" height="180" rx="10" ry="10" style="fill:lightskyblue"/>

  <rect x="910" y="50" width="225" height="180" rx="10" ry="10" style="fill:lavender"/>
  <rect x="910" y="230" width="225" height="180" rx="10" ry="10" style="fill:skyblue"/>

  <rect x="900" y="60" width="225" height="180" rx="10" ry="10" style="fill:lightsteelblue"/>
  <rect x="900" y="240" width="225" height="180" rx="10" ry="10" style="fill:deepskyblue"/>
  <text x="1012.5" y="80" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">未修正の OS</text>
  <text x="1012.5" y="100" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">[Microsft Windows]</text>
  <text x="1068.75" y="320" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">ゲスト</text>
  <text x="1068.75" y="340" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">カーネル</text>

  <rect x="900" y="280" width="122.5" height="60" rx="10" ry="10" style="fill:whitesmoke"/>
  <text x="956.25" y="310" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">I/O システム</text>

  <rect x="900" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="930" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">仮想</text>
  <text x="930" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <rect x="962.5" y="340" width="60" height="80" rx="5" ry="5" style="fill:whitesmoke"/>
  <text x="992.5" y="370" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">物理</text>
  <text x="992.5" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em">ドライバ</text>

  <!-- XEN Hypervisor -->
  <rect x="20" y="480" width="1125" height="160" rx="10" ry="10" style="fill:silver"/>
  <text x="582.5" y="620" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">XEN ハイパーバイザ (仮想マシンモニタ)</text>

  <!-- Physical Machine -->
  <rect x="20" y="680" width="1125" height="160" rx="10" ry="10" style="fill:gray"/>
  <text x="582.5" y="820" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">物理マシン</text>

  <text x="245" y="760" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">IO およびプラットフォームデバイス</text>
  <text x="245" y="780" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">(ディスク, LAN, USB, BMC, IPMI, ACPI 等)</text>

  <text x="470" y="770" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-weight:bold">ハードウエア</text>

  <text x="695" y="760" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">メモリおよび CPU</text>
  <text x="695" y="780" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">(x86_64, EM64T)</text>

  <text x="920" y="760" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">Intel VT</text>
  <text x="920" y="780" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic">AMD-V</text>

  <!-- arrows -->
  <path d="M 30 190 L 10 190 L 10 560 L 30 560" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>

  <path d="M 120 50 L 260 50 L 260 160 L 230 160" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>
  <text x="250" y="40" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em; font-weight:bold; fill:red">管理パス</text>

  <path d="M 230 200 L 260 200 L 260 490" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>

  <path d="M 60.833 410 L 60.833 690" marker-start="url(#arrow_deepskyblue_start)" marker-end="url(#arrow_deepskyblue_end)" style="fill:none; stroke:deepskyblue; stroke-width:2"/>
  <text x="70" y="640" style="font-family: IPAPGothic; font-weight:bold; fill:deepskyblue">ダイレクト I/O パス</text>

  <path d="M 101.666 410 L 101.666 520 L 330 520 L 330 410" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>
  <text x="205.625" y="500" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em; font-weight:bold; fill:red">仮想 I/O パス</text>

  <path d="M 101.666 410 L 101.666 540 L 630 540 L 630 410" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>
  <text x="480" y="520" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em; font-weight:bold; fill:red">仮想 I/O パス</text>

  <path d="M 101.666 410 L 101.666 560 L 930 560 L 930 410" marker-start="url(#arrow_red_start)" marker-end="url(#arrow_red_end)" style="fill:none; stroke:red; stroke-width:2"/>
  <text x="780" y="540" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size: 0.8em; font-weight:bold; fill:red">仮想 I/O パス</text>

</svg>
