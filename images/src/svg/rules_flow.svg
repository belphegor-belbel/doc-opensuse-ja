<?xml version="1.0"?>
<svg width="600" height="760" xmlns="http://www.w3.org/2000/svg">

  <!-- marker definition -->
  <defs>
    <marker id="arrow" markerUnits="strokeWidth" markerWidth="5" markerHeight="5"
      viewBox="0 0 10 10" refX="5" refY="5" orient="auto">
      <polygon points="0,0 10,5 0,10" style="fill:black"/>
    </marker>
  </defs>

  <!-- center flow -->
  <rect x="220" y="20" width="160" height="40" rx="20" ry="20" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="40" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">開始／停止</text>

  <line x1="300" y1="60" x2="300" y2="90" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>

  <rect x="220" y="100" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="120" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">コマンドラインを処理</text>

  <line x1="300" y1="140" x2="300" y2="170" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>

  <polygon points="300,180 220,220 300,260 380,220 300,180" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="200" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">$DIR/rules</text>
  <text x="300" y="220" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">/rules.xml が</text>
  <text x="300" y="240" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">存在する？</text>

  <line x1="300" y1="260" x2="300" y2="290" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>
  <text x="300" y="270" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">存在しない</text>
  <line x1="380" y1="220" x2="410" y2="220" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>
  <text x="400" y="190" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">存在する</text>

  <polygon points="300,300 220,340 300,380 380,340 300,300" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="330" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ファイル？</text>
  <text x="300" y="350" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ディレクトリ？</text>

  <line x1="300" y1="380" x2="300" y2="410" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>
  <text x="300" y="390" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ディレクトリ</text>
  <line x1="220" y1="340" x2="190" y2="340" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>
  <text x="210" y="320" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ファイル</text>

  <rect x="220" y="420" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="430" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">16 進数および MAC 形式の</text>
  <text x="300" y="450" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ファイル名を生成</text>

  <line x1="300" y1="460" x2="300" y2="490" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>

  <circle cx="300" cy="550" r="50" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="550" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">ファイル取得</text>

  <line x1="300" y1="600" x2="300" y2="620" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>

  <rect x="220" y="630" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="650" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">合成</text>

  <line x1="300" y1="670" x2="300" y2="690" marker-end="url(#arrow)" style="stroke:black; stroke-width:2"/>

  <rect x="220" y="700" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="300" y="720" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">処理</text>

  <!-- left flow -->
  <rect x="20" y="320" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="100" y="330" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">そのままファイル名を</text>
  <text x="100" y="350" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">処理</text>

  <line x1="100" y1="360" x2="240" y2="540" marker-end="url(#arrow)" style="fill:none; stroke-width:2; stroke:black; stroke-linejoin:round"/>

  <!-- right flow -->
  <rect x="420" y="200" width="160" height="40" style="fill:none; stroke-width:2; stroke:black"/>
  <text x="500" y="220" style="text-anchor:middle; dominant-baseline:central; font-family: IPAPGothic; font-size:0.8em">取得して処理</text>

  <line x1="500" y1="240" x2="360" y2="540" marker-end="url(#arrow)" style="fill:none; stroke-width:2; stroke:black; stroke-linejoin:round"/>
</svg>
