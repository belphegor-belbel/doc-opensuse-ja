<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
 type="text/xml"
 title="Profiling step"?>
<!DOCTYPE book [
<!ENTITY % entities SYSTEM "entity-decl.ent">
%entities;
]>
<book xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0" xml:lang="ja" xml:id="book.autoyast">
 <info>
  <dm:docmanager xmlns:dm="urn:x-suse:ns:docmanager">
   <dm:bugtracker>
    <dm:assignee>belphegor@belbel.or.jp</dm:assignee>
   </dm:bugtracker>
  </dm:docmanager>
  <title>&ayguide;</title>
  <productname>&productname;</productname>
  <productnumber>&productnumber;</productnumber>
  <date><?dbtimestamp format="Y/m/d" ?></date>
  <xi:include href="common_copyright_gfdl.xml"/>
  <abstract>
   <para>&abstract_autoyast;</para>
  </abstract>
 </info>
 <chapter xml:id="introduction">
  <title>紹介</title>
  <info/>
  <para>&ay; は &productname; システムを無人で一括配置するためのシステムです。 &ay; の無人インストールは、インストールデータや設定データを含む制御ファイル (<quote>プロファイル</quote> と呼ぶ場合もあります) で制御します。制御ファイルは &ay; の設定インターフェイスを利用して作成し、様々な方法で &yast; の起動時にそれを指定して &ay; を起動します。</para>
  <sect1 xml:id="motiv">
   <title>&ay; の存在理由</title>

   <para>&productname; の標準的なインストール方式はウイザード形式になっています。これは一般的なユーザにとっては分かりやすいもので、少数のマシンにインストールするだけであれば、十分に効率的な仕組みです。ところが、多数のマシンにインストールを行なう場合、このようなウイザード形式は手間になってしまうばかりか、時間のかかるものになってしまいます。</para>
   <para>このような問題を避けるには、特定のマシンにインストールしたものをハードディスクごと複製して配置する方法もあります。ただし、このような仕組みで大量配置を行なう場合、配置後のさまざまな個別設定が面倒になってしまいます。たとえばそれぞれのマシンが固定の IP アドレスでなければならないような場合、配置後にそれぞれの IP アドレスを設定する手間が生じることになってしまいます。</para>

   <para>&productname; の通常のインストールであっても、半自動化が実現できています。インストールの冒頭で必要な情報 (通常は言語) を選択したあと、 &yast; はさまざまな要素とシステムのパラメータを考慮して提案を作成しますので、そのまま進めていくだけでインストールが完了します。提案内容を受け入れたあとは、残りの作業は自動的に実施されます。</para>

   <para>&ay; はユーザ側での操作を一切不要にしたい場合や、カスタマイズが必要な場合に有用です。 &ay; の制御ファイルを使用することで、 &yast; は独自の方式でインストールを行ない、制御ファイル内に敢えて記述されている場合を除き、ユーザに一切尋ねることなく処理を進めることができます。</para>

   <para>&ay; は GUI システムの自動化ではありません。そのため、通常は表示される多くの画面 (たとえば言語選択の画面など) が表示されないまま処理が行なわれます。 &ay; では言語関連のユーザインターフェイスを表示することなく、サブシステムに言語パラメータを渡して処理を進めます。</para>
  </sect1>
  <sect1 xml:id="overviewandconcept">
   <title>概要と考え方</title>

   <para>&ay; を使用することで、多数のシステムを同時並行で素早くインストールすることができるようになります。これらは同じ環境を共有する必要がありますが、ハードウエアについては全く同一でなくてもかまいません。インストール処理は XML 形式の設定ファイル (通常は <filename>autoinst.xml</filename> というファイル名です) 、<quote>&ay; 制御ファイル</quote> で制御します。制御ファイルは既存の設定リソースから作成しておいて、後から必要に応じて調整することができます。</para>

   <para>&ay; はシステムに完全に統合されているほか、インストールや設定に対してさまざまなオプションを提供しています。その他の自動インストールシステムと比較しても、既存のモジュールを利用してコンピュータを設定することができたり、通常はインストールの終了時に実行するスクリプトなどを設定できる点が利点となっています。</para>

   <para>本文書では、自動インストールに関わる 3 種類のステップを説明しています:</para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>準備: インストール先のシステムに関する全ての情報を収集し、制御ファイル内の対応するディレクティブに変換します。制御ファイルはインストール先のシステムに転送され、ディレクティブを処理したあと &yast; に渡されます。</para>
    </listitem>
    <listitem>
     <para>インストール: &yast; は &ay; 制御ファイルに書かれたデータをもとにして、基本的なシステムのインストールを実施します。</para>
    </listitem>
    <listitem>
     <para>設定: 基本的なシステムのインストールが完了したら、インストールの第 2 ステージでシステムの設定を行ないます。このステージでは、 &ay; の制御ファイル内に書かれたインストール後スクリプトも実行されます。</para>
    </listitem>
   </itemizedlist>

   <note>
    <title>第 2 ステージについて</title>
    <para>&productname; &productnumber; の通常のインストールは、単一のステージで実施されます。自動インストールの場合にのみ、 2 つのステージに分割して実行されます。基本的なシステムのインストールが終わったあと、システムは第 2 ステージとしてインストール後のシステムを起動します。</para>
    <para>第 2 ステージで自動インストールを正しく動作させるには、インストール先のシステムに <literal>autoyast2</literal> と <literal>autoyast2-installation</literal> のパッケージをインストールしておく必要があります。これらをインストールしておかないと、インストール済みのシステムを起動する際にエラーメッセージが表示されます。</para>
    <para>なお、第 2 ステージを無効化したい場合は、 <literal>second_stage</literal> パラメータを設定してください:</para>
<screen>&lt;general&gt;
  &lt;mode&gt;
    &lt;confirm config:type="boolean"&gt;false&lt;/confirm&gt;
    &lt;second_stage config:type="boolean"&gt;false&lt;/second_stage&gt;
  &lt;/mode&gt;
&lt;/general&gt;</screen>
   </note>

   <para>処理の流れは下記の図のようになっています:</para>

   <figure xml:id="process">
    <title>自動インストール処理</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast-oview.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast-oview.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>
  </sect1>
 </chapter>
 <chapter xml:id="Profile">
  <title>制御ファイル</title>
  <info/>
  <para/>
  <sect1 xml:id="Profile.Intro">
   <title>紹介</title>

   <para>制御ファイルは通常、単一のシステムに対する設定を記述します。リストやレコード、ツリーや巨大組み込み形式や参照オブジェクトなど、複雑な構造に対応したプロパティリソースから構成されています。</para>

   <important>
    <title>&slea; 11 リリース以降の制御ファイルの非互換性について</title>
    <para>&productname; 12 では多数の大規模変更 (systemd への切り替えや &grub; など) が加えられています。これらの変更に伴い、 &ay; も大きく変更が加えられていますので、 &productname; 11 で作成された &ay; の制御ファイルは &productname; &productnumber; で使用することができません。逆に &productname; &productnumber; 向けの制御ファイルを &productname; 11 で使用することもできません。</para>
   </important>
  </sect1>
  <sect1 xml:id="Profile.Format">
   <title>書式</title>

   <para>設定ファイルの形式に XML を採用していることにより、ファイル構造の一貫性が保たれているほか、新しいシステムを設定しようとする場合でも、学びやすく覚えやすい仕組みになっています。</para>

   <para>&ay; の制御ファイルでは、 XML を利用してシステムのインストールや設定を表現します。 XML は汎用目的のマークアップ言語で、多くのユーザが慣れ親しんでいる構造であるほか、 XML ファイルを処理するためのツールも多数用意されています。既存の制御ファイルを編集する場合でも、何もない状態から制御ファイルを作成する場合でも、制御ファイルの構造が正しいことを検証しておくことを強くお勧めします。これは <literal>xmllint</literal> や <literal>jing</literal> のような検証型 XML パーサーを使用することで行なうことができます (たとえば <xref linkend="CreateProfile.Manual"/> をご覧ください) 。</para>

   <para>下記は XML 形式での制御ファイルの例です:</para>

   <example>
    <title>&ay; の制御ファイル (プロファイル)</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/sda&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
          &lt;size&gt;10G&lt;/size&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
          &lt;size&gt;120G&lt;/size&gt;
          &lt;mount&gt;/data&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
  &lt;scripts&gt;
    &lt;pre-scripts&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;filename&gt;start.sh&lt;/filename&gt;
        &lt;source&gt;
        &lt;![CDATA[
#!/bin/sh
echo "Starting installation"
exit 0

]]&gt;

        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="Profile.Structure">
   <title>構造</title>

   <para>下記は制御ファイルのコンテナで、この中に実際の設定を書き込んでいくものです。</para>

   <example>
    <title>制御ファイルのコンテナ</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile
  xmlns="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;!-- リソース --&gt;
&lt;/profile&gt;</screen>
   </example>

   <para><literal>&lt;profile&gt;</literal> の要素 (ルートノード) には、 1 つもしくは複数のリソース要素を追加します。指定可能なリソース要素は、スキーマファイル内で指定されています。</para>

   <sect2 xml:id="Profile.Format.ressources">
    <title>リソースとプロパティ</title>
    <para>リソース要素には複数の重複しないプロパティ要素や子リソース要素を含めることができるほか、同じ子リソース要素を複数インスタンスとして追加することもできます。もちろん何も含めない指定も行なうことができます。リソース要素内に含めることのできる要素は、スキーマファイル内で指定されています。</para>
    <para>プロパティ要素には値としてリテラルを指定することができます。もちろん値を指定しなくてもかまいません。それぞれのリソース要素内で指定可能なプロパティ要素とその値についても、スキーマファイル内で指定がされています。</para>
    <para>要素は他の要素に対するコンテナとする (リソース) ことができるほか、値としてリテラルを持つ (プロパティ) こともできますが、両方を同時に使用することはできません。この制限についても、スキーマファイル内に記述されています。 1 つ以上の値を持つ設定のコンポーネントは、プロパティ値内で組み込みのリストとして表現するか、入れ子型のリソースとして表現します。</para>
    <para><literal>&lt;foo&gt;&lt;/foo&gt;</literal> や <literal>&lt;bar/&gt;</literal> のような空要素は、処理済みのデータモデル内に存在すべきでは <emphasis>ありません</emphasis> 。通常、これらには適切な既定値を設定すべきです。意図的に空要素を指定したい場合は、 CDATA セクションを使用して <literal>&lt;foo&gt;&lt;![CDATA[]]&gt;&lt;/foo&gt;</literal> のように指定し、空文字列を設定してください。</para>
   </sect2>

   <sect2 xml:id="Profile.Format.ressources_nested">
    <title>入れ子になったリソース設定</title>
    <para>入れ子になったリソース要素を使用することで、任意の階層構造からなるツリー状の設定コンポーネントを作成することができます。</para>
    <para>入れ子になったリソースとしては、マップとリストの 2 種類が存在します。マップ (連想配列やハッシュ、辞書と呼ばれることもあります) にはタグ名とそれに対応する値の対を含めることができます。リスト (配列と呼ばれることもあります) には、単純に値の羅列を含めることができます。</para>
    <example>
     <title>入れ子になったリソース設定</title>
<screen>...
&lt;drive&gt;
  &lt;device&gt;/dev/sda&lt;/device&gt;
  &lt;partitions config:type="list"&gt;
     &lt;partition&gt;
        &lt;size&gt;10G&lt;/size&gt;
        &lt;mount&gt;/&lt;/mount&gt;
     &lt;/partition&gt;
     &lt;partition&gt;
        &lt;size&gt;1G&lt;/size&gt;
        &lt;mount&gt;/tmp&lt;/mount&gt;
     &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;
....</screen>
    </example>
    <para>上記の例では、 <literal>drive</literal> リソースは <literal>device</literal> プロパティと <literal>partitions</literal> リソースから構成されるマップの形態になっています。 <literal>partitions</literal> リソースは複数の <literal>partition</literal> から構成されるリストで、その <literal>partition</literal> リソースは <literal>size</literal> と <literal>mount</literal> のプロパティを含むマップの形態になっています。</para>
    <para>入れ子になったリソースの場合、既定ではマップとして処理されます。リストを使用したい場合は、 <literal>config:type="list"</literal> の属性を明示的に指定しなければなりません。</para>
   </sect2>

   <sect2 xml:id="Profile.Format.attributes">
    <title>Attributes</title>
    <para>グローバル属性は、リソースやプロパティ内のメタデータを定義する際に使用します。属性はコンテキストの切り替えを定義するために使用します。これらは上記の章に示されているプロパティの名前付けや型指定で使用されます。属性については独自のネームスペース内に存在していることから、既定のネームスペース内で予約語として扱う必要はありません。</para>
    <para><literal>config:type</literal> 属性は処理済みのデータモデル内で、リソースやプロパティの型を設定するためのものです。リソースの場合、リスト型を指定したい場合は <literal>list</literal> を設定する必要がありますが、マップ型の場合は既定の型であるため、属性の設定は不要となります。プロパティの場合、 <literal>boolean</literal> , <literal>symbol</literal> , <literal>integer</literal> の各型を指定することができます。こちらの場合は既定値は <literal>string</literal> となります。</para>
    <para>属性は基本的に任意指定ではありません。ただし、スキーマ内のさまざまな場所でさまざまな指定がされていて一貫性が無いことから、中には任意指定の属性も存在します。また、場所によっては、値を列挙するのにシンボルで表わす場合があるほか、文字列を必要とするような場合も存在します。また一方のリソースでは <literal>config:type="integer"</literal> の指定が必要となるのに対して、他方では文字列属性で数値を処理する箇所もあります。またリソースによっては <literal>config:type="boolean"</literal> を使用するのに対して、他のリソースでは <literal>yes</literal> や <literal>1</literal> などを使用することもあります。詳しくはスキーマファイルをご覧ください。</para>
   </sect2>
  </sect1>
 </chapter>
 <chapter xml:id="CreateProfile">
  <title>制御ファイルの作成</title>
  <info/>
  <para/>
  <sect1 xml:id="Autoinstallation.collectInfo">
   <title>情報の収集</title>

   <para>制御ファイルを作成するには、まずインストールしたいシステムに関して情報の収集を行なう必要があります。この情報収集にはハードウエアデータやネットワーク情報などが含まれます。まずはインストール予定のマシンに対して、下記のような情報を収集してください:</para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>ハードディスクの種類とサイズ</para>
    </listitem>
    <listitem>
     <para>グラフィカルなインターフェイスと接続されているモニタ (もしあれば)</para>
    </listitem>
    <listitem>
     <para>既知であればネットワークインターフェイスと MAC アドレスの情報 (特に DHCP を使用するような場合)</para>
    </listitem>
   </itemizedlist>
  </sect1>
  <sect1 xml:id="CreateProfile.CMS">
   <title>設定管理システム (Configuration Management System; CMS) の使用</title>

   <para>1 台もしくは複数台のコンピュータに対して制御ファイルを作成する目的で、 &yast; をベースにした設定インターフェイスが提供されています。このシステムは、 &productname; を通常の手順でインストールしたり設定したりする際に使用する、既存のモジュールをベースにして作られています。</para>

   <para>設定管理システムを使用することで、制御ファイルを簡単に作成することができるほか、複数のクライアントからアクセスすることができるようにするため、ネットワーク環境内で設定のリポジトリを管理したりすることもできます。</para>

   <figure os="sles;sled">
    <title>設定システム</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast2-maindialog.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast2-maindialog.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <figure os="osuse">
    <title>設定システム</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast2-maindialog_kde.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast2-maindialog_kde.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <sect2 xml:id="CreateProfile.CMS.new">
    <title>新しい制御ファイルの作成</title>
    <para>いくつかの例外を除いて、ほぼ全ての制御ファイルのリソースは、設定管理システムを利用することで設定することができます。システムは柔軟に作られていて、設定を作成する際の手順も、通常の &yast; コントロールセンターと同じユーザインターフェイスになっています。既存のものと同じユーザインターフェイスであるだけでなく、パーティション設定や汎用オプション、ソフトウエアなど、特殊で複雑な設定を作成するための新しいインターフェイスも提供されています。</para>
    <para>これに加えて、 CMS では生成された制御ファイルの正当性を確認する仕組みも備えていますので、生成された制御ファイルをそのまま自動インストールに使用することができます。</para>
    <para>まずは設定管理システム (<systemitem class="resource">autoyast2</systemitem> パッケージ) がインストールされていることを確認し、 &yast; コントロールセンターから起動を行なうか、もしくは root で下記のコマンドを実行します (なお、グラフィカルな表示を行ないたい場合は、 <envar>DISPLAY</envar> 環境変数を正しく設定していることを確認してから実行してください):</para>
<screen>/sbin/yast2 autoyast</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="CreateProfile.Manual">
   <title>手作業による制御ファイルの作成および編集</title>

   <para>制御ファイルを手作業で編集する場合は、まず書式が正しいことを確認する必要があります。書式を確認するには、お使いのディストリビューションに既に用意されているツールをお使いください。たとえばファイルの書式が正しいこと (XML の構造に間違いがないこと) を確認したい場合は、 <systemitem>libxml2</systemitem> パッケージ内に含まれる <command>xmllint</command> ユーティリティを使用します:</para>

<screen>xmllint &lt;制御ファイル&gt;</screen>

   <para>制御ファイルの書式に問題が見つかると (たとえばタグが正しく閉じられていないなど) 、 <command>xmllint</command> はエラーを報告します。</para>


   <para>制御ファイルの内容を確認したい場合は、同じパッケージ内に含まれる <command>jing</command> ツールをお使いください。確認の際、タグの配置の誤りのほか、必須のタグや属性の確認や属性値の確認も行なわれます。 <phrase os="sles">なお、 <package>jing</package> パッケージは &sdk; 内に含まれています。</phrase></para>

<screen>jing /usr/share/YaST2/schema/autoyast/rng/profile.rng &lt;制御ファイル&gt;</screen>

   <para><literal>/usr/share/YaST2/schema/autoyast/rng/profile.rng</literal> ファイルは <literal>yast2-schema</literal> パッケージ内に含まれています。このファイルには、 &ay; プロファイルの書式とクラスに関する情報が書かれています。</para>


   <para>自動インストールを行なう前に、これらのチェックで表示されたエラーを全て修正してください。制御ファイルの書式や形式が正しくない場合、自動インストールの処理を開始することはできません。</para>

   <para>制御ファイルの編集にあたっては、任意の XML エディタのほか、 XML に対応した任意のテキストエディタ (例: Emacs, Vim) を使用することができます。ただし、多数のマシンに対して制御ファイルを作成する場合は最適な選択であるとは言えないため、自動インストールエンジンと設定管理システム (CMS) の中間で使用することをお勧めします。</para>

   <tip>
    <title>XML エディタとしての emacs の使用について</title>
    <para>Emacs に内蔵された nxml-mode を使用すると、タグの補完機能や検証機能も存在する、完全機能の XML エディタとして使用することができます。 nxml-mode の設定方法について、詳しくは Emacs のヘルプをお読みください。</para>
   </tip>
  </sect1>
  <sect1 xml:id="CreateProfile.XSLT">
   <title>XSLT を利用したスクリプト経由での制御ファイルの作成</title>

   <para>雛形となる制御ファイルが既に存在していて、その中の一部をスクリプトやコマンドラインで修正したい場合は、 <literal>xsltproc</literal> のような XSLT プロセッサを使用することをお勧めします。たとえば &ay; の制御ファイル内のホスト名を、スクリプトを介して修正したいような場合がそれにあたります (ホスト名を設定するような場合は、それをスクリプト化することをお勧めします) 。</para>

   <para>まずは XSL ファイルを作成します:</para>

   <example>
    <title>スクリプトでホスト名やドメイン名を置き換える場合の例</title>
<screen>&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:y2="http://www.suse.com/1.0/yast2ns"
  xmlns:config="http://www.suse.com/1.0/configns"
  xmlns="http://www.suse.com/1.0/yast2ns"
  version="1.0"&gt;
  &lt;xsl:output method="xml" encoding="UTF-8" indent="yes" omit-xml-declaration="no" cdata-section-elements="source"/&gt;

  &lt;!-- パラメータ名 --&gt;
  &lt;xsl:param name="hostname"/&gt;
  &lt;xsl:param name="domain"/&gt;

  &lt;xsl:template match="/"&gt;
    &lt;xsl:apply-templates select="@*|node()"/&gt;
  &lt;/xsl:template&gt;

  &lt;xsl:template match="y2:dns"&gt;
    &lt;xsl:copy&gt;
      &lt;!-- where to copy the parameters --&gt;
      &lt;domain&gt;&lt;xsl:value-of select="string($domain)"/&gt;&lt;/domain&gt;
      &lt;hostname&gt;&lt;xsl:value-of select="string($hostname)"/&gt;&lt;/hostname&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;


  &lt;xsl:template match="@*|node()" &gt;
    &lt;xsl:copy&gt;
      &lt;xsl:apply-templates select="@*|node()"/&gt;
    &lt;/xsl:copy&gt;
  &lt;/xsl:template&gt;

&lt;/xsl:stylesheet&gt;
</screen>
   </example>

   <para>このファイルでは、ホスト名とドメイン名をパラメータとして求めるようになっています。</para>

<screen>&lt;xsl:param name="hostname"/&gt;
&lt;xsl:param name="domain"/&gt;</screen>

   <para>これらの情報は、同じ制御ファイル内の DNS セクション内に書かれています。ただし、 DNS セクションには複数のドメイン要素を記述することがありますので、このまま使用してしまうと、最後の要素を取得してしまうことになり、期待通りの動作にならないことがあります。</para>

   <remark>mdejmek: why is this no good? please explain</remark>

<!-- FIXME: rewrite these sections using xsltproc
   <para>
    To create a new &ay; control file now from the template plus
    the XSL file, run the following command:
   </para>

<screen>sabcmd add_hostname.xsl \$hostname=myHost \$domain=my.domain  template.xml</screen>

   <para>
    You will then get a filled out &ay; control file on STDOUT.
   </para>

   <para>
    If you have multiple XSL files you want to apply to a template, do the
    following:
   </para>

<screen>sabcmd add_hd_vg.xsl \$device=/dev/sda \$partition=p2 \$vg=system \
        | sabcmd add_harddisk.xsl \$device=/dev/system \$lvm=true \
        | sabcmd ....
        | sabcmd add_hostname.xsl \$hostname=myHost \$domain=my.domain</screen>

   <para>
    Pipe the output of each sabcmd to the next sabcmd.
   </para>
-->

   <para>XSLT に関する詳細については、公式 Web ページ <link xlink:href="http://www.w3.org/TR/xslt">www.w3.org/TR/xslt</link> (英語) をお読みください。</para>
  </sect1>
 </chapter>
 <chapter xml:id="configuration">
<!--
    <section id="Configuration.Network.NISplus">
    <title>
    NIS+
  </title>
    <para>
    If you activate NIS+, the data of the
    NIS+ Server will be added to <filename>/etc/hosts</filename>. Keyserv and the NIS+ cache manager
    will be started and the NSS and PAM configuration will be modified to use
    NIS+ and set the Secret Key of a user.
  </para>
    &example.nisplus;
  </section>
    -->
<!-- {{{ Kdump -->
  <title>設定およびインストールのオプション</title>
  <info/>
  <para>本章では、一般的な用途で使用する制御ファイル内の主要なパーツについて説明しています。その他の利用可能なオプションについて知るには、設定管理システム (CMS) をお使いください。</para>
  <para>なお、オプションによっては追加のパッケージをインストールしなければならないものもあります。お使いのシステムをインストールする際、最小限のパッケージ選択を行なっていると、必要なパッケージがインストールされていない場合がありますので、この場合は個別にパッケージを選択してインストールしてください。</para>
  <para>&yast; では、 &ay; のインストール後フェーズの開始前に、インストールの第 2 フェーズで必要なパッケージをインストールします。しかしながら、システム側で必要な &yast; モジュールがインストールされていないと、主要な設定ステップが飛ばされてしまいます。たとえば <systemitem class="resource">yast2-security</systemitem> パッケージがインストールされていない場合、セキュリティ関連の設定は行なわれません。</para>
<sect1 xml:id="CreateProfile.General">
 <title>一般オプション</title>
  <para><literal>general</literal> セクションには、インストールの処理手順全体に影響する全ての設定が書かれています。このセクションの全体像は下記のとおりです:</para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns"
 xmlns:config="http://www.suse.com/1.0/configns"&gt;
 &lt;general&gt;
  &lt;ask-list&gt;<co xml:id="co.ay.general.ask"/>
   ...
  &lt;/ask-list&gt;
  &lt;cio_ignore&gt;<co xml:id="co.ay.general.cio_ignore" arch="zseries"/>
   ...
  &lt;/cio_ignore&gt;
  &lt;mode&gt;<co xml:id="co.ay.general.mode"/>
   ...
  &lt;/mode&gt;
  &lt;proposals&gt;<co xml:id="co.ay.general.proposal"/>
   ...
  &lt;/proposals&gt;
  &lt;self_update&gt;<co xml:id="co.ay.general.self_update"/>
   ...
  &lt;/self_update&gt;
  &lt;self_update_url&gt;
   ...
  &lt;/self_update_url&gt;
  &lt;semi-automatic config:type="list"&gt;<co xml:id="co.ay.general.semi"/>
   ...
  &lt;/semi-automatic&gt;
  &lt;signature-handling&gt;<co xml:id="co.ay.general.signature"/>
   ...
  &lt;/signature-handling&gt;
  &lt;storage&gt;<co xml:id="co.ay.general.storage"/>
   ...
  &lt;/storage&gt;
  &lt;wait&gt;<co xml:id="co.ay.general.wait"/>
   ...
  &lt;/wait&gt;
 &lt;/general&gt;
&lt;profile&gt;</screen>
  <calloutlist>
   <callout arearefs="co.ay.general.ask">
    <para><!-- インストール時のユーザへの値の確認 --> <xref linkend="CreateProfile.Ask" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.cio_ignore" arch="zseries">
    <para><!-- IBM z システムにおける未使用デバイスのブラックリスト設定 --> <xref linkend="CreateProfile.General.cio_ignore" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.mode">
    <para><!-- モードセクション --> <xref linkend="CreateProfile.General.mode" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.proposal">
    <para><!-- インストール設定画面の設定 --> <xref linkend="CreateProfile.General.proposal" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.self_update">
    <para><!--自己更新セクション --> <xref linkend="CreateProfile.General.self_update" xrefstyle="HeadingOnPaqge"/></para>
   </callout>
   <callout arearefs="co.ay.general.semi">
    <para><!--半自動化セクション --> <xref linkend="CreateProfile.General.semi_automatic" xrefstyle="HeadingOnPaqge"/></para>
   </callout>
   <callout arearefs="co.ay.general.signature">
    <para><!-- 署名処理セクション --> <xref linkend="CreateProfile.General.signature" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.storage">
    <para><!-- ストレージセクション --> <xref linkend="CreateProfile.General.storage" xrefstyle="HeadingOnPage"/></para>
   </callout>
   <callout arearefs="co.ay.general.wait">
    <para><!-- 待機セクション --> <xref linkend="CreateProfile.General.wait" xrefstyle="HeadingOnPage"/></para>
   </callout>
  </calloutlist>

  <sect2 xml:id="CreateProfile.General.mode">
   <title>モードセクション</title>

   <para>モードセクションでは、ユーザに対する問い合わせや再起動に関する &ay; の動作を設定します。 <tag class="element">mode</tag> セクション内では下記の要素を設定することができます:</para>

   <variablelist>
    <varlistentry>
     <term><tag class="element">activate_systemd_default_target</tag></term>
     <listitem>
      <para>この項目を <literal>false</literal> に設定すると、既定の <systemitem class="daemon">systemd</systemitem> のターゲットが <command>systemctl isolate</command> で有効化されなくなります。この値の指定は任意で、既定値は <literal>true</literal> です。</para>
<screen><![CDATA[<general>
 <mode>
  <activate_systemd_default_target config:type="boolean">
   true
  </activate_systemd_default_target>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">confirm</tag></term>
     <listitem>
      <para>既定では、インストール処理は <guimenu>インストール設定</guimenu> の画面で停止します。この時点では、まだシステムに対して何も変更が加えられておらず、必要であれば、この画面から各種の設定を変更することができます。ここから先に進むことで実際のインストールが始まることから、ここでユーザへの確認を行なっています。この値を <literal>false</literal> にすると、設定内容は自動的に受け入れられ、インストールが始まることになります。そのため、完全な無人インストールを行ないたい場合にのみ、 <literal>false</literal> を指定してください。この値の指定は任意で、既定値は <literal>true</literal> です。</para>
<screen><![CDATA[<general>
 <mode>
  <confirm config:type="boolean">true</confirm>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">confirm_base_product_license</tag></term>
     <listitem>
      <para>この値を <literal>true</literal> に設定すると、基本製品の EULA が表示されるようになります。ユーザ側では、表示されたライセンスを受け入れる必要があります。受け入れない場合、インストールはキャンセルされます。この値の設定は任意で、既定値は <literal>false</literal> です。この設定は基本製品のライセンスにのみ適用されます。追加のライセンスについては、 <literal>add-on</literal> セクション内の <literal>confirm_license</literal> フラグをお使いください (詳しくは <xref linkend="Software.Selections.additional"/> をお読みください) 。</para>
<screen><![CDATA[<general>
 <mode>
  <confirm_base_product_license config:type="boolean">
   false
  </confirm_base_product_license>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">final_halt</tag></term>
     <listitem>
      <para>この値を <literal>true</literal> に設定すると、インストールの最後の最後 (全てのパッケージをインストールし、第 2 ステージの末尾での設定が終わったあと) にマシンをシャットダウンするようになります。この値の設定は任意で、既定値は <literal>true</literal> です。この値と <literal>final_reboot</literal> の両方を <literal>true</literal> にしても、意味はありません。</para>
<screen><![CDATA[<general>
 <mode>
  <final_halt config:type="boolean">true</final_halt>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">final_reboot</tag></term>
     <listitem>
      <para>この値を <literal>true</literal> に設定すると、インストールの最後 (全てのパッケージをインストールし、第 2 ステージの末尾での設定が終わったあと) にマシンを再起動するようになります。この値の設定は任意で、既定値は <literal>true</literal> です。この値と <literal>final_halt</literal> の両方を <literal>true</literal> にしても、意味はありません。</para>
<screen><![CDATA[<general>
 <mode>
  <final_reboot config:type="boolean">true</final_reboot>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">final_restart_services</tag></term>
     <listitem>
      <para>この項目を <literal>false</literal> に設定すると、インストールの最後 (全てのパッケージをインストールし、第 2 ステージの末尾での設定が終わったあと) にサービス類が再起動 <emphasis>されなく</emphasis> なります。この値の設定は任意で、既定値は <literal>true</literal> です。</para>
<screen><![CDATA[<general>
 <mode>
  <final_restart_services config:type="boolean">
   true
  </final_restart_services>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry os="osuse">
     <term><tag class="element">forceboot</tag></term>
     <listitem>
      <para>&opensuse; のリリースによっては、第 1 ステージ終了後の再起動を避けるため、 &kexec; を利用して居るバージョンがあります。これにより、インストール済みのシステムを即時に起動できるようになっています。この場合、この値を <literal>true</literal> に設定することで、 &kexec; ではなく再起動を行なうようにすることができます。この値の設定は任意で、既定値は製品によって異なります。</para>
<screen><![CDATA[<general>
 <mode>
  <forceboot config:type="boolean">false</forceboot>
 </mode>
 ...
</general>]]></screen>
      <important>
       <title>ドライバによっては再起動が必要となる件について</title>
       <para><remark>2013-03-18 - fs: bnc #802387</remark> nVidia 社, ATI 社のグラフィックカード向けのプロプライエタリドライバなどを使用している場合、 &kexec; では正しく動作させることができず、必ず再起動が必要となります。そのため、 &productname; 製品の既定では、必ず再起動を行なうようになっています。</para>
      </important>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">halt</tag></term>
     <listitem>
      <para>第 1 ステージの終了後にマシンをシャットダウンします。この段階では、全てのパッケージとブートローダのインストールが完了し、 chroot スクリプトの指定があれば、実行後の状態になります。この場合、再起動を行なって第 2 ステージを開始する代わりに、マシンの電源が落とされます。その後マシンの電源を投入すると、マシンは第 2 ステージの自動インストールが始まるようになります。この値の設定は任意で、既定値は <literal>false</literal> です。</para>
<screen><![CDATA[<general>
 <mode>
  <halt config:type="boolean">false</halt>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">max_systemd_wait</tag></term>
     <listitem>
      <para><systemitem class="daemon">systemd</systemitem> が既定のターゲットの準備を整える際、 &ay; が最大で待機する時間を秒単位で指定します。この値の設定は任意で、通常は設定不要です。既定値は <literal>30</literal> (秒) です。</para>
<screen><![CDATA[<general>
 <mode>
  <max_systemd_wait config:type="integer">30</max_systemd_wait>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">ntp_sync_time_before_installation</tag></term>
     <listitem>
      <para>インストールを開始する前に時刻同期を行なうための、 NTP サーバを指定します。時刻同期は、このオプションを設定した場合にのみ行なわれます。なお、 NTP サーバとの通信にはネットワークの接続と、 NTP サーバへの経路情報の設定が必要となります。この値の設定は任意で、既定では時刻同期を行ないません。</para>
<screen><![CDATA[<general>
 <mode>
  <ntp_sync_time_before_installation>
   &ntpname;
  </max_systemd_wait>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">second_stage</tag></term>
     <listitem>
      <para>通常の &productname; のインストールは、単一のステージ内で行なわれますが、自動インストールの場合は、 2 つのステージに分割して実行されます。自動インストールでは基本的なシステムのインストールを行なったあと、システムの設定を行なうために第 2 ステージを起動します。このオプションを <literal>false</literal> に設定すると、第 2 ステージを無効化することができます。この値の設定は任意で、既定値は <literal>true</literal> です。</para>
<screen><![CDATA[<general>
 <mode>
  <second_stage config:type="boolean">true</second_stage>
 </mode>
 ...
</general>]]></screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="CreateProfile.General.proposal">
   <title>インストール設定画面の設定</title>

   <para>&ay; では、インストールに関する設定の概要を表示する <guimenu>インストール設定</guimenu> の画面をカスタマイズすることができます。この画面では、実際のインストールが始まる前に、さまざまな設定を変更することができます。 <tag class="element">proposal</tag> タグを使用することで、インストール設定の画面に表示される設定 (<quote>提案</quote>) を制御することができます。表示することのできる提案項目の一覧については、インストールメディア内の <filename>/control.xml</filename> ファイルをご覧ください。この設定は任意で、既定では全ての設定オプションを表示します。</para>

<screen><![CDATA[<proposals config:type="list">
 <proposal>partitions_proposal</proposal>
 <proposal>timezone_proposal</proposal>
 <proposal>software_proposal</proposal>
</proposals>]]></screen>
  </sect2>

  <sect2 xml:id="CreateProfile.General.self_update">
   <title>自己更新セクション</title>

   <para>インストールの際、 &yast; は自分自身を更新して、リリース後に発見されたインストーラ自身のバグを解決することができます。この機能に関する詳細について、詳しくは &deploy; をお読みください。 &yast; の自己更新機能では、下記のようなタグを使用することができます:</para>

   <variablelist>
    <varlistentry>
     <term><tag class="element">self_update</tag></term>
     <listitem>
      <para>このオプションを設定することで、 &yast; の自己更新機能を有効化 (<literal>true</literal>) もしくは無効化 (<literal>false</literal>) することができます。この値の設定は任意で、既定値は <literal>true</literal> です。</para>
<screen><![CDATA[<general>
 <self_update config:type="boolean">true</self_update>
 ...
</general>]]></screen>
      <para>カーネルのコマンドラインに対して、 <literal>self_update=1</literal> の起動パラメータを設定しても、同じ動作になります。</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">self_update_url</tag></term>
     <listitem>
      <para>&yast; の自己更新機能を提供する更新リポジトリの場所を指定します。詳しくは &deploy; をお読みください。</para>
      <important>
       <title>インストーラ自身の更新リポジトリのみを設定する必要がある件について</title>
       <para><option>self_update_url</option> パラメータでは、インストーラの自己更新を提供する URL のみを指定します。ソフトウエアの更新リポジトリなど、その他のリポジトリを指定してはなりません。</para>
      </important>
<screen><![CDATA[<general>
 <self_update_url>
  http://example.com/updates/$arch
 </self_update_url>
 ...
</general>]]></screen>
      <para>URL には <envar>$arch</envar> という変数を含めることができます。これはシステムのアーキテクチャに置き換えられる箇所を示すもので、たとえば <literal>x86_64</literal> , <literal>s390x</literal> などに置き換えられます。</para>
      <para>それ以外の方法としては、カーネルのコマンドラインに対して、 <literal>self_update=1</literal> と <literal>self_update=<replaceable>URL</replaceable></literal> の起動パラメータを設定しても、同じ動作になります。</para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>


  <sect2 xml:id="CreateProfile.General.semi_automatic">
   <title>半自動化セクション</title>

   <para>&ay; では、インストール時にいくつかの &yast; モジュールを起動する機能を提供しています。これは、いくつかの項目については手動で設定し、それ以外を全て自動的に実施したいような場合に有用です。この半自動化セクションでは、下記のような &yast; モジュールを起動することができます:</para>
   <itemizedlist>
    <listitem>
     <para>ネットワーク設定モジュール ( <literal>networking</literal> )</para>
    </listitem>
    <listitem>
     <para>パーティション設定モジュール ( <literal>partitioning</literal> )</para>
    </listitem>
    <listitem>
     <para>登録モジュール ( <literal>scc</literal> )</para>
    </listitem>
   </itemizedlist>
   <para>下記の例は、インストール時に対応する 3 種類全てのモジュールを起動する場合の例です:</para>
   <screen><![CDATA[<general>
 <semi-automatic config:type="list">
  <semi-automatic_entry>networking</semi-automatic_entry>
  <semi-automatic_entry>scc</semi-automatic_entry>
  <semi-automatic_entry>partitioning</semi-automatic_entry>
 </semi-automatic>
</general>]]></screen>
  </sect2>

  <sect2 xml:id="CreateProfile.General.signature">
   <title>署名処理セクション</title>

   <para>既定では、 &ay; は既知の GPG 鍵で署名されたソースからの署名付きパッケージのみをインストールします。本セクションでは、この既定値を変更することができます。</para>

   <warning>
    <title>署名処理設定の変更に伴う危険性について</title>
    <para>未署名のパッケージやチェックサムの確認が失敗したパッケージ、もしくは信頼していないソースからのパッケージを受け入れてしまうと、セキュリティ上のリスクとなります。このようなパッケージを受け入れてしまうと、パッケージが改ざんされていることを検出することができなくなるほか、お使いのマシンに悪意のあるソフトウエアをインストールする結果になってしまいます。ここで説明している既定値の上書きは、リポジトリとその中にあるパッケージの両方が信頼できるものである場合にのみ、設定してください。 &suse; では、これらの正当性チェックを無効化した状態でソフトウエアをインストールし使用した場合、一切の保証は行ないません。</para>
   </warning>

   <para>下記に示す全オプションの既定値は false です。オプションが false に設定されていた場合、それに対応するパッケージやリポジトリのチェックが失敗すると、特にメッセージを表示することなくインストールを行なわなくなります。</para>

   <variablelist>
    <varlistentry>
     <term><tag class="element">accept_unsigned_file</tag></term>
     <listitem>
      <para><literal>true</literal> に設定した場合、 &ay; はコンテンツファイルなどが未署名であっても、受け入れるようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <accept_unsigned_file config:type="boolean">
   false
  </accept_unsigned_file>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">accept_file_without_checksum</tag></term>
     <listitem>
      <para><literal>true</literal> に設定した場合、 &ay; はコンテンツファイルなどのチェックサムが存在しない場合であっても、受け入れるようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <accept_file_without_checksum config:type="boolean">
   false
  </accept_file_without_checksum>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">accept_verification_failed</tag></term>
     <listitem>
      <para><literal>true</literal> に設定すると、 &ay; は署名の検証が失敗した場合でも、署名付きのファイルであればそれらを受け付けるようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <accept_verification_failed config:type="boolean">
   false
  </accept_verification_failed>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">accept_unknown_gpg_key</tag></term>
     <listitem>
      <para><literal>true</literal> に設定した場合、 &ay; はインストール元に新しい GPG 鍵が存在し、その鍵でコンテンツファイルに署名されている場合、それを受け付けるようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <accept_unknown_gpg_key config:type="boolean">
   false
  </accept_unknown_gpg_key>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">accept_non_trusted_gpg_key</tag></term>
     <listitem>
      <para><literal>true</literal> に設定した場合、既知ではあるもののまだ信頼していない鍵を受け付けるようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <accept_non_trusted_gpg_key config:type="boolean">
   false
  </accept_non_trusted_gpg_key>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">import_gpg_key</tag></term>
     <listitem>
      <para><literal>true</literal> に設定した場合、 &ay; はインストール元にある新しい GPG 鍵を受け付け、データベース内に取り込むようになります。</para>
<screen><![CDATA[<general>
 <signature-handling>
  <import_gpg_key config:type="boolean">
   false
  </import_gpg_key>
 </signature-handling>
 ...
<general>]]></screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="CreateProfile.General.storage">
   <title>ストレージセクション</title>

   <para>本セクションでは、インストール時にマルチパスサポートを有効化することができます。ここではパーティションの割り当て方針についても設定することができます。</para>

   <variablelist>
    <varlistentry>
     <term><tag class="element">btrfs_set_default_subvolume_name</tag></term>
     <listitem>
      <para>詳しくは <xref linkend="ay.btrfs_subvolumes"/> をお読みください。</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">start_multipath</tag></term>
     <listitem>
      <para>複数のパスを介してアクセスすることのできるネットワークストレージ上にインストールを行なう場合、このパラメータを <literal>true</literal> に設定して、インストール時にマルチパス機能を使用できるようにします。この値の設定は任意で、既定値は <literal>false</literal> です。</para>
<screen><![CDATA[<general>
 <storage>
  <start_multipath config:type="boolean">false</start_multipath>
 </storage>
 ...
<general>]]></screen>
      <para>カーネルのコマンドラインに対して、 <literal>LIBSTORAGE_MULTIPATH_AUTOSTART=ON</literal> の起動パラメータを設定しても、同じ動作になります。</para>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="CreateProfile.General.wait">
   <title>待機セクション</title>

   <para>インストールの第 2 ステージでは、ネットワークの設定などのさまざまなモジュールを動作させて、システムの設定を行ないます。 <tag class="element">wait</tag> セクションでは、特定のモジュールの動作前後で実行すべきスクリプトを指定することができます。また、各モジュールの前後でシステムを待機させる時間幅 ( <quote>スリープ</quote> ) を設定することもできます。</para>

   <variablelist>
    <varlistentry>
     <term><tag class="element">pre-modules</tag></term>
     <listitem>
      <para>設定モジュールが起動する前に実行すべきスクリプトと、その待機時間をそれぞれ設定することができます。下記のコードでは、ネットワーク設定モジュールを起動する前に、 10 秒間の待機と echo コマンドの実行を指定しています。</para>
<screen><![CDATA[<general>
 <wait>
  <pre-modules config:type="list">
   <module>
    <name>networking</name>
    <sleep>
     <time config:type="integer">10</time>
     <feedback config:type="boolean">true</feedback>
    </sleep>
    <script>
     <source>echo foo</source>
     <debug config:type="boolean">false</debug>
    </script>
   </module>
  </pre-modules>
  ...
 </wait>
<general>]]></screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term><tag class="element">post-modules</tag></term>
     <listitem>
      <para>設定モジュールが起動した後に実行すべきスクリプトと、その待機時間をそれぞれ設定することができます。下記のコードでは、ネットワーク設定モジュールを起動した後に、 10 秒間の待機と echo コマンドの実行を指定しています。</para>
<screen><![CDATA[<general>
 <wait>
  <post-modules config:type="list">
   <module>
    <name>networking</name>
    <sleep>
     <time config:type="integer">10</time>
     <feedback config:type="boolean">true</feedback>
    </sleep>
    <script>
     <source>echo foo</source>
     <debug config:type="boolean">false</debug>
    </script>
   </module>
  </post-modules>
  ...
 </wait>
<general>]]></screen>
     </listitem>
    </varlistentry>
   </variablelist>
  </sect2>

  <sect2 xml:id="CreateProfile.General.cio_ignore" arch="zseries">
   <title>&zseries; における未使用デバイスのブラックリスト設定</title>

   <para>&zseries; では、 <command>cio_ignore</command> を実行して、カーネルからの未使用ハードウエアデバイスの検索を防止し、ブラックリストとして設定することができます。これは &ay; で同名のパラメータを <literal>true</literal> に設定することで、実現することができます。この値の設定は任意で、 &zseries; ハードウエアに対してのみ適用されます。なお、既定値は <literal>false</literal> です。</para>

<screen><![CDATA[<general>
 <cio_ignore config:type="boolean">false</cio_ignore>
 ...
<general>]]></screen>
  </sect2>

  <sect2 xml:id="CreateProfile.General.example_common">
   <title><tag class="element">general</tag> セクションの例</title>

   <para>本章で説明してきた項目の設定例を示します。</para>

   <example xml:id="ex.general.common">
    <title>一般オプション</title>
    <para>下記は <literal>general</literal> セクションで最もよく使用されるオプションを示しています。 <literal>pre</literal> および <literal>post</literal> の各モジュールセクションにはダミーのスクリプトを埋め込んでいます。</para>
<screen><![CDATA[<?xml version="1.0"?>
<!DOCTYPE profile>
<profile xmlns="http://www.suse.com/1.0/yast2ns"
 xmlns:config="http://www.suse.com/1.0/configns">
 <general>
  <! -- cio_ignore は IBM &zseries; のみで使用することができます -->
  <cio_ignore config:type="boolean">false</cio_ignore>
  <mode>
   <halt config:type="boolean">false</halt>
   <forceboot config:type="boolean">false</forceboot>
   <final_reboot config:type="boolean">false</final_reboot>
   <final_halt config:type="boolean">false</final_halt>
   <confirm_base_product_license config:type="boolean">
    false
   </confirm_base_product_license>
   <confirm config:type="boolean">true</confirm>
   <second_stage config:type="boolean">true</second_stage>
  </mode>
  <proposals config:type="list">
   <proposal>partitions_proposal</proposal>
  </proposals>
  <self_update config:type="boolean">true</self_update>
  <self_update_url>http://example.com/updates/$arch</self_update_url>
  <signature-handling>
   <accept_unsigned_file config:type="boolean">
    true
   </accept_unsigned_file>
   <accept_file_without_checksum config:type="boolean">
    true
   </accept_file_without_checksum>
   <accept_verification_failed config:type="boolean">
    true
   </accept_verification_failed>
   <accept_unknown_gpg_key config:type="boolean">
    true
   </accept_unknown_gpg_key>
   <import_gpg_key config:type="boolean">true</import_gpg_key>
   <accept_non_trusted_gpg_key config:type="boolean">
   true
   </accept_non_trusted_gpg_key>
  </signature-handling>
  <storage>
   <partition_alignment config:type="symbol">
    align_cylinder
   </partition_alignment>
  </storage>
  <wait>
   <pre-modules config:type="list">
    <module>
     <name>networking</name>
     <sleep>
      <time config:type="integer">10</time>
      <feedback config:type="boolean">true</feedback>
     </sleep>
     <script>
     <source>&gt;![CDATA[
echo "Sleeping 10 seconds"
      ]]&gt;</source>
     <debug config:type="boolean">false</debug>
     </script>
    </module>
   </pre-modules>
   <post-modules config:type="list">
    <module>
     <name>networking</name>
     <sleep>
      <time config:type="integer">10</time>
      <feedback config:type="boolean">true</feedback>
     </sleep>
     <script>
      <source>&gt;![CDATA[
echo "Sleeping 10 seconds"
      ]]&gt;</source>
      <debug config:type="boolean">false</debug>
     </script>
    </module>
   </post-modules>
  </wait>
 </general>
</profile>]]></screen>
   </example>
  </sect2>
 </sect1>
  <sect1 xml:id="CreateProfile.Reporting">
   <title>レポート</title>

   <para><literal>report</literal> リソースでは、インストール時に表示される可能性のある、 3 種類のポップアップを管理します:</para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>メッセージポップアップ (通常は致命的なものではなく、情報提供のみを目的としたもの)</para>
    </listitem>
    <listitem>
     <para>警告ポップアップ (何らかの問題が発生していることを示すもの)</para>
    </listitem>
    <listitem>
     <para>エラーポップアップ (何らかのエラーが発生していることを示すもの)</para>
    </listitem>
   </itemizedlist>

   <example>
    <title>レポートの動作</title>
<screen>&lt;report&gt;
  &lt;errors&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;0&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/errors&gt;
  &lt;warnings&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/warnings&gt;
  &lt;messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/messages&gt;
  &lt;yesno_messages&gt;
    &lt;show config:type="boolean"&gt;true&lt;/show&gt;
    &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
    &lt;log config:type="boolean"&gt;true&lt;/log&gt;
  &lt;/yesno_messages&gt;
&lt;/report&gt;</screen>
   </example>

   <para>ご利用の方の知識レベルに応じて、これらのメッセージを非表示にしたり記録したり、もしくは (時間制限付きで) 表示したりすることができます。なお、全ての <literal>messages</literal> に対してタイムアウトを設定し、表示しておくことをお勧めします。警告は、その内容によっては読み飛ばすことができるものもありますが、通常は無視すべきものではありません。</para>

   <para>自動インストールモードでの既定値では、全てのエラーを時間制限無しで表示し、それ以外の警告やその他のメッセージは 10 秒の時間制限を設定して全て表示します。</para>

   <warning>
    <title>重要なシステムメッセージについて</title>
    <para><literal>report</literal> リソースでは、インストール時に表示される全てのメッセージを制御することはできません。パッケージのインストールやパーティション設定などで致命的な問題が発生した場合、 <literal>report</literal> セクションの設定に関わらずメッセージが表示されることがあります。通常、これらのメッセージは <guimenu>はい</guimenu> または <guimenu>いいえ</guimenu> で回答する必要があるものです。</para>
   </warning>
  </sect1>
  <sect1 xml:id="CreateProfile.Register" os="sles;sled">
   <title>システムの登録と拡張の選択</title>

   <para>登録サーバ経由でのシステムの登録は、 <literal>suse_register</literal> リソースで設定することができます。下記の例では、 &scc; に対してシステムの登録を行なっています。ご利用の組織内に独自の登録サーバが用意されている場合は、 <literal>reg_server*</literal> プロパティで必要なデータを指定する必要があり伸す。詳しくは表をご覧ください。</para>

<screen>&lt;suse_register&gt;
  &lt;do_registration config:type="boolean"&gt;true&lt;/do_registration&gt;
  &lt;email&gt;&exampleuser_plain;@&exampledomain;&lt;/email&gt;
  &lt;reg_code&gt;<replaceable>登録コード</replaceable>&lt;/reg_code&gt;
  &lt;install_updates config:type="boolean"&gt;true&lt;/install_updates&gt;
  &lt;slp_discovery config:type="boolean"&gt;false&lt;/slp_discovery&gt;
&lt;/suse_register&gt;
 </screen>

   <para>登録処理を完全に自動化する代わりに、インストール中に &yast; の登録モジュールを開始するよう設定することもできます。この仕組みにより、登録データを手作業で入力することができるようになります。この場合、下記のような XML コードを設定します:</para>

<screen>&lt;general&gt;
 &lt;semi-automatic config:type="list"&gt;
   &lt;semi-automatic_entry&gt;scc&lt;/semi-automatic_entry&gt;
 &lt;/semi-automatic&gt;
&lt;/general&gt;</screen>

   <tip>
    <title>インストール時のネットワーク設定の使用</title>
    <para>インストール時に使用するネットワーク設定と同じものを使用する必要がある場合、 &ay; は登録処理を行なう前の第 1 ステージで、ネットワーク設定を動作させる必要があることになります。</para>
<screen>&lt;networking&gt;
  &lt;setup_before_proposal config:type="boolean"&gt;true&lt;/setup_before_proposal&gt;
&lt;/networking&gt;</screen>
   </tip>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
       <entry>
        <para>
         Comment
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para><literal>do_registration</literal></para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;do_registration config:type="boolean"
&gt;true&lt;/do_registration&gt;</screen>
       </entry>
       <entry>
        <para>システムを登録すべきかどうかを指定します。 <literal>false</literal> を指定した場合、その他のオプションは全て無視され、システムは登録されなくなります。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>e-mail</literal></para>
       </entry>
       <entry>
        <para>電子メールアドレス</para>
<screen>&lt;email&gt;&exampleuser_plain;@&exampledomain;&lt;/email&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。登録コードに合致する電子メールアドレスを指定します。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>reg_code</literal></para>
       </entry>
       <entry>
        <para>
         Text
        </para>
<screen>&lt;reg_code&gt;<replaceable>登録コード</replaceable>&lt;/reg_code&gt;</screen>
       </entry>
       <entry>
        <para>必須です。登録コードを指定します。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>install_updates</literal></para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;install_updates config:type="boolean"
&gt;true&lt;/install_updates&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。更新チャンネルからの更新をインストールすべきかどうかを指定します。既定ではそれらをインストールしません ( <literal>false</literal> ) 。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>slp_discovery</literal></para>
       </entry>
       <entry>
        <para>
         Boolean
        </para>
<screen>&lt;slp_discovery config:type="boolean"
&gt;true&lt;/slp_discovery&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。 SLP を介して登録サーバを検索するかどうかを指定します。既定値は <literal>false</literal> です。</para>
        <para>この指定では、登録サーバが 1 台だけ見つかる必要があります。複数の登録サーバが検出されると、インストールが失敗してしまいます。このような場合は、 <literal>reg_server</literal> でいずれか 1 つのサーバを指定してください。</para>
        <para><literal>slp_discovery</literal> も <literal>reg_server</literal> も指定しない場合、システムは &scc; に対して登録を行ないます。</para>
        <para>この設定は自己更新機能にも影響します。無効化した場合、 SLP での検索は行ないません。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>reg_server</literal></para>
       </entry>
       <entry>
        <para>
         URL
        </para>
<screen>&lt;reg_server&gt;
  https://smt.&exampledomain;
&lt;/reg_server&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。 &rmt; のサーバ URL を指定します。 <literal>slp_discovery</literal> も <literal>reg_server</literal> も指定しない場合、システムは &scc; に対して登録を行ないます。</para>
        <para>自己更新リポジトリの URL を問い合わせる際、 &rmt; サーバに対して問い合わせが行なわれます。そのため、 <literal>self_update_url</literal> が設定されていない場合、 &rmt; サーバには自己更新のダウンロード元を設定する必要があります。この機能に関する詳細については、 &deploy; をお読みください。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>reg_server_cert_fingerprint_type</literal></para>
       </entry>
       <entry>
        <para><literal>SHA1</literal> もしくは <literal>SHA256</literal></para>
<screen>&lt;reg_server_cert_fingerprint_type&gt;
  SHA1
&lt;/reg_server_cert_fingerprint_type&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。 <literal>reg_server_cert_fingerprint</literal> でチェックサム値を指定する場合には必須となります。なお、 SSL の証明書の正当性を確認するため、 <literal>reg_server_cert_fingerprint</literal> の値を設定しておくことをお勧めします。 SSL 通信が検証エラーで失敗した場合、該当する証明書が自動的に取り込まれるようになります。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>reg_server_cert_fingerprint</literal></para>
       </entry>
       <entry>
        <para>16 進数表記 (大文字と小文字は区別しません) でのサーバ証明書の指紋 (フィンガープリント) の値を指定します。</para>
<screen>&lt;reg_server_cert_fingerprint&gt;
  <replaceable>01:AB...:EF</replaceable>
&lt;/reg_server_cert_fingerprint&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。 <literal>reg_server_cert_fingerprint_type</literal> とともに指定します。SSL の証明書の正当性を確認するため、 <literal>reg_server_cert_fingerprint</literal> の値は設定しておくことをお勧めします。 SSL 通信が検証エラーで失敗した場合、該当する証明書が自動的に取り込まれるようになります。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>reg_server_cert</literal></para>
       </entry>
       <entry>
        <para>
         URL
        </para>
<screen>&lt;reg_server_cert&gt;
  http://smt.&exampledomain;/smt.crt
&lt;/reg_server_cert&gt;</screen>
       </entry>
       <entry>
        <para>任意指定です。サーバ内での SSL 証明書の URL を指定します。このオプションを設定してしまうと、ダウンロードした証明書の検証が行なわれなくなってしまうことから、非推奨となります。代わりに <literal>reg_server_cert_fingerprint</literal> をお使いください。</para>
       </entry>
      </row>
      <row os="sles;sled">
       <entry>
        <para><literal>addons</literal></para>
       </entry>
       <entry>
        <para>アドオンのリスト</para>
       </entry>
       <entry>
        <para>インストールリポジトリに追加すべき、登録サーバからの拡張を指定します。詳しくは <xref linkend="CreateProfile.Register.Extension"/> をお読みください。</para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <tip>
    <title>サーバ証明書の指紋取得</title>
    <para><literal>reg_server_cert_fingerprint</literal> に入力すべきサーバ証明書の指紋情報を生成するには、下記のコマンドを実行します:</para>
    <screen>
echo | openssl s_client -showcerts -connect scc.suse.com:443 2&gt; /dev/null |
openssl x509 -noout -fingerprint -sha256
    </screen>
    <para>ここで、 <literal>scc.suse.com</literal> の箇所をご利用のサーバに置き換えてください。また、 <literal>-sha256</literal> の代わりに <literal>-sha1</literal> を指定してもかまいません (ただし既定値である SHA256 のほうがより適切です) 。</para>
    <para><emphasis>注意:</emphasis> この設定は、信頼のおけるネットワーク内でのみ使用することができます。インターネットなどの信頼できないネットワークを利用している場合、他の方法でサーバから証明書を取得して、指紋を取得してください。指紋は SSH 経由でサーバから取得することもできるほか、他の情報源から取得してもかまいません。このほか、ダウンロードした証明書とサーバの証明書を比較して、同一のものであることを確認してもかまいません。</para>
   </tip>

   <sect2 xml:id="CreateProfile.Register.Extension" os="sles;sled">
    <title>拡張</title>
    <para>&scc; では、インストール時に追加のソースとして含めることのできる、 <literal>sle-module-development-tools</literal> (開発ツールモジュール) などの拡張が提供されています。拡張は <literal>suse_register</literal> ブロック内の <literal>addons</literal> プロパティで追加することができます。 <!-- Below is a list of all extensions available for &productname; on x86_64: --></para>
    <note>
     <title>利用可能な拡張</title>
     <para>利用可能な拡張は製品とアーキテクチャによって異なります。全てのアーキテクチャで全ての拡張が利用できるというわけではありません。  <!-- All listed extensions are available for &sls; on the x86_64 architecture. --></para>
     <para>また、 <literal>sle-ha</literal> などの拡張を使用する場合は、登録コードが必要になります。ご契約の内容にもよりますが、拡張向けの専用登録コードを使用するか、もしくは基本製品に対するコードを変更して使用する必要があります。</para>
    </note>

    <para><command>SUSEConnect --list-extensions</command> を実行することで、登録済みのシステム内で利用可能な全ての拡張を表示することができます。出力結果には下記のような内容が現われるはずです:</para>
    <screen>Install with: SUSEConnect -p sle-module-development-tools/15/x86_64</screen>
    <para><option>-p</option> パラメータ以下には <replaceable>名前/バージョン/アーキテクチャ</replaceable> の形式で値が表示されますので、下記のように &ay; のプロファイルに変換することができます:</para>
    <screen><![CDATA[<addons config:type="list">
 <addon>
  <!-- Development Tools Module -->
  <name>sle-module-development-tools</name>
  <version>15</version>
  <arch>x86_64</arch>
 </addon>
</addons>]]></screen>

<note>
 <title>拡張同士の依存関係</title>
 <para>&slsa; 15 およびそれ以降のバージョンでは、 &ay; は登録時に依存関係を調査して、拡張の順序を自動的に調整することができます。これにより、 &ay; プロファイル内での拡張の順序は、特に重要ではないことになります。</para>
 <para>また、 &ay; ではプロファイル内に拡張が書かれていない場合であっても、依存関係にある拡張に対しては自動的に登録処理を実施します。これにより、拡張の依存関係に関しては、特に気にする必要がないことになります。</para>
 <para>しかしながら、依存関係にある拡張が登録キーを必要とするようなものであった場合、登録キーを含めてプロファイル内に指定を行なわなければなりません。プロファイル内に登録キーを設定しないと、登録処理が失敗することになります。</para>
</note>

    <para>背景となる情報、および &slsa; 向けのアドオンリストについて、詳しくは <link xlink:href="https://github.com/yast/yast-registration/wiki/Available-SCC-Extensions-for-Use-in-Autoyast"/> をお読みください。一覧は必要に応じて更新されます。</para>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Bootloader">
   <title>ブートローダ</title>

   <para>このドキュメンテーションは <command>yast2-bootloader</command> と &grub; 向けにのみ作成されています。従来バージョンの GRUB を含む古いバージョンについては、古いバージョンに含まれている <filename>/usr/share/doc/packages/autoyast2/</filename> 以下のドキュメンテーションをお読みください。</para>

   <para>&ay; でのブートローダの部分は、下記のような構成になっています:</para>

<screen>&lt;bootloader&gt;
  &lt;loader_type&gt;
    &lt;!-- ブートローダの種類 (grub2 もしくは grub2-efi) --&gt;
  &lt;/loader_type&gt;
  &lt;global&gt;
    &lt;!--
      &grub; のインストールと汎用ブートコードに関する設定
    --&gt;
  &lt;/global&gt;
  &lt;device_map config:type="list"&gt;
    &lt;!-- デバイスの順序を定義するための設定 --&gt;
  &lt;/device_map&gt;
 &lt;/bootloader&gt;</screen>

   <sect2 xml:id="CreateProfile.Bootloader.type">
    <title>ローダの種類</title>
    <para>ここでは、使用すべきブートローダの種類 (UEFI 向けもしくは BIOS 向け) を指定します。ただし、全てのアーキテクチャで両方のブートローダを使用できるわけではありません。最も安全な設定 ( <literal>default</literal> ) では、インストーラ側で自動的に判断します。</para>
    <screen>&lt;loader_type&gt;<replaceable>ローダの種類</replaceable>&lt;/loader_type&gt;</screen>
    <para><replaceable>ローダの種類</replaceable> で指定可能な値は下記のとおりです:</para>
    <itemizedlist>
     <listitem>
      <para><literal>default</literal> : インストーラ側で適切なブートローダを選択します。特に何もオプションが指定されていない場合、これが既定値となります。</para>
     </listitem>
     <listitem>
      <para><literal>grub2</literal>:  古い BIOS 向けのブートローダを使用します。</para>
     </listitem>
     <listitem>
      <para><literal>grub2-efi</literal> : EFI ブートローダを使用します。</para>
     </listitem>
     <listitem>
      <para><literal>none</literal> : インストーラ側では起動関連の処理および設定を行なわないようにします。</para>
     </listitem>
    </itemizedlist>
   </sect2>

   <sect2 xml:id="CreateProfile.Bootloader.globals">
    <title>グローバル</title>
    <para>この箇所は任意指定ではありますが重要な箇所です。ここでは &grub; のインストール先と起動処理の動作方法について設定を行ないます。なお、特に何も設定を行なわない場合、 <command>yast2-bootloader</command> が設定を作成します。通常は &ay; の制御ファイルにはこの部分のみを設定し、それ以外の箇所は <command>yast2-bootloader</command> が自動生成するようにします。特別な要件がある場合を除いて、 XML ファイル内ではブートローダの設定を行なわないでください。</para>
<screen>&lt;global&gt;
  &lt;activate config:type="boolean"&gt;true&lt;/activate&gt;
  &lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;
  &lt;suse_btrfs config:type="boolean"&gt;true&lt;/suse_btrfs&gt;
  &lt;terminal&gt;gfxterm&lt;/terminal&gt;
  &lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;
&lt;/global&gt;</screen>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>activate</literal></para>
        </entry>
        <entry>
         <para>起動パーティションの起動フラグを設定するようにします。起動パーティションは、個別に /boot パーティションを設定していない場合、 <filename>/</filename> の存在するパーティションになります。起動パーティションが論理パーティション内に存在する場合は、拡張パーティションに対して起動フラグが設定されます。</para>
<screen>&lt;activate config:type="boolean"&gt;true&lt;/activate&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>append</literal></para>
        </entry>
        <entry>
         <para>通常モードと復元モードの両方に対して、起動項目の末尾に追加するカーネルパラメータを指定します。</para>
<screen>&lt;append&gt;nomodeset vga=0x317&lt;/append&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>boot_boot</literal></para>
        </entry>
        <entry>
         <para>個別の /boot パーティションに対して &grub; を書き込みます。個別の /boot パーティションが存在しない場合、 &grub; は <filename>/</filename> に書き込まれます。</para>
<screen>&lt;boot_boot&gt;false&lt;/boot_boot&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>boot_custom</literal></para>
        </entry>
        <entry>
         <para>指定したデバイスに &grub; を書き込みます。</para>
<screen>&lt;boot_custom&gt;/dev/sda3&lt;/boot_custom&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>boot_extended</literal></para>
        </entry>
        <entry>
         <para>&grub; を拡張パーティションに書き込みます (汎用のブートコードを使用する必要があり、 <filename>/boot</filename> が論理パーティションである場合に重要です) 。注意: 起動パーティションが論理パーティションである場合、 <literal>generic_mbr</literal> よりも <literal>boot_mbr</literal> (&grub; を MBR に書き込む) を使用すべきです。</para>
<screen>&lt;boot_extended&gt;false&lt;/boot_extended&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>boot_mbr</literal></para>
        </entry>
        <entry>
         <para>&grub; を順序の中で最初に現われるディスクの MBR に書き込みます (ディスクの順序は device.map で設定します) 。</para>
<screen>&lt;boot_mbr&gt;false&lt;/boot_mbr&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>boot_root</literal></para>
        </entry>
        <entry>
         <para>&grub; を <filename>/</filename> のパーティションに書き込みます。</para>
<screen>&lt;boot_root&gt;false&lt;/boot_root&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>generic_mbr</literal></para>
        </entry>
        <entry>
         <para>汎用のブートコードを MBR に書き込みます (<literal>boot_mbr</literal> が <literal>true</literal> に設定されている場合は無視されます) 。</para>
<screen>&lt;generic_mbr config:type="boolean"&gt;false&lt;/generic_mbr&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>gfxmode</literal></para>
        </entry>
        <entry>
         <para>&grub; の画面のグラフィカルな解像度を指定します (なお、 &lt;terminal&gt; の値を <literal>gfxterm</literal> に設定しなければなりません) 。この項目には <literal>auto</literal> (自動設定) のほか、 <literal><replaceable>水平解像度</replaceable>x<replaceable>垂直解像度</replaceable></literal> もしくは <literal><replaceable>水平解像度</replaceable>x<replaceable>垂直解像度</replaceable>x<replaceable>色深</replaceable></literal> の形式で設定します。お使いのシステムで指定できる &grub; の解像度について知りたい場合は、 &grub; のコマンドラインから <command>vbeinfo</command> コマンドを実行してください。</para>
<screen>&lt;gfxmode&gt;1280x1024x24&lt;/gfxmode&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>os_prober</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定すると、インストール時に既にインストールされているオペレーティングシステムを自動的に検索し、それらに対する起動項目を生成するようにします。</para>
<screen>&lt;os_prober config:type="boolean"&gt;false&lt;/os_prober&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>cpu_mitigations</literal></para>
        </entry>
        <entry>
         <para>CPU の脆弱性に対する緩和策に対するカーネルのコマンドラインパラメータを選択します (それと同時に、セキュリティ保護と性能のどちらを重視するのかを選択することにもなります) 。設定可能な値は下記のとおりです:</para>
         <formalpara>
          <title><literal>auto</literal></title>
           &kernel_cpu_mitigations_auto;
         </formalpara>
         <formalpara>
          <title><literal>nosmt</literal></title>
           &kernel_cpu_mitigations_nosmt;
         </formalpara>
         <formalpara>
          <title><literal>off</literal></title>
           &kernel_cpu_mitigations_off;
         </formalpara>
         <formalpara>
          <title><literal>manual</literal></title>
          &kernel_cpu_mitigations_manual;
         </formalpara>
<screen>&lt;cpu_mitigations&gt;auto&lt;/cpu_mitigations&gt;</screen>
         <para>&ay; 内で何も設定を行なわない場合、カーネルのコマンドラインを介して対応する設定を変更できるようになります。既定ではインストールメディア内の <filename>/control.xml</filename> に、何も指定しない場合の (製品固有の) 設定が書かれています。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>suse_btrfs</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定すると、 btrfs のスナップショットからの起動に対応するようになります。</para>
<screen>&lt;suse_btrfs config:type="boolean"&gt;false&lt;/suse_btrfs&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>serial</literal></para>
        </entry>
        <entry>
         <para>&grub; の端末モードが <literal>serial</literal> (シリアル) である場合に、実行すべきコマンドを設定します。</para>
<screen>&lt;serial&gt;
  serial --speed=115200 --unit=0 --word=8 --parity=no --stop=1
&lt;/serials&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>terminal</literal></para>
        </entry>
        <entry>
         <para>&grub; で使用したい端末モードを選択します。設定可能な値は <literal>console</literal> , <literal>gfxterm</literal> , <literal>serial</literal> のいずれかとなります。 <literal>serial</literal> を指定した場合は、 &lt;serial&gt; 内でシリアル用のコマンドを設定する必要があります。</para>
<screen>&lt;terminal&gt;serial&lt;/terminal&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>timeout</literal>
         </para>
        </entry>
        <entry>
         <para>既定の起動項目を自動的に起動するまでの待機時間を、秒単位で指定します。</para>
<screen>&lt;timeout config:type="integer"&gt;10&lt;/timeout&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>vgamode</literal></para>
        </entry>
        <entry>
         <para>起動項目のカーネルパラメータに対して、 <literal>vga=<replaceable>値</replaceable></literal> の形式で追加を行ないます。</para>
<screen>&lt;vgamode&gt;0x317&lt;/vgamode&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>xen_append</literal></para>
        </entry>
        <entry>
         <para>&xen; ゲスト向けの起動項目の末尾に追加する、カーネルのパラメータを指定します。</para>
<screen>&lt;xen_append&gt;nomodeset vga=0x317&lt;/xen_append&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>xen_kernel_append</literal></para>
        </entry>
        <entry>
         <para>&vmhost; 内の &xen; カーネルに対して、起動項目の末尾に追加するパラメータを指定します。</para>
<screen>&lt;xen_kernel_append&gt;dom0_mem=768M&lt;/xen_kernel_append&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.Bootloader.dev_map">
    <title>デバイスマップ</title>
    <para>&grub; では BIOS ドライブと Linux デバイスの間でのマッピングに関わる問題を回避するため、設定ファイルを生成する際にデバイス ID 文字列 (UUID) もしくはファイルシステムのラベルを使用するようになっています。 &grub; ユーティリティではその場で一時的なデバイスマップを作成しますが、これは特にディスクが 1 台しか搭載されていないシステムであれば十分な仕組みです。しかしながら、何らかの理由で自動デバイスマップの仕組みを上書きする必要がある場合は、このセクションを利用して独自のマッピングを指定してください。</para>
<screen>&lt;device_map config:type="list"&gt;
  &lt;device_map_entry&gt;
    &lt;firmware&gt;hd0&lt;/firmware&gt; &lt;!-- ターゲットマップ内でのデバイスの順序  --&gt;
    &lt;linux&gt;/dev/disk/by-id/ata-ST3500418AS_6VM23FX0&lt;/linux&gt; &lt;!-- デバイス (ディスク) 名  --&gt;
  &lt;/device_map_entry&gt;
&lt;/device_map&gt;</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="CreateProfile.Partitioning">
   <title>パーティション設定</title>

   <para><remark role="fixme">Add a short description</remark></para>

   <sect2 xml:id="CreateProfile.Partitioning.config">
    <title>ドライブの設定</title>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;profile&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
     ...
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>device</literal>
         </para>
        </entry>
        <entry>
         <para>このセクションで設定したいデバイスを指定します。 <filename>/dev/disk/by-id/ata-WDC_WD3200AAKS-75L9A0_WD-WMAV27368122</filename> のような ID 形式の名前を指定するか、 <filename>/dev/disk/by-path/pci-0001:00:03.0-scsi-0:0:0:0</filename> のように <emphasis>by-path</emphasis> 形式で指定を行なうことで、一貫性のある名前を使用することができるようになります。</para>
<screen>&lt;device&gt;/dev/sda&lt;/device&gt;</screen>
        <para>ボリュームグループやソフトウエア RAID 、 &bcache; デバイスの場合は、インストール後のシステムで使用するデバイス名は別のものになります (既存のデバイスとの衝突を避けるためのものです) 。</para>
        </entry>
        <entry>
         <para>任意指定です。何も指定しない場合、 &ay; は自動的にデバイスを判断します。判断を調整する方法については、 <xref linkend="ay.partitioning.skip_devices"/> をお読みください。</para>
         <para>値に <literal>ask</literal> を指定すると、 &ay; はインストール時に使用するデバイスをユーザに対して尋ねるようになります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>initialize</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定すると、 &ay; がパーティションの計算を行なう前に、パーティションテーブルを消去するようになります。</para>
<screen>&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>partitions</literal></para>
        </entry>
        <entry>
         <para>&lt;partition&gt; 項目を入れる箇所です (詳しくは <xref linkend="ay.partition_configuration"/> をお読みください) 。</para>
<screen>&lt;partitions config:type="list"&gt;
  &lt;partition&gt;...&lt;/partition&gt;
  ...
&lt;/partitions&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。何もパーティションを指定しない場合、 &ay; は適切なパーティション設定を自動で作成します (詳しくは <xref linkend="ay.auto_partitioning"/> をお読みください) 。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>pesize</literal></para>
        </entry>
        <entry>
         <para>LVM の場合にのみ意味がある値です。</para>
<screen>&lt;pesize&gt;8M&lt;/pesize&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。 LVM ボリュームグループの場合、 4M が既定値となります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>use</literal></para>
        </entry>
        <entry>
         <para>&ay; がハードディスクのパーティション設定を行なう際の方針を指定します:</para>
         <para>下記の中からいずれかを指定します:</para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para><literal>all</literal>: 新しいパーティションを作成する際、ディスク全体を使用するようにします。</para>
          </listitem>
          <listitem>
           <para><literal>linux</literal>: 既存の Linux パーティションのみを使用します。</para>
          </listitem>
          <listitem>
           <para><literal>free</literal>: デバイス内の未使用領域のみを使用し、それ以外のパーティションについては何も変更しないようにします。</para>
          </listitem>
          <listitem>
           <para>1,2,3 (使用すべきパーティションの番号をカンマ区切りで指定します) 。</para>
          </listitem>
         </itemizedlist>
        </entry>
        <entry>
         <para>このパラメータは指定しておくべきものです。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>type</literal>
         </para>
        </entry>
        <entry>
         <para><literal>drive</literal> の種類を指定します:</para>
         <para>下記の中からいずれかを指定します:</para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para><literal>CT_DISK</literal>: 物理的なハードディスク (既定値)</para>
          </listitem>
          <listitem>
           <para><literal>CT_LVM</literal>: LVM ボリュームグループ</para>
          </listitem>
          <listitem>
           <para><literal>CT_RAID</literal>: ソフトウエア RAID デバイス</para>
          </listitem>
          <listitem>
           <para><literal>CT_BCACHE</literal>: ソフトウエア &bcache; デバイス</para>
          </listitem>
         </itemizedlist>
<screen>&lt;type config:type="symbol"&gt;CT_LVM&lt;/type&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。通常の物理ハードディスクの場合、既定値は <literal>CT_DISK</literal> になります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>disklabel</literal></para>
        </entry>
        <entry>
         <para>パーティションテーブルの種類を選択します。</para>
         <para>下記の中からいずれかを指定します:</para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para><literal>msdos</literal></para>
          </listitem>
          <listitem>
           <para><literal>gpt</literal></para>
          </listitem>
          <listitem>
           <para><literal>none</literal> (無し)</para>
          </listitem>
         </itemizedlist>
<screen>&lt;disklabel&gt;gpt&lt;/disklabel&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。既定では &yast; 側で自動的に判断します。異なる種類のパーティションテーブルが既に存在している場合、そのままにしておくべきパーティションや再利用可能なパーティションが含まれている場合を除き、指定した種類のパーティションテーブルを再作成します。何もパーティションを作成せずにディスクを使用したい場合は、この要素を <literal>none</literal> にしてください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>keep_unknown_lv</literal></para>
        </entry>
        <entry>
         <para>type=CT_LVM のドライブでのみ意味のある項目です。論理ボリュームグループを再利用している場合、この値を <literal>true</literal> に設定すると、そのグループ内に存在する全ての既存論理ボリュームは、それらが &lt;partitioning&gt; で指定されている場合を除き、何も変更が加えられないようになります。そのため、そのままにしておくべき論理ボリュームについては、何も指定しなくて良いことになります。</para>
<screen>&lt;keep_unknown_lv config:type="boolean"
&gt;false&lt;/keep_unknown_lv&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>enable_snapshots</literal></para>
        </entry>
        <entry>
         <para>btrfs ファイルシステムに対してスナップショットを有効化します。その他のファイルシステムには適用されません。</para>
<screen>&lt;enable_snapshots config:type="boolean"
&gt;false&lt;/enable_snapshots&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。既定値は <literal>true</literal> です。</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <tip xml:id="ay.partitioning.skip_devices">
     <title>ドライブを読み飛ばす設定について</title>
     <para>&ay; の制御ファイル内で &lt;device&gt; 項目を指定せず、 &ay; の自動デバイス判断に任せたい場合、その判断基準を設定することができます。通常は適切なデバイスのうち最初のデバイスを使用するようになっていますが、下記のように設定することで、条件に合致するデバイスを除外できるようになります:</para>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;
    &lt;skip_list config:type="list"&gt;
      &lt;listentry&gt;
        &lt;!-- usb-storage ドライバを使用しているデバイスを読み飛ばす --&gt;
        &lt;skip_key&gt;driver&lt;/skip_key&gt;
        &lt;skip_value&gt;usb-storage&lt;/skip_value&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- 1GB より小さいデバイスを読み飛ばす --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;1048576&lt;/skip_value&gt;
        &lt;skip_if_less_than config:type="boolean"&gt;true&lt;/skip_if_less_than&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;!-- 100GB より大きいデバイスを読み飛ばす --&gt;
        &lt;skip_key&gt;size_k&lt;/skip_key&gt;
        &lt;skip_value&gt;104857600&lt;/skip_value&gt;
        &lt;skip_if_more_than config:type="boolean"&gt;true&lt;/skip_if_more_than&gt;
      &lt;/listentry&gt;
    &lt;/skip_list&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     <para>&lt;skip_key&gt; で設定できる値の一覧について、詳しくはインストール済みのシステムで <command>yast2 ayast_probe</command> を実行してください。</para>
    </tip>
   </sect2>

   <sect2 xml:id="ay.partition_configuration">
    <title>パーティションの設定</title>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;drive&gt;
  &lt;partitions config:type="list"&gt;
    &lt;partition&gt;
      ...
    &lt;/partition&gt;
  &lt;/partitions&gt;
&lt;/drive&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <colspec colwidth="1*"/>
      <colspec colwidth="3*"/>
      <colspec colwidth="2*"/>
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>create</literal></para>
        </entry>
        <entry>
         <para>このパーティションもしくは論理ボリュームを作成しなければならない場合や、既に存在しているような場合に指定します。</para>
<screen>&lt;create config:type="boolean" &gt;false&lt;/create&gt;</screen>
        </entry>
        <entry>
         <para><literal>false</literal> に設定した場合、 &ay; に対して使用すべきデバイスを指示するため、 <literal>partition_nr</literal> , <literal>lv_name</literal>, <literal>uuid</literal> のいずれかを指定する必要があります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>crypt_fs</literal></para>
        </entry>
        <entry>
         <para>パーティションを暗号化するかどうかを指定します。</para>
<screen>&lt;crypt_fs config:type="boolean"&gt;false&lt;/crypt_fs&gt;</screen>
        </entry>
        <entry>
         <para>既定値は <literal>false</literal> です。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>crypt_key</literal></para>
        </entry>
        <entry>
         <para>暗号鍵を指定します。</para>
<screen>&lt;crypt_key&gt;xxxxxxxx&lt;/crypt_key&gt;</screen>
        </entry>
        <entry>
         <para><literal>crypt_fs</literal> を <literal>true</literal> に設定した場合にのみ指定する必要があります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>mount</literal></para>
        </entry>
        <entry>
         <para>このパーティションのマウントポイントを指定します。</para>
<screen>&lt;mount&gt;/&lt;/mount&gt;
&lt;mount&gt;swap&lt;/mount&gt;</screen>
        </entry>
        <entry>
         <para>少なくとも 1 つのルートパーティション (/) とスワップパーティションを設定する必要があります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>fstopt</literal></para>
        </entry>
        <entry>
         <para>このパーティションのマウントオプションを指定します。</para>
<screen>&lt;fstopt&gt;
  ro,noatime,user,data=ordered,acl,user_xattr
&lt;/fstopt&gt;</screen>
        </entry>
        <entry>
         <para>指定可能なマウントオプションについて、詳しくは <command>man mount</command> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>label</literal></para>
        </entry>
        <entry>
         <para>パーティションのラベルを指定します (後述の <literal>mountby</literal> パラメータを使用する場合に有用です) 。</para>
<screen>&lt;label&gt;mydata&lt;/label&gt;</screen>
        </entry>
        <entry>
         <para>例については <command>man e2label</command> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>uuid</literal></para>
        </entry>
        <entry>
         <para>このパーティションの UUID を指定します (後述の <literal>mountby</literal> パラメータを使用する場合にのみ有用です) 。</para>
<screen>&lt;uuid
&gt;1b4e28ba-2fa1-11d2-883f-b9a761bde3fb&lt;/uuid&gt;</screen>
        </entry>
        <entry>
         <para>詳しくは <command>man uuidgen</command> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>size</literal></para>
        </entry>
        <entry>
         <para>4G, 4500M などのように、パーティションのサイズを指定します。 /boot パーティションとスワップパーティションに対しては、 <literal>auto</literal> を指定することもできます。この場合、 &ay; 側で適切なサイズを設定します。また、いずれか 1 つのパーティションに対して <literal>max</literal> を指定すると、残りの領域全てを使用することができるようになります。</para>
         <para>サイズは割合で設定することもできます。たとえば 10% と指定すると、ハードディスク全体もしくはボリュームグループの 10% 分を使用することができます。必要に応じて auto, max, サイズ指定, 割合を組み合わせて使用することもできます。</para>
<screen>&lt;size&gt;10G&lt;/size&gt;</screen>
        </entry>
        <entry>
         <para>&productname; 15 以降では、全ての値 (<literal>auto</literal> と <literal>max</literal> を含む) をパーティションのサイズ変更時にも使用できるようになっています。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>format</literal></para>
        </entry>
        <entry>
         <para>&ay; 側でパーティションをフォーマットするかどうかを指定します。</para>
<screen>&lt;format config:type="boolean"&gt;false&lt;/format&gt;</screen>
        </entry>
        <entry>
         <para><literal>create</literal> を <literal>true</literal> に設定した場合は、この値についても <literal>true</literal> を設定しておいたほうが良いでしょう。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>file system</literal></para>
        </entry>
        <entry>
         <para>このパーティションで使用するファイルシステムを指定します:</para>
         <itemizedlist mark="bullet" spacing="normal">
          <listitem>
           <para><literal>btrfs</literal></para>
          </listitem>
          <listitem>
           <para><literal>ext2</literal></para>
          </listitem>
          <listitem>
           <para><literal>ext3</literal></para>
          </listitem>
          <listitem>
           <para><literal>ext4</literal></para>
          </listitem>
          <listitem>
           <para><literal>fat</literal></para>
          </listitem>
          <listitem>
           <para><literal>xfs</literal></para>
          </listitem>
          <listitem>
           <para><literal>swap</literal></para>
          </listitem>
         </itemizedlist>
<screen>&lt;filesystem config:type="symbol"
&gt;ext3&lt;/filesystem&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。ルートパーティションの場合、既定値は <literal>btrfs</literal> に、データパーティションの場合、既定値は <literal>xfs</literal> になります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>mkfs_options</literal></para>
        </entry>
        <entry>
         <para>mkfs コマンドを実行する際のオプション文字列を指定します。</para>
<screen>&lt;mkfs_options&gt;-I 128&lt;/mkfs_options&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。どうしても必要な場合にのみ設定してください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>partition_nr</literal></para>
        </entry>
        <entry>
         <para>このパーティションのパーティション番号を指定します。 <literal>create=false</literal> もしくは LVM を使用しようとしている場合、 <literal>partition_nr</literal> でパーティションの番号を指定することができます。なお、 &ay; に対してプライマリパーティションを強制的に作成させたい場合は、 5 未満の数値を指定してください。</para>
<screen>&lt;partition_nr config:type="integer"
&gt;2&lt;/partition_nr&gt;</screen>
        </entry>
        <entry>
         <para>通常は 1 から 4 までがプライマリパーティションに、 5 以上が論理パーティションになります。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>partition_id</literal></para>
        </entry>
        <entry>
         <para><literal>partition_id</literal> ではパーティションの ID を設定します。 Linux パーティションでは 130 、スワップパーティションでは 131 が自動的に設定されますが、それ以外の ID を設定したい場合は、これで設定を行なってください。</para>
<screen>&lt;partition_id config:type="integer"
&gt;131&lt;/partition_id&gt;</screen>
         <para>設定可能な値は下記のとおりです:</para>
         <simplelist>
          <member>スワップ: <literal>130</literal></member>
          <member>Linux: <literal>131</literal></member>
          <member>LVM: <literal>142</literal></member>
          <member>MD RAID: <literal>253</literal></member>
          <member>EFI パーティション: <literal>259</literal></member>
         </simplelist>
        </entry>
        <entry>
         <para>既定では、 Linux パーティションに対しては <literal>131</literal> が、スワップパーティションに対しては <literal>130</literal> が設定されます。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>partition_type</literal></para>
        </entry>
        <entry>
         <para>パーティションテーブルに <literal>msdos</literal> 形式を使用している場合、この要素でパーティションの種類を設定することができます。値には <literal>primary</literal> (プライマリパーティション) もしくは <literal>logical</literal> (論理パーティション) のいずれかを指定します。 <literal>gpt</literal> パーティションテーブルを使用している場合、このような区別はありませんので、値を設定しても無視されます。</para>
<screen>&lt;partition_type&gt;primary&lt;/partition_type&gt;</screen>
        </entry>
        <entry>
         <para>任意指定です。 <literal>primary</literal> (既定値) もしくは <literal>logical</literal> のいずれかを指定します。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>mountby</literal></para>
        </entry>
        <entry>
         <para>パーティション番号の代わりに、 <literal>device</literal> (デバイス), <literal>label</literal> (ラベル), <literal>uuid</literal> (UUID), <literal>path</literal> (udev パス), <literal>id</literal> (udev ID) などでパーティションをマウントするよう設定することができます。</para>
<screen>&lt;mountby config:type="symbol"
&gt;label&lt;/mountby&gt;</screen>
        </entry>
        <entry>
         <para>上述の <literal>label</literal> と <literal>uuid</literal> の説明をお読みください。既定値は &yast; 側で規定されていますが、通常は <literal>id</literal> です。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>subvolumes</literal></para>
        </entry>
        <entry>
         <para>btrfs のファイルシステムで作成するサブボリュームの一覧を指定します。これは btrfs を使用する場合にのみ意味のある項目です。詳しくは <xref linkend="ay.btrfs_subvolumes"/> をお読みください。</para>
<screen>&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var/crash&lt;/path&gt;
  &lt;path&gt;var/lock&lt;/path&gt;
  &lt;path&gt;var/run&lt;/path&gt;
  &lt;path&gt;var/tmp&lt;/path&gt;
  &lt;path&gt;var/spool&lt;/path&gt;
  ...
&lt;/subvolumes&gt;</screen>
        </entry>
        <entry>
         <para>パーティションの設定内に <tag>subvolumes</tag> セクションが存在しない場合、 &ay; は指定したマウントポイント内に、既定のサブボリュームセットを作成します。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>create_subvolumes</literal></para>
        </entry>
        <entry>
         <para>btrfs のサブボリュームを作成するかどうかを指定します。</para>
        </entry>
        <entry>
         <para>既定値は <literal>true</literal> です。 <literal>false</literal> に設定した場合、サブボリュームは作成されません。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>subvolumes_prefix</literal></para>
        </entry>
        <entry>
         <para>btrfs のサブボリュームに設定するプレフィクス (前置) 名を指定します。何もプレフィクスを指定したくない場合は、空の値を設定してください:</para>
         <screen>&lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;</screen>
        </entry>
        <entry>
         <para>既定では <literal>@</literal> が設定されています。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>lv_name</literal></para>
        </entry>
        <entry>
         <para>このパーティションをボリュームグループ内の論理ボリュームに配置する場合、ここで論理ボリュームの名前を指定します (<literal>is_lvm_vg</literal> もお読みください) 。</para>
<screen>&lt;lv_name&gt;opt_lv&lt;/lv_name&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>stripes</literal></para>
        </entry>
        <entry>
         <para>LVM のストライピングを設定するための整数です。どれだけの数のデバイスにデータを分散させるのかを指定します。</para>
<screen>&lt;stripes config:type="integer"&gt;2&lt;/stripes&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>stripesize</literal></para>
        </entry>
        <entry>
         <para>各ブロックのサイズを KB 単位で指定します。</para>
<screen>&lt;stripesize config:type="integer"
&gt;4&lt;/stripesize&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>lvm_group</literal></para>
        </entry>
        <entry>
         <para>このパーティションが LVM のボリュームグループの一部として使用されている物理パーティションである場合は、ここでボリュームグループの名前を指定する必要があります。</para>
<screen>&lt;lvm_group&gt;system&lt;/lvm_group&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>pool</literal></para>
        </entry>
        <entry>
         <para>LVM 論理ボリュームが LVM の thin プール内に存在すべきである場合は、 <literal>pool</literal> の値を <literal>true</literal> にしなければなりません。</para>
<screen>&lt;pool config:type="boolean"&gt;false&lt;/pool&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>used_pool</literal></para>
        </entry>
        <entry>
         <para>この thin 論理ボリュームに対して、データストアとして使用する LVM thin プールの名前を指定します。ここに何らかの値を設定すると、このボリュームは thin 論理ボリュームとして使用されるようになります。</para>
<screen>&lt;used_pool&gt;my_thin_pool&lt;/used_pool&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>raid_name</literal></para>
        </entry>
        <entry>
         <para>この物理ボリュームが RAID の一部である場合は、ここで RAID の名前を指定します。</para>
<screen>&lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>raid_options</literal></para>
        </entry>
        <entry>
         <para>RAID オプションを指定します (説明欄もお読みください) 。</para>
<screen>&lt;raid_options&gt;...&lt;/raid_options&gt;</screen>
        </entry>
        <entry>
         <para><literal>partition</literal> 内に RAID のオプションを設定するのは非推奨になっています。詳しくは <xref linkend="ay.partition_sw_raid"/> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>bcache_backing_for</para>
        </entry>
        <entry>
         <para>このデバイスを <emphasis>&bcache; のバッキングデバイス</emphasis> として使用する場合は、ここで &bcache; のデバイス名を指定します。</para>
<screen>&lt;bcache_backing_for&gt;/dev/bcache0&lt;/bcache_backing_for&gt;</screen>
        </entry>
        <entry>
         <para>詳しくは <xref linkend="ay.partition_bcache"/> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>bcache_caching_for</para>
        </entry>
        <entry>
         <para>このデバイスを <emphasis>&bcache; のキャッシュデバイス</emphasis> として使用する場合は、ここで &bcache; のデバイス名を指定します。</para>
<screen>&lt;bcache_caching_for config:type="list"&gt;
  &lt;listentry&gt;/dev/bcache0&lt;/listentry&gt;
&lt;/bcache_caching_for&gt;</screen>
        </entry>
        <entry>
         <para>詳しくは <xref linkend="ay.partition_bcache"/> をお読みください。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>resize</literal></para>
        </entry>
        <entry>
         <para>既存のパーティションのサイズを変更すべきである場合、この値は <literal>true</literal> にします。この場合、 &ay; に対してデバイスの再利用 (<literal>create</literal>) を指定し、 <literal>size</literal> の値を設定する必要があります。</para>
<screen>&lt;resize config:type="boolean"&gt;false&lt;/resize&gt;</screen>
        </entry>
        <entry>
         <para>&productname; 15 およびそれ以降では、サイズ変更は物理ディスクパーティションと LVM ボリュームの両方に対して動作するようになっています。</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <important>
     <title>自動的な起動パーティションの作成について</title>
     <para>&ay; がシステムの起動にあたって起動用のパーティションが必要であると判断すると、プロファイル内にそれが設定されていなくても、 &ay; が自動的にパーティションを追加します。</para>
     <para>ただし、何らかの理由で現在のパーティション配置に起動用のパーティションが設定できない場合、 &ay; は警告を表示したあと、そのままインストールを続行します。</para>
    </important>
   </sect2>

   <sect2 xml:id="ay.btrfs_subvolumes">
     <title>btrfs サブボリューム</title>
     <para><xref linkend="ay.partition_configuration"/> で説明しているとおり、それぞれの btrfs ファイルシステムに対して、必要なサブボリュームを定義することができます。最もシンプルな形態では、下記のようになります:</para>

<screen>&lt;subvolumes config:type="list"&gt;
  &lt;path&gt;tmp&lt;/path&gt;
  &lt;path&gt;opt&lt;/path&gt;
  &lt;path&gt;srv&lt;/path&gt;
  &lt;path&gt;var/crash&lt;/path&gt;
  &lt;path&gt;var/lock&lt;/path&gt;
  &lt;path&gt;var/run&lt;/path&gt;
  &lt;path&gt;var/tmp&lt;/path&gt;
  &lt;path&gt;var/spool&lt;/path&gt;
&lt;/subvolumes&gt;</screen>

     <para>&ay; では指定したサブボリュームに対して、 copy-on-write の無効化を設定することもできます。この場合、少し複雑な書式で設定する必要があります:</para>

<screen>&lt;subvolumes config:type="list"&gt;
&lt;listentry&gt;tmp&lt;/listentry&gt;
&lt;listentry&gt;opt&lt;/listentry&gt;
&lt;listentry&gt;srv&lt;/listentry&gt;
&lt;listentry&gt;
  &lt;path&gt;var/lib/pgsql&lt;/path&gt;
  &lt;copy_on_write config:type="boolean"&gt;false&lt;copy_on_write&gt;
&lt;/listentry&gt;
&lt;/subvolumes&gt;</screen>

     <para>ディストリビューション側で既定のサブボリュームが設定されている場合 (たとえば &productname; では <filename>@</filename>) 、この既定のサブボリュームの名前がこの一覧の中に自動的に追加されます。このような動作を無効化したい場合は、下記のようにして <literal>subvolumes_prefix</literal> を設定してください。</para>

<screen>&lt;subvolumes_prefix&gt;&lt;![CDATA[]]&gt;&lt;/subvolumes_prefix&gt;</screen>
   </sect2>

   <sect2 xml:id="ay.use_whole_disk">
    <title>ディスク全体の使用</title>

    <para>&ay; では、 <xref linkend="CreateProfile.Partitioning.config"/> で説明している <literal>disklabel</literal> の値を <literal>none</literal> に設定することで、パーティションを作成せずにディスク全体を使用することができます。このような場合、 <literal>drive</literal> 内の最初の <literal>partition</literal> 内の設定が、ディスク全体に対して適用されるようになります。</para>

    <para>下記の例では、 2 番目のディスク ( <literal>/dev/sdb</literal> ) 全体を <literal>/home</literal> のファイルシステムとして使用しています。</para>

    <example>
     <title>ディスク全体をファイルシステムとして使用する設定</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;</screen>
    </example>

    <para>これに加えて、ディスク全体を LVM 物理ボリュームやソフトウエア RAID のメンバーとして使用することもできます。 LVM やソフトウエア RAID に関する詳細は、 <xref linkend="ay.partition_lvm"/> および <xref linkend="ay.partition_sw_raid"/> をお読みください。</para>
   </sect2>

   <sect2 xml:id="ay.auto_partitioning">
    <title>自動的なパーティション設定</title>
    <para>パーティションを自動設定させる場合、パーティションのサイズとマウントポイントだけを設定すれば、それ以外のデータは (制御ファイル内に特に指示がない限り) 、インストール時に自動計算させることができます。</para>
    <para>指定したドライブにルートパーティションを作成する必要があるにもかかわらず、何もパーティションの定義を行なっていない場合、下記のようなパーティションを自動的に作成します:</para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para><filename>/boot</filename></para>
      <para><filename>/boot</filename> パーティションのサイズは、インストール先のシステムのアーキテクチャに従って決定されます。</para>
     </listitem>
     <listitem>
      <para><filename>swap</filename></para>
      <para>スワップパーティションのサイズは、インストール先のシステムに搭載されたメモリの量に従って決定されます。</para>
     </listitem>
     <listitem>
      <para><filename>/</filename> (ルートパーティション)</para>
      <para>ルートパーティションのサイズは、 <filename>swap</filename> と <filename>/boot</filename> の各パーティションを作成した後の残りの容量になります。</para>
     </listitem>
    </itemizedlist>
    <para>ドライブ内の当初のパーティション設定状態に従って、それぞれ下記のような方針で既定のパーティション設定が決定されます:</para>
    <variablelist>
     <varlistentry>
      <term>空き領域の使用</term>
      <listitem>
       <para>対象のドライブ内に既にパーティションが存在する場合、ドライブ内の空き領域に対して新しいパーティションを作成することができます。これはスワップ領域に加え、選択したパッケージをインストールするのに十分な容量が必要となります。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>利用可能な全領域の再利用</term>
      <listitem>
       <para>既存の全てのパーティション (Linux および非 Linux) を削除する場合に使用します。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>利用可能な全 Linux パーティションの再利用</term>
      <listitem>
       <para>このオプションを選択すると、既存の全ての Linux パーティションを削除します。その他のパーティション (例: Windows パーティション) は何も変更されません。ただし、このオプションは、 Linux パーティションがデバイスの末尾側に存在する場合にのみ動作します。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>指定したパーティションのみの再利用</term>
      <listitem>
       <para>このオプションを選択すると、削除するパーティションを指定することができます。この場合、後ろのパーティションから削除を行なってください。</para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>パーティションの再設定は、選択したパーティションが隣同士に存在し、かつデバイスの後ろ側に存在する場合にのみ動作します。</para>
    <important>
     <title>データ損失への警告</title>
     <para><literal>use</literal> プロパティに設定した値に従って、既存のデータとパーティションの取り扱いが決まります。このプロパティに <literal>all</literal> を指定すると、ディスク全体が消去されます。いずれかのパーティション内に重要なデータが含まれる場合は、あらかじめバックアップを採取するものとし、 <literal>confirm</literal> を指定して確認を行なうようにしてください。確認を行なうように設定しないと、何もメッセージが表示されないままパーティションが削除されてしまいます。</para>
    </important>
    <para>インストール先のシステムに複数のドライブが存在する場合、ドライブはデバイス名で識別することができますので、それぞれに対してパーティション方式を設定してください。</para>
    <para>パーティションのサイズはギガバイト／メガバイト単位で指定することができるほか、 <literal>auto</literal> や <literal>max</literal> を指定して、サイズを自動設定することもできます。 <literal>max</literal> を指定すると、ドライブ内で利用可能な全ての領域を使用しますので、ドライブ内の最後のパーティションに対して設定すべき値になります。また <literal>swap</literal> (スワップ) や <literal>boot</literal> (起動) のパーティションに対して <literal>auto</literal> を設定すると、システムに搭載されたメモリ量やアーキテクチャの種類に従って、サイズが自動設定されます。</para>
    <para>サイズを固定値で指定する場合、下記のように指定します:</para>
    <para><literal>1GB</literal> , <literal>1G</literal> , <literal>1000MB</literal> , <literal>1000M</literal> はいずれも、 1 ギガバイトのパーティションサイズを意味します。</para>
    <example>
     <title>自動的なパーティション設定</title>
     <para>下記はドライブが 1 台だけ搭載されたシステムでの例で、事前には何もパーティションを作成していないため、指定されたパーティションプランに従って自動的にパーティションを作成するように指定しています。なお、何もドライブを指定しない場合、ドライブは自動的に検出されます。</para>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
    <para>さらに詳しい例では、既存のパーティションが存在する場合や複数のドライブが存在する場合の処理方法について示しています。</para>
    <example>
     <title>詳細な自動パーティション設定</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;10G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;size&gt;1G&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;use&gt;free&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
        &lt;mount&gt;/data1&lt;/mount&gt;
        &lt;size&gt;15G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/data2&lt;/mount&gt;
        &lt;size&gt;auto&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
   </sect2>

   <sect2 xml:id="ay.partition_advanced">
    <title>高度なパーティション設定</title>
    <para><remark role="fixme">Add a short description</remark></para>
    <sect3 xml:id="ay.partition_advanced.wipe">
     <title>パーティションテーブルの消去</title>
     <para>通常は &ay; が 1 つずつパーティションを削除していくことから、この設定を行なう必要はありません。ですが、 &ay; に対してパーティションを個別に削除するのではなく、敢えて新しいパーティションテーブルを作成させたい場合、下記のような設定が必要になります。</para>
     <para>具体的には、 <literal>drive</literal> セクション内に下記を追加してください:</para>
<screen>&lt;initialize config:type="boolean"&gt;true&lt;/initialize&gt;</screen>
     <para>このような設定を行なうことで、 &ay; は既存のパーティションの分析やパーティションプランの作成を行なう前に、パーティションテーブルの消去を行なうようになります。この設定を行なうと、ご存じのとおり既存のパーティション内にある全てのデータは消去され、保持できなくなります。</para>
    </sect3>
    <sect3 xml:id="ay.partition_advanced.mount">
     <title>マウントオプション</title>
     <para>既定では、マウントすべきファイルシステムは <filename>/etc/fstab</filename> 内にデバイス名で指定されます。この指定方法は UUID やボリュームラベルに変更することもできます。ただし、全てのファイルシステムが UUID やボリュームラベルでのマウントに対応しているわけではないことに注意してください。パーティションのマウント方法を指定するには、 <literal>symbol</literal> 型で指定する <literal>mountby</literal> プロパティを設定してください。設定可能な値は下記のとおりです:</para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para><literal>device</literal> (既定値)</para>
      </listitem>
      <listitem>
       <para><literal>label</literal></para>
      </listitem>
      <listitem>
       <para><literal>UUID</literal></para>
      </listitem>
     </itemizedlist>
     <para>ラベルを利用してパーティションをマウントする場合、 <literal>label</literal> プロパティで指定した名前をボリュームラベルとして使用します。</para>
     <para>また、 <filename>/etc/fstab</filename> の 4 番目の列に指定することのできる、マウントオプションを追加することもできます。複数のオプションはカンマで区切ります。指定可能な値は下記のとおりです:</para>
     <variablelist>
      <varlistentry>
       <term>読み込み専用でマウント ( <literal>ro</literal> )</term>
       <listitem>
        <para>ファイルシステムに対して書き込みを行なうことができなくなります。既定値は <literal>false</literal> です。</para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>アクセス日時を更新しない ( <literal>noatime</literal> )</term>
       <listitem>
        <para>ファイルが読み込まれた際、アクセス日時を更新しないようにします。既定値は <literal>false</literal> です。</para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>ユーザにマウントを許可 ( <literal>user</literal> )</term>
       <listitem>
        <para>一般ユーザからファイルシステムをマウントできるようにします。既定値は <literal>false</literal> です。</para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>データジャーナリングモード ( <literal>ordered</literal> , <literal>journal</literal> , <literal>writeback</literal> )</term>
       <listitem>
        <variablelist>
         <varlistentry>
          <term><literal>journal</literal></term>
          <listitem>
           <para>データを書き込む際、実際のファイルシステムに書き込む前にジャーナルに書き込むようにします。</para>
          </listitem>
         </varlistentry>
         <varlistentry>
          <term><literal>ordered</literal></term>
          <listitem>
           <para>メタデータをジャーナルに書き込む前に、全てのデータを直接実際のファイルシステムに書き込みます。</para>
          </listitem>
         </varlistentry>
         <varlistentry>
          <term><literal>writeback</literal></term>
          <listitem>
           <para>データの書き込み順序を維持しません。</para>
          </listitem>
         </varlistentry>
        </variablelist>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>アクセス制御リスト ( <literal>acl</literal> )</term>
       <listitem>
        <para>ファイルシステムに対してアクセス制御リストを有効化します。</para>
       </listitem>
      </varlistentry>
      <varlistentry>
       <term>拡張ユーザ属性 ( <literal>user_xattr</literal> )</term>
       <listitem>
        <para>ファイルシステムに対して拡張ユーザ属性を使用できるようにします。</para>
       </listitem>
      </varlistentry>
     </variablelist>
     <example>
      <title>マウントオプション</title>
<screen>&lt;partitions config:type="list"&gt;
  &lt;partition&gt;
    &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
    &lt;format config:type="boolean"&gt;true&lt;/format&gt;
    &lt;fstopt&gt;ro,noatime,user,data=ordered,acl,user_xattr&lt;/fstopt&gt;
    &lt;mount&gt;/local&lt;/mount&gt;
    &lt;mountby config:type="symbol"&gt;uuid&lt;/mountby&gt;
    &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
    &lt;size&gt;10G&lt;/size&gt;
  &lt;/partition&gt;
&lt;/partitions&gt;
</screen>
     </example>

    <note>
     <title>ファイルシステムごとに対応するオプションが異なる件について</title>
     <para>ファイルシステムの種類が異なると、使用できるオプションもこことなります。オプションを設定する倍は、あらかじめ対応するドキュメンテーションをお読みください。</para>
    </note>
    </sect3>
    <sect3 xml:id="ay.partition_advanced.keep">
     <title>特定のパーティションの維持</title>
     <para>状況によっては、特定のパーティションのみをフォーマットして、それ以外のパーティションを何もせずにそのままにしておきたいような場合があります。たとえば異なる Linux インストールを共存させたいような場合や、他のオペレーティングシステムをインストールしたままにしておきたいような場合、これらのパーティションは消去せずに維持したままにすることができます。もちろんパーティション内のデータについても維持することができます。</para>
     <para>このような構成を作成する場合、インストール先のシステムとそのハードディスクに対して、さまざまな考慮を行なう必要があります。構成内容にもよりますが、インストール先のハードディスクのパーティションテーブルとパーティションの ID 、サイズと番号をそれぞれ知っておく必要があります。これらのデータをもとにして、 &ay; に対して特定のパーティションの維持を設定し、必要であれば新しいパーティションの作成を行なうことになります。</para>
     <para>下記の例では、パーティション 1,2,5 をそれぞれ維持し、パーティション 6 を削除して新しい 2 つのパーティションを作成しています。また、パーティション 2 以外を全てフォーマットして使用しています。 <remark>emap 2011-11-05: Not the best example for the scenarios two paras up with coexisting operating systems or data partitions. Who'd want to format those?</remark></para>
     <example>
      <title>パーティションの維持</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdc&lt;/device&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/&lt;/mount&gt;
          &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;false&lt;/format&gt;
          &lt;partition_nr config:type="integer"&gt;2&lt;/partition_nr&gt;
          &lt;mount&gt;/space&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;create config:type="boolean"&gt;false&lt;/create&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
          &lt;partition_nr config:type="integer"&gt;5&lt;/partition_nr&gt;
          &lt;mount&gt;swap&lt;/mount&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space2&lt;/mount&gt;
          &lt;size&gt;5G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;format config:type="boolean"&gt;true&lt;/format&gt;
          &lt;mount&gt;/space3&lt;/mount&gt;
          &lt;size&gt;max&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
    &lt;use&gt;6&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     </example>
     <para>上記の例では、既存のパーティションテーブルの内容のほか、維持すべきパーティションの番号についても明示的に指定しています。ただし、さまざまな種類のハードディスクや設定が混在しているような環境の場合、これらを明示的に指定することができない場合もあります。下記のシナリオでは、非 Linux OS のシステムと Linux インストール用の専用領域を確保する構成を示しています。</para>
     <figure xml:id="partitioning-keep1">
      <title>パーティションの維持</title>
      <mediaobject>
       <imageobject role="html">
        <imagedata fileref="partitioning-keep1.png"/>
       </imageobject>
       <imageobject role="fo">
        <imagedata fileref="partitioning-keep1.png" width="75%"/>
       </imageobject>
      </mediaobject>
     </figure>
     <para>このシナリオでは、 <xref linkend="partitioning-keep1"/> の図に示しているとおり、 &ay; では新しいパーティションを作成しないように設定します。その代わり、システム内に存在する特定の種類のパーティションを検出し、制御ファイルに書かれたパーティション設定プランに従ってそれらを使用するように構成しています。この場合、パーティションの番号は全く指定しておらず、マウントポイントとパーティションの種類のみを指定しています (たとえばファイルシステムのオプションや暗号化、ファイルシステムの種類などの追加データを設定することもできます) 。</para>
     <example>
      <title>維持すべきパーティションの自動検出</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;false&lt;/create&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
     </example>

     <note>
      <title>暗号化されたデバイスの維持について</title>
      <para>&ay; がストレージデバイスを検出する時点では、プロファイル内のパーティション設定セクションは解釈されていません。そのため、デバイスの暗号化を解除するために、どの鍵を使用すべきなのかを判別できません。たとえば、複数の暗号鍵を使用して暗号化を行なっている場合がそれに該当します。このような問題を解決するため、 &ay; では設定されている全ての鍵を利用して、デバイスの暗号化解除を試みるようになっています。</para>
     </note>
    </sect3>
   </sect2>

   <sect2 xml:id="ay.partition_lvm">
    <title>論理ボリュームマネージャ (Logical Volume Manager (LVM))</title>
    <para>LVM を設定するには、上述の通常のパーティション作成を設定して、物理ボリュームを作成しておく必要があります。</para>
    <example>
     <title>LVM 物理ボリュームの作成</title>
     <para>下記の例は、 <literal>partitioning</literal> リソースで LVM 向けのパーティションを準備する場合の例です。この例では <filename>/dev/sda1</filename> を作成したあとフォーマットを行なわず、 <literal>LVM</literal> の種類を設定し、ボリュームグループ <literal>system</literal> に追加を行ないます。なお、パーティションのサイズはドライブ内の全空き領域分になります。</para>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;partition_id config:type="integer"&gt;142&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;1&lt;/partition_nr&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
    </example>
    <example>
     <title>LVM 論理ボリューム</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;lvm_group&gt;system&lt;/lvm_group&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/system&lt;/device&gt;
      &lt;is_lvm_vg config:type="boolean"&gt;true&lt;/is_lvm_vg&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;user_lv&lt;/lv_name&gt;
          &lt;mount&gt;/usr&lt;/mount&gt;
          &lt;size&gt;15G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;opt_lv&lt;/lv_name&gt;
          &lt;mount&gt;/opt&lt;/mount&gt;
          &lt;size&gt;10G&lt;/size&gt;
        &lt;/partition&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
          &lt;lv_name&gt;var_lv&lt;/lv_name&gt;
          &lt;mount&gt;/var&lt;/mount&gt;
          &lt;size&gt;1G&lt;/size&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;pesize&gt;4M&lt;/pesize&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
    </example>
    <para>論理ボリュームに対しても <literal>size</literal> に <literal>max</literal> を指定することができます。もちろん、いずれか 1 つ (!) の論理ボリュームにしか指定できません。また、 1 つのボリュームグループ内で 2 つの論理ボリュームを <literal>max</literal> に設定することもできません。</para>
   </sect2>

   <sect2 xml:id="ay.partition_sw_raid">
    <title>ソフトウエア RAID</title>
    <para>ソフトウエア RAID デバイスに対するサポートは、 &productname; &product-ga; SP&product-sp; で大幅に改善されています。</para>
     <para>必要であれば、後方互換性維持の目的で残されているソフトウエア RAID の古い設定方法を利用することもできます。詳しくは <xref linkend="ay.partition_sw_raid_deprecated"/> をお読みください。</para>
     <para>&ay; を使用することで、ソフトウエア RAID デバイスを作成したり構成したりすることができます。対応する RAID レベルは下記のとおりです:</para>
    <variablelist>
     <varlistentry>
      <term>RAID 0</term>
      <listitem>
       <para>このレベルではディスク性能の強化が行なわれますが、冗長性は提供 <emphasis>されません</emphasis> 。いずれか 1 台のディスクがクラッシュすると、データの復元は不可能になります。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>RAID 1</term>
      <listitem>
       <para>このレベルでは最大限の冗長性を提供します。 2 台以上のディスクを使用することができます。このレベルでは、全てのディスクに対して同じデータが書き込まれます。いずれか 1 台のディスクが正しく動作している限り、データが失われることはありません。この RAID レベルを使用する場合、使用するパーティションはほぼ同じサイズである必要があります。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>RAID 5</term>
      <listitem>
       <para>このレベルでは多数のディスクの管理と冗長性の両方を提供します。このレベルを使用するには、 3 台以上のディスクが必要です。いずれか 1 台のディスクが壊れても、データが失われることはありませんが、 2 台のディスクが同時に壊れてしまうと、データの復元は不可能になります。</para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>マルチパス</term>
      <listitem>
       <para>このモードでは、複数のコントローラを介して同じ物理デバイスにアクセスを行ないます。これはコントローラカードの障害に対して冗長性を提供するものです。このモードを使用するには、少なくとも 2 枚のカードが必要になります。</para>
      </listitem>
     </varlistentry>
    </variablelist>
    <para>LVM と同様に、 &ay; プロファイル内でのソフトウエア RAID 定義は、 2 つの部品から構成されています:</para>

    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>どのディスクやパーティションを RAID のメンバーとして使用するのかの設定。 RAID メンバーとしての設定は、各デバイス要素内で <literal>raid_name</literal> を設定して行ないます。</para>
     </listitem>
     <listitem>
      <para><literal>drive</literal> セクションによる RAID そのものの定義。</para>
     </listitem>
    </itemizedlist>

    <para>下記の例は、 1 台目のディスクに存在するパーティションと、 2 台目のディスクに存在するパーティションを RAID のメンバーとして、 RAID1 を構成する場合の例です:</para>
    <example>
     <title>RAID1 設定</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;size&gt;20G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;none&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;raid_name&gt;/dev/md/0&lt;/raid_name&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/md/0&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/home&lt;/mount&gt;
        &lt;size&gt;40G&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;/srv&lt;/mount&gt;
        &lt;size&gt;10G&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;raid_options&gt;
      &lt;chunk_size&gt;4&lt;/chunk_size&gt;
      &lt;parity_algorithm&gt;left_asymmetric&lt;/parity_algorithm&gt;
      &lt;raid_type&gt;raid1&lt;/raid_type&gt;
    &lt;/raid_options&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
    </example>

    <para>ソフトウエア RAID 内にパーティションを作成したくない場合は、通常のディスクと同様に <literal>disklabel</literal> を <literal>none</literal> に設定してください。下記の例では、単純化のために RAID の <literal>drive</literal> セクションのみを示しています:</para>

    <example>
     <title>パーティションを使用しない RAID1</title>
<screen>&lt;drive&gt;
  &lt;device&gt;/dev/md/0&lt;/device&gt;
  &lt;disklabel&gt;none&lt;/disklabel&gt;
  &lt;partitions config:type="list"&gt;
    &lt;partition&gt;
      &lt;mount&gt;/home&lt;/mount&gt;
      &lt;size&gt;40G&lt;/size&gt;
    &lt;/partition&gt;
  &lt;/partitions&gt;
  &lt;raid_options&gt;
    &lt;chunk_size&gt;4&lt;/chunk_size&gt;
    &lt;parity_algorithm&gt;left_asymmetric&lt;/parity_algorithm&gt;
    &lt;raid_type&gt;raid1&lt;/raid_type&gt;
  &lt;/raid_options&gt;
  &lt;use&gt;all&lt;/use&gt;
&lt;/drive&gt;</screen>
    </example>

   <sect3 xml:id="ay.partition_sw_raid_deprecated">
    <title>古い書式の使用</title>
    <para>インストーラの自己更新機能が有効化されている場合、 &productname; 15 でソフトウエア RAID のパーティションを作成することができます。ただし、それ以前のバージョンではこのような仕組みには対応していないため、ソフトウエア RAID の定義が少し異なることになります。</para>

    <para>本章では、後方互換性のために提供されている古い形式の設定について説明しています。</para>

    <para>古い形式で RAID を設定する場合、下記の点に注意してください:</para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>RAID デバイスは必ず <filename>/dev/md</filename> になります。</para>
     </listitem>
     <listitem>
      <para><literal>partition_nr</literal> プロパティは、 MD デバイスの番号を判断するために使用します。たとえば <literal>partition_nr</literal> に 0 を設定すると、 <filename>/dev/md/0</filename> が設定されます。複数の <literal>partition</literal> セクションを設定すると、複数のソフトウエア RAID ( <filename>/dev/md/0</filename> , <filename>/dev/md/1</filename> ,...) を作成する意味になります。</para>
     </listitem>
     <listitem>
      <para>RAID 関連の全てのオプションは、 <literal>raid_options</literal> 内に含める必要があります。</para>
     </listitem>
    </itemizedlist>

    <example>
     <title>古い書式の RAID1 設定</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;raid_type&gt;raid1&lt;/raid_type&gt;
        &lt;size&gt;4G&lt;/size&gt;
      &lt;/partition&gt;

        &lt;!-- /dev/sda に配置する通常のパーティション設定 (例: /, swap)
                をここに記述します --&gt;

    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;false&lt;/format&gt;
        &lt;partition_id config:type="integer"&gt;253&lt;/partition_id&gt;
        &lt;raid_name&gt;/dev/md0&lt;/raid_name&gt;
        &lt;size&gt;4gb&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/md&lt;/device&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;ext4&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;/space&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_nr config:type="integer"&gt;0&lt;/partition_nr&gt;
        &lt;raid_options&gt;
          &lt;chunk_size&gt;4&lt;/chunk_size&gt;
          &lt;parity_algorithm&gt;left_asymmetric&lt;/parity_algorithm&gt;
        &lt;/raid_options&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>
    </example>
   </sect3>

   <sect3 xml:id="ay.raid_configuration">
    <title>RAID オプション</title>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
    <screen>&lt;partition&gt;
     &lt;raid_options&gt;
     ...
     &lt;/raid_options&gt;
     &lt;/partition&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>chunk_size</literal></para>
        </entry>
        <entry>
         <para/>
         <screen>&lt;chunk_size&gt;4&lt;/chunk_size&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>parity_algorithm</literal></para>
        </entry>
        <entry>
         <para>設定可能な値は下記のとおりです:</para>
         <para><literal>left_asymmetric</literal> , <literal>left_symmetric</literal>, <literal>right_asymmetric</literal> , <literal>right_symmetric</literal> .</para>
         <para>RAID6 や RAID10 に対しては、下記の値を設定することができます:</para>
         <para><literal>parity_first</literal> , <literal>parity_last</literal> , <literal>left_asymmetric_6, left_symmetric_6</literal> , <literal>right_asymmetric_6</literal> , <literal>right_symmetric_6</literal> , <literal>parity_first_6</literal> , <literal>n2</literal> , <literal>o2</literal> , <literal>f2</literal> , <literal>n3</literal> , <literal>o3</literal> , <literal>f3</literal></para>
         <screen>&lt;parity_algorithm
          &gt;left_asymmetric&lt;/parity_algorithm&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>raid_type</literal></para>
        </entry>
        <entry>
         <para>値には <literal>raid0</literal> , <literal>raid1</literal> , <literal>raid5</literal> , <literal>raid6</literal> , <literal>raid10</literal> のいずれかを指定します。</para>
         <screen>&lt;raid_type&gt;raid1&lt;/raid_type&gt;</screen>
        </entry>
        <entry>
         <para>既定値は <literal>raid1</literal> です。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>device_order</literal></para>
        </entry>
        <entry>
         <para>この一覧には、物理デバイスの設定順序を指定します:</para>
         <screen>&lt;device_order config:type="list"&gt;
          &lt;device&gt;/dev/sdb2&lt;/device&gt;
          &lt;device&gt;/dev/sda1&lt;/device&gt;
          ...
          &lt;/device_order&gt;</screen>
        </entry>
        <entry>
         <para>この設定は任意設定で、既定ではアルファベット順です。</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect3>
  </sect2>

  <sect2 xml:id="ay.partition_bcache">
   <title>&bcache; の設定</title>
   <para>&bcache; は複数の高速なドライブを利用して、 1 つまたは複数の低速なドライブを高速化するための仕組みです。たとえば特定の高速なドライブをキャッシュとして使用し、巨大で遅いドライブの性能を改善したりすることができます。</para>

   <para>&productname; での bcache に関する詳細は、 <link xlink:href="https://www.suse.com/c/combine-the-performance-of-solid-state-drive-with-the-capacity-of-a-hard-drive-with-bcache-and-yast/"/> (英語) に書かれているブログの記事をお読みください。</para>

   <para>&bcache; のドライブを設定するには、 &ay; 側で下記のようなプロファイル設定が必要となります:</para>

   <itemizedlist>
    <listitem>
     <para>(遅いほうの) ブロックデバイスを <emphasis>バッキングデバイス</emphasis> として設定するには、 <literal>bcache_backing_for</literal> 要素を使用します。</para>
    </listitem>
    <listitem>
     <para>(早いほうの) ブロックデバイスを <emphasis>キャッシュデバイス</emphasis> して設定するには、 <literal>bcache_caching_for</literal> 要素を使用します。複数のドライブの速度を上げるために、 1 台のデバイスを使用するような設定も行なうことができます。</para>
    </listitem>
    <listitem>
     <para>&bcache; デバイスの配置方法を指定するには、 <literal>drive</literal> セクション内に <literal>type</literal> 要素が <literal>CT_BCACHE</literal> であるものを設定します。 &bcache; デバイス内には、パーティションを含めることもできます。</para>
    </listitem>
   </itemizedlist>

   <example>
    <title>&bcache; の定義</title>
<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;device&gt;/dev/sda&lt;/device&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;enable_snapshots config:type="boolean"&gt;true&lt;/enable_snapshots&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;btrfs&lt;/filesystem&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;create config:type="boolean"&gt;true&lt;/create&gt;
        &lt;size&gt;2GiB&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;device&gt;/dev/sdb&lt;/device&gt;
    &lt;disklabel&gt;msdos&lt;/disklabel&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;!-- It can serve as caching device for several bcaches --&gt;
        &lt;bcache_caching_for config:type="list"&gt;
          &lt;listentry&gt;/dev/bcache0&lt;/listentry&gt;
        &lt;/bcache_caching_for&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_DISK&lt;/type&gt;
    &lt;device&gt;/dev/sdc&lt;/device&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;disklabel&gt;msdos&lt;/disklabel&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;!-- It can serve as backing device just for one bcache --&gt;
        &lt;bcache_backing_for&gt;/dev/bcache0&lt;/bcache_backing_for&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;

  &lt;drive&gt;
    &lt;type config:type="symbol"&gt;CT_BCACHE&lt;/type&gt;
    &lt;device&gt;/dev/bcache0&lt;/device&gt;
    &lt;bcache_options&gt;
      &lt;cache_mode&gt;writethrough&lt;/cache_mode&gt;
    &lt;/bcache_options&gt;
    &lt;use&gt;all&lt;/use&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;mount&gt;/data&lt;/mount&gt;
        &lt;size&gt;20GiB&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;size&gt;1GiB&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;
</screen>
</example>

   <para>現時点では、 <literal>bcache_options</literal> で使用することのできるオプションは <literal>cache_mode</literal> だけとなります。説明は下記に示しています。</para>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para><literal>cache_mode</literal></para>
       </entry>
       <entry>
        <para/>
        <screen>&lt;cache_mode&gt;writethrough&lt;/cache_mode&gt;</screen>
       </entry>
       <entry>
        <para>&bcache; のキャッシュモードを指定します。設定可能な値は <literal>writethrough</literal> (ライトスルー), <literal>writeback</literal> (ライトバック), <literal>writearound</literal> (ライトアラウンド), <literal>none</literal> (無し) のいずれかです。</para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect2>

  <sect2 xml:id="ay.partition_nfs">
   <title>NFS の設定</title>

   <para>&ay; では、 &productname; を <emphasis>Network File System</emphasis> (NFS) の共有内にインストールすることもできます。これを実現するには、まず <literal>CT_NFS</literal> の種類でドライブを作成し、デバイス名として NFS の共有名を ( <replaceable>サーバ:パス</replaceable> ) の形式で指定します。マウントポイントに関する情報は、最初のパーティションセクション内に記述します。なお、 NFS ドライブの場合、最初のパーティションしか使用されないことに注意してください。</para>
   <para>システムをインストールした後の NFS クライアントやサーバの設定方法については、 <xref linkend="ay.partition_nfs"/> をお読みください。</para>

   <example>
    <title>NFS 共有の定義</title>
      <screen>
        &lt;partitioning config:type="list"&gt;
          &lt;drive&gt;
            &lt;device&gt;192.168.1.1:/exports/root_fs&lt;/device&gt;
            &lt;type config:type="symbol"&gt;CT_NFS&lt;/type&gt;
            &lt;use&gt;all&lt;/use&gt;
            &lt;partitions config:type="list"&gt;
              &lt;partition&gt;
                &lt;mount&gt;/&lt;/mount&gt;
                &lt;fstopt&gt;nolock&lt;/fstopt&gt;
              &lt;/partition&gt;
            &lt;/partitions&gt;
          &lt;/drive&gt;
        &lt;/partitioning&gt;
      </screen>
    </example>
  </sect2>

   <sect2 xml:id="ay.partition_s390">
    <title>&zseries; 固有の設定</title>
    <para/>
    <sect3 xml:id="ay.partition_s390.dasd">
     <title>DASD ディスクの設定</title>
     <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;dasd&gt;
 &lt;devices config:type="list"&gt;
  &lt;listentry&gt;
   ...
  &lt;/listentry&gt;
 &lt;/devices&gt;
&lt;/dasd&gt;</screen>
     <para>上記のような内容を &lt;profile&gt; セクション内に記述します。それぞれのディスクは、それぞれ別々の &lt;listentry&gt; ... &lt;/listentry&gt; セクション内に記述する必要があります。</para>
     <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>device</literal>
          </para>
         </entry>
         <entry>
          <para><literal>DASD</literal> だけを指定することができます</para>
<screen>&lt;device
&gt;DASD&lt;/dev_name&gt;</screen>
         </entry>
         <entry>
          <para/>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>dev_name</literal></para>
         </entry>
         <entry>
          <para>このセクションで設定したいデバイス ( <literal>dasd<replaceable>N</replaceable></literal> ) を指定します。</para>
<screen>&lt;dev_name
&gt;/dev/dasda&lt;/dev_name&gt;</screen>
         </entry>
         <entry>
          <para>任意指定ですが、できれば指定しておくことをお勧めします。何も指定しない場合、 &ay; がデバイスを自動的に判断します。</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>channel</literal></para>
         </entry>
         <entry>
          <para>ディスクにアクセスする際のチャネルを指定します。</para>
<screen>&lt;channel&gt;0.0.0150&lt;/channel&gt;</screen>
         </entry>
         <entry>
          <para>必須です。</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>diag</literal></para>
         </entry>
         <entry>
          <para><literal>DIAG</literal> を使用するかどうかを指定します。指定可能な値は <literal>true</literal> (有効化) もしくは <literal>false</literal> (無効化) のいずれかです。</para>
<screen>&lt;diag
config:type="boolean"&gt;true&lt;/diag&gt;</screen>
         </entry>
         <entry>
          <para>
           Optional.
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect3>
    <sect3 xml:id="ay.partition_s390.zfcp">
     <title>zFCP ディスクの設定</title>
     <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;profile&gt;
  &lt;zfcp&gt;
    &lt;devices config:type="list"&gt;
      &lt;listentry&gt;
        ...
      &lt;/listentry&gt;
    &lt;/devices&gt;
  &lt;/zfcp&gt;
&lt;profile&gt;</screen>
     <para>なお、各ディスクはそれぞれ別々の <literal>listentry</literal> セクション内に記述します。</para>
     <informaltable>
      <tgroup cols="2">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para><literal>controller_id</literal></para>
         </entry>
         <entry>
          <para>チャネル番号</para>
<screen>&lt;controller_id
&gt;0.0.fc00&lt;/controller_id&gt;</screen>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect3>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Iscsi_client">
   <title>iSCSI イニシエータの概要</title>
   <para><literal>iscsi-client</literal> リソースを使用することで、インストール先のマシンを iSCSI クライアントとして設定することができます。</para>

   <example>
     <title>iSCSI クライアント</title>
     <screen>
  &lt;iscsi-client&gt;
    &lt;initiatorname&gt;iqn.2013-02.de.suse:01:e229358d2dea&lt;/initiatorname&gt;
    &lt;targets config:type="list"&gt;
      &lt;listentry&gt;
         &lt;authmethod&gt;None&lt;/authmethod&gt;
         &lt;portal&gt;192.168.1.1:3260&lt;/portal&gt;
         &lt;startup&gt;onboot&lt;/startup&gt;
         &lt;target&gt;iqn.2001-05.com.doe:test&lt;/target&gt;
         &lt;iface&gt;default&lt;/iface&gt;
      &lt;/listentry&gt;
    &lt;/targets&gt;
    &lt;version&gt;1.0&lt;/version&gt;
  &lt;/iscsi-client&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para><literal>initiatorname</literal></para>
         </entry>
         <entry>
          <para><literal>InitiatorName</literal> は <filename>/etc/iscsi/initiatorname.iscsi</filename> からの値を指定します。 iBFT を使用している場合、この値は BIOS から設定されるため、 BIOS セットアップで変更する必要があります。</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>version</literal></para>
         </entry>
         <entry>
          <para>&yast; モジュールのバージョンを指定します。既定値: 1.0</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>targets</literal></para>
         </entry>
         <entry>
          <para>ターゲットの一覧を指定します。各項目には下記の値を設定することができます:</para>
          <para><literal>authmethod</literal>: 認証方式 (None (無し)/CHAP)</para>
          <para><literal>portal</literal>: ポータルのアドレス</para>
          <para><literal>startup</literal>: manual (手動) もしくは onboot (起動時) のいずれか</para>
          <para><literal>target</literal>: ターゲット名</para>
          <para><literal>iface</literal>: インターフェイス名</para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.fcoe_client">
   <title>Fibre Channel over Ethernet (FCoE) の設定</title>
   <para><literal>fcoe_cfg</literal> リソースを使用することで、 Fibre Channel over Ethernet (FCoE) の設定を行なうことができます。</para>

   <example>
     <title>FCoE の設定</title>
     <screen>
  &lt;fcoe-client&gt;
    &lt;fcoe_cfg&gt;
      &lt;DEBUG&gt;no&lt;/DEBUG&gt;
      &lt;USE_SYSLOG&gt;yes&lt;/USE_SYSLOG&gt;
    &lt;/fcoe_cfg&gt;
    &lt;interfaces config:type="list"&gt;
      &lt;listentry&gt;
        &lt;dev_name&gt;eth3&lt;/dev_name&gt;
        &lt;mac_addr&gt;01:000:000:000:42:42&lt;/mac_addr&gt;
        &lt;device&gt;Gigabit 1313&lt;/device&gt;
        &lt;vlan_interface&gt;200&lt;/vlan_interface&gt;
        &lt;fcoe_vlan&gt;eth3.200&lt;/fcoe_vlan&gt;
        &lt;fcoe_enable&gt;yes&lt;/fcoe_enable&gt;
        &lt;dcb_required&gt;yes&lt;/dcb_required&gt;
        &lt;auto_vlan&gt;no&lt;/auto_vlan&gt;
        &lt;dcb_capable&gt;no&lt;/dcb_capable&gt;
        &lt;cfg_device&gt;eth3.200&lt;/cfg_device&gt;
      &lt;/listentry&gt;
    &lt;/interfaces&gt;
    &lt;service_start&gt;
      &lt;fcoe config:type="boolean"&gt;true&lt;/fcoe&gt;
      &lt;lldpad config:type="boolean"&gt;true&lt;/lldpad&gt;
    &lt;/service_start&gt;
  &lt;/fcoe-client&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para><literal>fcoe_cfg</literal></para>
         </entry>
         <entry>
          <para><literal>DEBUG</literal> は、 fcoe サービススクリプトや fcoemon から出力することのできるデバッグメッセージを、有効化するかどうかを指定します。</para>
          <para><literal>USE_SYSLOG</literal> を yes に設定すると、メッセージを syslog に送信するようになります。</para>
         </entry>
         <entry>
          <para>yes/no</para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>interfaces</literal>
          </para>
         </entry>
         <entry>
          <para>VLAN や FCoE の設定状態を含む、ネットワークカードの一覧を指定します。</para>
         </entry>
         <entry>
          <para>
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>service_start</literal></para>
         </entry>
         <entry>
          <para><systemitem class="service">fcoe</systemitem> と <systemitem class="service">lldpad</systemitem> の各サービスを、システムの起動時に開始するかどうかを指定します。</para>
          <para><systemitem class="service">fcoe</systemitem> サービスを開始すると、 FCoE インターフェイスを制御し、 <systemitem class="daemon">lldpad</systemitem> デーモンとの通信を確立する Fibre Channel over Ethernet サービスデーモン <systemitem class="daemon">fcoemon</systemitem> を起動します。</para>
          <para><systemitem class="service">lldpad</systemitem> サービスは Link Layer Discovery Protocol agent daemon (<systemitem class="daemon">lldpad</systemitem>) と呼ばれるサービスを提供するもので、このサービスは <systemitem class="daemon">fcoemon</systemitem> に対して DCB (Data Center Bridging) 機能とインターフェイスの設定を通知します。</para>
         </entry>
         <entry>
          <para>yes/no</para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.Country">
   <title>国ごとの設定</title>
   <para>言語やタイムゾーン、キーボードの設定などを行ないます。</para>

   <example>
     <title>言語</title>
     <screen>
       &lt;language&gt;
         &lt;language&gt;en_GB&lt;/language&gt;
         &lt;languages&gt;de_DE,en_US&lt;/languages&gt;
       &lt;/language&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para><literal>language</literal></para>
         </entry>
         <entry>
          <para>第一言語</para>
         </entry>
         <entry>
          <para>利用可能な言語の一覧については、 <filename>/usr/share/YaST2/data/languages</filename> ファイルをご覧ください。</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>languages</literal></para>
         </entry>
         <entry>
          <para>第二言語 (複数可、カンマ区切り)</para>
         </entry>
         <entry>
          <para>利用可能な言語の一覧については、 <filename>/usr/share/YaST2/data/languages</filename> ファイルをご覧ください。</para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>

   <para>第一言語に指定した値が正しくない場合、第一言語は既定値である <literal>en_US</literal> に設定されます。</para>

   <example>
     <title>タイムゾーン</title>
     <screen>
       &lt;timezone&gt;
         &lt;hwclock&gt;UTC&lt;/hwclock&gt;
         &lt;timezone&gt;Europe/Berlin&lt;/timezone&gt;
       &lt;/timezone&gt;
     </screen>
   </example>

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Values
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para><literal>hwclock</literal></para>
         </entry>
         <entry>
          <para>ハードウエアの時計がローカルの時刻 (localtime) を示しているのか、 UTC を示しているのかを指定します。</para>
         </entry>
         <entry>
          <para>localtime/UTC</para>
         </entry>
        </row>
        <row>
         <entry>
          <para><literal>timezone</literal></para>
         </entry>
         <entry>
          <para>タイムゾーン</para>
         </entry>
         <entry>
          <para>設定可能なタイムゾーンの一覧については、 <filename>/usr/share/YaST2/data/timezone_raw.ycp</filename> ファイルをご覧ください。</para>
         </entry>
        </row>
       </tbody>
      </tgroup>
   </informaltable>

   <example>
     <title>キーボード</title>
     <screen>
       &lt;keyboard&gt;
         &lt;keymap&gt;german&lt;/keymap&gt;
       &lt;/keyboard&gt;
     </screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para><literal>keymap</literal></para>
       </entry>
       <entry>
        <para>キーボードレイアウト</para>
       </entry>
       <entry>
        <para>設定可能なキーボードレイアウトの一覧については、 <literal>/usr/share/YaST2/data/keyboard_raw.ycp</literal> ファイルをご覧ください。</para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

  </sect1>

  <sect1 xml:id="CreateProfile.Software">
   <title>ソフトウエア</title>

   <para><remark role="fixme">Add a short description</remark></para>

   <sect2 xml:id="Software.Selections.base_product" os="sles;sled">
    <title>製品の選択</title>
    <para>&productname; 15 およびそれ以降のバージョンでは、全ての製品は 1 枚のインストールメディアとして提供されるようになっています。そのため、 <tag class="element">product</tag> タグを指定してインストールしたい製品を選択する必要があることになります。</para>
    <para><tag class="element">product</tag> タグ内で設定可能な値は下記のとおりです:</para>
    <variablelist>
     <varlistentry>
      <term>SLES</term>
      <listitem>
       <para>&sls;</para>
      </listitem>
     </varlistentry>
    <varlistentry>
     <term>SLE_HPC</term>
     <listitem>
      <para>&slehpc;</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>SLES_SAP</term>
     <listitem>
      <para>&sles4sap;</para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>SLED</term>
     <listitem>
      <para>&sled;</para>
     </listitem>
    </varlistentry>
    </variablelist>
    <example>
     <title>明示的な製品選択</title>
     <para>下記の例では、 &sled; を製品として選択しています:</para>
<screen>&lt;software&gt;
  &lt;products config:type="list"&gt;
    &lt;product&gt;SLED&lt;/product&gt;
  &lt;/products&gt;
&lt;/software&gt;
</screen>
    </example>
    <para>場合によっては、 1 枚のメディア内に 1 つの製品しか含まれていないものもあります。このような場合は、上述のようにして製品を明示的に指定する必要はありません。 &ay; 側で利用可能な製品を自動的に判断します。</para>
    <note>
     <title>古いバージョンの &ay; で使用していたファイルの使用</title>
     <para>古いバージョンの &productname; で使用していた &ay; 設定ファイルを使用していたり、移行しようとしていたりする場合は、特別な考慮を行なう必要があります。詳しくは <xref linkend="sec.ay_12vs15.product-selection"/> をお読みください。</para>
    </note>
   </sect2>

   <sect2 xml:id="Software.Selections.sles10">
    <title>パターンやパッケージの選択</title>
    <para>パターンやパッケージは下記のようにして設定します:</para>
    <example>
     <title>パターンやパッケージのセクションを利用した設定ファイル内でのパッケージ選択</title>
<screen>&lt;software&gt;
  &lt;patterns config:type="list"&gt;
    &lt;pattern&gt;directory_server&lt;/pattern&gt;
  &lt;/patterns&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;apache&lt;/package&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/packages&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</screen>
    </example>
    <note>
     <title>パッケージとパターンの名前について</title>
     <para>値にはパッケージ名もしくはパターン名を指定します。バージョンが変わることによってパッケージ名が変更されることもありますが、その場合はプロファイル内に設定した名前を変更する必要があります。</para>
    </note>
   </sect2>

   <sect2 xml:id="Software.Selections.images" os="osuse">
    <title>イメージの配置</title>
    <para>インストールにかかる時間を削減するため、イメージを利用してインストールすることができます。</para>
    <example>
     <title>イメージの配置の有効化</title>
<screen>&lt;!-- 注意! software セクション内には記述しません! --&gt;
&lt;deploy_image&gt;
  &lt;image_installation config:type="boolean"&gt;false&lt;/image_installation&gt;
&lt;/deploy_image&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Software.Selections.additional">
    <title>追加のパッケージやカスタマイズしたパッケージ、もしくは独自の製品のインストール</title>
    <para>DVD-ROM 内に用意されているパッケージに加えて、必要であればカスタマイズしたカーネルなど、外部のパッケージをインストールすることもできます。なお、カスタマイズしたカーネルを使用する場合は、 &suse; パッケージとの互換性があるものでなければならないほか、同じ場所にインストールしなければならないことにも注意してください。</para>
    <para>従来のバージョンとは異なり、独自のパッケージや外部のパッケージをインストールするにあたって、特別なリソースを設定する必要はありません。その代わり、インストール元のリポジトリに必要なパッケージを追加したあと、パッケージデータベースを再作成する必要があります。</para>
    <para>このような作業に対応するため、リポジトリ内に存在するパッケージを調べてパッケージデータベースを作成するためのスクリプトが用意されています。これは <command>/usr/bin/create_package_descr</command> というコマンドになります。このコマンドは openSUSE Build Service 内の <literal>inst-source-utils</literal> パッケージ内に含まれています。なお、データベースを作成する際、全ての言語は英語にリセットされます。</para>
    <example>
     <title>inst-source-utils.rpm 追加パッケージを利用したパッケージデータベースの作成</title>
     <para>DVD 内のファイルを <literal>/usr/local/DVDs/LATEST</literal> に展開します。</para>
<screen>&prompt.user;cp /tmp/inst-source-utils-2016.7.26-1.2.noarch.rpm /usr/local/DVDs/LATEST/suse/noarch
&prompt.user;cd /usr/local/DVDs/LATEST/suse
&prompt.user;create_package_descr -d /usr/local/CDs/LATEST/suse</screen>
    </example>
    <para>上記の例では、 <filename>/usr/local/CDs/LATEST/suse</filename> 以下にアーキテクチャ (例: <literal>x86_64</literal>) に依存するパッケージと依存しないパッケージ (<literal>noarch</literal>) の両方が存在するものとします。他のアーキテクチャの場合は少し異なるかもしれません。</para>
    <para>この方式を使用することで、あらかじめ決められた最新のパッケージを提供する最新のリポジトリを提供できるようになります。また、この方式を使用することで、独自の CD-ROM を簡単に作成することもできます。</para>
    <para>たとえば SDK (&sdk;) のような独自モジュールを追加したい場合は、インストール元となるディレクトリのルートディレクトリに対して、 <filename>add_on_products.xml</filename> ファイルを追加します。</para>
    <para>下記の例では、基本製品のリポジトリ内に SDK モジュールを追加する方法を示しています。 SDK のリポジトリそのものは <filename>/sdk</filename> 内にあるものとします。</para>
    <example>
     <title><filename>add_on_products.xml</filename></title>
     <para>このファイルは、基本製品内に SDK モジュールを追加するためのファイルです。</para>
<screen>
&lt;?xml version="1.0"?&gt;
&lt;add_on_products xmlns="http://www.suse.com/1.0/yast2ns"
   xmlns:config="http://www.suse.com/1.0/configns"&gt;
   &lt;product_items config:type="list"&gt;
      &lt;product_item&gt;
         &lt;name&gt;SUSE Linux Enterprise Software Development Kit&lt;/name&gt;
         &lt;url&gt;relurl:////sdk?alias=SLE_SDK&lt;/url&gt;
         &lt;path&gt;/&lt;/path&gt;
         &lt;-- Users are asked whether to add such a product --&gt;
         &lt;ask_user config:type="boolean"&gt;false&lt;/ask_user&gt;
         &lt;-- Defines the default state of pre-selected state in case of ask_user used. --&gt;
         &lt;selected config:type="boolean"&gt;true&lt;/selected&gt;
      &lt;/product_item&gt;
   &lt;/product_items&gt;
&lt;/add_on_products&gt;
</screen>
    </example>
    <!-- fs 2018-05-09
         The following does not make sense, need to ask author what was intended
    <para>
     With a normal installation now the SDK module will be installed
     automatically. It will not be done via an &ay; installation. An
     additional entry would be needed for in the &ay; control file
     <literal>add-on</literal> section.
     </para>
     -->
    <para>上記のような特別な例のほかにも、その他のモジュールや拡張、アドオン製品などをそれぞれ別々のディレクトリに配置して、 &ay; のインストール時に追加するようなことも実現することができます。</para>
    <example>
     <title>SDK 拡張の追加</title>
<screen>&lt;add-on&gt;
  &lt;add_on_products config:type="list"&gt;
    &lt;listentry&gt;
      &lt;media_url&gt;cd:///sdk&lt;/media_url&gt;
      &lt;product&gt;sle-sdk&lt;/product&gt;
      &lt;alias&gt;SLES SDK&lt;/alias&gt;
      &lt;product_dir&gt;/&lt;/product_dir&gt;
      &lt;priority config:type="integer"&gt;20&lt;/priority&gt;
      &lt;ask_on_error config:type="boolean"&gt;false&lt;/ask_on_error&gt;
      &lt;confirm_license config:type="boolean"&gt;false&lt;/confirm_license&gt;
      &lt;name&gt;SUSE Linux Enterprise Software Development Kit&lt;/name&gt;
    &lt;/listentry&gt;
  &lt;/add_on_products&gt;
&lt;/add-on&gt;</screen>
    </example>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>media_url</literal></para>
        </entry>
        <entry>
         <para>製品の URL を指定します。 <literal>cd:///</literal> , <literal>http://</literal> , <literal>ftp://</literal> などのプレフィクスを使用することができます。この項目は必須です。</para>
         <para>&sle; のパッケージ DVD などのように複数の製品が含まれるメディアを使用する場合は、 URL パスが複数製品のメディアのルートディレクトリを指し示すように設定し、 <literal>product_dir</literal> でそれぞれの製品を指定する必要があります (詳しくは下記をお読みください) 。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>product</literal>
         </para>
        </entry>
        <entry>
         <para>アドオンが製品である場合、内部向けの製品名を指定します。 <command>zypper products</command> を実行すると、インストール済みの製品名を表示することができます。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>alias</literal></para>
        </entry>
        <entry>
         <para>リポジトリの別名を指定します。ユーザ側で任意の名前を設定することができます。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>product_dir</literal></para>
        </entry>
        <entry>
         <para>製品のサブディレクトリを指定します。この属性は、 &sle; のパッケージ DVD など、複数の製品が含まれるメディアである場合にのみ使用します。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>priority</literal></para>
        </entry>
        <entry>
         <para>リポジトリに対して設定する libzypp の優先順位を指定します。 1 が最も高い優先順位を表わし、数値が大きくなればなるほど、優先順位が低くなります。既定値は 99 です。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>ask_on_error</literal></para>
        </entry>
        <entry>
         <para>&ay; に対して、指定した場所にアドオン製品やモジュール、拡張のリポジトリが存在しない場合、タイムアウトエラーを報告するのではなく、ユーザに対して尋ねるように設定するかどうかを指定します。ユーザに対して尋ねたい場合は、 ask_on_error を <literal>true</literal> に設定します (既定値は <literal>false</literal> です) 。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>confirm_license</literal></para>
        </entry>
        <entry>
         <para>ユーザに対してライセンスへの同意を求めるかどうかを指定します。既定値は <literal>false</literal> です。</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>name</literal>
         </para>
        </entry>
        <entry>
         <para>リポジトリ名を指定します。 <command>zypper lr</command> コマンドを実行することで、追加されたリポジトリの名前を表示することができます。</para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <para>&ay; で未署名のインストールソースを使用するには、 &ay; の制御ファイル内で下記のような内容を設定し、チェックを無効化してください。</para>
    <note>
     <title>未署名のインストールソースの制限について</title>
     <para>ここでの署名チェックの無効化は、自動インストール処理内の第 1 ステージにのみ適用されます。第 2 ステージでのインストールは、 &ay; の設定ではなく、インストール済みのシステムでの設定に従って動作します。</para>
    </note>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;general&gt;
  &lt;signature-handling&gt;
    ...
  &lt;/signature-handling&gt;
&lt;/general&gt;</screen>
    <para>下記に示す全てのオプションの既定値は <literal>false</literal> です。また、オプションが <literal>false</literal> に設定されていて、パッケージやリポジトリに対する対象のテストが失敗した場合、特に何もメッセージが表示されることなく無視され、パッケージがインストールされなくなります。なお、どの値を <literal>true</literal> に設定したとしても、そこには潜在的なセキュリティリスクが存在することに注意してください。また、サードパーティ製のインストール元を利用してインストールを行なう場合、これらの設定を行なってはなりません。</para>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>accept_unsigned_file</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; はコンテンツファイルなどが未署名であっても、受け入れるようになります。</para>
<screen>&lt;accept_unsigned_file config:type="boolean"
&gt;true&lt;/accept_unsigned_file&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_file_without_checksum</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; はコンテンツファイルなどのチェックサムが存在しない場合であっても、受け入れるようになります。</para>
<screen>&lt;accept_file_without_checksum config:type="boolean"
&gt;true&lt;/accept_file_without_checksum&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_verification_failed</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; は署名の検証が失敗した場合でもファイルを受け入れるようになります。</para>
<screen>&lt;accept_verification_failed config:type="boolean"
&gt;true&lt;/accept_verification_failed&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_unknown_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; はインストール元に新しい GPG 鍵が存在し、その鍵でコンテンツファイルに署名されている場合、それを受け付けるようになります。</para>
         <screen>&lt;accept_unknown_gpg_key config:type="boolean"
&gt;true&lt;/accept_unknown_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_non_trusted_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、既知ではあるもののまだ信頼していない鍵を受け付けるようになります。</para>
         <screen>&lt;accept_non_trusted_gpg_key config:type="boolean"
&gt;true&lt;/accept_non_trusted_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>import_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; はインストール元にある新しい GPG 鍵を受け付け、データベース内に取り込むようになります。</para>
         <screen>&lt;import_gpg_key config:type="boolean"
&gt;true&lt;/import_gpg_key&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <para>それぞれのアドオン製品や拡張ごとに、署名の処理方法を設定することもできます。下記に示す要素は、個別のアドオン製品やモジュール、拡張などの中の <literal>signature-handling</literal> セクション内に設定しなければならないものです。いずれの設定も任意です。何も設定しない場合、 <literal>general</literal> セクション内のグローバルな署名処理設定が適用されます。</para>
    <informaltable>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>accept_unsigned_file</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; は対象のアドオン製品に対して、コンテンツファイルなどが未署名であっても、受け入れるようにします。</para>
         <screen>&lt;accept_unsigned_file config:type="boolean"
&gt;true&lt;/accept_unsigned_file&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_file_without_checksum</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; は対象のアドオン製品に対して、コンテンツファイルなどのチェックサムが存在しない場合であっても、受け入れるようにします。</para>
<screen>&lt;accept_file_without_checksum config:type="boolean"
&gt;true&lt;/accept_file_without_checksum&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_verification_failed</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、 &ay; は対象のアドオン製品に対して、署名の検証が失敗した場合でもファイルを受け入れるようにします。</para>
<screen>&lt;accept_verification_failed config:type="boolean"
&gt;true&lt;/accept_verification_failed&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_unknown_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>all</literal> を <literal>true</literal> に設定した場合、 &ay; は対象のアドオン製品に対して、インストール元にある新しい GPG 鍵を受け付け、データベース内に取り込むようにします。</para>
<screen>&lt;accept_unknown_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/accept_unknown_gpg_key&gt;</screen>
         <para>鍵を個別に指定することもできます。</para>
<screen>&lt;accept_unknown_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/accept_unknown_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>accept_non_trusted_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>true</literal> に設定した場合、対象のアドオン製品に対して、既知ではあるもののまだ信頼していない鍵を受け付けるようにします。</para>
         <para>全ての鍵を信頼する場合は下記のように設定します:</para>
<screen>&lt;accept_non_trusted_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/accept_non_trusted_gpg_key&gt;</screen>
         <para>特定の鍵のみを信頼する場合は下記のように設定します:</para>
<screen>&lt;accept_non_trusted_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/accept_non_trusted_gpg_key&gt;</screen>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>import_gpg_key</literal></para>
        </entry>
        <entry>
         <para><literal>all</literal> を <literal>true</literal> に設定した場合、 &ay; はインストール元にある全ての GPG 鍵を受け入れ、データベース内に取り込むようにします。</para>
<screen>&lt;import_gpg_key&gt;
  &lt;all config:type="boolean"&gt;true&lt;/all&gt;
&lt;/import_gpg_key&gt;</screen>
         <para>鍵を個別に指定することもできます:</para>
<screen>&lt;import_gpg_key&gt;
  &lt;all config:type="boolean"&gt;false&lt;/all&gt;
  &lt;keys config:type="list"&gt;
    &lt;keyid&gt;3B3011B76B9D6523&lt;/keyid&gt;
  &lt;/keys&gt;
&lt;/import_gpg_key&gt;</screen>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Software.Selections.kernel">
    <title>カーネルパッケージ</title>
    <para>カーネルパッケージはパッケージの選択の中に含めることができません。必要なカーネルはインストール時に自動判断されるためです。パッケージの選択内にカーネルパッケージを入れてしまうと、ほとんどの場合、矛盾が発生してインストールが失敗することになります。</para>
    <para>特定の種類のカーネルを強制したい場合は、 <literal>kernel</literal> プロパティで設定を行なってください。下記は既定のカーネル (kernel-default) を強制する場合の例です。下記のように設定することで、環境によらずに指定したカーネルをインストールするようになります。</para>
    <example>
     <title>制御ファイル内でのカーネルセクション</title>
<screen>&lt;software&gt;
  &lt;kernel&gt;kernel-default&lt;/kernel&gt;
  ...
&lt;/software&gt;</screen>
    </example>
   </sect2>

   <sect2 xml:id="Software.Selections.remove_packs">
    <title>自動選択したパッケージの削除</title>
    <para>依存関係にあるパッケージや推奨パッケージなど、いくつかのパッケージが自動的に選択されてインストールされることがあります。</para>
    <para>これらのパッケージを削除してしまうと、システムの一貫性を損なうことになるほか、同類のサービスを提供するような代替パッケージをインストールしない限り、基本的なパッケージについても、削除を行なわないことをお勧めします。最も分かりやすい例がメール転送エージェント (MTA) です。既定では <systemitem>postfix</systemitem> がインストールされますが、 <systemitem>sendmail</systemitem> のような他の MTA をインストールすれば、 postfix を一覧から削除することができます (ただし、 sendmail は &productname; では提供されていません) 。下記の例では、このように postfix を sendmail に置き換える場合の例を示しています:</para>
    <example>
     <title>制御ファイル内でのパッケージ選択</title>
<screen>&lt;software&gt;
  &lt;packages config:type="list"&gt;
    &lt;package&gt;sendmail&lt;/package&gt;
  &lt;/packages&gt;
  &lt;remove-packages config:type="list"&gt;
    &lt;package&gt;postfix&lt;/package&gt;
  &lt;/remove-packages&gt;
&lt;/software&gt;</screen>
    </example>

    <note>
     <title>パッケージ削除の失敗について</title>
     <para>パターン (詳しくは <xref linkend="Software.Selections.sles10"/> をお読みください) の一部として設定されているパッケージについては、削除を行なうことができません。このようなパッケージを削除しようとすると、下記のようなエラーメッセージを表示してインストールが失敗してしまいます:</para>
     <screen>パッケージ解決器の実行に失敗しました。
      &ay; プロファイルのソフトウエアのセクションを確認してください。</screen>
    </note>

   </sect2>

   <sect2 xml:id="Software.Selections.recommend_packs">
    <title>推奨されるパッケージやパターンのインストール</title>
    <para>既定では、推奨される全てのパッケージ／パターンがインストールされます。必要なパッケージのみをインストールしてパッケージ数を減らしたい場合は、 <literal>install_recommended</literal> フラグを設定して、この動作を切り替えることができます。ただし、このフラグは新規インストールの場合にのみ適用されるものであり、アップグレードの場合には無視されます。</para>
<screen>&lt;software&gt;
  &lt;install_recommended config:type="boolean"&gt;false
  &lt;/install_recommended&gt;
&lt;/software&gt;</screen>

    <para><emphasis>既定値</emphasis>: 設定ファイル内でフラグが設定されていない場合、推奨されるパッケージは <emphasis>全て</emphasis> インストールされますが、推奨されるパターンについては <emphasis>インストールされません</emphasis> 。</para>

   </sect2>

   <sect2 xml:id="Software.Selections.stage2_packs">
    <title>第 2 ステージでのパッケージのインストール</title>
    <para>再起動後の第 2 ステージでパッケージをインストールしたい場合は、下記のようにして <literal>post-packages</literal> 要素を設定します:</para>
<screen>&lt;software&gt;
  &lt;post-packages config:type="list"&gt;
    &lt;package&gt;yast2-cim&lt;/package&gt;
  &lt;/post-packages&gt;
&lt;/software&gt;</screen>
   </sect2>

   <sect2 xml:id="Software.Selections.stage2_patterns">
    <title>第 2 ステージでのパターンのインストール</title>
    <para>第 2 ステージでパターンをインストールすることもできます。下記のようにして <literal>post-patterns</literal> 要素を設定してください:</para>
<screen>&lt;software&gt;
  &lt;post-patterns config:type="list"&gt;
    &lt;pattern&gt;apparmor&lt;/pattern&gt;
  &lt;/post-patterns&gt;
&lt;/software&gt;</screen>
   </sect2>

   <sect2 xml:id="Software.Selections.stage2_update">
    <title>第 2 ステージでのオンライン更新</title>
    <para>インストールの末尾にオンライン更新を行なうこともできます。オンライン更新を行ないたい場合は、 <literal>do_online_update</literal> を <literal>true</literal> に設定してください。なおオンライン更新の処理は、たとえば suse-register/customer-center のセクションでオンライン更新用のリポジトリを設定していたり、 post-script 内でリポジトリを設定したりしている場合にのみ意味があります。第 1 ステージの add-on セクションで既にオンライン更新用のリポジトリを設定している場合は、 &ay; は当初の段階から最新のパッケージをインストールすることになります。なお、オンライン更新でカーネルを更新した場合、第 2 ステージの終了後に再起動処理が動作します。</para>
<screen>&lt;software&gt;
  &lt;do_online_update config:type="boolean"&gt;true&lt;/do_online_update&gt;
&lt;/software&gt;</screen>
   </sect2>
  </sect1>


  <sect1 xml:id="CreateProfile.upgrade">
   <title>アップグレード</title>

   <para>&ay; はシステムのアップグレードを行なう際にも使用することができます。パッケージのアップグレードだけでなく、下記のような機能のセクションも提供されています:</para>

   <itemizedlist>
    <listitem>
     <para><literal>scripts/pre-scripts</literal>: 全ての処理が行なわれるよりも前に動作するユーザスクリプトの指定。</para>
    </listitem>
    <listitem>
     <para><literal>add-on</literal>: 追加のアドオン製品の定義。</para>
    </listitem>
    <listitem>
     <para><literal>language</literal>: 言語の設定。</para>
    </listitem>
    <listitem>
     <para><literal>timezone</literal>: タイムゾーンの設定。</para>
    </listitem>
    <listitem>
     <para><literal>keyboard</literal>: キーボードの設定。</para>
    </listitem>
    <listitem>
     <para><literal>software</literal>: 追加のソフトウエアやパターンのインストール、インストール済みのパッケージの削除。</para>
    </listitem>
    <listitem>
     <para><literal>suse_register</literal>: 登録処理の実行。</para>
    </listitem>
   </itemizedlist>

   <para>アップグレード処理を制御する目的で、下記のようなセクションを定義することができます:</para>

   <example>
    <title>アップグレードとバックアップ</title>
<screen>&lt;upgrade&gt;
    &lt;stop_on_solver_conflict config:type="boolean"&gt;true&lt;/stop_on_solver_conflict&gt;
  &lt;/upgrade&gt;
  &lt;backup&gt;
    &lt;sysconfig config:type="boolean"&gt;true&lt;/sysconfig&gt;
    &lt;modified config:type="boolean"&gt;true&lt;/modified&gt;
    &lt;remove_old config:type="boolean"&gt;true&lt;/remove_old&gt;
  &lt;/backup&gt;</screen>
   </example>

   <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para><literal>stop_on_solver_conflict</literal></para>
        </entry>
        <entry>
         <para>パッケージの依存関係に問題が発生した場合、インストールを停止するようにします。</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>modified</literal></para>
        </entry>
        <entry>
         <para>変更されたファイルのバックアップを作成します。</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>sysconfig</literal></para>
        </entry>
        <entry>
         <para><filename>/etc/sysconfig</filename> ディレクトリのバックアップを作成します。</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>remove_old</literal></para>
        </entry>
        <entry>
         <para>以前の更新で作成されたバックアップを削除します。</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
      </tbody>
     </tgroup>
   </informaltable>

   <para>&ay; のアップグレードモードを開始するには、下記のようにして行ないます:</para>

   <procedure xml:id="pro.upgrade.upgrade-mode">
    <title>アップグレードモードでの &ay; の起動</title>
    <step>
     <para>作成した &ay; のプロファイルを、 ファイルシステム内の <filename>/root/autoupg.xml</filename> にコピーします。</para>
    </step>
    <step>
     <para>インストールメディアからシステムを起動します。</para>
    </step>
    <step>
     <para><literal>インストール</literal> を選択します。</para>
    </step>
    <step>
     <para>コマンドラインには <varname>autoupgrade=1</varname> を設定します。</para>
     <remark condition="clarity">
      2016-07-29 - fs: What about network setup with ifcfg= ?? Otherwise this
      command line won't work??
     </remark>
    </step>
    <step>
     <para><keycap function="enter"/> を押すとアップグレード処理が始まります。</para>
    </step>
   </procedure>
  </sect1>

  <sect1 xml:id="CreateProfile.Services">
   <title>サービスとターゲット</title>

   <para><literal>services-manager</literal> リソースを使用することで、既定の systemd ターゲットの指定のほか、個別のシステムサービスを開始したり停止したり、開始方法を指定したりすることができます。</para>

   <para>
    The <literal>default-target</literal> property specifies the default
    systemd target into which the system boots. Valid options are
    <literal>graphical</literal> for a graphical login, or
    <literal>multi-user</literal> for a console login.
   </para>

   <para>特定のサービスに対してシステムの起動時に開始するように設定したい場合は、 <literal>enable</literal> と <literal>disable</literal> のリストを設定します。特定のサービスを開始したい場合は、 <literal>enable</literal> のリスト内にその名前を設定します。逆にサービスをシステムの起動時に開始したくない場合は、 <literal>disable</literal> のリスト内に名前を設定します。</para>

   <para>サービスが <literal>enable</literal> と <literal>disable</literal> のどちらにも掲載されていない場合、既定の設定 (有効もしくは無効) が使用されます。</para>

   <para>このほか、 <literal>cups</literal> サポートなどのようにオンデマンドで有効化できる (ソケットで開始するサービス) ものもあります。このような機能を設定したい場合は、 <literal>enable</literal> ではなく <literal>on_demand</literal> のリスト内に名前を記載してください。</para>

   <example>
    <title>サービスとターゲットの設定</title>
<screen>&lt;services-manager&gt;
  &lt;default_target&gt;multi-user&lt;/default_target&gt;
  &lt;services&gt;
    &lt;disable config:type="list"&gt;
      &lt;service&gt;libvirtd&lt;/service&gt;
    &lt;/disable&gt;
    &lt;enable config:type="list"&gt;
      &lt;service&gt;sshd&lt;/service&gt;
    &lt;/enable&gt;
    &lt;on_demand config:type="list"&gt;
      &lt;service&gt;cups&lt;/service&gt;
    &lt;/on_demand&gt;
  &lt;/services&gt;
&lt;/services-manager&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.Network">
   <title>ネットワークの設定</title>

   <para>ネットワークの設定を行なうことで、ワークステーションをイーサネットベースの LAN に接続することができるほか、ダイヤルアップ接続を設定することもできます。より複雑な設定 (複数のネットワークカードやルーティングの設定など) も行なうことができます。</para>

   <para>下記の設定を <literal>true</literal> にすると、 &yast; はインストール時に作成したネットワーク設定 (<command>linuxrc</command> で設定したもの) と &ay; の制御ファイル内に書かれている設定 (もしあれば) を合成して使用するようになります。</para>
   <note>
    <title><command>linuxrc</command> プログラムについて</title>
    <para><command>linuxrc</command> の仕組みと設定キーワードについてより詳しく知りたい場合は、 <xref linkend="appendix.linuxrc"/> をお読みください。</para>
   </note>
   <para>&ay; での設定は、既に存在する設定ファイルよりも高い優先順位で適用されます。 &yast; は ifcfg-* ファイルに書き込みを行なう際、既存の内容を削除せずに行ないます。そのため、 DNS やルーティングのセクションを設定しない場合、 &yast; は既存の値をそのまま保持するようになります。そうでない場合、制御ファイル内の設定が適用されます。</para>

<screen>&lt;keep_install_network
config:type="boolean"&gt;true&lt;/keep_install_network&gt;</screen>

   <para>第 2 ステージでは、追加のパッケージのインストールが設定されていると、そのインストール処理はネットワークの設定が行なわれる前に動作してしまいます。このようなパッケージのインストールでネットワークを利用できるようにするため、 <literal>keep_install_network</literal> は既定で <literal>true</literal> に設定されています。第 1 ステージで必要なパッケージを全てインストールしていて、第 2 ステージの冒頭ではネットワークが不要である場合は、 <literal>keep_install_network</literal> を <literal>false</literal> に設定することで、設定のコピーを防ぐことができます。</para>

   <para>ネットワークの設定を適用してネットワークが正しく動作するようにするには、ネットワーク全体の設定を保存するためのグローバルリソースを 1 つだけ使用してください。</para>

   <example xml:id="ex.ay.network_config.general">
    <title>ネットワークの設定</title>
<screen>&lt;networking&gt;
  &lt;dns&gt;
    &lt;dhcp_hostname config:type="boolean"&gt;true&lt;/dhcp_hostname&gt;
    &lt;domain&gt;site&lt;/domain&gt;
    &lt;hostname&gt;linux-bqua&lt;/hostname&gt;
    &lt;nameservers config:type="list"&gt;
      &lt;nameserver&gt;&dnsip;&lt;/nameserver&gt;
      &lt;nameserver&gt;&dnsip117;&lt;/nameserver&gt;
      &lt;nameserver&gt;&dnsip118;&lt;/nameserver&gt;
    &lt;/nameservers&gt;
    &lt;resolv_conf_policy&gt;auto&lt;/resolv_conf_policy&gt;
    &lt;searchlist config:type="list"&gt;
      &lt;search&gt;&exampledomain;&lt;/search&gt;
      &lt;search&gt;&exampledomain1;&lt;/search&gt;
    &lt;/searchlist&gt;
    &lt;write_hostname config:type="boolean"&gt;false&lt;/write_hostname&gt;
  &lt;/dns&gt;
  &lt;interfaces config:type="list"&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;dhcp&lt;/bootproto&gt;
      &lt;device&gt;eth0&lt;/device&gt;
      &lt;startmode&gt;auto&lt;/startmode&gt;
    &lt;/interface&gt;
    &lt;interface&gt;
      &lt;bootproto&gt;static&lt;/bootproto&gt;
      &lt;broadcast&gt;127.255.255.255&lt;/broadcast&gt;
      &lt;device&gt;lo&lt;/device&gt;
      &lt;firewall&gt;no&lt;/firewall&gt;
      &lt;ipaddr&gt;127.0.0.1&lt;/ipaddr&gt;
      &lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
      &lt;network&gt;127.0.0.0&lt;/network&gt;
      &lt;prefixlen&gt;8&lt;/prefixlen&gt;
      &lt;startmode&gt;nfsroot&lt;/startmode&gt;
      &lt;usercontrol&gt;no&lt;/usercontrol&gt;
    &lt;/interface&gt;
  &lt;/interfaces&gt;
  &lt;ipv6 config:type="boolean"&gt;true&lt;/ipv6&gt;
  &lt;keep_install_network config:type="boolean"&gt;false&lt;/keep_install_network&gt;
  &lt;managed config:type="boolean"&gt;false&lt;/managed&gt;       ###### NetworkManager?
  &lt;net-udev config:type="list"&gt;
    &lt;rule&gt;
      &lt;name&gt;eth0&lt;/name&gt;
      &lt;rule&gt;ATTR{address}&lt;/rule&gt;
      &lt;value&gt;&wsImac;&lt;/value&gt;
    &lt;/rule&gt;
  &lt;/net-udev&gt;
  &lt;s390-devices config:type="list"&gt;
    &lt;listentry&gt;
      &lt;chanids&gt;0.0.0800 0.0.0801 0.0.0802&lt;/chanids&gt;
      &lt;type&gt;qeth&lt;/type&gt;
    &lt;/listentry&gt;
  &lt;/s390-devices&gt;
  &lt;routing&gt;
    &lt;ipv4_forward config:type="boolean"&gt;false&lt;/ipv4_forward&gt;
    &lt;ipv6_forward config:type="boolean"&gt;false&lt;/ipv6_forward&gt;
    &lt;routes config:type="list"&gt;
      &lt;route&gt;
        &lt;destination&gt;&routerintipII;&lt;/destination&gt;
        &lt;device&gt;eth0&lt;/device&gt;
        &lt;extrapara&gt;foo&lt;/extrapara&gt;
        &lt;gateway&gt;-&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;eth0&lt;/device&gt;
        &lt;gateway&gt;&routerintipI;&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
      &lt;route&gt;
        &lt;destination&gt;default&lt;/destination&gt;
        &lt;device&gt;lo&lt;/device&gt;
        &lt;gateway&gt;&gateip;&lt;/gateway&gt;
        &lt;netmask&gt;-&lt;/netmask&gt;
      &lt;/route&gt;
    &lt;/routes&gt;
  &lt;/routing&gt;
&lt;/networking&gt;</screen>
   </example>

   <example xml:id="ex.ay.network_config.bridge">
     <title>ブリッジインターフェイスの設定</title>
<screen>
&lt;interfaces config:type="list"&gt;
  &lt;interface&gt;
    &lt;device&gt;br0&lt;/device&gt;
    &lt;bootproto&gt;static&lt;/bootproto&gt;
    &lt;bridge&gt;yes&lt;/bridge&gt;
    &lt;bridge_forwarddelay&gt;0&lt;/bridge_forwarddelay&gt;
    &lt;bridge_ports&gt;eth0 eth1&lt;/bridge_ports&gt;
    &lt;bridge_stp&gt;off&lt;/bridge_stp&gt;
    &lt;ipaddr&gt;192.168.122.100&lt;/ipaddr&gt;
    &lt;netmask&gt;255.255.255.0&lt;/netmask&gt;
    &lt;network&gt;192.168.122.0&lt;/network&gt;
    &lt;prefixlen&gt;24&lt;/prefixlen&gt;
    &lt;startmode&gt;auto&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;device&gt;eth0&lt;/device&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
  &lt;interface&gt;
    &lt;device&gt;eth1&lt;/device&gt;
    &lt;bootproto&gt;none&lt;/bootproto&gt;
    &lt;startmode&gt;hotplug&lt;/startmode&gt;
  &lt;/interface&gt;
&lt;/interfaces&gt;
</screen>
   </example>

   <tip>
    <title>IPv6 アドレスのサポートについて</title>
    <para>&ay; では IPv6 アドレスにも完全対応しています。 IPv6 アドレスのサポートを無効化したい場合は、 &lt;ipv6 config:type="boolean"&gt;false&lt;/ipv6&gt; を設定してください。</para>
   </tip>

   <sect2 xml:id="CreateProfile.Network.names">
    <title>ネットワークインターフェイス名の固定</title>
    <para>下記の要素は &lt;net-udev&gt;...&lt;/net-udev&gt; のタグ内に記述しなければなりません。</para>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>name</literal>
         </para>
        </entry>
        <entry>
         <para>ネットワークインターフェイス名 (例: <literal>eth3</literal>) を設定します</para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>rule</literal></para>
        </entry>
        <entry>
         <para>MAC ぁどれすベースのルールを作成するには <literal>ATTR{address}</literal> を、バス ID ベースのルールを作成するには <literal>KERNELS</literal> を指定します</para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para><literal>value</literal></para>
        </entry>
        <entry>
         <para>MAC アドレスベースのルールの場合は <literal>f0:de:f1:6b:da:69</literal> のように、バス ID ベースのルールの場合は <literal>0000:00:1c.1 or 0.0.0700</literal> のように指定します</para>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <tip>
     <title>デバイス名の衝突時の処理について</title>
      <para>不完全な <emphasis>udev</emphasis> ルールセットを作成してしまった場合、既存のデバイス名と指定したルールのデバイス名が衝突する場合があります。たとえばネットワークインターフェイスの名前を <literal>eth0</literal> に変更する場合、カーネル側で自動生成されたデバイス名と衝突することがあります。 &ay; ではこのような場合でも、デバイス名をできる限り適切に処理しようとし、必要に応じて衝突したデバイスの名前を修正します。</para>
     </tip>
    </sect2>

   <sect2 xml:id="CreateProfile.Network.s390">
    <title>s390 オプション</title>
    <para>下記の要素は &lt;s390-devices&gt;...&lt;/s390-devices&gt; タグ内に記述しなければなりません。</para>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>type</para>
        </entry>
        <entry>
         <para>qeth, ctc, iucv のいずれか</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>chanids</para>
        </entry>
        <entry>
         <para>スペース区切りでのチャンネル ID</para>
<screen>&lt;chanids&gt;0.0.0700 0.0.0701 0.0.0702&lt;/chanids&gt;</screen>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>layer2</para>
        </entry>
        <entry>
         <para/>
<screen>&lt;layer2 config:type="boolean"&gt;true&lt;/layer2&gt;</screen>
        </entry>
        <entry>
         <para>ブール値。既定は false</para>
        </entry>
       </row>
       <row>
        <entry>
         <para>portname</para>
        </entry>
        <entry>
         <para>QETH ポート名 (<phrase os="sles;sled">SLE 12 SP2</phrase> <phrase os="osuse">openSUSE 42.2</phrase> 以降では廃止予定となっています)</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>protocol</para>
        </entry>
        <entry>
         <para>CTC / LCS プロトコル (文字列として、小さな値)</para>
<screen>&lt;protocol&gt;1&lt;/protocol&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>router</para>
        </entry>
        <entry>
         <para>IUCV ルータ／ユーザ</para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <para>上述のオプションに加えて、 &ay; では設定ファイルの他のセクション内に &zseries; 固有のオプションを設定することもできます。特に論理リンクアドレス (LLADDR (イーサネットの場合 MAC アドレス)) を設定することもできます。設定を行なうには、デバイスの定義内に <literal>LLADDR</literal> オプションを設定してください。</para>
    <tip>
     <title>VLAN 向けの LLADDR について</title>
     <para>VLAN デバイスの場合、接続されている物理デバイスの LLADDR をそのまま継承します。 VLAN デバイスに対して別のアドレスを設定するには、物理デバイス側に LLADDR のオプションを設定してください。</para>
    </tip>
   </sect2>

   <sect2 xml:id="Configuration.Network.Proxy">
    <title>プロキシ</title>
    <para>インターネットプロキシ (キャッシュ) の設定を行なうことができます。</para>
    <para>HTTP, HTTPS, FTP に対応するプロキシサーバの設定は、それぞれ <literal>http_proxy</literal> , <literal>https_proxy</literal> , <literal>ftp_proxy</literal> で行ないます。プロキシを使用せず、直接アクセスすべきアドレスやホスト／ドメイン名がある場合は、それらを <literal>no_proxy</literal> (スペース区切り) に背呈します。また、プロキシサーバに対して認証が必要である場合は、 <literal>proxy_user</literal> と <literal>proxy_password</literal> をそれぞれ設定してください。</para>
    <example>
     <title>ネットワーク設定: プロキシ</title>
<screen>&lt;proxy&gt;
  &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
  &lt;ftp_proxy&gt;http://192.168.1.240:3128&lt;/ftp_proxy&gt;
  &lt;http_proxy&gt;http://192.168.1.240:3128&lt;/http_proxy&gt;
  &lt;no_proxy&gt;www.&exampledomain; .&exampledomain2; localhost&lt;/no_proxy&gt;
  &lt;proxy_password&gt;testpw&lt;/proxy_password&gt;
  &lt;proxy_user&gt;testuser&lt;/proxy_user&gt;
&lt;/proxy&gt;</screen>
    </example>
   </sect2>
   <!-- 2017-10-20 tbazant: xinetd is gone (https://fate.suse.com/323373)
   <sect2 xml:id="Configuration.Network.Inetd">
    <title>(X)Inetd</title>
    <para>
     The control file has elements to specify which superserver should be
     used (netd_service), whether it should be enabled (netd_status) and how
     the services should be configured (netd_conf).
    </para>
    <para>
     A service description element needs two parts: key and non-key. When
     writing the configuration, services are matched using the key fields;
     to the matching service, non-key fields are applied. If no service
     matches, it is created. If more services match, a warning is reported.
     The key fields are <emphasis>script, service, protocol and
     server.</emphasis>
    </para>
    <para>
     <emphasis>service</emphasis> and <emphasis>protocol</emphasis> are
     matched literally. <emphasis>script</emphasis> is the base name of the
     configuration file: usually a file in<filename>
     /etc/xinetd.d</filename>, for example "echo-udp", or "inetd.conf". For
     compatibility with 8.2, <emphasis>server</emphasis> is matched more
     loosely: if it is <filename>/usr/sbin/tcpd</filename>, the real server
     name is taken from <emphasis>server_args</emphasis>. After that, the
     basename of the first whitespace-separated word is taken and these
     values are compared.
    </para>

    <example>
     <title>Inetd Example</title>
<screen>&lt;profile&gt;
  &lt;inetd&gt;
    &lt;netd_service config:type="symbol"&gt;xinetd&lt;/netd_service&gt;
    &lt;netd_status config:type="integer"&gt;0&lt;/netd_status&gt;
    &lt;netd_conf config:type="list"&gt;
      &lt;conf&gt;
        &lt;script&gt;imap&lt;/script&gt;
        &lt;service&gt;pop3&lt;/service&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
      &lt;/conf&gt;
      &lt;conf&gt;
        &lt;server&gt;in.ftpd&lt;/server&gt;
        &lt;server_args&gt;-A&lt;/server_args&gt;
        &lt;enabled config:type="boolean"&gt;true&lt;/enabled&gt;
      &lt;/conf&gt;
      &lt;conf&gt;
        &lt;service&gt;daytime&lt;/service&gt;
        &lt;protocol&gt;tcp&lt;/protocol&gt;
      &lt;/conf&gt;
      &lt;conf&gt;...&lt;/conf&gt;
    &lt;/netd_conf&gt;
  &lt;/inetd&gt;
&lt;/profile&gt;</screen>
    </example>
   </sect2> -->
  </sect1>
  <sect1 xml:id="Configuration.Network.NIS">
   <title>NIS クライアント</title>

   <para><literal>nis</literal> リソースを使用することで、インストール先のマシンを NIS クライアントとして設定することができます。下記の例では、複数のドメインを利用した詳細な設定を行なっています。</para>

   <example>
    <title>ネットワーク設定: NIS</title>
<screen> &lt;nis&gt;
  &lt;nis_broadcast config:type="boolean"&gt;true&lt;/nis_broadcast&gt;
  &lt;nis_broken_server config:type="boolean"&gt;true&lt;/nis_broken_server&gt;
  &lt;nis_by_dhcp config:type="boolean"&gt;false&lt;/nis_by_dhcp&gt;
  &lt;nis_domain&gt;test.com&lt;/nis_domain&gt;
  &lt;nis_local_only config:type="boolean"&gt;true&lt;/nis_local_only&gt;
  &lt;nis_options&gt;&lt;/nis_options&gt;
  &lt;nis_other_domains config:type="list"&gt;
    &lt;nis_other_domain&gt;
      &lt;nis_broadcast config:type="boolean"&gt;false&lt;/nis_broadcast&gt;
      &lt;nis_domain&gt;domain.com&lt;/nis_domain&gt;
      &lt;nis_servers config:type="list"&gt;
        &lt;nis_server&gt;10.10.0.1&lt;/nis_server&gt;
      &lt;/nis_servers&gt;
    &lt;/nis_other_domain&gt;
  &lt;/nis_other_domains&gt;
  &lt;nis_servers config:type="list"&gt;
    &lt;nis_server&gt;192.168.1.1&lt;/nis_server&gt;
  &lt;/nis_servers&gt;
  &lt;start_autofs config:type="boolean"&gt;true&lt;/start_autofs&gt;
  &lt;start_nis config:type="boolean"&gt;true&lt;/start_nis&gt;
&lt;/nis&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.NIS_Server">
   <title>NIS サーバ</title>

   <para>インストール先のマシンを NIS サーバとして構成することもできます。 NIS マスターサーバ、 NIS スレーブサーバ、 NIS マスター兼スレーブサーバをそれぞれ設定することができます。</para>

   <example>
    <title>NIS サーバの設定</title>
<screen>
  &lt;nis_server&gt;
    &lt;domain&gt;mydomain.de&lt;/domain&gt;
    &lt;maps_to_serve config:type="list"&gt;
      &lt;nis_map&gt;auto.master&lt;/nis_map&gt;
      &lt;nis_map&gt;ethers&lt;/nis_map&gt;
    &lt;/maps_to_serve&gt;
    &lt;merge_passwd config:type="boolean"&gt;false&lt;/merge_passwd&gt;
    &lt;mingid config:type="integer"&gt;0&lt;/mingid&gt;
    &lt;minuid config:type="integer"&gt;0&lt;/minuid&gt;
    &lt;nopush config:type="boolean"&gt;false&lt;/nopush&gt;
    &lt;pwd_chfn config:type="boolean"&gt;false&lt;/pwd_chfn&gt;
    &lt;pwd_chsh config:type="boolean"&gt;false&lt;/pwd_chsh&gt;
    &lt;pwd_srcdir&gt;/etc&lt;/pwd_srcdir&gt;
    &lt;securenets config:type="list"&gt;
      &lt;securenet&gt;
        &lt;netmask&gt;255.0.0.0&lt;/netmask&gt;
        &lt;network&gt;127.0.0.0&lt;/network&gt;
      &lt;/securenet&gt;
    &lt;/securenets&gt;
    &lt;server_type&gt;master&lt;/server_type&gt;
    &lt;slaves config:type="list"/&gt;
    &lt;start_ypbind config:type="boolean"&gt;false&lt;/start_ypbind&gt;
    &lt;start_yppasswdd config:type="boolean"&gt;false&lt;/start_yppasswdd&gt;
    &lt;start_ypxfrd config:type="boolean"&gt;false&lt;/start_ypxfrd&gt;
  &lt;/nis_server&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>domain</literal>
        </para>
       </entry>
       <entry>
        <para>NIS ドメイン名。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>maps_to_serve</literal></para>
       </entry>
       <entry>
        <para>サーバ側で利用できるようにするマップのリストを指定します。</para>
       </entry>
       <entry>
        <para>値: auto.master, ethers, group, hosts, netgrp, networks, passwd, protocols, rpc, services, shadow</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>merge_passwd</literal></para>
       </entry>
       <entry>
        <para>passwd ファイルと shadow ファイルの合成を行なうかどうかを指定します (shadow ファイルが存在する場合にのみ行なうことができます) 。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>mingid</literal></para>
       </entry>
       <entry>
        <para>ユーザマップ内での最小 GID を指定します。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>minuid</literal></para>
       </entry>
       <entry>
        <para>ユーザマップ内での最小 UID を指定します。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>nopush</literal></para>
       </entry>
       <entry>
        <para>変更点をスレーブサーバにプッシュしないようにします (スレーブサーバが存在しない場合に有用です) 。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>pwd_chfn</literal></para>
       </entry>
       <entry>
        <para>YPPWD_CHFN - フルネームの変更を許可します</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>pwd_chsh</literal></para>
       </entry>
       <entry>
        <para>YPPWD_CHSH - ログインシェルの変更を許可します</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>pwd_srcdir</literal></para>
       </entry>
       <entry>
        <para>YPPWD_SRCDIR - passwd データのソースディレクトリ</para>
       </entry>
       <entry>
        <para>既定値: <filename>/etc</filename></para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>securenets</literal></para>
       </entry>
       <entry>
        <para>NIS サーバに対して問い合わせることのできるホストの一覧</para>
       </entry>
       <entry>
        <para><remark>Dublin proofreader 2016-09-06: This does not make sense in the context of the sentence, however I am not sure of the intended meaning. Please revise.</remark> network のアドレスが、対向のアドレスと netmask の論理積のアドレスが一致した場合にのみ、アクセスが許可されます。</para>
        <para>network 127.0.0.0 および netmask 255.0.0.0 の設定は、ローカルからの接続を許可するために必ず存在していなければなりません。</para>
        <para>network 0.0.0.0, netmask 0.0.0.0 を指定すると、全てのホストからのアクセスを許可します。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>server_type</literal></para>
       </entry>
       <entry>
        <para>NIS サーバをマスターサーバ／スレーブサーバのどちらにするのか、もしくは NIS サーバを設定しないのかを選択します。</para>
       </entry>
       <entry>
        <para>値: master, slave, none</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>slaves</literal></para>
       </entry>
       <entry>
        <para>NIS サーバスレーブとして設定したいホスト名のリストを指定します。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>start_ypbind</literal></para>
       </entry>
       <entry>
        <para>このホストを NIS クライアントとしても設定します (ただしクライアント側の設定をローカルで行なう必要があります) 。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>start_yppasswdd</literal></para>
       </entry>
       <entry>
        <para>パスワードデーモンも起動するようにします。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>start_ypxfrd</literal></para>
       </entry>
       <entry>
        <para>マップ転送デーモンも起動するようにします。高速なマップ配布の仕組みにより、スレーブに対するマップの転送も高速化されます。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

<!--
    <section id="Configuration.Network.NISplus">
    <title>
    NIS+
  </title>
    <para>
    If you activate NIS+, the data of the
    NIS+ Server will be added to <filename>/etc/hosts</filename>. Keyserv and the NIS+ cache manager
    will be started and the NSS and PAM configuration will be modified to use
    NIS+ and set the Secret Key of a user.
  </para>
    &example.nisplus;
  </section>
    -->

  <sect1 xml:id="Configuration.Network.Host">
   <title>ホスト名の定義</title>

   <para><literal>host</literal> リソースを使用することで、 <literal>/etc/hosts</literal> 内に 1 つもしくは複数の項目を追加することができます。既に存在する項目については、削除されることはありません。下記に詳細例を示します。</para>

   <example>
    <title>/etc/hosts</title>
    <screen>
    &lt;host&gt;
     &lt;hosts config:type="list"&gt;
      &lt;hosts_entry&gt;
       &lt;host_address&gt;133.3.0.1&lt;/host_address&gt;
       &lt;names config:type="list"&gt;
        &lt;name&gt;booking&lt;/name&gt;
       &lt;/names&gt;
      &lt;/hosts_entry&gt;
      &lt;hosts_entry&gt;
       &lt;host_address&gt;133.3.0.5&lt;/host_address&gt;
       &lt;names config:type="list"&gt;
        &lt;name&gt;test-machine&lt;/name&gt;
       &lt;/names&gt;
      &lt;/hosts_entry&gt;
     &lt;/hosts&gt;
    &lt;host&gt;
    </screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.Ldap">
   <title>LDAP サーバ (認証サーバ)</title>

   <para><literal>auth-server</literal> リソースを使用することで、インストール先のマシンを LDAP サーバとして構成することができます。下記に詳細例を示します。</para>

   <example>
    <title>LDAP の設定</title>
    <screen>
  &lt;auth-server&gt;
    &lt;daemon&gt;
      &lt;listeners config:type="list"&gt;
        &lt;listentry&gt;ldap&lt;/listentry&gt;
        &lt;listentry&gt;ldapi&lt;/listentry&gt;
      &lt;/listeners&gt;
      &lt;serviceEnabled&gt;1&lt;/serviceEnabled&gt;
      &lt;slp/&gt;
    &lt;/daemon&gt;
    &lt;databases config:type="list"&gt;
      &lt;listentry&gt;
        &lt;access config:type="list"&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;write&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;auth&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;userPassword&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;write&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;shadowLastChange&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;self&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;none&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target&gt;
              &lt;attrs&gt;userPKCS12&lt;/attrs&gt;
            &lt;/target&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;access config:type="list"&gt;
              &lt;listentry&gt;
                &lt;control/&gt;
                &lt;level&gt;read&lt;/level&gt;
                &lt;type&gt;*&lt;/type&gt;
                &lt;value/&gt;
              &lt;/listentry&gt;
            &lt;/access&gt;
            &lt;target/&gt;
          &lt;/listentry&gt;
        &lt;/access&gt;
        &lt;checkpoint config:type="list"&gt;
          &lt;listentry&gt;1024&lt;/listentry&gt;
          &lt;listentry&gt;5&lt;/listentry&gt;
        &lt;/checkpoint&gt;
        &lt;directory&gt;/var/lib/ldap&lt;/directory&gt;
        &lt;entrycache&gt;10000&lt;/entrycache&gt;
        &lt;idlcache&gt;30000&lt;/idlcache&gt;
        &lt;indexes&gt;
          &lt;cn&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/cn&gt;
          &lt;displayName&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/displayName&gt;
          &lt;gidNumber&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/gidNumber&gt;
          &lt;givenName&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/givenName&gt;
          &lt;mail&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/mail&gt;
          &lt;member&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/member&gt;
          &lt;memberUid&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/memberUid&gt;
          &lt;objectclass&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/objectclass&gt;
          &lt;sn&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/sn&gt;
          &lt;uid&gt;
            &lt;eq&gt;1&lt;/eq&gt;
            &lt;sub&gt;1&lt;/sub&gt;
          &lt;/uid&gt;
          &lt;uidNumber&gt;
            &lt;eq&gt;1&lt;/eq&gt;
          &lt;/uidNumber&gt;
        &lt;/indexes&gt;
        &lt;rootdn&gt;cn=Administrator,DC=corp,DC=Fabrikam,DC=COM,CN=Karen Berge&lt;/rootdn&gt;
        &lt;rootpw&gt;{SSHA}LCdgE3gNejqBogGI3ac1Xf4DOIVMSk9ZQg==&lt;/rootpw&gt;
        &lt;suffix&gt;DC=corp,DC=Fabrikam,DC=COM,CN=Karen Berge&lt;/suffix&gt;
        &lt;type&gt;hdb&lt;/type&gt;
      &lt;/listentry&gt;
    &lt;/databases&gt;
    &lt;globals&gt;
      &lt;allow config:type="list"/&gt;
      &lt;disallow config:type="list"/&gt;
      &lt;loglevel config:type="list"&gt;
        &lt;listentry&gt;none&lt;/listentry&gt;
      &lt;/loglevel&gt;
      &lt;tlsconfig&gt;
        &lt;caCertDir/&gt;
        &lt;caCertFile/&gt;
        &lt;certFile/&gt;
        &lt;certKeyFile/&gt;
        &lt;crlCheck&gt;0&lt;/crlCheck&gt;
        &lt;crlFile/&gt;
        &lt;verifyClient&gt;0&lt;/verifyClient&gt;
      &lt;/tlsconfig&gt;
    &lt;/globals&gt;
    &lt;schema config:type="list"&gt;
      &lt;listentry&gt;
        &lt;definition&gt;dn: cn=schema,cn=config
            objectClass: olcSchemaConfig
            ......
            .....
            ....
            ...
            ..
            .
        &lt;/definition&gt;
        &lt;name&gt;schema&lt;/name&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/core.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/cosine.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeldif&gt;/etc/openldap/schema/inetorgperson.ldif&lt;/includeldif&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeschema&gt;/etc/openldap/schema/rfc2307bis.schema&lt;/includeschema&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;includeschema&gt;/etc/openldap/schema/yast.schema&lt;/includeschema&gt;
      &lt;/listentry&gt;
    &lt;/schema&gt;
  &lt;/auth-server&gt;
    </screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.Samba_client">
   <title>Windows ドメインのメンバーシップ</title>

   <para><literal>samba-client</literal> リソースを使用することで、ワークグループや NT ドメイン、もしくは Active Directory ドメインのメンバーとして構成することができます。</para>

   <example>
    <title>Samba クライアント設定</title>
<screen>
  &lt;samba-client&gt;
    &lt;disable_dhcp_hostname config:type="boolean"&gt;true&lt;/disable_dhcp_hostname&gt;
    &lt;global&gt;
      &lt;security&gt;domain&lt;/security&gt;
      &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
      &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
      &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
    &lt;/global&gt;
    &lt;winbind config:type="boolean"&gt;false&lt;/winbind&gt;
  &lt;/samba-client&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para><literal>disable_dhcp_hostname</literal></para>
       </entry>
       <entry>
        <para>DHCP に対してホスト名の変更を許可しないようにします。</para>
       </entry>
       <entry>
        <para>
        Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>global/security</literal></para>
       </entry>
       <entry>
        <para>認証方式を設定します (NT ドメイン (domain) もしくは Active Directory サーバ (ADS)) 。</para>
       </entry>
       <entry>
        <para>値: ADS/domain</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>global/usershare_allow_guests</literal></para>
       </entry>
       <entry>
        <para>ゲストアクセスの共有を許可するかどうかを指定します。</para>
       </entry>
       <entry>
        <para>値: No (いいえ)/Yes (はい)</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>global/usershare_max_shares</literal></para>
       </entry>
       <entry>
        <para><filename>smb.conf</filename> での最大共有数を指定します。</para>
       </entry>
       <entry>
        <para>0 を指定すると、共有を無効化する意味になります。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>global/workgroup</literal></para>
       </entry>
       <entry>
        <para>ワークグループもしくはドメイン名を指定します。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>winbind</literal></para>
       </entry>
       <entry>
        <para>winbind を使用するかどうかを指定します。</para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Samba_server">
   <title>Samba サーバ</title>

   <para>シンプルな Samba サーバの設定を行なうことができます。</para>

   <example>
    <title>Samba サーバ設定</title>
<screen>
  &lt;samba-server&gt;
    &lt;accounts config:type="list"/&gt;
    &lt;backend/&gt;
    &lt;config config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;global&lt;/name&gt;
        &lt;parameters&gt;
          &lt;security&gt;domain&lt;/security&gt;
          &lt;usershare_allow_guests&gt;No&lt;/usershare_allow_guests&gt;
          &lt;usershare_max_shares&gt;100&lt;/usershare_max_shares&gt;
          &lt;workgroup&gt;WORKGROUP&lt;/workgroup&gt;
        &lt;/parameters&gt;
      &lt;/listentry&gt;
    &lt;/config&gt;
    &lt;service&gt;Disabled&lt;/service&gt;
    &lt;trustdom/&gt;
    &lt;version&gt;2.11&lt;/version&gt;
  &lt;/samba-server&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para><literal>accounts</literal></para>
       </entry>
       <entry>
        <para>Samba アカウントのリスト。</para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>backend</literal></para>
       </entry>
       <entry>
        <para>利用可能なバックエンドのリスト。</para>
       </entry>
       <entry>
        <para>
        Value: true/false
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>config</literal></para>
       </entry>
       <entry>
        <para><filename>/etc/samba/smb.conf</filename> 内に設定する追加のユーザ定義パラメータを指定します。</para>
       </entry>
       <entry>
        <para>詳しくは <filename>/etc/samba/smb.conf</filename> ファイル内の <literal>global</literal> パラメータをお読みください。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>service</literal></para>
       </entry>
       <entry>
        <para>Samba サービスを起動時に開始するかどうかを指定します。</para>
       </entry>
       <entry>
        <para>値: Enabled (有効)/Disabled (無効)</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>trustdom/</literal></para>
       </entry>
       <entry>
        <para>信頼するドメインを指定します。</para>
       </entry>
       <entry>
        <para>2 つのマップを指定します (キー: <literal>establish, revoke</literal>) 。各マップには <literal>key: domainname</literal> <literal>value: password</literal> の形式で項目を設定します。</para>
       </entry>
      </row>
      <row>
       <entry>
        <para><literal>version</literal></para>
       </entry>
       <entry>
        <para>Samba のバージョンを指定します。</para>
       </entry>
       <entry>
        <para>既定値: 2.11</para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Auth">
   <title>認証クライアント</title>

   <para>下記は LDAP ユーザ認証を行なう場合のシンプルな例です。 NSS と PAM についても、必要に応じて自動設定されます。必要なデータは検索ベース (ベース DN 、例: <literal>dc=mydomain,dc=com</literal> ) と LDAP サーバの IP アドレスです。</para>

   <example>
    <title>ネットワーク設定: 認証クライアント</title>
<screen>&lt;auth-client&gt;
  &lt;sssd&gt;yes&lt;/sssd&gt;
  &lt;nssldap&gt;no&lt;/nssldap&gt;
  &lt;sssd_conf&gt;
    &lt;sssd&gt;
      &lt;config_file_version&gt;2&lt;/config_file_version&gt;
      &lt;services&gt;nss, pam, sudo&lt;/services&gt;
      &lt;domains&gt;EXAMPLE&lt;/domains&gt;
    &lt;/sssd&gt;
    &lt;auth_domains&gt;
      &lt;domain&gt;
        &lt;domain_name&gt;EXAMPLE&lt;/domain_name&gt;
        &lt;id_provider&gt;ldap&lt;/id_provider&gt;
        &lt;sudo_provider&gt;ldap&lt;/sudo_provider&gt;
        &lt;ldap_uri&gt;ldap://&exampledomain;&lt;/ldap_uri&gt;
        &lt;ldap_sudo_search_base&gt;ou=sudoers,dc=example,dc=com&lt;/ldap_sudo_search_base&gt;
      &lt;/domain&gt;
    &lt;/auth_domains&gt;
  &lt;/sssd_conf&gt;
&lt;/auth-client&gt;</screen>
   </example>

   <tip>
    <title>ldaps:// の使用について</title>
    <para>ネイティブ SSL (TLS ではなく) で LDAP を使用するには、 <literal>ldaps</literal> リソースを追加します:</para>
<screen>&lt;auth-client&gt;
  &lt;sssd_conf&gt;
    &lt;auth_domains&gt;
      &lt;domain&gt;
        &lt;ldaps config:type="boolean"&gt;true&lt;/ldaps&gt;
      &lt;/domain&gt;
    &lt;/auth_domains&gt;
  &lt;/sssd_conf&gt;
&lt;/auth-client&gt;</screen>
   </tip>
  </sect1>
  <sect1 xml:id="ay.nfs">
   <title>NFS クライアントおよびサーバ</title>

   <para>設定システムを使用することで、 NFS クライアントも NFS サーバも設定することができます。下記の例では、 NFS クライアントと NFS サーバの両方を設定する場合の例を示しています。</para>

   <para>&productname; &productnumber; およびそれ以降では、 NFS クライアントの設定構造が変更されています。それぞれ下記に示すグローバル設定オプションが追加されています:  <literal>enable_nfs4</literal> (NFS4 サポートの有効化／無効化), <literal>idmapd_domain</literal> (rpc.idmapd 向けのドメイン名設定 (NFS4 が有効化されている場合にのみ効果があります)) 。注意: 古い構造は新しい構造とは互換性が無く、古いリリースで作成された NFS セクションを含む制御ファイルは、新しい製品では動作しません。</para>

   <para>&productname; を NFS 共有にインストールする方法については、 <xref linkend="ay.partition_nfs"/> をお読みください。</para>

   <example>
    <title>ネットワーク設定: NFS クライアント</title>
<screen>&lt;nfs&gt;
  &lt;enable_nfs4 config:type="boolean"&gt;true&lt;/enable_nfs4&gt;
  &lt;idmapd_domain&gt;suse.cz&lt;/idmapd_domain&gt;
  &lt;nfs_entries config:type="list"&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/home&lt;/mount_point&gt;
      &lt;nfs_options&gt;sec=krb5i,intr,rw&lt;/nfs_options&gt;
      &lt;server_path&gt;saurus.suse.cz:/home&lt;/server_path&gt;
      &lt;vfstype&gt;nfs4&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/work&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;bivoj.suse.cz:/work&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
    &lt;nfs_entry&gt;
      &lt;mount_point&gt;/mnt&lt;/mount_point&gt;
      &lt;nfs_options&gt;defaults&lt;/nfs_options&gt;
      &lt;server_path&gt;fallback.suse.cz:/srv/dist&lt;/server_path&gt;
      &lt;vfstype&gt;nfs&lt;/vfstype&gt;
    &lt;/nfs_entry&gt;
  &lt;/nfs_entries&gt;
&lt;/nfs&gt;</screen>
   </example>

   <example>
    <title>ネットワーク設定: NFS サーバ</title>
<screen>&lt;nfs_server&gt;
  &lt;nfs_exports config:type="list"&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/home&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
    &lt;nfs_export&gt;
      &lt;allowed config:type="list"&gt;
        &lt;allowed_clients&gt;*(ro,root_squash,sync)&lt;/allowed_clients&gt;
      &lt;/allowed&gt;
      &lt;mountpoint&gt;/work&lt;/mountpoint&gt;
    &lt;/nfs_export&gt;
  &lt;/nfs_exports&gt;
  &lt;start_nfsserver config:type="boolean"&gt;true&lt;/start_nfsserver&gt;
&lt;/nfs_server&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="Configuration.Network.Ntp">
   <title>NTP クライアント</title>

   <important>
    <title>NTP クライアント設定の非互換性について</title>
    <para>&productname; 15 およびそれ以降のバージョンでは、 NTP クライアントの設定が新しい形式となり、以前のプロファイルとは互換性が <emphasis>なくなっています</emphasis> 。以前の &productname; バージョンで使用していたプロファイル内に NTP クライアントの設定が含まれている場合は、バージョン 15 もしくはそれ以降に対応するために更新を行なう必要があります。</para>
   </important>

   <para>下記に NTP クライアントの設定例を示します:</para>

   <example>
    <title>ネットワーク設定: NTP クライアント</title>
<screen>
&lt;ntp-client&gt;
&lt;ntp_policy&gt;auto&lt;/ntp_policy&gt;<co xml:id="co.ay.ntp.policy"/>
 &lt;ntp_servers config:type="list"&gt;
  &lt;ntp_server&gt;
   &lt;address&gt;cz.pool.ntp.org&lt;/address&gt;<co xml:id="co.ay.ntp.address"/>
   &lt;iburst config:type="boolean"&gt;false&lt;/iburst&gt;<co xml:id="co.ay.ntp.iburst"/>
   &lt;offline config:type="boolean"&gt;true&lt;/offline&gt;<co xml:id="co.ay.ntp.offline"/>
  &lt;/ntp_server&gt;
 &lt;/ntp_servers&gt;
 &lt;ntp_sync&gt;15&lt;/ntp_sync&gt;<co xml:id="co.ay.ntp.sync"/>
&lt;/ntp-client&gt;
</screen>
    <calloutlist>
     <callout arearefs="co.ay.ntp.policy">
      <para><literal>ntp_policy</literal> には <filename>/etc/sysconfig/network/config</filename> 内の <option>NETCONFIG_NTP_POLICY</option> と同じ値を設定することができます。最もよく使用する値は 'static' と 'auto' (既定値) です。詳しくは <command>man 8 netconfig</command> をお読みください。</para>
     </callout>
     <callout arearefs="co.ay.ntp.address">
      <para>タイムサーバもしくはタイムサーバのプールの URL を指定します。</para>
    </callout>
     <callout arearefs="co.ay.ntp.iburst">
      <para><option>iburst</option> を指定すると、 &chronyd; の起動直後の初期時刻同期を高速化することができます。</para>
     </callout>
     <callout arearefs="co.ay.ntp.offline">
      <para><option>offline</option> を指定すると、ネットワークインターフェイスが有効化されていない場合に、問い合わせを行なわないようになります。</para>
      </callout>
      <callout arearefs="co.ay.ntp.sync">
      <para><option>ntp_sync</option> に対しては、 NTP デーモンを起動する場合は 'systemd' (既定値) を、 cron を利用して定期的に同期する場合は <emphasis>整数値</emphasis> を、自動的な同期を行なわない場合は 'manual' をそれぞれ指定します。</para>
     </callout>
    </calloutlist>
   </example>

  </sect1>
  <sect1 xml:id="Configuration.Network.Sendmail">
   <title>メールの設定</title>

   <para>メールのクライアント側の設定を行なうには、このモジュールで詳細な設定を行ないます。このモジュールにはさまざまなオプションが含まれていますが、あくまでも初期設定として使用することをお勧めします。</para>

   <example>
    <title>メールの設定</title>
<screen>&lt;mail&gt;
  &lt;aliases config:type="list"&gt;
    &lt;alias&gt;
      &lt;alias&gt;root&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
    &lt;alias&gt;
      &lt;alias&gt;test&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo&lt;/destinations&gt;
    &lt;/alias&gt;
  &lt;/aliases&gt;
  &lt;connection_type config:type="symbol"&gt;permanent&lt;/connection_type&gt;
  &lt;fetchmail config:type="list"&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;foo&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;POP3&lt;/protocol&gt;
      &lt;remote_user&gt;foo&lt;/remote_user&gt;
      &lt;server&gt;pop.foo.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
    &lt;fetchmail_entry&gt;
      &lt;local_user&gt;test&lt;/local_user&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;protocol&gt;IMAP&lt;/protocol&gt;
      &lt;remote_user&gt;test&lt;/remote_user&gt;
      &lt;server&gt;blah.com&lt;/server&gt;
    &lt;/fetchmail_entry&gt;
  &lt;/fetchmail&gt;
  &lt;from_header&gt;test.com&lt;/from_header&gt;
  &lt;listen_remote config:type="boolean"&gt;true&lt;/listen_remote&gt;
  &lt;local_domains config:type="list"&gt;
    &lt;domains&gt;test1.com&lt;/domains&gt;
  &lt;/local_domains&gt;
  &lt;masquerade_other_domains config:type="list"&gt;
      &lt;domain&gt;blah.com&lt;/domain&gt;
  &lt;/masquerade_other_domains&gt;
  &lt;masquerade_users config:type="list"&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;joe@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;joeuser&lt;/user&gt;
    &lt;/masquerade_user&gt;
    &lt;masquerade_user&gt;
      &lt;address&gt;bar@test.com&lt;/address&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/masquerade_user&gt;
  &lt;/masquerade_users&gt;
  &lt;mta config:type="symbol"&gt;postfix&lt;/mta&gt;
  &lt;outgoing_mail_server&gt;test.com&lt;/outgoing_mail_server&gt;
  &lt;postfix_mda config:type="symbol"&gt;local&lt;/postfix_mda&gt;
  &lt;smtp_auth config:type="list"&gt;
    &lt;listentry&gt;
      &lt;password&gt;bar&lt;/password&gt;
      &lt;server&gt;test.com&lt;/server&gt;
      &lt;user&gt;foo&lt;/user&gt;
    &lt;/listentry&gt;
  &lt;/smtp_auth&gt;
  &lt;use_amavis config:type="boolean"&gt;true&lt;/use_amavis&gt;
  &lt;virtual_users config:type="list"&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;test.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;foo.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
    &lt;virtual_user&gt;
      &lt;alias&gt;geek.com&lt;/alias&gt;
      &lt;comment&gt;&lt;/comment&gt;
      &lt;destinations&gt;bar.com&lt;/destinations&gt;
    &lt;/virtual_user&gt;
  &lt;/virtual_users&gt;
&lt;/mail&gt;</screen>
   </example>
  </sect1>

  <sect1 xml:id="Configuration.Network.apache">
   <title>HTTP サーバの設定</title>

   <para>このセクションは、 Apache HTTP サーバを設定するために使用します。</para>
   <para>
    For less experienced users, we would suggest to configure the Apache
    server using the <literal>HTTP server</literal> &yast; module. After that,
    call the <literal>&ay; configuration</literal> module,
    select the <literal>HTTP server</literal> &yast; module and clone the
    Apache settings. These settings can be exported via the menu
    <literal>File</literal>.
   </para>

   <example>
    <title>HTTP サーバの設定</title>
<screen>
  &lt;http-server&gt;
    &lt;Listen config:type="list"&gt;
      &lt;listentry&gt;
        &lt;ADDRESS/&gt;
        &lt;PORT&gt;80&lt;/PORT&gt;
      &lt;/listentry&gt;
    &lt;/Listen&gt;
    &lt;hosts config:type="list"&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;main&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Global configuration that will be applicable for all
            # virtual hosts, unless deleted here or overriden elsewhere.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;"/srv/www/htdocs"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            #
            # Configure the DocumentRoot
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/htdocs"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Possible values for the Options directive are "None", "All",
                # or any combination of:
                #   Indexes Includes FollowSymLinks SymLinksifOwnerMatch
                #   ExecCGI MultiViews
                #
                # Note that "MultiViews" must be named *explicitly*
                # --- "Options All"
                # does not give it to you.
                #
                # The Options directive is both complicated and important.
                #  Please see
                #  http://httpd.apache.org/docs/2.4/mod/core.html#options
                # for more information.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # AllowOverride controls what directives may be placed in
                # .htaccess files. It can be "All", "None", or any combination
                # of the keywords:
                #   Options FileInfo AuthConfig Limit
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Controls who can get stuff from this server.
                &lt;/OVERHEAD&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;Alias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Aliases: aliases can be added as needed (with no limit).
            # The format is Alias fakename realname
            #
            # Note that if you include a trailing / on fakename then the
            # server will require it to be present in the URL.  So "/icons"
            # is not aliased in this example, only "/icons/".  If the fakename
            # is slash-terminated, then the realname must also be slash
            # terminated, and if the fakename omits the trailing slash, the
            # realname must also omit it.
            # We include the /icons/ alias for FancyIndexed directory listings.
            # If you do not use FancyIndexing, you may comment this out.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/icons/ "/usr/share/apache2/icons/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/usr/share/apache2/icons"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;Indexes MultiViews&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ScriptAlias&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # ScriptAlias: This controls which directories contain server
            # scripts. ScriptAliases are essentially the same as Aliases,
            # except that documents in the realname directory are treated
            # as applications and run by the server when requested rather
            # than as documents sent to the client.
            # The same rules about trailing "/" apply to ScriptAlias
            # directives as to Alias.
            #
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/cgi-bin/ "/srv/www/cgi-bin/"&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # "/srv/www/cgi-bin" should be changed to wherever your
            # ScriptAliased CGI directory exists, if you have that configured.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;"/srv/www/cgi-bin"&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Options&lt;/KEY&gt;
                &lt;VALUE&gt;+ExecCGI -Includes&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;!mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Require&lt;/KEY&gt;
                    &lt;VALUE&gt;all granted&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;_SECTION&lt;/KEY&gt;
                &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
                &lt;SECTIONPARAM&gt;mod_access_compat.c&lt;/SECTIONPARAM&gt;
                &lt;VALUE config:type="list"&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Order&lt;/KEY&gt;
                    &lt;VALUE&gt;allow,deny&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                  &lt;listentry&gt;
                    &lt;KEY&gt;Allow&lt;/KEY&gt;
                    &lt;VALUE&gt;from all&lt;/VALUE&gt;
                  &lt;/listentry&gt;
                &lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # UserDir: The name of the directory that is appended onto a
            # user's home directory if a ~user request is received.
            # To disable it, simply remove userdir from the list of modules
            # in APACHE_MODULES in /etc/sysconfig/apache2.
            #
            &lt;/OVERHEAD&gt;
            &lt;SECTIONNAME&gt;IfModule&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;mod_userdir.c&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;UserDir&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # Note that the name of the user directory ("public_html")
                # cannot simply be changed here, since it is a compile time
                # setting. The apache package would have to be rebuilt.
                # You could work around by deleting /usr/sbin/suexec, but
                # then all scripts from the directories would be executed
                # with the UID of the webserver.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;public_html&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Include&lt;/KEY&gt;
                &lt;OVERHEAD&gt;
                # The actual configuration of the directory is in
                # /etc/apache2/mod_userdir.conf.
                &lt;/OVERHEAD&gt;
                &lt;VALUE&gt;/etc/apache2/mod_userdir.conf&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # Include all *.conf files from /etc/apache2/conf.d/.
            #
            # This is mostly meant as a place for other RPM packages to drop
            # in their configuration snippet.
            #
            # <remark>The following wording is not grammatically correct, however I am not sure of the intended meaning. Please revise.</remark>
            # You can comment this out here if you want those bits include
            # only in a certain virtual host, but not here.
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/*.conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;IncludeOptional&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            # The manual... if it is installed ('?' means it will not complain)
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;/etc/apache2/conf.d/apache2-manual?conf&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;OVERHEAD&gt;
            &lt;/OVERHEAD&gt;
            &lt;VALUE&gt;root@linux-wtyj&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;NameVirtualHost&lt;/KEY&gt;
            &lt;VALUE&gt;192.168.43.2&lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
      &lt;hosts_entry&gt;
        &lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;
        &lt;VALUE config:type="list"&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;DocumentRoot&lt;/KEY&gt;
            &lt;VALUE&gt;/srv/www/htdocs&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerName&lt;/KEY&gt;
            &lt;VALUE&gt;secondserver.suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;ServerAdmin&lt;/KEY&gt;
            &lt;VALUE&gt;second_server@suse.de&lt;/VALUE&gt;
          &lt;/listentry&gt;
          &lt;listentry&gt;
            &lt;KEY&gt;_SECTION&lt;/KEY&gt;
            &lt;SECTIONNAME&gt;Directory&lt;/SECTIONNAME&gt;
            &lt;SECTIONPARAM&gt;/srv/www/htdocs&lt;/SECTIONPARAM&gt;
            &lt;VALUE config:type="list"&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;AllowOverride&lt;/KEY&gt;
                &lt;VALUE&gt;None&lt;/VALUE&gt;
              &lt;/listentry&gt;
              &lt;listentry&gt;
                &lt;KEY&gt;Require&lt;/KEY&gt;
                &lt;VALUE&gt;all granted&lt;/VALUE&gt;
              &lt;/listentry&gt;
            &lt;/VALUE&gt;
          &lt;/listentry&gt;
        &lt;/VALUE&gt;
      &lt;/hosts_entry&gt;
    &lt;/hosts&gt;
    &lt;modules config:type="list"&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;socache_shmcb&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;reqtimeout&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authn_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
      &lt;module_entry&gt;
        &lt;change&gt;enable&lt;/change&gt;
        &lt;name&gt;authz_core&lt;/name&gt;
        &lt;userdefined config:type="boolean"&gt;true&lt;/userdefined&gt;
      &lt;/module_entry&gt;
    &lt;/modules&gt;
    &lt;service config:type="boolean"&gt;true&lt;/service&gt;
    &lt;version&gt;2.9&lt;/version&gt;
  &lt;/http-server&gt;
</screen>
   </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          List Name
         </para>
        </entry>
        <entry>
         <para>
          List Elements
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          Listen
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          List of host <literal>Listen</literal> settings
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          PORT
         </para>
        </entry>
        <entry>
         <para>
          port address
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          ADDRESS
         </para>
        </entry>
        <entry>
         <para>
          Network address. All addresses will be taken if this entry is empty.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          hosts
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          List of Hosts configuration
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          KEY
         </para>
        </entry>
        <entry>
         <para>
          Host name; <literal>&lt;KEY&gt;main&lt;/KEY&gt;</literal> defines the main hosts,
          for example <literal>&lt;KEY&gt;192.168.43.2/secondserver.suse.de&lt;/KEY&gt;</literal>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          VALUE
         </para>
        </entry>
        <entry>
         <para>
          List of different values describing the host.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          modules
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          Module list. Only user-defined modules need to be described.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          name
         </para>
        </entry>
        <entry>
         <para>
         Module name
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          userdefined
         </para>
        </entry>
        <entry>
         <para>
          For historical reasons, it is always set to <literal>true</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
         </para>
        </entry>
        <entry>
         <para>
          change
         </para>
        </entry>
        <entry>
         <para>
          For historical reasons, it is always set to <literal>enable</literal>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          version
         </para>
        </entry>
        <entry>
         <para>
          Version of used Apache server
         </para>
        </entry>
        <entry>
          <para>
          Only for information. Default 2.9
          </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          service
         </para>
        </entry>
        <entry>
         <para>
          Enable Apache service
         </para>
        </entry>
        <entry>
         <para>
         Optional. Default: false
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <note>
      <title>ファイアウオール</title>
      <para>
      To run an Apache server correctly, make sure the firewall is configured
      appropriately.
      </para>
    </note>

  </sect1>

  <sect1 xml:id="Configuration.Network.Squid">
   <title>squid サーバ</title>

   <para>
    Squid is a caching and forwarding Web proxy.
   </para>

   <example>
    <title>squid サーバの設定</title>
<screen>
  &lt;squid&gt;
    &lt;acls config:type="list"&gt;
      &lt;listentry&gt;
        &lt;name&gt;QUERY&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cgi-bin \?&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;urlpath_regex&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;apache&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;Server&lt;/option&gt;
          &lt;option&gt;^Apache&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;rep_header&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;all&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;0.0.0.0/0.0.0.0&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;manager&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;cache_object&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;proto&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.1/255.255.255.255&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;src&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;to_localhost&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;127.0.0.0/8&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;dst&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;SSL_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;80&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;21&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;443&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;70&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;210&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;1025-65535&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;280&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;488&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;591&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;Safe_ports&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;777&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;port&lt;/type&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;name&gt;CONNECT&lt;/name&gt;
        &lt;options config:type="list"&gt;
          &lt;option&gt;CONNECT&lt;/option&gt;
        &lt;/options&gt;
        &lt;type&gt;method&lt;/type&gt;
      &lt;/listentry&gt;
    &lt;/acls&gt;
    &lt;http_accesses config:type="list"&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;manager&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;!Safe_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;CONNECT&lt;/listentry&gt;
          &lt;listentry&gt;!SSL_ports&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;localhost&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;true&lt;/allow&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;acl config:type="list"&gt;
          &lt;listentry&gt;all&lt;/listentry&gt;
        &lt;/acl&gt;
        &lt;allow config:type="boolean"&gt;false&lt;/allow&gt;
      &lt;/listentry&gt;
    &lt;/http_accesses&gt;
    &lt;http_ports config:type="list"&gt;
      &lt;listentry&gt;
        &lt;host/&gt;
        &lt;port&gt;3128&lt;/port&gt;
        &lt;transparent config:type="boolean"&gt;false&lt;/transparent&gt;
      &lt;/listentry&gt;
    &lt;/http_ports&gt;
    &lt;refresh_patterns config:type="list"&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;10080&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;^ftp:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;1440&lt;/max&gt;
        &lt;min&gt;1440&lt;/min&gt;
        &lt;percent&gt;0&lt;/percent&gt;
        &lt;regexp&gt;^gopher:&lt;/regexp&gt;
      &lt;/listentry&gt;
      &lt;listentry&gt;
        &lt;case_sensitive config:type="boolean"&gt;true&lt;/case_sensitive&gt;
        &lt;max&gt;4320&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;percent&gt;20&lt;/percent&gt;
        &lt;regexp&gt;.&lt;/regexp&gt;
      &lt;/listentry&gt;
    &lt;/refresh_patterns&gt;
    &lt;service_enabled_on_startup config:type="boolean"&gt;true&lt;/service_enabled_on_startup&gt;
    &lt;settings&gt;
      &lt;access_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/access.log&lt;/listentry&gt;
      &lt;/access_log&gt;
      &lt;cache_dir config:type="list"&gt;
        &lt;listentry&gt;ufs&lt;/listentry&gt;
        &lt;listentry&gt;/var/cache/squid&lt;/listentry&gt;
        &lt;listentry&gt;100&lt;/listentry&gt;
        &lt;listentry&gt;16&lt;/listentry&gt;
        &lt;listentry&gt;256&lt;/listentry&gt;
      &lt;/cache_dir&gt;
      &lt;cache_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/cache.log&lt;/listentry&gt;
      &lt;/cache_log&gt;
      &lt;cache_mem config:type="list"&gt;
        &lt;listentry&gt;8&lt;/listentry&gt;
        &lt;listentry&gt;MB&lt;/listentry&gt;
      &lt;/cache_mem&gt;
      &lt;cache_mgr config:type="list"&gt;
        &lt;listentry&gt;webmaster&lt;/listentry&gt;
      &lt;/cache_mgr&gt;
      &lt;cache_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/cache_replacement_policy&gt;
      &lt;cache_store_log config:type="list"&gt;
        &lt;listentry&gt;/var/log/squid/store.log&lt;/listentry&gt;
      &lt;/cache_store_log&gt;
      &lt;cache_swap_high config:type="list"&gt;
        &lt;listentry&gt;95&lt;/listentry&gt;
      &lt;/cache_swap_high&gt;
      &lt;cache_swap_low config:type="list"&gt;
        &lt;listentry&gt;90&lt;/listentry&gt;
      &lt;/cache_swap_low&gt;
      &lt;client_lifetime config:type="list"&gt;
        &lt;listentry&gt;1&lt;/listentry&gt;
        &lt;listentry&gt;days&lt;/listentry&gt;
      &lt;/client_lifetime&gt;
      &lt;connect_timeout config:type="list"&gt;
        &lt;listentry&gt;2&lt;/listentry&gt;
        &lt;listentry&gt;minutes&lt;/listentry&gt;
      &lt;/connect_timeout&gt;
      &lt;emulate_httpd_log config:type="list"&gt;
        &lt;listentry&gt;off&lt;/listentry&gt;
      &lt;/emulate_httpd_log&gt;
      &lt;error_directory config:type="list"&gt;
        &lt;listentry/&gt;
      &lt;/error_directory&gt;
      &lt;ftp_passive config:type="list"&gt;
        &lt;listentry&gt;on&lt;/listentry&gt;
      &lt;/ftp_passive&gt;
      &lt;maximum_object_size config:type="list"&gt;
        &lt;listentry&gt;4096&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/maximum_object_size&gt;
      &lt;memory_replacement_policy config:type="list"&gt;
        &lt;listentry&gt;lru&lt;/listentry&gt;
      &lt;/memory_replacement_policy&gt;
      &lt;minimum_object_size config:type="list"&gt;
        &lt;listentry&gt;0&lt;/listentry&gt;
        &lt;listentry&gt;KB&lt;/listentry&gt;
      &lt;/minimum_object_size&gt;
    &lt;/settings&gt;
  &lt;/squid&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>acls</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of Access Control Settings (ACLs).
        </para>
       </entry>
       <entry>
        <para>
         Each list entry contains the name, type, and additional options.
         Use the &yast; Squid configuration module to get an overview
         of possible entries.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>http_accesses</literal>
        </para>
       </entry>
       <entry>
        <para>
         In the Access Control table, access can be denied or allowed to ACL
         Groups.
        </para>
        <para>
        </para>
       </entry>
       <entry>
        <para>
         If there are more ACL Groups in one definition, access will be allowed or denied to members who belong to all ACL
         Groups at the same time.
       </para>
        <para>
         The Access Control table is checked in the order listed here. The
         first matching entry is used.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>http_ports</literal>
        </para>
       </entry>
       <entry>
        <para>
         Define all ports where Squid will listen for clients' HTTP requests.
        </para>
       </entry>
       <entry>
        <para>
         <literal>Host</literal> can contain a host name or IP address or
         remain empty.
        </para>
        <para>
         <literal>transparent</literal> disables PMTU discovery when transparent.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>refresh_patterns</literal>
        </para>
       </entry>
       <entry>
        <para>
         Refresh patterns define how Squid treats the objects in the cache.
        </para>
       </entry>
       <entry>
        <para>
         The refresh patterns are checked in the order listed here. The first
         matching entry is used.
        </para>
        <para>
         <literal>Min</literal> determines how long (in minutes) an object
         should be considered fresh if no explicit expiry time is given.
         <literal>Max</literal> is the upper limit of how long objects without
         an explicit expiry time will be considered fresh.
         <literal>Percent</literal> is the percentage of the object's age
         (time since last modification). An object without an explicit expiry
         time will be considered fresh.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>settings</literal>
        </para>
       </entry>
       <entry>
        <para>
         Map of all available general parameters with default values.
        </para>
       </entry>
       <entry>
        <para>
         Use the &yast; Squid configuration module to get an overview
         about possible entries.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>service_enabled_on_startup</literal>
        </para>
       </entry>
       <entry>
        <para>
         Squid service start when booting.
        </para>
       </entry>
       <entry>
        <para>
         Value: true/false
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>

  <sect1 xml:id="Configuration.Network.Ftp">
    <title>FTP サーバ</title>
    <para>
     Configure your FTP Internet server settings.
    </para>
    <example>
     <title>FTP サーバの設定</title>
<screen>
  &lt;ftp-server&gt;
    &lt;AnonAuthen&gt;2&lt;/AnonAuthen&gt;
    &lt;AnonCreatDirs&gt;NO&lt;/AnonCreatDirs&gt;
    &lt;AnonMaxRate&gt;0&lt;/AnonMaxRate&gt;
    &lt;AnonReadOnly&gt;NO&lt;/AnonReadOnly&gt;
    &lt;AntiWarez&gt;YES&lt;/AntiWarez&gt;
    &lt;Banner&gt;Welcome message&lt;/Banner&gt;
    &lt;CertFile/&gt;
    &lt;ChrootEnable&gt;NO&lt;/ChrootEnable&gt;
    &lt;EnableUpload&gt;YES&lt;/EnableUpload&gt;
    &lt;FTPUser&gt;ftp&lt;/FTPUser&gt;
    &lt;FtpDirAnon&gt;/srv/ftp&lt;/FtpDirAnon&gt;
    &lt;FtpDirLocal/&gt;
    &lt;GuestUser/&gt;
    &lt;LocalMaxRate&gt;0&lt;/LocalMaxRate&gt;
    &lt;MaxClientsNumber&gt;10&lt;/MaxClientsNumber&gt;
    &lt;MaxClientsPerIP&gt;3&lt;/MaxClientsPerIP&gt;
    &lt;MaxIdleTime&gt;15&lt;/MaxIdleTime&gt;
    &lt;PasMaxPort&gt;40500&lt;/PasMaxPort&gt;
    &lt;PasMinPort&gt;40000&lt;/PasMinPort&gt;
    &lt;PassiveMode&gt;YES&lt;/PassiveMode&gt;
    &lt;SSL&gt;0&lt;/SSL&gt;
    &lt;SSLEnable&gt;NO&lt;/SSLEnable&gt;
    &lt;SSLv2&gt;NO&lt;/SSLv2&gt;
    &lt;SSLv3&gt;NO&lt;/SSLv3&gt;
    &lt;StartDaemon&gt;2&lt;/StartDaemon&gt;
    &lt;TLS&gt;YES&lt;/TLS&gt;
    &lt;Umask/&gt;
    &lt;UmaskAnon/&gt;
    &lt;UmaskLocal/&gt;
    &lt;VerboseLogging&gt;NO&lt;/VerboseLogging&gt;
    &lt;VirtualUser&gt;NO&lt;/VirtualUser&gt;
  &lt;/ftp-server&gt;
</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>AnonAuthen</literal>
         </para>
        </entry>
        <entry>
         <para>
          Enable/disable anonymous and local users.
         </para>
        </entry>
        <entry>
         <para>
          Authenticated Users Only: 1; Anonymous Only: 0; Both: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>AnonCreatDirs</literal>
         </para>
        </entry>
        <entry>
         <para>
         Anonymous users can create directories.
         </para>
        </entry>
        <entry>
         <para>
         Values: YES/NO
        </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>AnonReadOnly</literal>
         </para>
        </entry>
        <entry>
         <para>
         Anonymous users can upload.
         </para>
        </entry>
        <entry>
         <para>
          Values: YES/NO
          </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>AnonMaxRate</literal>
         </para>
        </entry>
        <entry>
         <para>
          The maximum data transfer rate permitted for anonymous clients.
         </para>
        </entry>
        <entry>
         <para>
          KB/s
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>AntiWarez</literal>
         </para>
        </entry>
        <entry>
         <para>
          Disallow downloading of files that were uploaded but not validated by
          a local admin.
         </para>
        </entry>
        <entry>
         <para>
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>Banner</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the name of a file containing the text to display when someone
          connects to the server.
         </para>
        </entry>
        <entry>
         <para/>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>CertFile</literal>
         </para>
        </entry>
        <entry>
         <para>
          DSA certificate to use for SSL-encrypted connections
         </para>
        </entry>
        <entry>
         <para>
          This option specifies the location of the DSA certificate to use for
          SSL-encrypted connections.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>ChrootEnable</literal>
         </para>
        </entry>
        <entry>
         <para>
          When enabled, local users will by default be placed in a <literal>chroot</literal>
          jail in their home directory after login.
         </para>
        </entry>
        <entry>
         <para>
          Warning: This option has security implications.
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>EnableUpload</literal>
         </para>
        </entry>
        <entry>
         <para>
          If enabled, FTP users can upload.
         </para>
        </entry>
        <entry>
         <para>
          To allow anonymous users to upload, enable <literal>AnonReadOnly</literal>.
          Values: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FTPUser</literal>
         </para>
        </entry>
        <entry>
         <para>
          Defines the anonymous FTP user.
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FtpDirAnon</literal>
         </para>
        </entry>
        <entry>
         <para>
          FTP directory for anonymous users.
         </para>
        </entry>
        <entry>
         <para>
          Specify a directory which is used for anonymous FTP users.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>FtpDirLocal</literal>
         </para>
        </entry>
        <entry>
         <para>
          FTP directory for authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          Specify a directory which is used for FTP authenticated users.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>LocalMaxRate</literal>
         </para>
        </entry>
        <entry>
         <para>
          The maximum data transfer rate permitted for local authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          KB/s
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>MaxClientsNumber</literal>
         </para>
        </entry>
        <entry>
         <para>
          The maximum number of clients allowed to connect.
         </para>
        </entry>
        <entry>
         <para>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>MaxClientsPerIP</literal>
         </para>
        </entry>
        <entry>
         <para>
          Defines the maximum number of clients for one IP.
         </para>
        </entry>
        <entry>
         <para>
          This limits the number of clients allowed to connect from a single
          source Internet address.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>MaxIdleTime</literal>
         </para>
        </entry>
        <entry>
         <para>
          The maximum time (timeout) a remote client may wait between FTP
          commands.
         </para>
        </entry>
        <entry>
         <para>
          Minutes
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>PasMaxPort</literal>
         </para>
        </entry>
        <entry>
         <para>
          Maximum value for a port range for passive connection replies.
         </para>
        </entry>
        <entry>
         <para>
          <literal>PassiveMode</literal> needs to be set to YES.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>PasMinPort</literal>
         </para>
        </entry>
        <entry>
         <para>
          Minimum value for a port range for passive connection replies.
         </para>
        </entry>
        <entry>
         <para>
          <literal>PassiveMode</literal> needs to be set to YES.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>PassiveMode</literal>
         </para>
        </entry>
        <entry>
         <para>
          Enable Passive Mode
         </para>
        </entry>
        <entry>
         <para>
         Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>SSL</literal>
         </para>
        </entry>
        <entry>
         <para>セキュリティ設定</para>
        </entry>
        <entry>
         <para>
         Disable SSL/TLS: 0; Accept SSL and TLS: 1; Refuse Connections Without
         SSL/TLS: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>SSLEnable</literal>
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>SSLv2</literal>
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL version 2 connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>SSLv3</literal>
         </para>
        </entry>
        <entry>
         <para>
          If enabled, SSL version 3 connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>StartDaemon</literal>
         </para>
        </entry>
        <entry>
         <para>
          How the FTP daemon will be started.
         </para>
        </entry>
        <entry>
         <para>
          Manually: 0; when booting: 1; via &systemd; socket: 2
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>TLS</literal>
         </para>
        </entry>
        <entry>
         <para>
          If enabled, TLS connections are allowed.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>Umask</literal>
         </para>
        </entry>
        <entry>
         <para>
          File creation mask, in the format (umask for files):(umask for
          directories).
         </para>
        </entry>
        <entry>
         <para>
          For example <literal>177:077</literal> if you feel paranoid.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>UmaskAnon</literal>
         </para>
        </entry>
        <entry>
         <para>
          The value to which the umask for file creation is set for anonymous
          users.
         </para>
        </entry>
        <entry>
         <para>
          To specify octal values, remember the "0" prefix, otherwise the value
          will be treated as a base-10 integer.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>UmaskLocal</literal>
         </para>
        </entry>
        <entry>
         <para>
          Umask for authenticated users.
         </para>
        </entry>
        <entry>
         <para>
          To specify octal values, remember the "0" prefix, otherwise the value
          will be treated as a base-10 integer.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>VerboseLogging</literal>
         </para>
        </entry>
        <entry>
         <para>
          When enabled, all FTP requests and responses are logged.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>VirtualUser</literal>
         </para>
        </entry>
        <entry>
         <para>
          By using virtual users, FTP accounts can be administrated without
          affecting system accounts.
         </para>
        </entry>
        <entry>
         <para>
          Value: YES/NO
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

    <note>
      <title>ファイアウオール</title>
      <para>
      Proper Firewall setting will be required for the FTP server to run correctly.
      </para>
    </note>

   </sect1>

   <sect1 xml:id="Configuration.Network.Tftp">
    <title>TFTP サーバ</title>
    <para>
     Configure your TFTP Internet server settings.
    </para>
    <para>
     Use this to enable a server for TFTP (trivial file transfer protocol). The
     server will be started using the &systemd; socket.
    </para>
    <para>
     Note that TFTP and FTP are not the same.
    </para>
    <example>
     <title>TFTP サーバ設定:</title>
<screen>
  &lt;tftp-server&gt;
    &lt;start_tftpd config:type="boolean"&gt;true&lt;/start_tftpd&gt;
    &lt;tftp_directory&gt;/tftpboot&lt;/tftp_directory&gt;
  &lt;/tftp-server&gt;
</screen>
    </example>
    <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Element
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Comment
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           start_tftpd
          </para>
         </entry>
         <entry>
          <para>
           Enabling TFTP server service.
          </para>
         </entry>
         <entry>
          <para>
           Value: true/false
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           tftp_directory
          </para>
         </entry>
         <entry>
          <para>
           Boot Image Directory: Specify the directory where served
           files are located.
          </para>
         </entry>
         <entry>
          <para>
           The usual value is /tftpboot. The directory will be created if it
           does not exist. The server uses this as its root directory
           (using the -s option).
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
    </informaltable>
   </sect1>

   <sect1 xml:id="CreateProfile.Firstboot">
   <title>firstboot の処理手順</title>

   <para>
    The &yast; firstboot utility (&yast; Initial System Configuration), which
    runs after the installation is completed, lets you configure the freshly
    installed system. On the first boot after the installation, users
    are guided through a series of steps that allow for easier
    configuration of a system. &yast; firstboot does not run by default
    and needs to be configured to run.
    </para>

   <example>
    <title>firstboot の処理手順の有効化</title>
    <screen>
      &lt;firstboot&gt;
        &lt;firstboot_enabled config:type="boolean"&gt;true&lt;/firstboot_enabled&gt;
      &lt;/firstboot&gt;
    </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.Security">
   <title>セキュリティ設定</title>

   <para>
    Using the features of this module, you can to change the local security
    settings on the target system. The local security settings include the
    boot configuration, login settings, password settings, user addition
    settings, and file permissions.
   </para>

   <para>
    Configuring the security settings automatically is similar to the
    <literal>Custom Settings</literal> in the security module available in
    the running system. This allows you create a customized configuration.
   </para>

   <example>
    <title>セキュリティ設定</title>
    <para>
     See the reference for the meaning and the possible values of the
     settings in the following example.
    </para>
<screen>&lt;security&gt;
  &lt;console_shutdown&gt;ignore&lt;/console_shutdown&gt;
  &lt;displaymanager_remote_access&gt;no&lt;/displaymanager_remote_access&gt;
  &lt;fail_delay&gt;3&lt;/fail_delay&gt;
  &lt;faillog_enab&gt;yes&lt;/faillog_enab&gt;
  &lt;gid_max&gt;60000&lt;/gid_max&gt;
  &lt;gid_min&gt;101&lt;/gid_min&gt;
  &lt;gdm_shutdown&gt;root&lt;/gdm_shutdown&gt;
  &lt;lastlog_enab&gt;yes&lt;/lastlog_enab&gt;
  &lt;encryption&gt;md5&lt;/encryption&gt;
  &lt;obscure_checks_enab&gt;no&lt;/obscure_checks_enab&gt;
  &lt;pass_max_days&gt;99999&lt;/pass_max_days&gt;
  &lt;pass_max_len&gt;8&lt;/pass_max_len&gt;
  &lt;pass_min_days&gt;1&lt;/pass_min_days&gt;
  &lt;pass_min_len&gt;6&lt;/pass_min_len&gt;
  &lt;pass_warn_age&gt;14&lt;/pass_warn_age&gt;
  &lt;passwd_use_cracklib&gt;yes&lt;/passwd_use_cracklib&gt;
  &lt;permission_security&gt;secure&lt;/permission_security&gt;
  &lt;run_updatedb_as&gt;nobody&lt;/run_updatedb_as&gt;
  &lt;uid_max&gt;60000&lt;/uid_max&gt;
  &lt;uid_min&gt;500&lt;/uid_min&gt;
&lt;/security&gt;</screen>
   </example>

   <sect2 xml:id="CreateProfile.Security.password">
    <title>パスワードの設定</title>
    <para>
     Change various password settings. These settings are mainly stored in
     the <filename>/etc/login.defs</filename> file.
    </para>
    <para>
     Use this resource to activate one of the encryption methods currently
     supported. If not set, <literal>DES</literal> is configured.
    </para>
    <para>
     <literal>DES</literal>, the Linux default method, works in all network
     environments, but it restricts you to passwords no longer than eight
     characters. <literal>MD5</literal> allows longer passwords, thus
     provides more security, but some network protocols do not support this,
     and you may have problems with NIS. <literal>Blowfish</literal> is also
     supported.
    </para>
    <para>
     Additionally, you can set up the system to check for password
     plausibility and length etc.
    </para>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.boot">
    <title>起動の設定</title>
    <para>
     Use the security resource, to change various boot settings.
    </para>
    <variablelist>
     <varlistentry>
      <term>
       How to interpret <keycombo><keycap function="control"/><keycap function="alt"/><keycap function="delete"/></keycombo>?
      </term>
      <listitem>
       <para>
        When someone at the console has pressed the
        <keycombo><keycap function="control"/> <keycap function="alt"/>
        <keycap function="delete"/></keycombo> key combination, the system
        usually reboots. Sometimes it is desirable to ignore this event, for
        example, when the system serves as both workstation and server.
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Shutdown behavior of GDM</term>
      <listitem>
       <para>
        Configure a list of users allowed to shut down the machine from GDM.
       </para>
      </listitem>
     </varlistentry>
    </variablelist>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.login">
    <title>ログインの設定</title>
    <para>
     Change various login settings. These settings are mainly stored in the
     <filename>/etc/login.defs</filename> file.
    </para>
   </sect2>

   <sect2 xml:id="CreateProfile.Security.users">
    <title>新規ユーザの設定 (<command>useradd</command> の設定)</title>
    <para>
     Set the minimum and maximum possible user and group ID.
    </para>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.Security.laf">
   <title>Linux 監査フレームワーク (Linux Audit Framework (LAF))</title>

   <para>
    This module allows the configuration of the audit daemon and to add
    rules for the audit subsystem.
   </para>

   <example>
    <title>LAF の設定</title>
<screen>
  &lt;audit-laf&gt;
    &lt;auditd&gt;
      &lt;flush&gt;INCREMENTAL&lt;/flush&gt;
      &lt;freq&gt;20&lt;/freq&gt;
      &lt;log_file&gt;/var/log/audit/audit.log&lt;/log_file&gt;
      &lt;log_format&gt;RAW&lt;/log_format&gt;
      &lt;max_log_file&gt;5&lt;/max_log_file&gt;
      &lt;max_log_file_action&gt;ROTATE&lt;/max_log_file_action&gt;
      &lt;name_format&gt;NONE&lt;/name_format&gt;
      &lt;num_logs&gt;4&lt;/num_logs&gt;
    &lt;/auditd&gt;
    &lt;rules/&gt;
  &lt;/audit-laf&gt;
</screen>
   </example>

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Attribute
        </para>
       </entry>
       <entry>
        <para>
         Values
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>auditd/flush</literal>
        </para>
       </entry>
       <entry>
        <para>
         Describes how to write the data to disk.
        </para>
       </entry>
       <entry>
        <para>
         If set to <literal>INCREMENTAL</literal> the Frequency parameter tells
         how many records to write before issuing an explicit flush to disk.
         <literal>NONE</literal> means: no special effort is made to flush data,
         <literal>DATA</literal>: keep data portion synchronized,
         <literal>SYNC</literal>: keep data and metadata fully synchronized.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/freq</literal>
        </para>
       </entry>
       <entry>
        <para>
         This parameter tells how many records to write before issuing an explicit flush to disk.
        </para>
       </entry>
       <entry>
        <para>
         The parameter <literal>flush</literal> needs to be set to <literal>INCREMENTAL</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/log_file</literal>
        </para>
       </entry>
       <entry>
        <para>
         The full path name to the log file.
        </para>
       </entry>
       <entry>
        <para>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/log_fomat</literal>
        </para>
       </entry>
       <entry>
        <para>
         How much information needs to be logged.
        </para>
       </entry>
       <entry>
        <para>
         Set <literal>RAW</literal> to log all data (store in a format exactly as the kernel sends it)
         or <literal>NOLOG</literal> to discard all audit information instead of writing it to disk
         (does not affect data sent to the dispatcher).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/max_log_file</literal>
        </para>
       </entry>
       <entry>
        <para>
         How much information needs to be logged.
        </para>
       </entry>
       <entry>
        <para>
         Unit: Megabytes
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/num_logs</literal>
        </para>
       </entry>
       <entry>
        <para>
         Number of log files.
        </para>
       </entry>
       <entry>
        <para>
         <literal>max_log_file_action</literal> needs to be set to <literal>ROTATE</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/max_log_file_action</literal>
        </para>
       </entry>
       <entry>
        <para>
         What happens if the log capacity has been reached.
        </para>
       </entry>
       <entry>
        <para>
         If the action is set to <literal>ROTATE</literal> the Number of Log
         Files specifies the number of files to keep. Set to
         <literal>SYSLOG</literal>, the audit daemon will write a warning to
         the system log. With <literal>SUSPEND</literal> the daemon
         stops writing records to disk. <literal>IGNORE</literal> means do
         nothing, <literal>KEEP_LOGS</literal> is similar to
         <literal>ROTATE</literal>, but log files are not overwritten.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>auditd/name_format</literal>
        </para>
       </entry>
       <entry>
        <para>
         Computer Name Format describes how to write the computer name to the log file.
        </para>
       </entry>
       <entry>
        <para>
         If <literal>USER</literal> is set, the user-defined name is used.
         <literal>NONE</literal> means no computer name is inserted.
         <literal>HOSTNAME</literal> uses the name returned by the 'gethostname' syscall.
         <literal>FQD</literal> uses the fully qualified domain name.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rules</literal>
        </para>
       </entry>
       <entry>
        <para>
         Rules for auditctl
        </para>
       </entry>
       <entry>
        <para>
         You can edit the rules manually, which we only recommend for
         advanced users.  For more information about all options, see
         <command>man auditctl</command>.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>
  </sect1>


  <sect1 xml:id="Configuration.Security.users_and_groups">
   <title>ユーザとグループ</title>

   <para>
    &ay; supports defining local users, groups, special login settings and even
    default options for new users. Those settings are defined in the following sections:
   </para>

   <variablelist>
    <varlistentry>
     <term>users</term>
     <listitem>
      <para>
       List of users
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>user_defaults</term>
     <listitem>
      <para>
       Default options for new users
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>groups</term>
     <listitem>
      <para>
       List of groups
      </para>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>login_settings</term>
     <listitem>
      <para>
       Special login settings like password-less login or autologin
      </para>
     </listitem>
    </varlistentry>
   </variablelist>

   <note>
    <title>第 1 ステージでのユーザとグループの設定</title>
    <para>
     Users and groups are set up during the first stage, so you can set up a
     usable system without running the second stage.
    </para>
   </note>

   <sect2 xml:id="Configuration.Security.users">
    <title>ユーザ</title>

    <para>
     A list of users can be defined in the <literal>&lt;users&gt;</literal>
     section. To be able to log in, make sure that either the &rootuser; users are
     set up or <option>rootpassword</option> is specified as a <command>linuxrc</command>
     option.
    </para>

    <example>
     <title>最小限のユーザ設定</title>
     <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
    &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;</screen>
    </example>

    <para>
     The following example shows a more complex scenario. System-wide default
     settings from <filename>/etc/default/useradd</filename>, such as the
     shell or the parent directory for the home directory, are applied.
    </para>

    <example>
     <title>複雑なユーザ設定</title>
     <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;uid&gt;1001&lt;/uid&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Root User&lt;/fullname&gt;
    &lt;authorized_keys config:type="list"&gt;
      &lt;listentry&gt;command="/opt/login.sh" ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDKLt1vnW2vTJpBp3VK91rFsBvpY97NljsVLdgUrlPbZ/L51FerQQ+djQ/ivDASQjO+567nMGqfYGFA/De1EGMMEoeShza67qjNi14L1HBGgVojaNajMR/NI2d1kDyvsgRy7D7FT5UGGUNT0dlcSD3b85zwgHeYLidgcGIoKeRi7HpVDOOTyhwUv4sq3ubrPCWARgPeOLdVFa9clC8PTZdxSeKp4jpNjIHEyREPin2Un1luCIPWrOYyym7aRJEPopCEqBA9HvfwpbuwBI5F0uIWZgSQLfpwW86599fBo/PvMDa96DpxH1VlzJlAIHQsMkMHbsCazPNC0++Kp5ZVERiH root@example.net&lt;/listentry&gt;
    &lt;/authorized_keys&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password&lt;/user_password&gt;
    &lt;uid&gt;1002&lt;/uid&gt;
    &lt;gid&gt;100&lt;/gid&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
    &lt;fullname&gt;Plain User&lt;/fullname&gt;
    &lt;home&gt;/Users/plain&lt;/home&gt;
    &lt;password_settings&gt;
      &lt;max&gt;120&lt;/max&gt;
      &lt;inact&gt;5&lt;/inact&gt;
    &lt;/password_settings&gt;
  &lt;/user&gt;
&lt;/users&gt;</screen>
    </example>

    <note>
     <title><literal>authorized_keys</literal> ファイルの上書きに関する注意</title>

     <para>
      If the profile defines a set of SSH authorized keys for a user in the
      <literal>authorized_keys</literal> section, an existing
      <filename>$HOME/.ssh/authorized_keys</filename> file will be overwritten.
      If not existing, the file will be created with the content specified.
      Avoid overwriting an existing <filename>authorized_keys</filename> file
      by not specifying the respective section in the &ay; control file.
     </para>
    </note>

    <note>
     <title><literal>rootpassword</literal> と root ユーザオプションの組み合わせについて</title>

     <para>
      It is possible to specify <literal>rootpassword</literal> in
      <command>linuxrc</command> and also have a user section for the &rootuser;
      user. If this section is missing the password, then the password from
      <command>linuxrc</command> will be used. Passwords in profiles take
      precedence over <command>linuxrc</command> passwords.
     </para>
    </note>

    <note xml:id="ann.Configuration.Security.users.uid">
     <title>ユーザ ID (( <literal>uid</literal> ) の指定について</title>
     <para>
      Each user on a Linux system has a numeric user ID. You can either
      specify such a user ID within the &ay; control file manually by using
      <tag class="element">uid</tag>, or let the system automatically choose a
      user ID by not using <tag class="element">uid</tag>.
     </para>
     <para>
      User IDs should be unique throughout the system. If not, some
      applications such as the login manager <systemitem class="resource">gdm</systemitem> may no longer work as expected.
     </para>
     <para>
      When adding users with the &ay; control file, it is strongly recommended
      not to mix user-defined IDs and automatically provided IDs. When doing
      so, unique IDs cannot be guaranteed. Either specify IDs for all users
      added with the &ay; control file or let the system choose the ID for all
      users.
     </para>
    </note>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>username</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;username&gt;lukesw&lt;/username&gt;</screen>
        </entry>
        <entry>
         <para>
          Required. It should be a valid user name. Check <literal>man 8 useradd</literal>
          if you are not sure.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>fullname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;fullname&gt;Tux Torvalds&lt;/fullname&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's full name.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>forename</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;forname&gt;Tux&lt;/forename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's forename.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>surname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;surname&gt;Skywalker&lt;/surname&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's surname.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>uid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;uid&gt;1001&lt;/uid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User ID. It should be a unique and must be a non-negative
          number. If not specified, &ay; will automatically choose a user
          ID. Also refer to <xref linkend="ann.Configuration.Security.users.uid"/> for additional
          information.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>gid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;gid&gt;100&lt;/gid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Initial group ID. It must be a unique and non-negative
          number. Moreover it must refer to an existing group.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>home</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;home&gt;/home/luke&lt;/home&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Absolute path to the user's home directory. By default,
          <literal>/home/username</literal> will be used (for example,
          <literal>alice</literal>'s home directory will be
          <literal>/home/alice</literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>home_btrfs_subvolume</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;home_btrfs_subvolume config:type="boolean"&gt;true&lt;/home_btrfs_subvolume&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Generates the home directory in a Btrfs subvolume. Disabled
          by default.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>shell</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;shell&gt;/usr/bin/zsh&lt;/shell&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. <literal>/bin/bash</literal> is the default value. If you
          choose another one, make sure that it's installed (adding the corresponding
          package to the <literal>software</literal> section).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>user_password</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;user_password&gt;some-password&lt;/user_password&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If you enter an exclamation mark (<literal>!</literal>), a
          random password will be generated. A user's password can be written in
          plain text (not recommended) or in encrypted form. To create an
          encrypted password, use <command>mkpasswd</command>. Enter the password
          as written in <filename>/etc/shadow</filename> (second column).
          To enable or disable the use of encrypted passwords in the profile, see
          the <literal>encrypted</literal> parameter.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>encrypted</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;encrypted config:type="boolean"&gt;true&lt;/encrypted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Considered <literal>false</literal> if not present.
          Indicates if the user's password in the profile is encrypted or not.
          &ay; supports standard encryption algorithms (see <command>man 3
          crypt)</command>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>password_settings</literal>
         </para>
        </entry>
        <entry>
         <para>
          Password settings
         </para>
         <screen>&lt;password_settings&gt;
  &lt;expire/&gt;
  &lt;max&gt;60&lt;/max&gt;
  &lt;warn&gt;7&lt;/warn&gt;
&lt;/password_settings&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Some password settings can be customized:
          <literal>expire</literal> (account expiration date in format
          <literal>YYYY-MM-DD</literal>), <literal>flag</literal>
          (<literal>/etc/shadow</literal> flag), <literal>inact</literal>
          (number of days after password expiration that account is disabled),
          <literal>max</literal> (maximum number of days a password is valid),
          <literal>min</literal> (grace period in days until which a user can
          change password after it has expired) and <literal>warn</literal>
          (number of days before expiration when the password change reminder
          starts).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>authorized_keys</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of authorized keys
         </para>
         <screen>&lt;authorized_keys config:type="list"&gt;
  &lt;listentry&gt;ssh-rsa ...&lt;/listentry&gt;
&lt;/authorized_keys&gt;</screen>
        </entry>
        <entry>
         <para>
          A list of authorized keys to be written to <literal>$HOME/.ssh/authorized_keys</literal>.
          See example below.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>

   </sect2>

   <sect2 xml:id="Configuration.Security.user_defaults">
    <title>ユーザの既定値</title>

    <para>
     The profile can specify a set of default values for new users like
     password expiration, initial group, home directory prefix, etc. Besides using them
     as default values for the users that are defined in the profile, &ay; will
     write those settings to <filename>/etc/default/useradd</filename> to be read for
     <literal>useradd</literal>.
    </para>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>group</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;group&gt;100&lt;/group&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default initial login group.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>groups</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;groups&gt;users&lt;/groups&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. List of additional groups.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>home</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;home&gt;/home&lt;/home&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. User's home directory prefix.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>expire</literal>
         </para>
        </entry>
        <entry>
         <para>
          Date
         </para>
<screen>&lt;expire&gt;2017-12-31&lt;/expire&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default password expiration date in <literal>YYYY-MM-DD</literal> format.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>inactive</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;inactive&gt;3&lt;/inactive&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Number of days after which an expired account is disabled.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>no_groups</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;no_groups config:type="boolean"&gt;true&lt;/no_groups&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Do not use secondary groups.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>shell</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;shell&gt;/usr/bin/fish&lt;/shell&gt;</screen>
        </entry>
        <entry>
         <para>
          Default login shell. <literal>/bin/bash</literal> is the default value. If you
          choose another one, make sure that it is installed (adding the corresponding
          package to the <literal>software</literal> section).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>skel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Path
         </para>
<screen>&lt;skel&gt;/etc/skel&lt;/skel&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Location of the files to be used as skel when adding a new
          user. You can find more information in <literal>man 8
          useradd</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>umask</literal>
         </para>
        </entry>
        <entry>
         <para>
          File creation mode mask
         </para>
<screen>&lt;umask&gt;022&lt;/umask&gt;</screen>
        </entry>
        <entry>
         <para>
          Set the file creation mode mask for the home directory. By default
          <literal>useradd</literal> will use <literal>022</literal>. Check <literal>man 8 useradd</literal>
          and <literal>man 1 umask</literal> for further information.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Configuration.Security.groups">
    <title>グループ</title>

    <para>
     A list of groups can be defined in <literal>&lt;groups&gt;</literal>
     as shown in the example.
    </para>

    <example>
     <title>グループの設定</title>
     <screen>&lt;groups config:type="list"&gt;
  &lt;group&gt;
    &lt;gid&gt;100&lt;gid&gt;
    &lt;groupname&gt;users&lt;/groupname&gt;
    &lt;userlist&gt;bob,alice&lt;/userlist&gt;
  &lt;/group&gt;
&lt;/groups&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>groupname</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;groupname&gt;users&lt;/groupname&gt;</screen>
        </entry>
        <entry>
         <para>
          Required. It should be a valid group name. Check <literal>man 8 groupadd</literal>
          if you are not sure.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>gid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number
         </para>
<screen>&lt;gid&gt;100&lt;/gid&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Group ID. It must be a unique and non-negative number.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>group_password</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;group_password&gt;password&lt;/group_password&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. The group's password can be written in plain text (not
          recommended) or in encrypted form. Check the <literal>encrypted</literal> to
          select the desired behavior.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>encrypted</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;encrypted config:type="boolean"&gt;true&lt;/encrypted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Indicates if the group's password in the profile is encrypted or not.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>userlist</literal>
         </para>
        </entry>
        <entry>
         <para>
          Users list
         </para>
<screen>&lt;userlist&gt;bob,alice&lt;/userlist&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. A list of users who belong to the group. User names must be separated by commas.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="Configuration.Security.login_settings">
    <title>ログインの設定</title>

    <para>Two special login settings can be enabled through an &ay; profile:
    autologin and password-less login. Both of them are disabled by default.</para>

    <example>
     <title>自動ログインおよびパスワード無しログインの有効化</title>
     <screen>&lt;login_settings&gt;
  &lt;autologin_user&gt;vagrant&lt;/autologin_user&gt;
  &lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login&gt;
&lt;/login_settings&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>password_less_login</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
<screen>&lt;password_less_login config:type="boolean"&gt;true&lt;/password_less_login&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Enables password-less login. It only affects graphical login.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autologin_user</literal>
         </para>
        </entry>
        <entry>
         <para>
          Text
         </para>
<screen>&lt;autologin_user&gt;alice&lt;/autologin_user&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Enables autologin for the given user.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

  </sect1>

  <sect1 xml:id="createprofile.scripts">
   <title>独自のユーザスクリプト</title>

   <para>
    By adding scripts to the auto-installation process you can customize the
    installation according to your needs and take control in different
    stages of the installation.
   </para>

   <para>
    In the auto-installation process, five types of scripts can be executed
    at different points in time during the installation:
   </para>

   <para>
    All scripts need to be in the &lt;scripts&gt; section.
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      <literal>pre-scripts</literal> (very early, before anything else
      really happens)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>postpartitioning-scripts</literal> (after partitioning and
      mounting to <filename>/mnt</filename> but before RPM installation)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>chroot-scripts</literal> (after the package installation,
      before the first boot)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>post-scripts</literal> (during the first boot of the
      installed system, no services running)
     </para>
    </listitem>
    <listitem>
     <para>
      <literal>init-scripts</literal> (during the first boot of the
      installed system, all services up and running)
     </para>
    </listitem>
   </itemizedlist>

   <sect2 xml:id="pre-install.scripts">
    <title>インストール前スクリプト</title>
    <para>
     Executed before &yast; does any real change to the system (before
     partitioning and package installation but after the hardware
     detection).
    </para>
    <para>
     You can use a pre-script to modify your control file and let &ay;
     reread it. Find your control file in
     <filename>/tmp/profile/autoinst.xml</filename>. Adjust the file and
     store the modified version in
     <filename>/tmp/profile/modified.xml</filename>. &ay; will read the
     modified file after the pre-script finishes.
    </para>
    <para>
     It is also possible to change the partitioning in your pre-script.
    </para>
    <note>
     <title>確認表示付きのインストール前スクリプトについて</title>
     <para>
      Pre-scripts are executed at an early stage of the installation. This
      means if you have requested to confirm the installation, the
      pre-scripts will be executed before the confirmation screen shows up
      (<literal>profile/install/general/mode/confirm</literal>).
     </para>
    </note>
    <note>
     <title>インストール前スクリプトと zypper について</title>
     <para>
      To call <emphasis>zypper</emphasis> in the pre-install
      script you will need to set the environment variable <emphasis>ZYPP_LOCKFILE_ROOT="/var/run/autoyast"</emphasis>
      to prevent conflicts with the running &yast; process.
     </para>
    </note>
    <para>
     Pre-Install Script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;pre-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/pre-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="postpartitioning-install.scripts">
    <title>パーティション設定後スクリプト</title>
    <para>
     Executed after &yast; has done the partitioning and written
     <filename>/etc/fstab</filename>. The empty system is already mounted to
     <filename>/mnt</filename>.
    </para>
    <para>
     Post-partitioning script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;postpartitioning-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/postpartitioning-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="chroot.scripts">
    <title>chroot 環境スクリプト</title>
    <para>
     Chroot scripts are executed before the machine reboots for the first
     time. You can execute chroot scripts before the installation chroots
     into the installed system and configures the boot loader or you can
     execute a script after the chroot into the installed system has
     happened (look at the <literal>chrooted</literal> parameter for that).
    </para>
    <para>
     Chroot Environment script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      ...
    &lt;/script&gt;
  &lt;/chroot-scripts&gt;
&lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="post-install.scripts">
    <title>インストール後スクリプト</title>
    <para>
     These scripts are executed after &ay; has completed the system
     configuration and after it has booted the system for the first time.
    </para>
    <para>
     Post-install script elements must be placed as follows:
    </para>
<screen>&lt;scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/post-scripts&gt;
  &lt;/scripts&gt;</screen>
   </sect2>

   <sect2 xml:id="init.scripts">
    <title>準備スクリプト</title>
    <para>
     These scripts are executed when &yast; has finished, during the
     initial boot process after the network has been initialized. These
     final scripts are executed using
     <filename>/usr/lib/YaST2/bin/autoyast-initscripts.sh</filename> and are
     executed only once. Init scripts are configured using the tag
     <emphasis>init-scripts</emphasis>.
    </para>
    <para>
     The following elements must be between the
     &lt;scripts&gt;&lt;init-scripts
     config:type="list"&gt;&lt;script&gt; ...
     &lt;/script&gt;&lt;/init-scripts&gt;...&lt;/scripts&gt;
     tags
    </para>
    <table>
     <title>準備スクリプトの XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>location</literal>
         </para>
        </entry>
        <entry>
         <para>
          Define a location from where the script gets fetched. Locations
          can be the same as for the profile (HTTP, FTP, NFS, etc.).
         </para>
<screen>&lt;location
&gt;http://10.10.0.1/myInitScript.sh&lt;/location&gt;</screen>
        </entry>
        <entry>
         <para>
          Either &lt;location&gt; or &lt;source&gt; must be
          defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The script itself (source code), encapsulated in a CDATA tag. If
          you do not want to put the whole shell script into the XML
          profile, use the location parameter.
         </para>
<screen>&lt;source&gt;
&lt;![CDATA[
echo "Testing the init script" &gt;
/tmp/init_out.txt
]]&gt;
&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          Either &lt;location&gt; or &lt;source&gt; must be
          defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>filename</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script. It will be stored in a temporary
          directory under <filename>/tmp</filename>
         </para>
<screen>&lt;filename&gt;mynitScript5.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional in case you only have a single init script. The default
          name (<filename>init-scripts</filename>) is used in this case. If
          having specified more than one init script, you must set a unique
          name for each script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun</literal>
         </para>
        </entry>
        <entry>
         <para>
          Normally, a script is only run once, even if you use <literal>ayast_setup</literal>
          to run an XML file multiple times. Change this default behavior by
          setting this boolean to <literal>true</literal>.
         </para>
<screen>&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is <literal>false</literal> (scripts only run
          once).
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     When added to the control file manually, scripts need to be included in
     a <emphasis>CDATA</emphasis> element to avoid confusion with the file
     syntax and other tags defined in the control file.
    </para>
   </sect2>

   <sect2 xml:id="scripts.syntax">
    <title>スクリプトの XML 表記</title>
    <para>
     The XML elements described below can be used for all the script types
     described above, except for the <literal>chrooted</literal> element,
     which can only be used in chroot scripts.
    </para>
    <table>
     <title>スクリプトの XML 表記</title>
     <tgroup cols="3">
      <colspec colwidth="1*"/>
      <colspec colwidth="3*"/>
      <colspec colwidth="2*"/>
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>location</literal>
         </para>
        </entry>
        <entry>
         <para>
          Define a location from where the script gets fetched. Locations
          can be the same as for the control file (HTTP, FTP, NFS, etc.).
         </para>
<screen>&lt;location
&gt;http://10.10.0.1/myPreScript.sh&lt;/location&gt;</screen>
        </entry>
        <entry>
         <para>
          Either <literal>location</literal> or <literal>source</literal>
          must be defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The script itself (source code), encapsulated in a CDATA tag. If
          you do not want to put the whole shell script into the XML control
          file, refer to the location parameter.
         </para>
<screen>&lt;source&gt;
&lt;![CDATA[
echo "Testing the pre script" &gt; /tmp/pre-script_out.txt
]]&gt;
&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          Either <literal>location</literal> or <literal>source</literal>
          must be defined.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>interpreter</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify the interpreter that must be used for the script.
          Supported options are <literal>shell</literal> and
          <literal>perl</literal>.
         </para>
<screen>&lt;interpreter&gt;perl&lt;/interpreter&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is <literal>shell</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>file name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script. It will be stored in a temporary
          directory under <filename>/tmp</filename>.
         </para>
<screen>&lt;filename&gt;myPreScript5.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is the type of the script (pre-scripts in this
          case). If you have more than one script, you should define
          different names for each script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this boolean is <literal>true</literal>, output and error
          messages of the script (STDOUT and STDERR) will be shown in a
          pop-up. The user needs to confirm them via the OK button.
         </para>
<screen>&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback_type</literal>
         </para>
        </entry>
        <entry>
         <para>
          This can be <literal>message</literal>, <literal>warning</literal>
          or <literal>error</literal>. Set the timeout for these pop-ups in
          the &lt;report&gt; section.
         </para>
<screen>&lt;feedback_type&gt;warning&lt;/feedback_type&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; if missing, an always-blocking pop-up is used.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>debug</literal>
         </para>
        </entry>
        <entry>
         <para>
          If this is <literal>true</literal>, every single line of a shell
          script is logged. Perl scripts are run with warnings turned on.
         </para>
<screen>&lt;debug config:type="boolean"&gt;true&lt;/debug&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is <literal>true</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>notification</literal>
         </para>
        </entry>
        <entry>
         <para>
          This text will be shown in a pop-up for the time the script is
          running in the background.
         </para>
<screen>&lt;notification&gt;Please wait while script is running...&lt;/notification&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; if not configured, no notification pop-up will be shown.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>param-list</literal>
         </para>
        </entry>
        <entry>
         <para>
          It is possible to specify parameters given to the script being
          called. You may have more than one <literal>param</literal> entry.
          They are concatenated by a single space character on the script
          command line. If any shell quoting should be necessary (for
          example to protect embedded spaces) you need to include this.
         </para>
<screen>&lt;param-list&gt;
  &lt;param&gt;par1&lt;/param&gt;
  &lt;param&gt;par2 par3&lt;/param&gt;
  &lt;param&gt;"par4.1 par4.2"&lt;/param&gt;
&lt;/param-list&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; if not configured, no parameters get passed to script.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun</literal>
         </para>
        </entry>
        <entry>
         <para>
          A script is only run once. Even if you use
          <literal>ayast</literal>_setup to run an XML file multiple times,
          the script is only run once. Change this default behavior by
          setting this boolean to <literal>true</literal>.
         </para>
<screen>&lt;rerun config:type="boolean"&gt;true&lt;/rerun&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is <literal>false</literal>, meaning that scripts
          only run once.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>chrooted</literal>
         </para>
        </entry>
        <entry>
         <para>
          During installation, the new system is mounted at <filename>/mnt</filename>.
          If this parameter is set to <literal>false</literal>, &ay; does not
          run <command>chroot</command> and does not install the boot loader
          at this stage. If the parameter is set to <literal>true</literal>, &ay;
          performs a <command>chroot</command> into <filename>/mnt</filename> and
          installs the boot loader. The result is that if you want to change
          anything in the newly-installed system, you no longer need to use the
          <filename>/mnt</filename> prefix.
         </para>
<screen>&lt;chrooted config:type="boolean"
&gt;true&lt;/chrooted&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional; default is <literal>false</literal>. This option is only
          available for chroot environment scripts.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="script_examples">
    <title>スクリプト例</title>
    <example>
     <title>スクリプト設定</title>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
&lt;scripts&gt;
  &lt;chroot-scripts config:type="list"&gt;
    &lt;script&gt;
      &lt;chrooted config:type="boolean"&gt;true&lt;/chrooted&gt;
      &lt;filename&gt;chroot.sh&lt;/filename&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Testing chroot (chrooted) scripts"
ls
]]&gt;
      &lt;/source&gt;
    &lt;/script&gt;
    &lt;script&gt;
      &lt;filename&gt;chroot.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Testing chroot scripts"
df
cd /mnt
ls
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/chroot-scripts&gt;
    &lt;post-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;post.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh

echo "Running Post-install script"
systemctl start portmap
mount -a 192.168.1.1:/local /mnt
cp /mnt/test.sh /tmp
umount /mnt
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;post.pl&lt;/filename&gt;
        &lt;interpreter&gt;perl&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/usr/bin/perl
print "Running Post-install script";

]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/post-scripts&gt;
    &lt;pre-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;location&gt;http://192.168.1.1/profiles/scripts/prescripts.sh&lt;/location&gt;
      &lt;/script&gt;
      &lt;script&gt;
        &lt;filename&gt;pre.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;source&gt;&lt;![CDATA[
#!/bin/sh
echo "Running pre-install script"
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/pre-scripts&gt;
    &lt;postpartitioning-scripts config:type="list"&gt;
      &lt;script&gt;
        &lt;filename&gt;postpart.sh&lt;/filename&gt;
        &lt;interpreter&gt;shell&lt;/interpreter&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
        &lt;source&gt;&lt;![CDATA[
touch /mnt/testfile
echo Hi
]]&gt;
        &lt;/source&gt;
      &lt;/script&gt;
    &lt;/postpartitioning-scripts&gt;
  &lt;/scripts&gt;
&lt;/profile&gt;</screen>
    </example>
    <para>
     After installation is finished, the scripts and the output logs can be
     found in the directory <filename>/var/adm/autoinstall</filename>. The
     scripts are located in the subdirectory <filename>scripts</filename>
     and the output logs in the <filename>log</filename> directory.
    </para>
    <para>
     The log consists of the output produced when executing the shell
     scripts using the following command:
    </para>
<screen>/bin/sh -x <replaceable>SCRIPT_NAME</replaceable> 2&amp;&gt;/var/adm/autoinstall/logs/<replaceable>SCRIPT_NAME</replaceable>.log</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="createprofile.sysconfig">
   <title>システム変数 (sysconfig)</title>

   <para>
    Using the sysconfig resource, it is possible to define configuration
    variables in the sysconfig repository
    (<filename>/etc/sysconfig</filename>) directly. Sysconfig variables,
    offer the possibility to fine-tune many system components and
    environment variables exactly to your needs.
   </para>

   <para>
    The following example shows how a variable can be set using the
    sysconfig resource.
   </para>

   <example>
    <title>sysconfig の設定</title>
<screen>&lt;sysconfig config:type="list" &gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;XNTPD_INITIAL_NTPDATE&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/xntp&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;ntp.host.com&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;HTTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
  &lt;sysconfig_entry&gt;
    &lt;sysconfig_key&gt;FTP_PROXY&lt;/sysconfig_key&gt;
    &lt;sysconfig_path&gt;/etc/sysconfig/proxy&lt;/sysconfig_path&gt;
    &lt;sysconfig_value&gt;proxy.host.com:3128&lt;/sysconfig_value&gt;
  &lt;/sysconfig_entry&gt;
&lt;/sysconfig&gt;</screen>
    <para>
     Both relative and absolute paths can be provided. If no absolute path
     is given, it is treated as a sysconfig file under the
     <filename>/etc/sysconfig</filename> directory.
    </para>
   </example>
  </sect1>
  <sect1 xml:id="createprofile.completeconf">
   <title>設定ファイルの直接追加</title>

   <para>
    For many applications and services you may have a
    configuration file which should be copied to the appropriate location on
    the installed system. For example, if you are installing a Web server, you may have a server configuration file
    (<filename>httpd.conf</filename>).
   </para>

   <para>
    Using this resource, you can embed the file into the control file by
    specifying the final path on the installed system. &yast; will copy
    this file to the specified location.
   </para>

   <para>
    This feature requires the <package>autoyast2</package> package to be
    installed. If the package is missing, &ay; will automatically install the
    package if it is missing.
   </para>

   <para>
    You can specify the <literal>file_location</literal> where the file
    should be retrieved from. This can also be a location on the network
    such as an HTTP server:
    <literal>&lt;file_location&gt;http://my.server.site/issue&lt;/file_location&gt;</literal>.
   </para>

   <para>
    You can create directories by specifying a <literal>file_path</literal>
    that ends with a slash.
   </para>

   <example>
    <title>インストール済みのシステムに対するファイルの出力</title>
<screen>&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/apache2/httpd.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
  &lt;/file&gt;
  &lt;file&gt;
    &lt;file_path&gt;/mydir/a/b/c/&lt;/file_path&gt; &lt;!-- create directory --&gt;
  &lt;/file&gt;
&lt;/files&gt;</screen>
   </example>

   <para>
    A more advanced example is shown below. This configuration will create a
    file using the content supplied in <literal>file_contents</literal> and
    change the permissions and ownership of the file. After the file has
    been copied to the system, a script is executed. This can be used to
    modify the file and prepare it for the client's environment.
   </para>

   <example>
    <title>インストール済みのシステムに対するファイルの出力</title>
<screen>&lt;files config:type="list"&gt;
  &lt;file&gt;
    &lt;file_path&gt;/etc/someconf.conf&lt;/file_path&gt;
    &lt;file_contents&gt;

&lt;![CDATA[
some content
]]&gt;

    &lt;/file_contents&gt;
    &lt;file_owner&gt;&exampleuser_plain;.users&lt;/file_owner&gt;
    &lt;file_permissions&gt;444&lt;/file_permissions&gt;
    &lt;file_script&gt;
      &lt;interpreter&gt;shell&lt;/interpreter&gt;
      &lt;source&gt;

&lt;![CDATA[
#!/bin/sh

echo "Testing file scripts" &gt;&gt; /etc/someconf.conf
df
cd /mnt
ls
]]&gt;

      &lt;/source&gt;
    &lt;/file_script&gt;
  &lt;/file&gt;
&lt;/files&gt;</screen>
   </example>
  </sect1>
  <sect1 xml:id="CreateProfile.Ask">
   <title>インストール時のユーザへの値の確認</title>

   <para>
    You have the option to let the user decide the values of specific parts
    of the control file during the installation. If you use this feature, a
    pop-up will ask the user to enter a specific part of the control file
    during installation. If you want a full auto installation, but the user
    should set the password of the local account, you can do this via the
    <literal>ask</literal> directive in the control file.
   </para>

   <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>

<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      ...
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>

   <table>
    <title>ユーザへの値確認: XML 表記</title>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
       <entry>
        <para>
         Comment
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>question</literal>
        </para>
       </entry>
       <entry>
        <para>
         The question you want to ask the user.
        </para>
<screen>&lt;question&gt;Enter the LDAP server&lt;/question&gt;</screen>
       </entry>
       <entry>
        <para>
         The default value is the path to the element (the path often looks
         strange, so we recommend entering a question).
        </para>
        <remark>emap 2011-11-04: not sure I understand this.</remark>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>default</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set a preselection for the user. A text entry will be filled out
         with this value. A check box will be true or false and a selection
         will have the given value preselected.
        </para>
<screen>&lt;default&gt;dc=suse,dc=de&lt;/default&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>help</literal>
        </para>
       </entry>
       <entry>
        <para>
         An optional help text that is shown on the left side of the
         question.
        </para>
<screen>&lt;help&gt;Enter the LDAP server address.&lt;/help&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>title</literal>
        </para>
       </entry>
       <entry>
        <para>
         An optional title that is shown above the questions.
        </para>
<screen>&lt;title&gt;LDAP server&lt;/title&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>type</literal>
        </para>
       </entry>
       <entry>
        <para>
         The type of the element you want to change. Possible values are
         <literal>symbol</literal>, <literal>boolean</literal>,
         <literal>string</literal> and <literal>integer</literal>. The file
         system in the partition section is a symbol, while the
         <literal>encrypted</literal> element in the user configuration is a
         boolean. You can see the type of that element if you look in your
         control file at the <literal>config:type="...."</literal>
         attribute. You can also use <literal>static_text</literal> as type.
         A <literal>static_text</literal> is a text that does not
         require any user input and can be used to show information not
         included in the help text.
        </para>
<screen>&lt;type&gt;symbol&lt;/type&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>string</literal>. If type is
         <literal>symbol</literal>, you must provide the selection element
         too (see below).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>password</literal>
        </para>
       </entry>
       <entry>
        <para>
         If this boolean is set to <literal>true</literal>, a password
         dialog pops up instead of a simple text entry. Setting this to
         <literal>true</literal> only makes sense if <literal>type</literal>
         is string.
        </para>
<screen>&lt;password config:type="boolean"&gt;true&lt;/password&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>false</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>pathlist</literal>
        </para>
       </entry>
       <entry>
        <para>
         A list of <literal>path</literal> elements. A path is a comma
         separated list of elements that describes the path to the element
         you want to change. For example, the LDAP server element can be
         found in the control file in the
         <literal>&lt;ldap&gt;&lt;ldap_server&gt;</literal> section.
         So if you want to change that value, you need to set the path to
         <literal>ldap,ldap_server</literal>.
        </para>
        <screen>&lt;pathlist config:type="list"&gt;
  &lt;path&gt;networking,dns,hostname&lt;/path&gt;
  &lt;path&gt;...&lt;/path&gt;
&lt;/pathlist&gt;
        </screen>
        <para>To change the
         password of the first user in the control file, you need to set the
         path to <literal>users,0,user_password</literal>. The
         <literal>0</literal> indicates the first user in the &lt;users
         config:type="list"&gt; list of users in the control file.
         <literal>1</literal> would be the second one, and so on.
        </para>
        <screen>&lt;users config:type="list"&gt;
  &lt;user&gt;
    &lt;username&gt;root&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
  &lt;user&gt;
    &lt;username&gt;&exampleuser_plain;&lt;/username&gt;
    &lt;user_password&gt;password to change&lt;/user_password&gt;
    &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
  &lt;/user&gt;
&lt;/users&gt;
        </screen>

       </entry>
       <entry>
        <para>
         This information is optional but you should at least provide
         <literal>path</literal> or <literal>file</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>file</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can store the answer to a question in a file, to use it in one
         of your scripts later. If you ask during
         <literal>stage=initial</literal> and you want to use the answer in
         stage&nbsp;2, then you need to copy the answer-file in a chroot script
         that is running as <literal>chrooted=false</literal>. Use the
         command: <command>cp /tmp/my_answer /mnt/tmp/</command>. The reason
         is that <filename>/tmp</filename> in stage&nbsp;1 is in the RAM disk
         and will be lost after the reboot, but the installed system is
         already mounted at <filename>/mnt/</filename>.
        </para>
<screen>&lt;file&gt;/tmp/answer_hostname&lt;/file&gt;</screen>
       </entry>
       <entry>
        <para>
         This information is optional, but you should at least provide
         <literal>path</literal> or <literal>file</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         stage
        </para>
       </entry>
       <entry>
        <para>
         Stage configures the installation stage in which the question pops
         up. You can set this value to <literal>cont</literal> or
         <literal>initial</literal>. <literal>initial</literal> means the
         pop-up comes up very early in the installation, shortly after the
         pre-script has run. <literal>cont</literal> means, that the dialog
         with the question comes after the first reboot when the system
         boots for the very first time. Questions you answer during the
         <literal>initial</literal> stage will write their answer into the
         control file on the hard disk. You should know that if you enter
         clear text passwords during <literal>initial</literal>. Of course
         it does not make sense to ask for the file system to use during the
         <literal>cont</literal> phase. The hard disk is already partitioned
         at that stage and the question will have no effect.
        </para>
<screen>&lt;stage&gt;cont&lt;/stage&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional. The default is <literal>initial</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>selection</literal>
        </para>
       </entry>
       <entry>
        <para>
         The selection element contains a list of <literal>entry</literal>
         elements. Each entry represents a possible option for the user to
         choose. The user cannot enter a value in a text box, but they can
         choose from a list of values.
        </para>
<screen>&lt;selection config:type="list"&gt;
  &lt;entry&gt;
    &lt;value&gt;
        btrfs
    &lt;/value&gt;
    &lt;label&gt;
        Btrfs File System
    &lt;/label&gt;
  &lt;/entry&gt;
  &lt;entry&gt;
    &lt;value&gt;
        ext3
    &lt;/value&gt;
    &lt;label&gt;
        Extended3 File System
    &lt;/label&gt;
  &lt;/entry&gt;
&lt;/selection&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional for <literal>type=string</literal>, not possible for
         <literal>type=boolean</literal> and mandatory for
         <literal>type=symbol</literal>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>dialog</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can ask more than one question per dialog. To do so, specify
         the dialog-id with an integer. All questions with the same
         dialog-id belong to the same dialog. The dialogs are sorted by the
         id too.
        </para>
<screen>&lt;dialog config:type="integer"&gt;3&lt;/dialog&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>element</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can have more than one question per dialog. To make that
         possible you need to specify the <literal>element-id</literal> with an
         integer. The questions in a dialog are sorted by ID.
        </para>
<screen>&lt;element config:type="integer"&gt;1&lt;/element&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional (see dialog).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>width</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can increase the default width of the dialog. If there are multiple
         width specifications per dialog, the largest one is used. The
         number is roughly equivalent to the number of characters.
        </para>
<screen>&lt;width config:type="integer"&gt;50&lt;/width&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>height</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can increase the default height of the dialog. If there are
         multiple height specifications per dialog, the largest one is used. The
         number is roughly equivalent to the number of lines.
        </para>
<screen>&lt;height config:type="integer"&gt;15&lt;/height&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>frametitle</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can have more than one question per dialog. Each question on a
         dialog has a frame that can have a frame title, a small caption for
         each question. You can put multiple elements into one frame. They
         need to have the same frame title.
        </para>
<screen>&lt;frametitle&gt;User data&lt;/frametitle&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional; default is no frame title.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>script</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can run scripts after a question has been answered. See the
         table below for detailed instructions about scripts.
        </para>
<screen>&lt;script&gt;...&lt;/script&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional; default is no script.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>ok_label</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can change the label on the <guimenu>Ok</guimenu> button. The
         last element that specifies the label for a dialog wins.
        </para>
<screen>&lt;ok_label&gt;Finish&lt;/ok_label&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>back_label</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can change the label on the <guimenu>Back</guimenu> button. The
         last element that specifies the label for a dialog wins.
        </para>
<screen>&lt;back_label&gt;change values&lt;/back_label&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>timeout</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can specify an integer here that is used as timeout in seconds.
         If the user does not answer the question before the timeout, the
         default value is taken as answer. When the user touches or changes
         any widget in the dialog, the timeout is turned off and the dialog
         needs to be confirmed via <guimenu>Ok</guimenu>.
        </para>
<screen>&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional; a missing value is interpreted as <literal>0</literal>,
         which means that there is no timeout.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>default_value_script</literal>
        </para>
       </entry>
       <entry>
        <para>
         You can run scripts to set the default value for a question (see
         <xref linkend="CreateProfile.Ask.default_value"/> for detailed
         instructions about default value scripts). This feature is useful
         if you can <literal>calculate</literal> a default value, especially
         in combination with the <literal>timeout</literal> option.
        </para>
<screen>&lt;default_value_script&gt;...&lt;/default_value_script&gt;</screen>
       </entry>
       <entry>
        <para>
         Optional; default is no script.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>

   <sect2 xml:id="CreateProfile.Ask.default_value">
    <title>既定値スクリプト</title>
    <para>
     You can run scripts to set the default value for a question. This
     feature is useful if you can <literal>calculate</literal> a default
     value, especially in combination with the <literal>timeout</literal>
     option.
    </para>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;default_value_script&gt;
        ...
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <table>
     <title>既定値スクリプト: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The source code of the script. Whatever you
          <command>echo</command> to STDOUT will be used as default value
          for the ask-dialog. If your script has an exit code other than 0,
          the normal default element is used. Take care you use
          <command>echo -n</command> to suppress the <literal>\n</literal>
          and that you echo reasonable values and not <quote>okay</quote>
          for a boolean
         </para>
<screen>&lt;source&gt;...&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          This value is required, otherwise nothing would be executed.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>interpreter</literal>
         </para>
        </entry>
        <entry>
         <para>
          The interpreter to use.
         </para>
<screen>&lt;interpreter&gt;perl&lt;/interpreter&gt;</screen>
        </entry>
        <entry>
         <para>
          The default value is <literal>shell</literal>. You can also set
          <filename>/bin/myinterpreter</filename> as value.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.Ask.script">
    <title>スクリプト</title>
    <para>
     You can run scripts after a question has been answered.
    </para>
    <para>下記のような XML 構造内に、必要な要素を追加していきます:</para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        ...
      &lt;/script&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <table>
     <title>スクリプト: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>file name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The file name of the script.
         </para>
<screen>&lt;filename&gt;my_ask_script.sh&lt;/filename&gt;</screen>
        </entry>
        <entry>
         <para>
          The default is ask_script.sh
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>source</literal>
         </para>
        </entry>
        <entry>
         <para>
          The source code of the script. Together with
          <literal>rerun_on_error</literal> activated, you check the value
          that was entered for sanity. Your script can create a file
          <filename>/tmp/next_dialog</filename> with a dialog id specifying
          the next dialog &ay; will raise. A value of -1 terminates the
          ask sequence. If that file is not created, &ay; will run the
          dialogs in the normal order (since 11.0 only).
         </para>
<screen>&lt;source&gt;...&lt;/source&gt;</screen>
        </entry>
        <entry>
         <para>
          This value is required, otherwise nothing would be executed.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>environment</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that passes the value of the answer to the question as
          an environment variable to the script. The variable is named
          <envar>VAL</envar>.
         </para>
<screen>&lt;environment config:type="boolean"&gt;true&lt;/environment&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. Default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>feedback</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that turns on feedback for the script execution. STDOUT
          will be displayed in a pop-up window that must be confirmed after
          the script execution.
         </para>
<screen>&lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>debug</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that turns on debugging for the script execution.
         </para>
<screen>&lt;debug config:type="boolean"&gt;true&lt;/debug&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>true</literal>. This value needs
          <literal>feedback</literal> to be turned on, too.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>rerun_on_error</literal>
         </para>
        </entry>
        <entry>
         <para>
          A boolean that keeps the dialog open until the script has an exit
          code of 0 (zero). So you can parse and check the answers the user
          gave in the script and display an error with the
          <literal>feedback</literal> option.
         </para>
<screen>&lt;rerun_on_error config:type="boolean"&gt;true&lt;/rerun_on_error&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional, default is <literal>false</literal>. This value should
          be used together with the feedback option.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     Below you can see an example of the usage of the <literal>ask</literal>
     feature.
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;ldap,ldap_server&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;stage&gt;cont&lt;/stage&gt;
      &lt;help&gt;Choose your server depending on your department&lt;/help&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap1.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for development&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;ldap2.mydom.de&lt;/value&gt;
          &lt;label&gt;LDAP for sales&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;default&gt;ldap2.mydom.de&lt;/default&gt;
      &lt;default_value_script&gt;
        &lt;source&gt; &lt;![CDATA[
echo -n "ldap1.mydom.de"
]]&gt;
        &lt;/source&gt;
      &lt;/default_value_script&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
    &lt;ask&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;partitioning,0,partitions,0,filesystem&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;File System&lt;/question&gt;
      &lt;type&gt;symbol&lt;/type&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;ext4&lt;/value&gt;
          &lt;label&gt;default File System (recommended)&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value config:type="symbol"&gt;ext3&lt;/value&gt;
          &lt;label&gt;Fallback File System&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <para>
     The following example shows a to choose between &ay; control files.
     &ay; will read the <filename>modified.xml</filename> file again
     after the ask-dialogs are done. This way you can fetch a complete new
     control file.
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;selection config:type="list"&gt;
        &lt;entry&gt;
          &lt;value&gt;part1.xml&lt;/value&gt;
          &lt;label&gt;Simple partitioning&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part2.xml&lt;/value&gt;
          &lt;label&gt;encrypted /tmp&lt;/label&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
          &lt;value&gt;part3.xml&lt;/value&gt;
          &lt;label&gt;LVM&lt;/label&gt;
        &lt;/entry&gt;
      &lt;/selection&gt;
      &lt;title&gt;XML Profile&lt;/title&gt;
      &lt;question&gt;Choose a profile&lt;/question&gt;
      &lt;stage&gt;initial&lt;/stage&gt;
      &lt;default&gt;part1.xml&lt;/default&gt;
      &lt;script&gt;
        &lt;filename&gt;fetch.sh&lt;/filename&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;
&lt;![CDATA[
wget http://10.10.0.162/$VAL -O /tmp/profile/modified.xml 2&gt;/dev/null
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
      &lt;/script&gt;
    &lt;/ask&gt;tion&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
    <para>
     You can verify the answer of a question with a script like this:
    </para>
<screen>&lt;general&gt;
  &lt;ask-list config:type="list"&gt;
    &lt;ask&gt;
      &lt;script&gt;
        &lt;filename&gt;my.sh&lt;/filename&gt;
        &lt;rerun_on_error config:type="boolean"&gt;true&lt;/rerun_on_error&gt;
        &lt;environment config:type="boolean"&gt;true&lt;/environment&gt;
        &lt;source&gt;&lt;![CDATA[
if [ "$VAL" = "myhost" ]; then
    echo "Illegal Hostname!";
    exit 1;
fi
exit 0
]]&gt;
        &lt;/source&gt;
        &lt;debug config:type="boolean"&gt;false&lt;/debug&gt;
        &lt;feedback config:type="boolean"&gt;true&lt;/feedback&gt;
      &lt;/script&gt;
      &lt;dialog config:type="integer"&gt;0&lt;/dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;pathlist config:type="list"&gt;
        &lt;path&gt;networking,dns,hostname&lt;/path&gt;
      &lt;/pathlist&gt;
      &lt;question&gt;Enter Hostname&lt;/question&gt;
      &lt;default&gt;enter your hostname here&lt;/default&gt;
    &lt;/ask&gt;
  &lt;/ask-list&gt;
&lt;/general&gt;</screen>
   </sect2>
  </sect1>
<!-- {{{ Kdump -->
  <sect1 xml:id="CreateProfile.kdump">
   <title>カーネルダンプ</title>

   <note>
    <title>提供可否について</title>
    <para>この機能は &zseries; (s390x) アーキテクチャでは使用できません。</para>
   </note>

   <para>
    With Kdump the system can create crashdump files if the whole kernel
    crashes. Crash dump files contain the memory contents while the system
    crashed. Such core files can be analyzed later by support or a (kernel)
    developer to find the reason for the system crash. Kdump is mostly
    useful for servers where you cannot easily reproduce such crashes but it
    is important to get the problem fixed.
   </para>

   <para>
    There is a downside to this. Enabling Kdump requires between 64 MB and 128 MB of
    additional system RAM reserved for Kdump in case the system crashes and the dump needs to be generated.
   </para>

   <para>
    This section only describes how to set up Kdump with &ay;. It does
    not describe how Kdump works. For details, refer to the kdump(7) manual
    page.
   </para>

   <para>
    The following example shows a general Kdump configuration.
   </para>

   <example>
    <title>Kdump の設定</title>
<screen>&lt;kdump&gt;
  &lt;!-- memory reservation --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel&gt;256M-:64M&lt;/crash_kernel&gt;
  &lt;general&gt;

    &lt;!-- dump target settings --&gt;
    &lt;KDUMP_SAVEDIR&gt;ftp://stravinsky.suse.de/incoming/dumps&lt;/KDUMP_SAVEDIR&gt;
    &lt;KDUMP_COPY_KERNEL&gt;true&lt;/KDUMP_COPY_KERNEL&gt;
    &lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;
    &lt;KDUMP_KEEP_OLD_DUMPS&gt;5&lt;/KDUMP_KEEP_OLD_DUMPS&gt;

    &lt;!-- filtering and compression --&gt;
    &lt;KDUMP_DUMPFORMAT&gt;compressed&lt;/KDUMP_DUMPFORMAT&gt;
    &lt;KDUMP_DUMPLEVEL&gt;1&lt;/KDUMP_DUMPLEVEL&gt;

    &lt;!-- notification --&gt;
    &lt;KDUMP_NOTIFICATION_TO&gt;&exampleuser_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_TO&gt;
    &lt;KDUMP_NOTIFICATION_CC&gt;spam@&exampledomain; devnull@&exampledomain;&lt;/KDUMP_NOTIFICATION_CC&gt;
    &lt;KDUMP_SMTP_SERVER&gt;&mailname;&lt;/KDUMP_SMTP_SERVER&gt;
    &lt;KDUMP_SMTP_USER&gt;&lt;/KDUMP_SMTP_USER&gt;
    &lt;KDUMP_SMTP_PASSWORD&gt;&lt;/KDUMP_SMTP_PASSWORD&gt;

    &lt;!-- kdump kernel --&gt;
    &lt;KDUMP_KERNELVER&gt;&lt;/KDUMP_KERNELVER&gt;
    &lt;KDUMP_COMMANDLINE&gt;&lt;/KDUMP_COMMANDLINE&gt;
    &lt;KDUMP_COMMANDLINE_APPEND&gt;&lt;/KDUMP_COMMANDLINE_APPEND&gt;

    &lt;!-- expert settings --&gt;
    &lt;KDUMP_IMMEDIATE_REBOOT&gt;yes&lt;/KDUMP_IMMEDIATE_REBOOT&gt;
    &lt;KDUMP_VERBOSE&gt;15&lt;/KDUMP_VERBOSE&gt;
    &lt;KEXEC_OPTIONS&gt;&lt;/KEXEC_OPTIONS&gt;
  &lt;/general&gt;
&lt;/kdump&gt; </screen>
   </example>

<!-- {{{ Memory Reservation -->

   <sect2 xml:id="CreateProfile.kdump.reservation">
    <title>メモリ予約</title>
    <para>
     The first step is to reserve memory for Kdump at boot-up. Because the
     memory must be reserved very early during the boot process, the
     configuration is done via a kernel command line parameter called
     <literal>crashkernel</literal>. The reserved memory will be used to
     load a second kernel which will be executed without rebooting if the
     first kernel crashes. This second kernel has a special initrd, which
     contains all programs necessary to save the dump over the network or to
     disk, send a notification e-mail, and finally reboot.
    </para>
    <para>
     To reserve memory for Kdump, specify the <literal>amount</literal>
     (such as <literal>64M</literal> to reserve 64 MB of memory from the
     RAM) and the <literal>offset</literal>. The syntax is
     <literal>crashkernel=AMOUNT@OFFSET</literal>. The kernel can
     auto-detect the right offset (except for the &xen; hypervisor, where
     you need to specify <literal>16M</literal> as offset). The amount of
     memory that needs to be reserved depends on architecture and main
     memory. Refer to
     <xref linkend="cha.tuning.kdump.basic.manual"/> for recommendations on
     the amount of memory to reserve for Kdump.
    </para>
    <para>
     You can also use the extended command line syntax to specify the amount
     of reserved memory depending on the System RAM. That is useful if you
     share one &ay; control file for multiple installations or if you
     often remove or install memory on one machine. The syntax is:
    </para>
<screen>BEGIN_RANGE_1-END_RANGE_1:AMOUNT_1,BEGIN_RANGE_2-END_RANGE_2:AMOUNT_2@OFFSET</screen>
    <para>
     <literal>BEGIN_RANGE_1</literal> is the start of the first memory range
     (for example: <literal>0M</literal>) and <literal>END_RANGE_1</literal>
     is the end of the first memory range (can be empty in case
     <literal>infinity</literal> should be assumed) and so on. For example,
     <literal>256M-2G:64M,2G-:128M</literal> reserves 64 MB of
     crashkernel memory if the system has between 256 MB and 2 GB RAM and
     reserves 128 MB of crashkernel memory if the system has more than 2 GB
     RAM.
    </para>
    <para>
     On the other hand, it is possible to specify multiple values for the
     <literal>crashkernel</literal> parameter. For example, when you need to
     reserve different segments of low and high memory, use values like
     <literal>72M,low</literal> and <literal>256M,high</literal>:
    </para>
    <example>
    <title>複数の値を設定した Kdump メモリ予約</title>
<screen>
&lt;kdump&gt;
  &lt;!-- memory reservation (high and low) --&gt;
  &lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;
  &lt;crash_kernel config:type="list"&gt;
    &lt;listentry&gt;72M,low&lt;/listentry&gt;
    &lt;listentry&gt;256M,high&lt;/listentry&gt;
  &lt;/crash_kernel&gt;
&lt;/kdump&gt; </screen>
   </example>
    <para>
     The following table shows the settings necessary to reserve memory:
    </para>
    <table>
     <title>Kdump メモリ予約設定: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>add_crash_kernel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Set to <literal>true</literal> if memory should be reserved and
          Kdump enabled.
         </para>
<screen>&lt;add_crash_kernel config:type="boolean"&gt;true&lt;/add_crash_kernel&gt;</screen>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>crash_kernel</literal>
         </para>
        </entry>
        <entry>
         <para>
          Use the syntax of the crashkernel command line as discussed above.
         </para>
<screen>&lt;crash_kernel&gt;256M:64M&lt;/crash_kernel&gt;</screen>
        <para>A list of values is also supported.</para>
<screen>&lt;crash_kernel config:type="list"&gt;
  &lt;listentry&gt;72M,low&lt;/listentry&gt;
  &lt;listentry&gt;256M,high&lt;/listentry&gt;
&lt;/crash_kernel&gt;</screen>
        </entry>
        <entry>
         <para>
          required
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.saving">
    <title>ダンプの保存</title>
    <para>
     This section describes where and how crash dumps will be stored.
    </para>
    <sect3 xml:id="CreateProfile.kdump.saving.target">
     <title>ターゲット</title>
     <para>
      The element <literal>KDUMP_SAVEDIR</literal> specifies the URL to
      where the dump is saved. The following methods are possible:
     </para>
     <itemizedlist mark="bullet" spacing="normal">
      <listitem>
       <para>
        <literal>file</literal> to save to the local disk,
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>ftp</literal> to save to an FTP server (without
        encryption),
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>sftp</literal> to save to an SSH2 SFTP server,
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>nfs</literal> to save to an NFS location and
       </para>
      </listitem>
      <listitem>
       <para>
        <literal>cifs</literal> to save the dump to a CIFS/SMP export from
        Samba or Microsoft Windows.
       </para>
      </listitem>
     </itemizedlist>
     <para>
      For details see the kdump(5) manual page. Two examples are:
      <literal>file:///var/crash</literal> (which is the default location
      according to FHS) and
      <literal>ftp://user:password@host:port/incoming/dumps</literal>. A
      subdirectory, with the time stamp contained in the name, will be
      created and the dumps saved there.
     </para>
     <para>
      When the dump is saved to the local disk,
      <literal>KDUMP_KEEP_OLD_DUMPS</literal> can be used to delete old
      dumps automatically. Set it to the number of old dumps that should be
      kept. If the target partition would end up with less free disk space
      than specified in <literal>KDUMP_FREE_DISK_SIZE</literal>, the dump is
      not saved.
     </para>
     <para>
      To save the whole kernel and the debug information (if
      installed) to the same directory, set
      <literal>KDUMP_COPY_KERNEL</literal> to <literal>true</literal>. You
      will have everything you need to analyze the dump in one directory
      (except kernel modules and their debugging information).
     </para>
    </sect3>
    <sect3 xml:id="CreateProfile.kdump.saving.compression">
     <title>フィルタリングと圧縮</title>
     <para>
      The kernel dump is uncompressed and unfiltered. It can get as large as
      your system RAM. To get smaller files, compress the dump file
      afterward. The dump needs to be decompressed before opening.
     </para>
     <para>
      To use page compression, which compresses every page and allows
      dynamic decompression with the crash(8) debugging tool, set
      <literal>KDUMP_DUMPFORMAT</literal> to <literal>compressed</literal>
      (default).
     </para>
     <para>
      You may not want to save all memory pages, for example those filled
      with zeroes. To filter the dump, set the
      <literal>KDUMP_DUMPLEVEL</literal>. 0 produces a full dump and 31 is
      the smallest dump. The manual pages kdump(5) and makedumpfile(8) list
      for each value which pages will be saved.
     </para>
    </sect3>
    <sect3 xml:id="CreateProfile.kdump.saving.summary">
     <title>概要</title>
     <table>
      <title>ダンプターゲットの設定: XML 表記</title>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Element
          </para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
         <entry>
          <para>
           Comment
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>KDUMP_SAVEDIR</literal>
          </para>
         </entry>
         <entry>
          <para>
           A URL that specifies the target to which the dump and related
           files will be saved.
          </para>
<screen>&lt;KDUMP_SAVEDIR&gt;file:///var/crash/&lt;/KDUMP_SAVEDIR&gt;</screen>
         </entry>
         <entry>
          <para>
           required
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_COPY_KERNEL</literal>
          </para>
         </entry>
         <entry>
          <para>
           Set to <literal>true</literal>, if not only the dump should be
           saved to <literal>KDUMP_SAVEDIR</literal> but also the kernel and
           its debugging information (if installed).
          </para>
<screen>&lt;KDUMP_COPY_KERNEL&gt;false&lt;/KDUMP_COPY_KERNEL&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_FREE_DISK_SIZE</literal>
          </para>
         </entry>
         <entry>
          <para>
           Disk space in megabytes that must remain free after saving the
           dump. If not enough space is available, the dump will not be
           saved.
          </para>
<screen>&lt;KDUMP_FREE_DISK_SIZE&gt;64&lt;/KDUMP_FREE_DISK_SIZE&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>KDUMP_KEEP_OLD_DUMPS</literal>
          </para>
         </entry>
         <entry>
          <para>
           The number of dumps that are kept (not deleted) if
           <literal>KDUMP_SAVEDIR</literal> points to a local directory.
           Specify 0 if you do not want any dumps to be automatically
           deleted, specify -1 if all dumps except the current one should be
           deleted.
          </para>
<screen>&lt;KDUMP_KEEP_OLD_DUMPS&gt;4&lt;/KDUMP_KEEP_OLD_DUMPS&gt;</screen>
         </entry>
         <entry>
          <para>
           optional
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </table>
    </sect3>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.notification">
    <title>電子メール通知</title>
    <para>
     Configure e-mail notification if you want to be informed when a machine
     crashes and a dump is saved.
    </para>
    <para>
     Because Kdump runs in the initrd, a local mail server cannot send the
     notification e-mail. An SMTP server needs to be specified (see below).
    </para>
    <para>
     You need to provide exactly one address in
     <literal>KDUMP_NOTIFICATION_TO</literal>. More addresses can be
     specified in <literal>KDUMP_NOTIFICATION_CC</literal>. Only use e-mail
     addresses in both cases, not a real name.
    </para>
    <para>
     Specify <literal>KDUMP_SMTP_SERVER</literal> and (if the server needs
     authentication) <literal>KDUMP_SMTP_USER</literal> and
     <literal>KDUMP_SMTP_PASSWORD</literal>. Support for TLS/SSL is not
     available but may be added in the future.
    </para>
<!-- {{{ Table: XML representation of the e-mail notification settings -->
    <table>
     <title>電子メール通知の設定: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_NOTIFICATION_TO</literal>
         </para>
        </entry>
        <entry>
         <para>
          Exactly one e-mail address to which the e-mail should be sent.
          Additional recipients can be specified in
          <literal>KDUMP_NOTIFICATION_CC</literal>.
         </para>
<screen>&lt;KDUMP_NOTIFICATION_TO
&gt;&exampleuser_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_TO&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (notification disabled if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_NOTIFICATION_CC</literal>
         </para>
        </entry>
        <entry>
         <para>
          Zero, one or more recipients that are in the cc line of the
          notification e-mail.
         </para>
<screen>&lt;KDUMP_NOTIFICATION_CC
&gt;&exampleuserII_plain;@&exampledomain; &exampleuserIII_plain;@&exampledomain;&lt;/KDUMP_NOTIFICATION_CC&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_SERVER</literal>
         </para>
        </entry>
        <entry>
         <para>
          Host name of the SMTP server used for mail delivery. SMTP
          authentication is supported (see
          <literal>KDUMP_SMTP_USER</literal> and
          <literal>KDUMP_SMTP_PASSWORD</literal>) but TLS/SSL are
          not.
         </para>
<screen>&lt;KDUMP_SMTP_SERVER&gt;email.suse.de&lt;/KDUMP_SMTP_SERVER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (notification disabled if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_USER</literal>
         </para>
        </entry>
        <entry>
         <para>
          User name used together with
          <literal>KDUMP_SMTP_PASSWORD</literal> for SMTP authentication.
         </para>
<screen>&lt;KDUMP_SMTP_USER&gt;bwalle&lt;/KDUMP_SMTP_USER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_SMTP_PASSWORD</literal>
         </para>
        </entry>
        <entry>
         <para>
          Password used together with <literal>KDUMP_SMTP_USER</literal> for
          SMTP authentication.
         </para>
<screen>&lt;KDUMP_SMTP_PASSWORD&gt;geheim&lt;/KDUMP_SMTP_PASSWORD&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.kernel">
    <title>Kdump カーネル設定</title>
    <para>
     As already mentioned, a special kernel is booted to save the dump. If
     you do not want to use the auto-detection mechanism to find out which
     kernel is used (see the kdump(5) manual page that describes the
     algorithm which is used to find the kernel), you can specify the
     version of a custom kernel in <literal>KDUMP_KERNELVER</literal>. If
     you set it to <literal>foo</literal>, then the kernel located in
     <filename>/boot/vmlinuz-foo</filename> or
     <filename>/boot/vmlinux-foo</filename> (in that order on platforms that
     have a <filename>vmlinuz</filename> file) will be used.
    </para>
    <para>
     You can specify the command line used to boot the Kdump kernel.
     Normally the boot command line is used, minus settings that are not
     relevant for Kdump (like the <literal>crashkernel</literal> parameter)
     plus some settings needed by Kdump (see the manual page kdump(5)). To
     specify additional parameters, use <literal>KDUMP_COMMANDLINE_APPEND</literal>. If you
     know what you are doing and you want to specify the entire command line,
     set <literal>KDUMP_COMMANDLINE</literal>.
    </para>
    <table>
     <title>カーネル設定: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_KERNELVER</literal>
         </para>
        </entry>
        <entry>
         <para>
          Version string for the kernel used for Kdump. Leave it empty to
          use the auto-detection mechanism (strongly recommended).
         </para>
<screen>&lt;KDUMP_KERNELVER
&gt;2.6.27-default&lt;/KDUMP_KERNELVER&gt;</screen>
        </entry>
        <entry>
         <para>
          optional (auto-detection if empty)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_COMMANDLINE_APPEND</literal>
         </para>
        </entry>
        <entry>
         <para>
          Additional command line parameters for the Kdump kernel.
         </para>
<screen>&lt;KDUMP_COMMANDLINE_APPEND
&gt;console=ttyS0,57600&lt;/KDUMP_COMMANDLINE_APPEND&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_Command Line</literal>
         </para>
        </entry>
        <entry>
         <para>
          Overwrite the automatically generated Kdump command line. Use with
          care. Usually, <literal>KDUMP_COMMANDLINE_APPEND</literal> should
          suffice.
         </para>
<screen>&lt;KDUMP_COMMANDLINE_APPEND
&gt;root=/dev/sda5 maxcpus=1 irqpoll&lt;/KDUMP_COMMANDLINE&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="CreateProfile.kdump.expert">
    <title>熟練者向け設定</title>
    <table>
     <title>宿連射向け設定: XML 表記</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Element
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
        <entry>
         <para>
          Comment
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>KDUMP_IMMEDIATE_REBOOT</literal>
         </para>
        </entry>
        <entry>
         <para>
          <literal>true</literal> if the system should be rebooted
          automatically after the dump has been saved,
          <literal>false</literal> otherwise. The default is to reboot the
          system automatically.
         </para>
<screen>&lt;KDUMP_IMMEDIATE_REBOOT
&gt;true&lt;/KDUMP_IMMEDIATE_REBOOT&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KDUMP_VERBOSE</literal>
         </para>
        </entry>
        <entry>
         <para>
          Bitmask that specifies how verbose the Kdump process should be.
          Read kdump(5) for details.
         </para>
<screen>&lt;KDUMP_VERBOSE&gt;3&lt;/KDUMP_VERBOSE&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>KEXEC_OPTIONS</literal>
         </para>
        </entry>
        <entry>
         <para>
          Additional options that are passed to kexec when loading the Kdump
          kernel. Normally empty.
         </para>
<screen>&lt;KEXEC_OPTIONS&gt;--noio&lt;/KEXEC_OPTIONS&gt;</screen>
        </entry>
        <entry>
         <para>
          optional
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.dns-server">
   <title>DNS サーバ</title>

   <para>
    The Bind DNS server can be configured by adding a <literal>dns-server</literal>
    resource. The three more straightforward properties of that resource can
    have a value of 1 to enable them or 0 to disable.
   </para>
   <!-- Dropped properties: allowed_interfaces -->

   <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attribute
          </para>
         </entry>
         <entry>
          <para>値</para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>chroot</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           The DNS server must be jailed in a chroot.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>start_service</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           Bind is enabled (executed on system start).
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>use_ldap</literal>
          </para>
         </entry>
         <entry>
          <para>
           0 / 1
          </para>
         </entry>
         <entry>
          <para>
           Store the settings in LDAP instead of native configuration files.
          </para>
         </entry>
        </row>
      </tbody>
     </tgroup>
    </informaltable>

    <example>
    <title>基本的な DNS サーバの設定</title>
<screen>
&lt;dns-server&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;
&lt;/dns-server&gt; </screen>
   </example>

   <para>
    In addition to those basic settings, there are three properties of type
    list that can be used to fine-tune the service configuration.
   </para>

   <informaltable>
    <tgroup cols="2">
     <thead>
      <row>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>logging</literal>
        </para>
       </entry>
       <entry>
        <para>
         Options of the DNS server logging.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>options</literal>
        </para>
       </entry>
       <entry>
        <para>
         Bind options like the files and directories to use, the list of
         forwarders and other configuration settings.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>zones</literal>
        </para>
       </entry>
       <entry>
        <para>
         List of DNS zones known by the server, including all the settings,
         records and SOA records.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <example>
    <title>DNS サーバのゾーン設定と高度な設定</title>
<screen>
&lt;dns-server&gt;
  &lt;logging config:type="list"&gt;
    &lt;listentry&gt;
      &lt;key&gt;channel&lt;/key&gt;
      &lt;value&gt;log_syslog { syslog; }&lt;/value&gt;
    &lt;/listentry&gt;
  &lt;/logging&gt;
  &lt;options config:type="list"&gt;
    &lt;option&gt;
      &lt;key&gt;forwarders&lt;/key&gt;
      &lt;value&gt;{ 10.10.0.1; }&lt;/value&gt;
    &lt;/option&gt;
  &lt;/options&gt;
  &lt;zones config:type="list"&gt;
    &lt;listentry&gt;
      &lt;is_new&gt;1&lt;/is_new&gt;
      &lt;modified&gt;1&lt;/modified&gt;
      &lt;options config:type="list"/&gt;
      &lt;records config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;MX&lt;/type&gt;
          &lt;value&gt;0 mail.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/records&gt;
      &lt;soa&gt;
        &lt;expiry&gt;1w&lt;/expiry&gt;
        &lt;mail&gt;root.aaa.aaa.cc.&lt;/mail&gt;
        &lt;minimum&gt;1d&lt;/minimum&gt;
        &lt;refresh&gt;3h&lt;/refresh&gt;
        &lt;retry&gt;1h&lt;/retry&gt;
        &lt;serial&gt;2005082300&lt;/serial&gt;
        &lt;server&gt;aaa.aaa.cc.&lt;/server&gt;
        &lt;zone&gt;@&lt;/zone&gt;
      &lt;/soa&gt;
      &lt;soa_modified&gt;1&lt;/soa_modified&gt;
      &lt;ttl&gt;2d&lt;/ttl&gt;
      &lt;type&gt;master&lt;/type&gt;
      &lt;update_actions config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;mydom.uwe.&lt;/key&gt;
          &lt;operation&gt;add&lt;/operation&gt;
          &lt;type&gt;NS&lt;/type&gt;
          &lt;value&gt;ns.mydom.uwe.&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/update_actions&gt;
      &lt;zone&gt;mydom.uwe&lt;/zone&gt;
    &lt;/listentry&gt;
  &lt;/zones&gt;
&lt;/dns-server&gt; </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.dhcp-server">
   <title>DHCP サーバ</title>

   <para>
    The <literal>dhcp-server</literal> resource makes it possible to configure
    all the settings of a DHCP server by means of the six following properties.
   </para>
   <!-- Dropped properties: allowed_interfaces -->

   <informaltable>
    <tgroup cols="3">
     <thead>
      <row>
       <entry>
        <para>
         Element
        </para>
       </entry>
       <entry>
        <para>値</para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>chroot</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         A value of 1 means that the DHCP server must be jailed in a chroot.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>start_service</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         Set this to 1 to enable the DHCP server (that is, run it on system startup).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>use_ldap</literal>
        </para>
       </entry>
       <entry>
        <para>
         0 / 1
        </para>
       </entry>
       <entry>
        <para>
         If set to 1, the settings will be stored in LDAP instead of native configuration files.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>other_options</literal>
        </para>
       </entry>
       <entry>
        <para>
         Text
        </para>
       </entry>
       <entry>
        <para>
         String with parameters that will be passed to the DHCP server executable
         when started. For example, use "-p 1234" to listen on a non-standard
         1234 port. For all possible options, consult the dhcpd manual page. If
         left blank, default values will be used.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>allowed_interfaces</literal>
        </para>
       </entry>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         List of network cards in which the DHCP server will be operating.
         See the example below for the exact format.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>settings</literal>
        </para>
       </entry>
       <entry>
        <para>
         List
        </para>
       </entry>
       <entry>
        <para>
         List of settings to configure the behavior of the DHCP server. The
         configuration is defined in a tree-like structure where the root
         represents the global options, with subnets and host nested from there.
         The <literal>children</literal>, <literal>parent_id</literal> and
         <literal>parent_type</literal> properties are used to represent that
         nesting. See the example below for the exact format.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </informaltable>

   <example>
    <title>dhcp-server セクションの例</title>
<screen>
&lt;dhcp-server&gt;
  &lt;allowed_interfaces config:type="list"&gt;
    &lt;allowed_interface&gt;eth0&lt;/allowed_interface&gt;
  &lt;/allowed_interfaces&gt;
  &lt;chroot&gt;0&lt;/chroot&gt;
  &lt;other_options&gt;-p 9000&lt;/other_options&gt;
  &lt;start_service&gt;1&lt;/start_service&gt;
  &lt;use_ldap&gt;0&lt;/use_ldap&gt;

  &lt;settings config:type="list"&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"/&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;fixed-address&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;192.168.0.10&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;hardware&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;ethernet d4:00:00:bf:00:00&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;static10&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id&gt;192.168.0.0 netmask 255.255.255.0&lt;/parent_id&gt;
      &lt;parent_type&gt;subnet&lt;/parent_type&gt;
      &lt;type&gt;host&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;static10&lt;/id&gt;
          &lt;type&gt;host&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;range&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;dynamic-bootp 192.168.0.100 192.168.0.150&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;max-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;86400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type&gt;subnet&lt;/type&gt;
    &lt;/settings_entry&gt;
    &lt;settings_entry&gt;
      &lt;children config:type="list"&gt;
        &lt;child&gt;
          &lt;id&gt;192.168.0.0 netmask 255.255.255.0&lt;/id&gt;
          &lt;type&gt;subnet&lt;/type&gt;
        &lt;/child&gt;
      &lt;/children&gt;
      &lt;directives config:type="list"&gt;
        &lt;listentry&gt;
          &lt;key&gt;ddns-update-style&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;none&lt;/value&gt;
        &lt;/listentry&gt;
        &lt;listentry&gt;
          &lt;key&gt;default-lease-time&lt;/key&gt;
          &lt;type&gt;directive&lt;/type&gt;
          &lt;value&gt;14400&lt;/value&gt;
        &lt;/listentry&gt;
      &lt;/directives&gt;
      &lt;id/&gt;
      &lt;options config:type="list"/&gt;
      &lt;parent_id/&gt;
      &lt;parent_type/&gt;
      &lt;type/&gt;
    &lt;/settings_entry&gt;
  &lt;/settings&gt;
&lt;/dhcp-server&gt; </screen>
   </example>
  </sect1>

  <sect1 xml:id="CreateProfile.firewall">
   <title>ファイアウオール設定</title>

   <para>
    SuSEfirewall2 has been replaced by &firewalld; starting with
    &slsa; 15. Profiles using SuSEfirewall2 properties will be translated
    to &firewalld; profiles. However, not all profile
    properties can be converted. For details about &firewalld; refer to
    <xref linkend="sec.security.firewall.firewalld"/>.
   </para>

    <important>
     <title>SuSEFirewall2 を利用したプロファイルとの後方互換性の制限について</title>
     <para>
      The use of SuSEFirewall2 based profiles will be only
      partially supported as many options are not valid in &firewalld; and
      some missing configuration could affect your network security.
     </para>
    </important>

   <sect2 xml:id="CreateProfile.firewall.general">
    <title>一般的なファイアウオール設定</title>

    <para>
     In &firewalld; the general configuration only exposes a few
     properties and most of the configuration is done by zones.
    </para>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>値</para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>start_firewall</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
        </entry>
        <entry>
         <para>
          Whether &firewalld; should be started right after applying the configuration.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>enable_firewall</literal>
         </para>
        </entry>
        <entry>
         <para>
          Boolean
         </para>
        </entry>
        <entry>
         <para>
          Whether &firewalld; should be started on every system startup.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>default_zone</literal>
         </para>
        </entry>
        <entry>
         <para>
          Zone name
         </para>
        </entry>
        <entry>
         <para>
          The default zone is used for everything that is not explicitly assigned.
         </para>
        </entry>
      </row>
      <row>
        <entry>
         <para>
          <literal>log_denied_packets</literal>
         </para>
        </entry>
        <entry>
         <para>
          Type of dropped packages to be logged
         </para>
        </entry>
        <entry>
         <para>
          Enable logging of dropped packages for the type selected.  Values:
          <literal>off</literal>, <literal>unicast</literal>,
          <literal>multicast</literal>, <literal>broadcast</literal>,
          <literal>all</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>name</literal>
         </para>
        </entry>
        <entry>
         <para>
          Identifier of zone
         </para>
        </entry>
        <entry>
         <para>
          Used to identify a zone. If the zone is not known yet, a new zone will
          be created.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>short</literal>
         </para>
        </entry>
        <entry>
         <para>
          Short summary of zone
         </para>
        </entry>
        <entry>
         <para>
          Briefly summarizes the purpose of the zone. Ignored for already
          existing zones. If not specified, the name is used.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>description</literal>
         </para>
        </entry>
        <entry>
         <para>
          Description of zone
         </para>
        </entry>
        <entry>
         <para>
          Describes the purpose of the zone. Ignored for already existing zones.
          If not specified, the name is used.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>target</literal>
         </para>
        </entry>
        <entry>
         <para>
          Default action
         </para>
        </entry>
        <entry>
         <para>
          Defines the default action in the zone if no rule matches. Possible
          values are <literal>ACCEPT</literal>, <literal>%%REJECT%%</literal>,
          <literal>DROP</literal> and <literal>default</literal>. If not specified,
          <literal>default</literal> is used. For details about values, see
          <link xlink:href="https://firewalld.org/documentation/zone/options.html"/>.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.firewall.zones">
    <title>ファイアウオールのゾーン設定</title>

    <para>
     The configuration of &firewalld; is based on the existence of several zones
     which define the trust level for a connection, interface or source address.
     The behavior of each zone can be tweaked in several ways although not all
     the properties are exposed yet.
    </para>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attributes
         </para>
        </entry>
        <entry>
         <para>値</para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>interfaces</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of interface names
         </para>
        </entry>
        <entry>
         <para>
          List of interface names assigned to this zone. Interfaces or
          sources can only be part of one zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>services</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of services
         </para>
        </entry>
        <entry>
         <para>
          List of services accessible in this zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>ports</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of ports
         </para>
        </entry>
        <entry>
          <para>
            List of single ports or ranges to be opened in the assigned zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>protocols</literal>
         </para>
        </entry>
        <entry>
         <para>
          List of protocols
         </para>
        </entry>
        <entry>
         <para>
          List of protocols to be opened or be accessible in the assigned zone.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>masquerade</literal>
         </para>
        </entry>
        <entry>
         <para>
          Enable masquerade
         </para>
        </entry>
        <entry>
         <para>
          It will enable or disable network address translation <emphasis>(NAT)</emphasis> in the assigned zone.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
   </sect2>

   <sect2 xml:id="CreateProfile.firewall.example">
    <title>完全な例</title>

    <para>
     A full example of the firewall section, including general and zone specific
     properties could look like this.
    </para>

    <example>
     <title>firewall セクションの例</title>
     <screen>&lt;firewall&gt;
  &lt;enable_firewall&gt;true&lt;/enable_firewall&gt;
  &lt;log_denied_packets&gt;all&lt;/log_denied_packets&gt;
  &lt;default_zone&gt;external&lt;/default_zone&gt;
  &lt;zones config:type="list"&gt;
    &lt;zone&gt;
      &lt;name&gt;public&lt;/name&gt;
      &lt;interfaces config:type="list"&gt;
        &lt;interface&gt;eth0&lt;/interface&gt;
      &lt;/interfaces&gt;
      &lt;services config:type="list"&gt;
        &lt;service&gt;ssh&lt;/service&gt;
        &lt;service&gt;dhcp&lt;/service&gt;
        &lt;service&gt;dhcpv6&lt;/service&gt;
        &lt;service&gt;samba&lt;/service&gt;
        &lt;service&gt;vnc-server&lt;/service&gt;
      &lt;/services&gt;
      &lt;ports config:type="list"&gt;
        &lt;port&gt;21/udp&lt;/port&gt;
        &lt;port&gt;22/udp&lt;/port&gt;
        &lt;port&gt;80/tcp&lt;/port&gt;
        &lt;port&gt;443/tcp&lt;/port&gt;
        &lt;port&gt;8080/tcp&lt;/port&gt;
      &lt;/ports&gt;
    &lt;/zone&gt;
    &lt;zone&gt;
      &lt;name&gt;dmz&lt;/name&gt;
      &lt;interfaces config:type="list"&gt;
        &lt;interface&gt;eth1&lt;/interface&gt;
      &lt;/interfaces&gt;
    &lt;/zone&gt;
  &lt;/zones&gt;
&lt;/firewall&gt;</screen>
    </example>
  </sect2>

  </sect1>

  <sect1 xml:id="CreateProfile.Hardware">
   <title>その他のハードウエア／システムコンポーネント</title>

   <para>
    In addition to the core component configuration, like network
    authentication and security, &ay; offers a wide range of hardware and
    system configuration options, the same as available by default on any
    system installed manually and in an interactive way. For example, it is
    possible to configure printers, sound devices, TV cards and any other
    hardware components which have a module within &yast;.
   </para>

   <para>
    Any new configuration options added to &yast; will be automatically
    available in &ay;.
   </para>

   <sect2 xml:id="CreateProfile.Hardware.Printer">
    <title>プリンタ</title>
    <para>
     &ay; support for printing is limited to basic settings defining how
     CUPS is used on a client for printing via the network.
    </para>
    <para>
     There is no &ay; support for setting up local print queues. Modern
     printers are usually connected via USB. CUPS accesses USB printers by a
     model-specific device URI like
     <literal>usb://ACME/FunPrinter?serial=1a2b3c</literal>. Usually it is
     not possible to predict the correct USB device URI in advance, because
     it is determined by the CUPS back-end <literal>usb</literal> during
     runtime. Therefore it is not possible to set up local print queues with
     &ay;.
    </para>
    <para>
     Basics on how CUPS is used on a client workstation to print via
     network:
    </para>
    <para>
     On client workstations application programs submit print jobs to the
     CUPS daemon process (<systemitem>cupsd</systemitem>).
     <systemitem>cupsd</systemitem> forwards the print jobs to a CUPS print
     server in the network where the print jobs are processed. The server
     sends the printer specific data to the printer device.
    </para>
    <para>
     If there is only a single CUPS print server in the network, there is no
     need to have a CUPS daemon running on each client workstation. Instead
     it is simpler to specify the CUPS server in
     <filename>/etc/cups/client.conf</filename> and access it directly (only
     one CUPS server entry can be set). In this case application programs
     that run on client workstations submit print jobs directly to the
     specified CUPS print server.
    </para>
    <para>
     <xref linkend="printer.conf"/> shows a <literal>printer</literal>
     configuration section. The <literal>cupsd_conf_content</literal> entry
     contains the whole verbatim content of the
     <systemitem class="daemon">cupsd</systemitem> configuration file
     <filename>/etc/cups/cupsd.conf</filename>. The
     <literal>client_conf_content</literal> entry contains the whole
     verbatim content of <filename>/etc/cups/client.conf</filename>. The
     <literal>printer</literal> section contains the
     <systemitem class="daemon">cupsd</systemitem> configuration but it does
     not specify whether the cupsd should run.
    </para>
    <example xml:id="printer.conf">
     <title>プリンタの設定</title>
<screen>  &lt;printer&gt;
    &lt;client_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/client.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/client_conf_content&gt;
    &lt;cupsd_conf_content&gt;
      &lt;file_contents&gt;&lt;![CDATA[
... verbatim content of /etc/cups/cupsd.conf ...
]]&gt;&lt;/file_contents&gt;
    &lt;/cupsd_conf_content&gt;
  &lt;/printer&gt;</screen>
    </example>
    <note>
     <title><filename>/etc/cups/cups-files.conf</filename></title>
     <para>
      With release 1.6 the CUPS configuration file has been split into two
      files: <filename>cupsd.conf</filename> and
      <filename>cups-files.conf</filename>. As of &productname; &productnumber;,
      &ay; only supports modifying <filename>cupsd.conf</filename> since
      the default settings in <filename>cups-files.conf</filename> are
      sufficient for usual printing setups.
     </para>
    </note>
   </sect2>

   <sect2 xml:id="CreateProfile.Hardware.Sound">
    <title>サウンドデバイス</title>
    <para>
     An example of the sound configuration created using the configuration
     system is shown below.
    </para>
    <example>
     <title>サウンド設定</title>
<screen>&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;modules_conf config:type="list"&gt;
    &lt;module_conf&gt;
      &lt;alias&gt;snd-card-0&lt;/alias&gt;
      &lt;model&gt;M5451, ALI&lt;/model&gt;
      &lt;module&gt;snd-ali5451&lt;/module&gt;
      &lt;options&gt;
        &lt;snd_enable&gt;1&lt;/snd_enable&gt;
        &lt;snd_index&gt;0&lt;/snd_index&gt;
        &lt;snd_pcm_channels&gt;32&lt;/snd_pcm_channels&gt;
      &lt;/options&gt;
    &lt;/module_conf&gt;
  &lt;/modules_conf&gt;
  &lt;volume_settings config:type="list"&gt;
    &lt;listentry&gt;
      &lt;Master config:type="integer"&gt;75&lt;/Master&gt;
    &lt;/listentry&gt;
  &lt;/volume_settings&gt;
&lt;/sound&gt;</screen>
    </example>
   </sect2>
  </sect1>

  <sect1 xml:id="CreateProfile.SSHKeysAndConfig">
    <title>SSH 鍵と設定の取り込み</title>

    <para>
     &yast; allows SSH keys and server configuration to be imported from
     previous installations. The behavior of this feature can also be
     controlled through an &ay; profile.
    </para>

    <example xml:id="import_ssh">
     <title>/dev/sda2 からの SSH 鍵と設定の取り込み</title>
<screen>&lt;ssh_import&gt;
  &lt;import config:type="boolean"&gt;true&lt;/import&gt;
  &lt;copy_config config:type="boolean"&gt;true&lt;/copy_config&gt;
  &lt;device&gt;/dev/sda2&lt;/device&gt;
&lt;/ssh_import&gt;</screen>
    </example>

    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attributes
         </para>
        </entry>
        <entry>
         <para>値</para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>import</literal>
         </para>
        </entry>
        <entry>
         <para>
          true / false
         </para>
        </entry>
        <entry>
         <para>
          SSH keys will be imported. If set to
          <literal>false</literal>, nothing will be imported.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>copy_config</literal>
         </para>
        </entry>
        <entry>
         <para>
          true / false
         </para>
        </entry>
        <entry>
         <para>
          Additionally, SSH server configuration will be imported.
          This setting will not have effect if
          <literal>import</literal> is set to <literal>false</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>device</literal>
         </para>
        </entry>
        <entry>
         <para>
          Partition
         </para>
        </entry>
        <entry>
         <para>
          Partition to import keys and configuration from. If it is not set,
          the partition which contains the most recently accessed key is used.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
  </sect1>

  <sect1 xml:id="CreateProfile.ConfigurationManagement">
    <title>設定管理</title>

    <para>
      &ay; allows delegating part of the configuration to a
      <emphasis>configuration management tool</emphasis> like Salt. &ay; takes
      care of the basic system installation (partitioning, network setup, etc.)
      and the remaining configuration tasks can be delegated.
    </para>

   <note>
    <title>Salt のみを公式サポートする件について</title>
    <para>
      Although Puppet is mentioned in this document, only Salt is officially
      supported. Anyway, feel free to report any problem you might find with Puppet.
    </para>
   </note>

    <para>
     &ay; supports two different approaches:
    </para>

    <itemizedlist>
     <listitem>
      <para>
       Using a configuration management server. In this case, &ay; sets up a
       configuration management tool. It connects to a master server to
       get the instructions to configure the system.
      </para>
     </listitem>
     <listitem>
      <para>
       Getting the configuration from elsewhere (for example, an HTTP server or
       a flash disk) and running the configuration management tool in stand-alone mode.
      </para>
     </listitem>
    </itemizedlist>

    <sect2 xml:id="CreateProfile.ConfigurationManagement.Server">
     <title>設定管理システム (Configuration Management System; CMS) への接続</title>

     <para>
      This approach is especially useful when a configuration management
      server (a <emphasis>master</emphasis> in Salt and Puppet jargon) is already
      in place. In this case, the hardest part might be to set up a proper
      authentication mechanism.
     </para>

     <para>
      Both Salt and Puppet support the following authentication methods:
     </para>

     <itemizedlist>
      <listitem>
       <para>
        Manual authentication on the fly. When &ay; starts the client, a new
        authentication request is generated. The administrator can manually
        accept this request on the server. &ay; will retry the connection. If
        the key was accepted meanwhile, &ay; continues the installation.
       </para>
      </listitem>
      <listitem>
       <para>
        Using a preseed key. Refer to the documentation of your configuration
        management system of choice to find out how to generate them. Use the
        <literal>keys_url</literal> option to tell &ay; where to look for them.
       </para>
      </listitem>
     </itemizedlist>

     <para>
      With the configuration example below, &ay; will launch the client to generate
      the authentication request. It will retry to connect up to three times,
      waiting 15 seconds between each try.
     </para>

     <example xml:id="configuration_management_manual_authentication">
      <title>手動認証によるクライアント／サーバ</title>
<screen>&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;master&gt;my-salt-server.example.net&lt;/master&gt;
    &lt;auth_attempts config:type="integer"&gt;3&lt;/auth_attempts&gt;
    &lt;auth_time_out config:type="integer"&gt;15&lt;/auth_time_out&gt;
&lt;/configuration_management&gt;</screen>
     </example>

     <para>
      However, with the following example, &ay; will retrieve the keys from a
      flash disk and will use them to connect to the master server.
     </para>

     <example xml:id="configuration_management_preseed_keys">
      <title>事前シード鍵によるクライアント／サーバ</title>
<screen>&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;master&gt;my-salt-server.example.net&lt;/master&gt;
    &lt;keys_url&gt;usb:/&lt;/keys_url&gt;
&lt;/configuration_management&gt;</screen>
     </example>

     <para>
      The table below summarizes the supported options for these scenarios.
     </para>

     <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attributes
          </para>
         </entry>
         <entry>
          <para>値</para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>type</literal>
          </para>
         </entry>
         <entry>
          <para>
           String
          </para>
         </entry>
         <entry>
          <para>
           Configuration management name. Currently only <literal>salt</literal>
           is officially supported.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>master</literal>
          </para>
         </entry>
         <entry>
          <para>
           String
          </para>
         </entry>
         <entry>
          <para>
           Host name or IP address of the configuration management server.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>auth_attempts</literal>
          </para>
         </entry>
         <entry>
          <para>
           Integer
          </para>
         </entry>
         <entry>
          <para>
           Maximum attempts to connect to the server. The default is three
           attempts.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>auth_time_out</literal>
          </para>
         </entry>
         <entry>
          <para>
           Integer
          </para>
         </entry>
         <entry>
          <para>
           Time (in seconds) between attempts to connect to the server.
           The default is 15 seconds.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>keys_url</literal>
          </para>
         </entry>
         <entry>
          <para>
           URL of used key
          </para>
         </entry>
         <entry>
          <para>
           Path to an HTTP server, hard disk, flash drive or similar with
           the files <literal>default.key</literal> and
           <literal>default.pub</literal>. This key must be known to
           the configuration management master.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>enable_services</literal>
          </para>
         </entry>
         <entry>
          <para>
           True/False
          </para>
         </entry>
         <entry>
          <para>
           Enables the configuration management services on the client
           side after the installation. The default is <literal>true</literal>.
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect2>

    <sect2 xml:id="CreateProfile.ConfigurationManagement.Masterless">
     <title>スタンドアロン (単独) モードでの実行</title>
     <para>
       For simple scenarios, deploying a configuration management server is
       unnecessary. Instead, use Salt or Puppet in
       <emphasis>stand-alone</emphasis> (or <emphasis>masterless</emphasis>)
       mode.
     </para>

     <para>
      As there is no server, &ay; needs to know where to get the configuration
      from. Put the configuration into a TAR archive and store it anywhere
      (for example, on a flash drive, an HTTP/HTTPS server, an NFS/SMB share).
     </para>

     <para>
      The TAR archive must have the same layout that is expected under
      <literal>/srv</literal> in a Salt server. That means, you need to place states,
      formulas and pillars in a <filename>salt</filename> directory. If you prefer,
      you can distribute pillars data in a separate TAR archive by using the
      <literal>pillar_url</literal> option.
     </para>

     <example xml:id="configuration_management_masterless">
      <title>スタンドアロンモード</title>
<screen>&lt;configuration_management&gt;
    &lt;type&gt;salt&lt;/type&gt;
    &lt;states_url&gt;my-salt-server.example.net&lt;/states_url&gt;
    &lt;pillar_url&gt;my-salt-server.example.net&lt;/pillar_url&gt;
&lt;/configuration_management&gt;</screen>
     </example>

     <informaltable>
      <tgroup cols="3">
       <thead>
        <row>
         <entry>
          <para>
           Attributes
          </para>
         </entry>
         <entry>
          <para>値</para>
         </entry>
         <entry>
          <para>
           Description
          </para>
         </entry>
        </row>
       </thead>
       <tbody>
        <row>
         <entry>
          <para>
           <literal>type</literal>
          </para>
         </entry>
         <entry>
          <para>
           String
          </para>
         </entry>
         <entry>
          <para>
           Configuration management name. Currently only <literal>salt</literal>
           is officially supported.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>states_url</literal>
          </para>
         </entry>
         <entry>
          <para>
           URL
          </para>
         </entry>
         <entry>
          <para>
           Location of the Salt states TAR archive. It may include formulas and pillars.
           Files must be located within a <filename>salt</filename> directory.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>pillar_url</literal>
          </para>
         </entry>
         <entry>
          <para>
           URL
          </para>
         </entry>
         <entry>
          <para>
           Location of the TAR archive that contains the pillars.
          </para>
         </entry>
        </row>
        <row>
         <entry>
          <para>
           <literal>modules_url</literal>
          </para>
         </entry>
         <entry>
          <para>
           URL
          </para>
         </entry>
         <entry>
          <para>
           Location of Puppet modules.
          </para>
         </entry>
        </row>
       </tbody>
      </tgroup>
     </informaltable>
    </sect2>

    <sect2 xml:id="CreateProfile.ConfigurationManagement.SUMAFormulasSupport">
     <title>&susemgr; Salt Formulas サポートについて</title>

     <para>
      &ay; offers support for &susemgr; Salt Formulas when running in stand-alone
      mode. In case that a formula is found in the states TAR archive, &ay;
      displays a screen which allows the user to select and configure the formulas to apply.
     </para>

     <para>
      Bear in mind that this feature defeats the &ay; purpose of performing an unattended
      installation, as &ay; will wait for user's input.
     </para>
    </sect2>
  </sect1>

 </chapter>
<!-- fs 2014-09-24:
     Commenting since this short chapter does not provide new information
     This is already covered in greater detail in the Deployment Guide

 <chapter id="Bootmanagement">
  <title>Network-based Installation</title>
  <para>
   &ay; provides a method to automatically and identically install
   groups of systems. The first step when preparing an &ay; installation
   is to decide how you want to install the target systems. The following
   scenario is a good example for how to set up and perform automated
   installations:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     You need to install &productname; on 50 new systems.
    </para>
   </listitem>
   <listitem>
    <para>
     The development department owns 30 out of the 50 new dual processor and
     SCSI systems, and these systems must be installed as clients with
     development software.
    </para>
   </listitem>
   <listitem>
    <para>
     The sales department owns 20 out of the 50 new, uni-processor IDE based
     systems and its systems must be installed as clients with end user
     software and office tools.
    </para>
    <remark>emap 2011-11-07: What about the remaining new systems? Will they be
    needed in this example? If not better let R&amp;D buy 30 new machines and
    Sales 20 new ones with different hardware. Um, reading to the end of this
    file, I wonder if we need this example at all? It is not being used to
    explain anything. It rather gets in the way. We do not even explain how the
    different hardware is handled.</remark>
   </listitem>
  </itemizedlist>
  <para>
   Prerequisites:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     a boot server on the same Ethernet segment,
    </para>
   </listitem>
   <listitem>
    <para>
     an installation server with the SUSE Linux OS,
    </para>
    <remark>emap 2011-11-07: Rather with the installation sources? </remark>
   </listitem>
   <listitem>
    <para>
     an &ay; configuration server that defines rules and control files.
     <remark>emap 2011-11-07: This is the first mention of a configuration server. Is it really needed?</remark>
    </para>
   </listitem>
  </itemizedlist>

  <sect1>
   <title>Configuration Server</title>

   <para>
    A configuration repository holds the control files for multiple
    machines. The control files can have any file names, which need to be
    specified at the boot time of a target client. To avoid supplying the
    control file name for every client, you can define the directory of the
    control files. If a directory is specified, then the target client tries
    to load a file with a name matching its IP address in HEX mode. This has
    the advantage that you will be dealing with consistent file names rather
    than IPs as file names which might lead to some confusion.
    <remark>emap 2011-11-07: Sounds like no dedicated server is needed, only a repository.</remark>
   </para>

   <para>
    The configuration repository is the same directory you specify when
    using the configuration system for creating control files.
   </para>

   <sect2>
    <title>HTTP Repository</title>
    <para>
     To be able to use the HTTP protocol to
     retrieve control files while auto-installing, you need a working
     HTTP server on the server side. Install
     <emphasis>Apache</emphasis> or another Web server and enable it
     using &yast;. Normally the Web server root directory resides in
     <filename>/srv/www/htdocs</filename> so you need to create a
     subdirectory which will serve your configuration repository.
    </para>
   </sect2>

   <sect2>
    <title>NFS Repository</title>
    <para>
     Create a directory and export it via
     NFS to the target clients. This
     directory may the same location where you have copied the CDs (for example
     <filename>/usr/local/SUSE</filename>).
     <remark>emap 2011-11-07: Change CDs to installation source/repository?</remark>
    </para>
   </sect2>

   <sect2>
    <title>TFTP Repository</title>
    <para>
     By default the TFTP directory is
     available under <filename>/tftpboot</filename> which can also contain
     boot images if you are booting over network. Do not forget to enable
     TFTP in the Inetd configuration file
     (<filename>/etc/inetd.conf</filename>). <emphasis>Inetd</emphasis>
     configuration can be done via &yast;.
    </para>
   </sect2>
  </sect1>
 </chapter>
-->
 <chapter xml:id="rulesandclass">
  <title>ルールとクラス</title>
  <para>
   Rules and classes allow customizing installations for sets of machines in
   different ways:
  </para>
  <itemizedlist>
   <listitem>
    <para>
     Rules allow configuring a system depending on its attributes.
    </para>
   </listitem>
   <listitem>
    <para>
     Classes represent configurations for groups of target systems. Classes
     can be assigned to systems.
    </para>
   </listitem>
  </itemizedlist>
  <note>
    <title><literal>autoyast</literal> 起動オプションのみの使用について</title>
    <para>
     Rules and classes are only supported by the boot parameter
     <literal>autoyast=<replaceable>URL</replaceable></literal>.
    </para>
    <para>
     <literal>autoyast2=<replaceable>URL</replaceable></literal> is not
     supported, because
     this option downloads a single &ay; control file only.
    </para>
  </note>
  <sect1 xml:id="rules">
   <title>ルールベースの自動インストール</title>

   <para>
    Rules offer the possibility to configure a system depending on system
    attributes by merging multiple control files during installation. The
    rule-based installation is controlled by a rules file.
   </para>
   <para>
    For example, this could be useful to install systems in two departments in
    one go. Assume a
    scenario where machines in department A need to be installed as office
    desktops, whereas machines in department B need to be installed as
    developer workstations. You would create a rules file with two different
    rules. For each rule, you could use different system parameters to
    distinguish the installations from one another. Each rule would also
    contain a link to an appropriate profile for each department.
   </para>

   <para>
    The rules file is an XML file containing rules for each group of systems
    (or single systems) that you want to automatically install. A set of
    rules distinguish a group of systems based on one or more system
    attributes. After passing all rules, each group of systems is linked to
    a control file. Both the rules file and the control files must be
    located in a pre-defined and accessible location.
   </para>

   <para>
    The rules file is retrieved only if no specific control file is supplied
    using the <literal>autoyast</literal> keyword. For example, if the
    following is used, the rules file will not be evaluated:
   </para>

<screen>autoyast=http://10.10.0.1/profile/myprofile.xml
autoyast=http://10.10.0.1/profile/rules/rules.xml</screen>

   <para>
    Instead use:
   </para>

<screen>autoyast=http://10.10.0.1/profile/</screen>

   <para>
    which will load
    <literal>http://10.10.0.1/profile/rules/rules.xml</literal> (the slash
    at the end of the directory name is important).
   </para>

   <figure xml:id="rules_fig1">
    <title>ルール</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="autoyast_rules.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="autoyast_rules.svg" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <para>
    If more than one rule applies, the final control file for each group is
    generated on the fly using a merge script. The merging process is based
    on the order of the rules and later rules override configuration data in
    earlier rules. Note that the names of the top sections in the merged XML
    files need to be in alphabetical order for the merge to succeed.
   </para>

   <para>
    The use of a rules file is optional. If the rules file is not found,
    system installation proceeds in the standard way by using the
    supplied control file or by searching for the control file depending on
    the MAC or the IP address of the system.
   </para>

   <sect2 xml:id="rulesfile">
    <title>ルールファイルの詳細</title>
    <example>
     <title>シンプルなルールファイル</title>
     <para>
      The following simple example illustrates how the rules file is used to
      retrieve the configuration for a client with known hardware.
     </para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</screen>
    </example>
    <para>
     The last example defines two rules and provides a different control
     file for every rule. The rule used in this case is
     <literal>disksize</literal>. After parsing the rules file, &yast;
     attempts to match the target system with the rules in the
     <filename>rules.xml</filename> file. A rule match occurs when the
     target system matches all system attributes defined in the rule. When the system matches a rule, the respective resource is added to
     the stack of control files &ay; will use to create the final control
     file. The <literal>continue</literal> property tells &ay; whether it
     should continue with other rules after a match has been found.
    </para>
    <para>
     If the first rule does not match, the next rule in the list is examined
     until a match is found.
    </para>
    <para>
     Using the <literal>disksize</literal> attribute, you can provide
     different configurations for systems with hard disks of different
     sizes. The first rule checks if the device
     <filename>/dev/sdc</filename> is available and if it is greater than 1
     GB in size using the <literal>match</literal> property.
    </para>
    <para>
     A rule must have at least one attribute to be matched. If you need to
     check more attributes, such as memory or architectures, you can add
     more attributes in the rule resource as shown in the next example.
    </para>
    <example>
     <title>シンプルなルールファイル</title>
     <para>
      The following example illustrates how the rules file is used to
      retrieve the configuration for a client with known hardware.
     </para>
<screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE autoinstall&gt;
&lt;autoinstall xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;rules config:type="list"&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/sdc 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_a.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
    &lt;rule&gt;
       &lt;disksize&gt;
            &lt;match&gt;/dev/shda 1000&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/disksize&gt;
       &lt;memsize&gt;
            &lt;match&gt;256&lt;/match&gt;
            &lt;match_type&gt;greater&lt;/match_type&gt;
       &lt;/memsize&gt;
       &lt;result&gt;
            &lt;profile&gt;department_b.xml&lt;/profile&gt;
            &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
        &lt;/result&gt;
    &lt;/rule&gt;
  &lt;/rules&gt;
&lt;/autoinstall&gt;</screen>
    </example>
    <para>
     The rules directory must be located in the same directory specified via
     the <literal>autoyast</literal> keyword at boot time. If the client was
     booted using <literal>autoyast=http://10.10.0.1/profiles/</literal>,
     &ay; will search for the rules file at
     http://10.10.0.1/profiles/rules/rules.xml.
    </para>
   </sect2>

   <sect2 xml:id="customrules">
    <title>独自のルール</title>
    <para>
     If the attributes &ay; provides for rules are not enough for your
     purposes, use custom rules. Custom rules contain a shell script. The
     output of the script (STDOUT, STDERR is ignored) can be evaluated.
    </para>
    <para>
     Here is an example for the use of custom rules:
    </para>
<screen>&lt;rule&gt;
  &lt;custom1&gt;
    &lt;script&gt;
if grep -i intel /proc/cpuinfo &gt; /dev/null; then
echo -n "intel"
else
echo -n "non_intel"
fi;
    &lt;/script&gt;
    &lt;match&gt;*&lt;/match&gt;
    &lt;match_type&gt;exact&lt;/match_type&gt;
  &lt;/custom1&gt;
  &lt;result&gt;
    &lt;profile&gt;@custom1@.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
  &lt;/result&gt;
&lt;/rule&gt;</screen>
    <para>
     The script in this rule can echo either <literal>intel</literal> or
     <literal>non_intel</literal> to STDOUT (the output of the grep command
     must be directed to /dev/null in this case). The output of the rule
     script will be filled between the two '@' characters, to determine the
     file name of the control file to fetch. &ay; will read the output and
     fetch a file with the name <filename>intel.xml</filename> or
     <filename>non_intel.xml</filename>. This file can contain the &ay;
     profile part for the software selection; for example, in case you want
     a different software selection on Intel hardware than on others.
    </para>
    <para>
     The number of custom rules is limited to five. So you can use
     <literal>custom1</literal> to <literal>custom5</literal>.
    </para>
   </sect2>

   <sect2 xml:id="matchtypes">
    <title>ルールで使用する比較種類</title>
    <para>
     You can use five different match_types:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       <literal>exact</literal> (default)
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>greater</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>lower</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>range</literal>
      </para>
     </listitem>
     <listitem>
      <para>
       <literal>regex</literal> (a simple <literal>=~</literal> operator
       like in Bash)
      </para>
     </listitem>
    </itemizedlist>
    <para>
     If using <literal>exact</literal>, the string must match exactly as
     specified. <literal>regex</literal> can be used to match substrings
     like <literal>ntel</literal> will match Intel, intel and intelligent.
     <literal>greater</literal> and <literal>lower</literal> can be used for
     <literal>memsize</literal> or <literal>totaldisk</literal> for example. They can match only with rules that
     return an integer value. A range is only possible for integer values
     too and has the form of <literal>value1-value2</literal>, for example
     <literal>512-1024</literal>.
    </para>
   </sect2>

   <sect2 xml:id="rulescombination">
    <title>属性の組み合わせ</title>
    <para>
     Multiple attributes can be combined via a logical operator. It is
     possible to let a rule match if <literal>disksize</literal> is greater than 1GB or <literal>memsize</literal>
     is exactly 512MB.
    </para>
    <para>
     You can do this with the <literal>operator</literal> element in the
     rules.xml file. <literal>and</literal> and <literal>or</literal> are
     possible operators, <literal>and</literal> being the default. Here is
     an example:
    </para>
<screen>&lt;rule&gt;
  &lt;disksize&gt;
    &lt;match&gt;/dev/sda 1000&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/disksize&gt;
  &lt;memsize&gt;
    &lt;match&gt;256&lt;/match&gt;
    &lt;match_type&gt;greater&lt;/match_type&gt;
  &lt;/memsize&gt;
  &lt;result&gt;
    &lt;profile&gt;machine2.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
  &lt;/result&gt;
  &lt;operator&gt;or&lt;/operator&gt;
&lt;/rule&gt;</screen>
   </sect2>

   <sect2 xml:id="rulesstructure">
    <title>ルールファイルの構造</title>
    <para>
     The <filename>rules.xml</filename> file needs to:
    </para>
    <itemizedlist mark="bullet" spacing="normal">
     <listitem>
      <para>
       have at least one rule,
      </para>
     </listitem>
     <listitem>
      <para>
       have the name <filename>rules.xml</filename>,
      </para>
     </listitem>
     <listitem>
      <para>
       be located in the directory <filename>rules</filename> in the profile
       repository,
      </para>
     </listitem>
     <listitem>
      <para>
       have at least one attribute to match in the rule.
      </para>
     </listitem>
    </itemizedlist>
   </sect2>

   <sect2 xml:id="ruleattributes">
    <title>定義済みのシステム属性</title>
    <para>
     The following table lists the predefined system attributes you can
     match in the rules file.
    </para>
    <para>
     If you are unsure about a value on your system, run
     <command>/usr/lib/&yast;/bin/y2base ayast_probe ncurses</command>.
     The text box displaying the detected values can be scrolled. Note that
     this command will not work while another &yast; process that
     requires a lock (for example the installer) is running. Therefore you
     cannot run it during the installation.
    </para>
    <table>
     <title>システム属性</title>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>hostaddress</literal>
         </para>
        </entry>
        <entry>
         <para>
          IP address of the host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>host name</literal>
         </para>
        </entry>
        <entry>
         <para>
          The name of the host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>domain</literal>
         </para>
        </entry>
        <entry>
         <para>
          Domain name of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>installed_product</literal>
         </para>
        </entry>
        <entry>
         <para>
          The name of the product to be installed.
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>installed_product_version</literal>
         </para>
        </entry>
        <entry>
         <para>
          The version of the product to be installed.
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>network</literal>
         </para>
        </entry>
        <entry>
         <para>
          network address of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>mac</literal>
         </para>
        </entry>
        <entry>
         <para>
          MAC address of host
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly (the MAC addresses should
          have the form <literal>0080c8f6484c</literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>linux</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number of installed Linux partitions on the system
         </para>
        </entry>
        <entry>
         <para>
          This attribute can be 0 or more.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>others</literal>
         </para>
        </entry>
        <entry>
         <para>
          Number of installed non-Linux partitions on the system
         </para>
        </entry>
        <entry>
         <para>
          This attribute can be 0 or more.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>xserver</literal>
         </para>
        </entry>
        <entry>
         <para>
          X Server needed for graphic adapter
         </para>
        </entry>
        <entry>
         <para>
          This attribute must always match exactly.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>memsize</literal>
         </para>
        </entry>
        <entry>
         <para>
          Memory available on host in megabytes
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>totaldisk</literal>
         </para>
        </entry>
        <entry>
         <para>
          Total disk space available on host in megabytes
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>hostid</literal>
         </para>
        </entry>
        <entry>
         <para>
          Hex representation of the IP address
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>arch</literal>
         </para>
        </entry>
        <entry>
         <para>
          Architecture of host
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>karch</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel Architecture of host (for example SMP kernel, &xen;
          kernel)
         </para>
         <remark>
          Do we actually still have a Xen-specific kernel? - sknorr, 2017-05-08
         </remark>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>disksize</literal>
         </para>
        </entry>
        <entry>
         <para>
          Drive device and size
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>product</literal>
         </para>
        </entry>
        <entry>
         <para>
          The hardware product name as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>product_vendor</literal>
         </para>
        </entry>
        <entry>
         <para>
          The hardware vendor as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>board</literal>
         </para>
        </entry>
        <entry>
         <para>
          The system board name as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>board_vendor</literal>
         </para>
        </entry>
        <entry>
         <para>
          The system board vendor as specified in SMBIOS
         </para>
        </entry>
        <entry>
         <para>
          Exact match required
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>custom1-5</literal>
         </para>
        </entry>
        <entry>
         <para>
          Custom rules using shell scripts
         </para>
        </entry>
        <entry>
         <para>
          All match types are available.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
   </sect2>

   <sect2 xml:id="rules_dialogs">
    <title>ダイアログ付きのルール</title>
    <para>
     You can use dialog pop-ups with check boxes to select rules you want
     matched.
    </para>
    <para>
     The elements listed below must be placed within the following XML
     structure in the <filename>rules.xml</filename> file:
    </para>
<screen>&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;dialog&gt;
      ...
    &lt;/dialog&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</screen>
    <informaltable>
     <tgroup cols="3">
      <thead>
       <row>
        <entry>
         <para>
          Attribute
         </para>
        </entry>
        <entry>
         <para>
          Values
         </para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>
          <literal>dialog_nr</literal>
         </para>
        </entry>
        <entry>
         <para>
          All rules with the same <literal>dialog_nr</literal> are presented
          in the same pop-up dialog. The same <literal>dialog_nr</literal>
          can appear in multiple rules.
         </para>
<screen>&lt;dialog_nr config:type="integer"&gt;3&lt;/dialog_nr&gt;</screen>
        </entry>
        <entry>
         <para>
          This element is optional and the default for a missing dialog_nr
          is always <literal>0</literal>. To use one pop-up for
          all rules, you do not need to specify the
          <literal>dialog_nr</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>element</literal>
         </para>
        </entry>
        <entry>
         <para>
          Specify a unique ID. Even if you have more than one dialog, you
          must not use the same id twice. Using id <literal>1</literal> on
          dialog 1 and id <literal>1</literal> on dialog 2 is not supported.
          (This behavior is contrary to the <literal>ask</literal> dialog,
          where you can have the same ID for multiple dialogs.)
         </para>
<screen>&lt;element config:type="integer"&gt;3&lt;/element&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If left out, &ay; adds its own ids internally. Then
          you cannot specify conflicting rules (see below).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>title</literal>
         </para>
        </entry>
        <entry>
         <para>
          Caption of the pop-up dialog
         </para>
<screen>&lt;title&gt;Desktop Selection&lt;/title&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>question</literal>
         </para>
        </entry>
        <entry>
         <para>
          Question shown in the pop-up behind the check box.
         </para>
<screen>&lt;question&gt;GNOME Desktop&lt;/question&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. If you do not configure a text here, the name of the XML
          file that is triggered by this rule will be shown instead.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>timeout</literal>
         </para>
        </entry>
        <entry>
         <para>
          Timeout in seconds after which the dialog will automatically
          <quote>press</quote> the okay button. Useful for a non-blocking
          installation in combination with rules dialogs.
         </para>
<screen>&lt;timeout config:type="integer"&gt;30&lt;/timeout&gt;</screen>
        </entry>
        <entry>
         <para>
          Optional. A missing timeout will stop the installation process
          until the dialog is confirmed by the user.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>conflicts</literal>
         </para>
        </entry>
        <entry>
         <para>
          A list of element ids (rules) that conflict with this rule. If
          this rule matches or is selected by the user, all conflicting
          rules are deselected and disabled in the pop-up. Take care that
          you do not create deadlocks.
         </para>
<screen>&lt;conflicts config:type="list"&gt;
  &lt;element config:type="integer"&gt;1&lt;/element&gt;
  &lt;element config:type="integer"&gt;5&lt;/element&gt;
  ...
&lt;/conflicts&gt;</screen>
        </entry>
        <entry>
         <para>
          <literal>optional</literal>
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </informaltable>
    <para>
     Here is an example of how to use dialogs with rules:
    </para>
<screen>&lt;rules config:type="list"&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;question&gt;GNOME Desktop&lt;/question&gt;
      &lt;title&gt;Desktop Selection&lt;/title&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;/conflicts&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;101&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/gnome.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;/result&gt;
    &lt;dialog&gt;
      &lt;element config:type="integer"&gt;1&lt;/element&gt;
      &lt;dialog_nr config:type="integer"&gt;0&lt;/dialog_nr&gt;
      &lt;question&gt;Gnome Desktop&lt;/question&gt;
      &lt;conflicts config:type="list"&gt;
        &lt;element config:type="integer"&gt;0&lt;/element&gt;
      &lt;/conflicts&gt;
    &lt;/dialog&gt;
  &lt;/rule&gt;
  &lt;rule&gt;
    &lt;custom1&gt;
      &lt;script&gt;
echo -n 100
      &lt;/script&gt;
      &lt;match&gt;100&lt;/match&gt;
      &lt;match_type&gt;exact&lt;/match_type&gt;
    &lt;/custom1&gt;
    &lt;result&gt;
      &lt;profile&gt;rules/all_the_rest.xml&lt;/profile&gt;
      &lt;continue config:type="boolean"&gt;false&lt;/continue&gt;
    &lt;/result&gt;
  &lt;/rule&gt;
&lt;/rules&gt;</screen>
   </sect2>
  </sect1>
  <sect1 xml:id="classes">
   <title>クラス</title>

   <para>
    Classes represent configurations for groups of target systems. Unlike
    rules, classes need to be configured in the control file. Then classes
    can be assigned to target systems.
   </para>

   <para>
    Here is an example of a class definition:
   </para>

<screen>&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;TrainingRoom&lt;/class_name&gt;
    &lt;configuration&gt;Software.xml&lt;/configuration&gt;
  &lt;/class&gt;
&lt;/classes&gt;</screen>

   <para>
    In the example above, the file <filename>Software.xml</filename> must be
    placed in the subdirectory <filename>classes/TrainingRoom/</filename> It
    will be fetched from the same place the &ay; control file and rules
    were fetched from.
   </para>

   <para>
    If you have multiple control files and those control files share parts,
    better use classes for common parts.
<!--You just need to change the class and all profiles using that class are fixed too.-->
    <remark>emap 2011-11-07: Sentence does not make sense.</remark>
    You can also use XIncludes.
   </para>

   <para>
    Using the configuration management system, you can define a set of
    classes. A class definition consists of the following variables:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      Name: class name
     </para>
    </listitem>
    <listitem>
     <para>
      Description:
     </para>
    </listitem>
    <listitem>
     <para>
      Order: order (or priority) of the class in the stack of migration
      <remark>emap 2011-11-07: What migration?</remark>
     </para>
    </listitem>
   </itemizedlist>

   <figure os="sles;sled">
    <title>クラスの定義</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="cms-class-definitions.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="cms-class-definitions.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <figure os="osuse">
    <title>クラスの定義</title>
    <mediaobject>
     <imageobject role="html">
      <imagedata fileref="cms-class-definitions_kde.png"/>
     </imageobject>
     <imageobject role="fo">
      <imagedata fileref="cms-class-definitions_kde.png" width="75%"/>
     </imageobject>
    </mediaobject>
   </figure>

   <para>
    You can create as many classes as you need, however it is recommended to
    keep the set of classes as small as possible to keep the configuration
    system concise. For example, the following sets of classes can be used:
   </para>

   <itemizedlist mark="bullet" spacing="normal">
    <listitem>
     <para>
      site: classes describing a physical location or site,
     </para>
    </listitem>
    <listitem>
     <para>
      machine: classes describing a type of machine,
     </para>
    </listitem>
    <listitem>
     <para>
      role: classes describing the function of the machine,
     </para>
    </listitem>
    <listitem>
     <para>
      group: classes describing a department or a group within a site or a
      location.
     </para>
    </listitem>
   </itemizedlist>

   <para>
    A file saved in a class directory can have the same syntax and format as
    a regular control file but represents a subset of the configuration. For
    example, to create a new control file for a computer with a
    specific network interface, you only need the control file resource that
    controls the configuration of the network. Having multiple
    network types, you can merge the one needed for a special type of
    hardware with other class files and create a new control file which
    suits the system being installed.
    <remark>emap 2011-11-07: Not very clear.</remark>
   </para>
  </sect1>
  <sect1 xml:id="mixinfrulesclasses">
   <title>ルールとクラスの混合</title>

   <para>
    It is possible to mix rules and classes during an auto-installation
    session. For example you can identify a system using rules which contain
    class definitions in them. The process is described in the figure
    <xref linkend="rulesflow"/>.
   </para>

   <para>
    After retrieving the rules and merging them, the generated control file
    is parsed and checked for class definitions. If classes are defined,
    then the class files are retrieved from the original repository and a
    new merge process is initiated.
   </para>
  </sect1>
  <sect1 xml:id="merging">
   <title>ルールとクラスの合成</title>

   <para>
    With classes and with rules, multiple XML files get merged into one
    resulting XML file. This merging process is often confusing for people,
    because it behaves different than one would expect. First of all, it is
    important to note that the names of the top sections in the merged XML
    files must be in alphabetical order for the merge to succeed.
   </para>

   <para>
    For example, the following two XML parts should be merged:
   </para>

<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;swap&lt;/filesystem&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;mount&gt;swap&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;130&lt;/partition_id&gt;
        &lt;size&gt;2000mb&lt;/size&gt;
      &lt;/partition&gt;
      &lt;partition&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;4Gb&lt;/size&gt;
        &lt;mount&gt;/data&lt;/mount&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>

<screen>&lt;partitioning config:type="list"&gt;
  &lt;drive&gt;
    &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
    &lt;partitions config:type="list"&gt;
      &lt;partition&gt;
        &lt;format config:type="boolean"&gt;true&lt;/format&gt;
        &lt;filesystem config:type="symbol"&gt;xfs&lt;/filesystem&gt;
        &lt;mount&gt;/&lt;/mount&gt;
        &lt;partition_id config:type="integer"&gt;131&lt;/partition_id&gt;
        &lt;partition_type&gt;primary&lt;/partition_type&gt;
        &lt;size&gt;max&lt;/size&gt;
      &lt;/partition&gt;
    &lt;/partitions&gt;
    &lt;use&gt;all&lt;/use&gt;
  &lt;/drive&gt;
&lt;/partitioning&gt;</screen>

   <para>
    You might expect the control file to contain three partitions. This is not
    the case. You will end up with two partitions and the first partition is
    a mix up of the swap and the root partition. Settings configured in both
    partitions, like <literal>mount</literal> or <literal>size</literal>,
    will be used from the second file. Settings that only exist in the first
    or second partition, will be copied to the merged partition too.
    <remark>emap 2011-11-07: A little confusing, why not put the merged file here.</remark>
   </para>

   <para>
    In this example, you do not want a second <literal>drive</literal>. The
    two drives should be merged into one. With regard to partitions, three
    separate ones should be defined. Using the <literal>dont_merge</literal>
    method solves the merging problem:
   </para>

<screen>&lt;classes config:type="list"&gt;
  &lt;class&gt;
    &lt;class_name&gt;swap&lt;/class_name&gt;
    &lt;configuration&gt;largeswap.xml&lt;/configuration&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/class&gt;
&lt;/classes&gt;</screen>

<screen>&lt;rule&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;ntel&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/largeswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
  &lt;board_vendor&gt;
    &lt;match&gt;PowerEdge [12]850&lt;/match&gt;
    &lt;match_type&gt;regex&lt;/match_type&gt;
  &lt;/board_vendor&gt;
  &lt;result&gt;
    &lt;profile&gt;classes/smallswap.xml&lt;/profile&gt;
    &lt;continue config:type="boolean"&gt;true&lt;/continue&gt;
    &lt;dont_merge config:type="list"&gt;
      &lt;element&gt;partition&lt;/element&gt;
    &lt;/dont_merge&gt;
  &lt;/result&gt;
&lt;/rule&gt;</screen>
  </sect1>
 </chapter>
 <chapter xml:id="Invoking">
  <title>自動インストール処理</title>
  <info/>
  <para/>
  <sect1 xml:id="Installation.process">
   <title>紹介</title>

   <para>
    After the system has booted into an automatic installation and the
    control file has been retrieved, &yast; configures the system
    according to the information provided in the control file. All
    configuration settings are summarized in a window that is shown by
    default and should be deactivated if a fully automatic installation is
    needed.
   </para>

   <para>
    By the time &yast; displays the summary of the configuration,
    &yast; has only probed hardware and prepared the system for
    auto-installation. Nothing has been changed in the system yet. In case
    of any error, you can still abort the process.
   </para>

   <para>
    A system should be automatically installable without the need to have
    any graphic adapter or monitor. Having a monitor attached to the client
    machine is nevertheless recommended so you can supervise the process and
    to get feedback in case of errors. Choose between the graphical and the
    text-based Ncurses interfaces. For headless clients, system messages can
    be monitored using the serial console.
   </para>

   <sect2 xml:id="Installation.Interface.X11">
    <title>X11 インターフェイス (グラフィカル)</title>
    <para>
     This is the default interface while auto-installing. No special
     variables are required to activate it.
    </para>
   </sect2>

   <sect2 xml:id="Installation.Interface.SerialConsole">
    <title>シリアルコンソール</title>
    <para>
     Start installing a system using the serial console by adding the
     keyword <literal>console</literal> (for example
     <literal>console=ttyS0</literal>) to the command line of the kernel.
     This starts <command>linuxrc</command> in console mode and later &yast; in
     serial console mode.
    </para>
   </sect2>

   <sect2 xml:id="Installation.Interface.Ncurses">
    <title>テキストベースの &yast; インストール</title>
    <para>
     This option can also be activated on the command line. To start
     &yast; in text mode, add <literal>textmode=1</literal> on the
     command line.
    </para>
    <para>
     Starting &yast; in the text mode is recommended when installing a client
     with less than 64 MB or when X11 should not be configured, especially
     on headless machines.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="bootmedium">
   <title>適切な起動メディアの選択</title>

   <para>
    There are different methods for booting the client. The computer can
    boot from its network interface card (NIC) to receive the boot images
    via DHCP or TFTP. Alternatively a suitable kernel and initrd image can
    be loaded from a flash disk or a bootable DVD-ROM.
   </para>

   <para>
    &yast; will check for <filename>autoinst.xml</filename> in the root
    directory of the boot medium or the initrd upon start-up and switch to
    an automated installation if it was found. In case the control file is
    named differently or located elsewhere, specify its location on the
    kernel command line with the parameter
    <literal>&ay;=<replaceable>URL</replaceable></literal>.
   </para>

   <sect2 xml:id="bootmedium.flash">
    <title>フラッシュメモリからの起動</title>
    <para>
     For testing/rescue purposes or because the NIC does not have a PROM or
     PXE you can build a bootable flash disk to use with &ay;. Flash
     disks can also store the control file.
    </para>
    <tip>
     <title>起動可能なフラッシュメモリの作成</title>
     <para>
      To create a bootable flash disk, copy either the
      &productname; ISO image of DVD1 or the Mini CD ISO image to the
      disk using the <command>dd</command> command (the flash disk must not be
      mounted, all data on the device will be erased):
     </para>
<screen>&prompt.sudo;dd if=PATH_TO_ISO_IMAGE of=USB_STORAGE_DEVICE bs=4M</screen>
    </tip>
   </sect2>

   <sect2 xml:id="bootmedium.dvd">
    <title>DVD-ROM からの起動</title>
    <para>
     You can use the original &productname; DVD-ROM number one in
     combination with other media. For example, the control file can be
     provided via a flash disk or a specified location on the network.
     Alternatively, create a customized DVD-ROM that includes the control
     file.
    </para>
   </sect2>

   <sect2 xml:id="bootmedium.pxe">
    <title>ネットワーク経由での PXE 起動</title>
    <para>
     Booting via PXE requires a DHCP and a TFTP server in your network. The
     computer will then boot without a physical medium.  <phrase os="sles;sled">For instructions on setting up the required
     infrastructure, see <xref linkend="cha.remote_installation"/>.</phrase>
    </para>
    <para>
     If you install via PXE, the installation will run in an endless
     loop. This happens because after the first reboot, the machine performs
     the PXE boot again and restarts the installation instead of booting from
     the hard disk for the second stage of the installation.
    </para>
    <para>
     There are several ways to solve this problem. You can use an HTTP
     server to provide the &ay; control file. Alternatively, instead of a static
     control file, run a CGI script on the Web server that provides the
     control file and changes the TFTP server configuration for your target
     host. This way, the next PXE boot of the machine will be from the hard disk by
     default.
    </para>
    <para>
     Another way is to use &ay; to upload a new PXE boot configuration
     for the target host via the control file:
    </para>
<screen>&lt;pxe&gt;
  &lt;pxe_localboot config:type="boolean"&gt;true&lt;/pxe_localboot&gt;
  &lt;pxelinux-config&gt;
    DEFAULT linux
    LABEL linux
    localboot 0
  &lt;/pxelinux-config&gt;
  &lt;tftp-server&gt;&tftpip;&lt;/tftp-server&gt;
  &lt;pxelinux-dir&gt;/pxelinux.cfg&lt;/pxelinux-dir&gt;
  &lt;filename&gt;__MAC__&lt;/filename&gt;
&lt;/pxe&gt;</screen>
    <para>
     This entry will upload a new configuration for the target host to the
     TFTP server shortly before the first reboot happens. In most
     installations the TFTP daemon runs as user
     <systemitem class="username">nobody</systemitem>. You need to make sure
     this user has write permissions to the
     <filename>pxelinux.cfg</filename> directory. You can also configure the
     file name that will be uploaded. If you use the <quote>magic</quote>
     <literal>__MAC__</literal> file name, the file name will be the MAC
     address of your machine like, for example
     <literal>01-08-00-27-79-49-ee</literal>. If the file name setting is
     missing, the IP address will be used for the file name.
    </para>
    <para>
     To do another auto-installation on the same machine, you
     need to remove the file from the TFTP server.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="invoking_autoinst">
   <title>自動インストール処理の開始</title>

   <para><remark role="fixme">Add a short description</remark></para>

   <sect2 xml:id="invoking_autoinst.options">
    <title>コマンドラインオプション</title>
    <para>
     Adding the command line variable <literal>autoyast</literal> causes
     <command>linuxrc</command> to start in automated mode. The <command>linuxrc</command>
     program searches for a configuration file, which should be distinguished
     from the main control file, in the following places:
    </para>
    <itemizedlist>
     <listitem>
      <para>
       in the root directory of the initial RAM disk used for booting the
       system;
      </para>
     </listitem>
     <listitem>
      <para>
       in the root directory of the boot medium.
      </para>
     </listitem>
    </itemizedlist>
    <para>
     The <command>linuxrc</command> configuration file supports multiple
     keywords. For a detailed description of how <command>linuxrc</command>
     works and other keywords, see <xref linkend="appendix.linuxrc"/>. Some of
     the more common ones are:
    </para>
    <table>
     <title><command>linuxrc</command> のキーワード</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>キーワード</para>
        </entry>
        <entry>
         <para>値</para>
        </entry>
       </row>
      </thead>
      <tbody>
        <row>
        <entry>
         <para>
          <literal>autoupgrade</literal>
         </para>
        </entry>
        <entry>
         <para>
          Initiate an automatic upgrade using &ay;; see <xref linkend="CreateProfile.upgrade"/>.
          For some use cases, you need the <literal>autoyast</literal> parameter
          (see <xref linkend="Commandline.ay"/> for details).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the control file for automatic installation;
          see <xref linkend="Commandline.ay"/> for details.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast2</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the control file for automatic installation.
          Similar to the <literal>autoyast</literal> option, but
          <command>linuxrc</command> parses the provided value and, for example,
          tries to configure a network when needed. For information about
          differences between the &ay; and <command>linuxrc</command> URI
          syntax, see the <command>linuxrc</command> appendix:
          <xref linkend="appendix.linuxrc"/>. &ay;'s rules and classes are
          <emphasis>not</emphasis> supported.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>ifcfg</literal>
         </para>
        </entry>
        <entry>
         <para>
          Configure and start the network. Required if the &ay; is to be
          fetched from a remote location. See <xref linkend="ay.adv_network"/>
          for details.
         </para>
        </entry>
       </row>
       <!-- fs 2016-07-29: better use ifcfg
       <row>
        <entry>
         <para>
          <literal>gateway</literal>
         </para>
        </entry>
        <entry>
         <para>
          Gateway
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>hostip</literal>
         </para>
        </entry>
        <entry>
         <para>
          When empty, client sends BOOTP request, otherwise client is
          configured with entered IP configuration.
         </para>
        </entry>
        </row>
        -->
       <row>
        <entry>
         <para>
          <literal>insmod</literal>
         </para>
        </entry>
        <entry>
         <para>
          Kernel modules to load
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>install</literal>
         </para>
        </entry>
        <entry>
         <para>
          Location of the installation directory, for example
          <literal>install=nfs://192.168.2.1/CDs/</literal>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>instmode</literal>
         </para>
        </entry>
        <entry>
         <para>
          Installation mode, for example <literal>nfs</literal>,
          <literal>http</literal> etc. (not needed if
          <literal>install</literal> is set).
         </para>
        </entry>
       </row>
       <!-- fs 2016-07-29: better use ifcfg
       <row>
        <entry>
         <para>
          <literal>nameserver</literal>
         </para>
        </entry>
        <entry>
         <para>
          Name Server
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>netdevice</literal>
         </para>
        </entry>
        <entry>
         <para>
          Network device to use for network setup (for BOOTP and DHCP
          requests)
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>netmask</literal>
         </para>
        </entry>
        <entry>
         <para>
          Netmask
         </para>
        </entry>
        </row>
        -->
      <row>
        <entry>
         <para>
          <literal>rootpassword</literal>
         </para>
        </entry>
        <entry>
         <para>
          Password for root user if not specified in &ay; profile
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>server</literal>
         </para>
        </entry>
        <entry>
         <para>
          Server (NFS) to contact for source directory
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>serverdir</literal>
         </para>
        </entry>
        <entry>
         <para>
          Directory on NFS Server
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>y2confirm</literal>
         </para>
        </entry>
        <entry>
         <para>
          Even with &lt;confirm&gt;no&lt;/confirm&gt; in the
          control file, the confirm proposal comes up.
         </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     These variables and keywords will bring the system up to the point
     where &yast; can take over with the main control file. Currently,
     the source medium is automatically discovered, which in some cases
     makes it possible to initiate the auto-install process without giving
     any instructions to <command>linuxrc</command>.
    </para>
    <para>
     The traditional <command>linuxrc</command> configuration file (<filename>info</filename>)
     has the function of giving the client enough information about the
     installation server and the location of the sources. Usually, this file
     is not required, but it is needed in special network environments
     where DHCP and BOOTP are not used or when special kernel modules need
     to be loaded.
    </para>
    <para>
     You can pass keywords to <command>linuxrc</command> using the kernel
     command line. This can be done in several ways. You can specify
     <command>linurc</command> keywords along with other kernel parameters
     interactively at boot time, in the usual way. You can also insert kernel
     parameters into custom network-bootable disk images. It is also possible to
     configure a DHCP server to pass kernel parameters in combination with
     Etherboot or PXE.
    </para>
    <para>
     The command line variable <literal>autoyast</literal> can be used in
     the format described in table <xref linkend="Commandline.ay"/>.
    </para>
    <table xml:id="Commandline.ay">
     <title>&ay; 向けのコマンドライン変数</title>
     <tgroup cols="2">
      <thead>
       <row>
        <entry>
         <para>コマンドライン変数</para>
        </entry>
        <entry>
         <para>
          Description
         </para>
        </entry>
       </row>
      </thead>
      <tbody>
       <row>
        <entry>
         <para>(無し)</para>
        </entry>
        <entry>
         <para>
          No <literal>autoyast</literal> variable needed for
          an automated upgrade, see <xref linkend="pro.upgrade.upgrade-mode"/>.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=default</literal>
         </para>
        </entry>
        <entry>
         <para>
          Default auto-installation option.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=file:///<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file in specified path (relative to the source
          root directory, for example
          <literal>file:///autoinst.xml</literal> if in the top directory of
          a CD-ROM and you did an installation from CD).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=device://<replaceable>DEVICE</replaceable>/<replaceable>FILENAME</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on a storage device. Do not specify the
          full path to the device, but the device name only. You may also omit specifying the device and trigger
          &ay; to search all devices
          (<literal>autoyast=device:///<replaceable>FILENAME</replaceable></literal>).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=nfs://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on an NFS server.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=http://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieves the control file from a Web server using the HTTP
          protocol. Specifying a user name and a password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=https://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieves the control file from a Web server using HTTPS.
          Specifying a user name and a password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=tftp://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file via TFTP.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=ftp://[user:password@]<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file via FTP. Specifying a user name and a
          password is optional.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file from USB devices (&ay; will search
          all connected USB devices).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=relurl://<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Retrieve the control file from the installation source
          (install=....).
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=slp</literal>
         </para>
        </entry>
        <entry>
         <para>
          Query the location of the control file from an SLP server
          (service:autoyast:...). Optionally you may add a
          <literal>description=</literal> attribute so you can
          <quote>translate</quote> the URL into something more readable.
          (<literal>autoyast=slp:/?descr=*SLES*</literal>
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=cifs://<replaceable>SERVER</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Looks for control file on a CIFS server.
         </para>
        </entry>
       </row>
       <row>
        <entry>
         <para>
          <literal>autoyast=label://<replaceable>LABEL</replaceable>/<replaceable>PATH</replaceable></literal>
         </para>
        </entry>
        <entry>
         <para>
          Searches for a control file on a device with the specified label
        </para>
        </entry>
       </row>
      </tbody>
     </tgroup>
    </table>
    <para>
     Several scenarios for auto-installation are possible using different
     types of infrastructure and source media. The simplest way is to use
     the source media (DVD number one) of &productname;. But to initiate the
     auto-installation process, the auto-installation command-line
     variable should be entered at system boot-up and the control file
     should be accessible for &yast;.
     </para>
     <para>In a scripting context, you can use a serial console for your
       virtual machine, that allows you to work in text mode. Then you can
       pass the needed parameters from an expect script or equivalent.</para>
     <para>
     The following list of scenarios explains how the control file can be supplied:
    </para>
    <variablelist>
     <varlistentry>
      <term>Using the Original &productname; DVD-ROM</term>
      <listitem>
       <para>
        When using the original DVD-ROM (DVD #1 is needed), the control file
        needs to be accessible via flash disk or network:
       </para>
       <formalpara>
        <title>フラッシュメモリ</title>
        <para>
         Access the control file via the
         <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         option.
        </para>
       </formalpara>
       <formalpara>
        <title>ネットワーク</title>
        <para>
         Access the control file via the following commands:
         <literal>autoyast=nfs://..</literal>,
         <literal>autoyast=ftp://..</literal>,
         <literal>autoyast=http://..</literal>,
         <literal>autoyast=https://..</literal>,
         <literal>autoyast=tftp://..</literal>, or
         <literal>autoyast=cifs://..</literal>.
        </para>
       </formalpara>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Using a Custom DVD-ROM</term>
      <listitem>
       <para>
        In this case, you can include the control file directly on the
        DVD-ROM. When placing it in the root directory and naming it
        <filename>autoinst.xml</filename>, it will automatically be found
        and used for the installation. Otherwise use
        <literal>autoyast=file:///<replaceable>PATH</replaceable></literal>
        to specify the path to the control file.
       </para>
       <para>
        When using a DVD-ROM for auto-installation, it is necessary to
        instruct the installer to use the DVD-ROM for installation instead of
        trying to find the installation files on the network. This can be
        done by adding the <literal>instmode=cd</literal> option to
        the kernel command line (this can be automated by adding the
        option to the <filename>isolinux.cfg</filename> file on the DVD).
       </para>
      </listitem>
     </varlistentry>
     <varlistentry>
      <term>Using a Network Installation Source</term>
      <listitem>
       <para>
        This option is the most important one because installations of multiple
        machines are usually done using SLP or NFS servers and other network
        services like BOOTP and DHCP. The easiest way to make the control file
        available is to place it in the root directory of the installation
        source, naming it <filename>autoinst.xml</filename>. In this case, it
        will automatically be found and used for the installation. The control
        file can also reside in the following places:
       </para>
       <formalpara>
        <title>フラッシュメモリ</title>
        <para>
         Access the control file via the
         <literal>autoyast=usb://<replaceable>PATH</replaceable></literal>
         option.
        </para>
       </formalpara>
       <formalpara>
        <title>ネットワーク</title>
        <para>
         Access the control file via the following commands:
         <literal>autoyast=nfs://..</literal>,
         <literal>autoyast=ftp://..</literal>,
         <literal>autoyast=http://..</literal>,
         <literal>autoyast=https://..</literal>,
         <literal>autoyast=tftp://..</literal>, or
         <literal>autoyast=cifs://..</literal>.
        </para>
       </formalpara>
      </listitem>
     </varlistentry>
    </variablelist>
    <note>
     <title>ネットワークと DHCP の無効化について</title>
     <para>
      To disable the network during installations where it is not needed or
      unavailable, for example when auto-installing from DVD-ROMs, use the
      <command>linuxrc</command> option <literal>netsetup=0</literal> to disable
      the network setup.
     </para>
    </note>
    <note>
     <title><literal>autoyast</literal> と <literal>autoyast2</literal> のオプションの違いについて</title>
     <para>
      The options <literal>autoyast</literal> and <literal>autoyast2</literal>
      are very similar but differ in one important point:
     </para>
     <itemizedlist>
      <listitem>
       <para>
        When you use <literal>autoyast=http://...</literal>, you need to
        provide <command>linuxrc</command> with the network configuration.
       </para>
      </listitem>
      <listitem>
       <para>
        When you use <literal>autoyast2=http://...</literal>, <command>linuxrc</command>
        tries to configure the network for you.
       </para>
      </listitem>
     </itemizedlist>
    </note>
    <para>
     If <literal>autoyast=default</literal> is defined, &yast; will look
     for a file named <filename>autoinst.xml</filename> in the following
     three places:
    </para>
    <orderedlist>
     <listitem>
      <para>
       the root directory of the flash disk,
      </para>
     </listitem>
     <listitem>
      <para>
       the root directory of the installation medium,
      </para>
     </listitem>
     <listitem>
      <para>
       the root directory of the initial RAM disk used to boot the system.
      </para>
     </listitem>
    </orderedlist>
    <para>
     With all &ay; invocation options, excluding
     <literal>default</literal>, it is possible to specify the location of
     the control file in the following ways:
    </para>
<!-- numeration="arabic" -->
    <orderedlist>
     <listitem>
      <para>
       Specify the exact location of the control file:
      </para>
<screen>autoyast=http://192.168.1.1/control-files/client01.xml</screen>
     </listitem>
     <listitem>
      <para>
       Specify a directory where several control files are located:
      </para>
<screen>autoyast=http://192.168.1.1/control-files/</screen>
      <para>
       In this case the relevant control file is retrieved using the hex
       digit representation of the IP as described below.
      </para>
     </listitem>
    </orderedlist>
    <para>
     If only the path prefix variable is defined, &yast; will fetch the
     control file from the specified location in the following way:
    </para>
<!-- numeration="arabic" -->
    <orderedlist>
     <listitem>
      <para>
       First, it will search for the control file using its own IP address
       in uppercase hexadecimal, for example <literal>192.0.2.91 -&gt;
       C000025B</literal>.
      </para>
     </listitem>
     <listitem>
      <para>
       If this file is not found, &yast; will remove one hex digit and
       try again. This action is repeated until the file with the correct
       name is found. Ultimately, it will try looking for a file with the
       MAC address of the client as the file name (mac should have the
       following syntax: <literal>0080C8F6484C</literal>) and if not found a
       file named <filename>default</filename> (in lowercase).
      </para>
     </listitem>
    </orderedlist>
    <para>
     As an example, for 192.0.2.91, the HTTP client will try:
    </para>
<!-- role="literallayout" -->
<screen>C000025B
C000025
C00002
C0000
C000
C00
C0
C
0080C8F6484C
default</screen>
    <para>
     in that order.
    </para>
    <para>
     To determine the hex representation of the IP address of the client,
     use the utility called <command>/usr/bin/gethostip</command> available
     with the <systemitem class="resource">syslinux</systemitem> package.
    </para>
    <example>
     <title>IP アドレスの 16 進数表記への変換</title>
<screen>&prompt.user;/usr/bin/gethostip 10.10.0.1
10.10.0.1 10.10.0.1 0A0A0001</screen>
    </example>
   </sect2>

   <sect2 xml:id="autoinstall.singlesystem">
    <title>単一システムの自動インストール</title>
    <para>
     The easiest way to auto-install a system without any network connection
     is to use the original &productname; DVD-ROMs and a flash disk. You
     do not need to set up an installation server nor the network
     environment.
    </para>
    <para>
     Create the control file and name it <filename>autoinst.xml</filename>.
     Copy the file <filename>autoinst.xml</filename> to the flash disk.
    </para>
   </sect2>

   <sect2 xml:id="invoking_autoinst.linuxrc">
    <title>&ay; 制御ファイルと <command>linuxrc</command> <filename>info</filename> ファイルの組み合わせ</title>
    <para>
     If you choose to pass information to <command>linuxrc</command> using the
     <filename>info</filename> file, it is possible to integrate the
     keywords in the XML control file. In this case the file needs to be
     accessible to <command>linuxrc</command> and must be named
     <filename>info</filename>.
    </para>
    <para>
     The <command>linuxrc</command> program will look for the string
     <literal>start_linuxrc_conf</literal> in the &ay; control file, which
     represents the beginning of the embedded <command>linuxrc</command> control
     file. If the string is found, <command>linuxrc</command> will parse the
     content starting from that string and will finish when the string
     <literal>end_linuxrc_conf</literal> is found. The options are stored in the
     control file in the following way:
    </para>
    <example>
     <title>&ay; 制御ファイル内での <command>linuxrc</command> オプション</title>
<screen>....
  &lt;install&gt;
....
    &lt;init&gt;
      &lt;info_file&gt;
&lt;![CDATA[
#
# Do not remove the following line:
# start_linuxrc_conf
#
install: nfs://192.168.1.1/CDs/full-i386
textmode: 1
autoyast: file:///info

# end_linuxrc_conf
# Do not remove the above comment
#
]]&gt;

      &lt;/info_file&gt;
    &lt;/init&gt;
......
  &lt;/install&gt;
....
</screen>
    </example>
    <para>
     Note that the <literal>autoyast</literal> keyword must point to the
     same file. If it is on a flash disk, then the option
     <literal>usb:///</literal> needs to be used. If the
     <filename>info</filename> file is stored in the initial RAM disk, the
     <literal>file://</literal> option needs to be used.
    </para>
   </sect2>
  </sect1>
  <sect1 xml:id="System_Configuration">
   <title>システム設定</title>

   <para>
    The system configuration during auto-installation is the most important
    part of the whole process. As you have seen in the previous chapters,
    almost anything can be configured automatically on the target system. In
    addition to the pre-defined directives, you can always use post-scripts
    to change other things in the system. Additionally you can change any
    system variables, and if required, copy complete configuration files
    into the target system.
   </para>

   <sect2 xml:id="System_Configuration.post">
    <title>インストール後およびシステムの設定</title>
    <para>
     The post-installation and system configuration are initiated directly
     after the last package is installed on the target system and continue
     after the system has booted for the first time.
    </para>
    <para>
     Before the system is booted for the first time, &ay; writes all data
     collected during installation and writes the boot loader in the
     specified location. In addition to these regular tasks, &ay;
     executes the chroot-scripts as specified in the control file. Note that
     these scripts are executed while the system is not yet mounted.
    </para>
    <para>
     If a different kernel than the default is installed, a hard reboot will
     be required. A hard reboot can also be forced during auto-installation,
     independent of the installed kernel. Use the <literal>reboot</literal>
     property of the <literal>general</literal> resource (see
     <xref linkend="CreateProfile.General"/>).
    </para>
   </sect2>

   <sect2 xml:id="System_Configuration.custom">
    <title>システムのカスタマイズ</title>
    <para>
     Most of the system customization is done in the second stage of the
     installation. If you require customization that cannot be done using
     &ay; resources, use post-install scripts for further modifications.
    </para>
    <para>
     You can define an unlimited number of custom scripts in the control
     file, either by editing the control file or by using the configuration
     system.
    </para>
   </sect2>
  </sect1>
 </chapter>
 <chapter xml:id="InstalledSystem">
  <title>インストール済みのシステム内での &ay; の実行</title>
   <para>
    In some cases it is useful to run &ay; in a running system.
   </para>
   <para>
    In the following example, an additional software package
    (<literal>foo</literal>) is going to be installed. To run this
    software, a user needs to be added and an NTP client needs to be configured.
   </para>
   <para>
    The respective &ay; profile needs to include a section for the package
    installation (<xref linkend="Software.Selections.stage2_packs"/>),
    a user (<xref linkend="Configuration.Security.users"/>) section and an
    NTP-client (<xref linkend="Configuration.Network.Ntp"/>) section:
   </para>
   <screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;ntp-client&gt;
    &lt;peers config:type="list"&gt;
      &lt;peer&gt;
        &lt;address&gt;us.pool.ntp.org&lt;/address&gt;
        &lt;comment/&gt;
        &lt;options&gt; iburst&lt;/options&gt;
        &lt;type&gt;server&lt;/type&gt;
      &lt;/peer&gt;
    &lt;/peers&gt;
    &lt;start_at_boot config:type="boolean"&gt;true&lt;/start_at_boot&gt;
    &lt;start_in_chroot config:type="boolean"&gt;false&lt;/start_in_chroot&gt;
    &lt;sync_interval config:type="integer"&gt;5&lt;/sync_interval&gt;
    &lt;synchronize_time config:type="boolean"&gt;false&lt;/synchronize_time&gt;
  &lt;/ntp-client&gt;
  &lt;software&gt;
    &lt;post-packages config:type="list"&gt;
      &lt;package&gt;ntp&lt;/package&gt;
      &lt;package&gt;yast2-ntp-client&lt;/package&gt;
      &lt;package&gt;foo&lt;/package&gt;
    &lt;/post-packages&gt;
  &lt;/software&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;fullname&gt;Foo user&lt;/fullname&gt;
      &lt;gid&gt;100&lt;/gid&gt;
      &lt;home&gt;/home/foo&lt;/home&gt;
      &lt;password_settings&gt;
        &lt;expire/&gt;
        &lt;flag/&gt;
        &lt;inact/&gt;
        &lt;max&gt;99999&lt;/max&gt;
        &lt;min&gt;0&lt;/min&gt;
        &lt;warn&gt;7&lt;/warn&gt;
      &lt;/password_settings&gt;
      &lt;shell&gt;/bin/bash&lt;/shell&gt;
      &lt;uid&gt;1001&lt;/uid&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;foo&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</screen>
   <para>
    Store this file as <filename>/tmp/install_foo.xml</filename> and start the
    &ay; installation process by calling:
   </para>
   <screen>&prompt.sudo;yast2 ayast_setup setup filename=/tmp/install_foo.xml dopackages="yes"</screen>

   <para>
    For more information, run <command>yast2 ayast_setup longhelp</command>
   </para>
 </chapter>
 <appendix xml:id="handlingrules">
  <title>ルールの処理</title>
  <info/>
  <para>
   The following figure illustrates how rules are handled and the processes
   of retrieval and merge.
  </para>
  <figure xml:id="rulesflow">
   <title>ルールの取得処理</title>
   <mediaobject>
    <imageobject role="html">
     <imagedata fileref="rules_flow.png"/>
    </imageobject>
    <imageobject role="fo">
     <imagedata fileref="rules_flow.png" width="75%"/>
    </imageobject>
   </mediaobject>
  </figure>
 </appendix>
 <appendix xml:id="app.ay.faq">
  <title>&ay; FAQ - よくある質問とその回答</title>
  <qandaset>
   <qandaentry xml:id="qa.ay.invoke">
    <question>
     <para>
      How do I invoke an &ay; installation?
     </para>
    </question>
    <answer>
     <para>
      On all &productname; versions, the automatic installation gets invoked by
      adding <literal>autoyast=&lt;PATH_TO_PROFILE&gt;</literal> to the kernel
      parameter list. So for example adding
      <literal>autoyast=<replaceable>http://MYSERVER/MYCONFIG.xml</replaceable></literal>
      will start an automatic installation where the profile with the &ay;
      configuration gets fetched from the Web server
      <literal>myserver</literal>.  See <xref linkend="invoking_autoinst"/> for
      more information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.profile">
    <question>
     <para>
      What is an &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      A profile is the &ay; configuration file. The content of the &ay; profile determines
      how the system will be configured and which packages will get installed.
      This includes partitioning, network setup, and software sources, to name but a
      few. Almost everything that can be configured with &yast; in a running
      system can also be configured in an &ay; profile. The profile format is
      an ASCII XML file.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.create_profile">
    <question>
     <para>
      How do I create an &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      The easiest way to create an &ay; profile is to use an existing
      &productname; system
      as a template. On an already installed system, start <menuchoice>
      <guimenu>&yast;</guimenu> <guimenu>Miscellaneous</guimenu>
      <guimenu>Autoinstallation</guimenu></menuchoice>. Now select <menuchoice>
      <guimenu>Tools</guimenu> <guimenu>Create Reference Profile</guimenu>
      </menuchoice> from the menu. Choose the system components you want
      to include in the profile. Alternatively, create a profile containing
      the complete system configuration by running <command>sudo yast
      clone_system</command> from the command line.
     </para>
     <para>
      Both methods will create the file
      <filename>/root/autoinst.xml</filename>. The version created on the
      command line can be used to set up an identical clone of the system on
      which the profile was created. However, usually you will want to adjust
      the file to make it possible to install several machines that are very
      similar, but not identical. This can be done by adjusting the profile
      using your favorite text/XML editor.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.check_profile">
    <question>
     <para>
      How can I check the syntax of a created &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      The most efficient way to check your created &ay; profile is by
      using <command>jing</command> or <command>xmllint</command>.
     </para>
     <para>
       See
       <xref linkend="CreateProfile.Manual"/> for details.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.small_profile">
    <question>
     <para>
      What is smallest &ay; profile that makes sense?
     </para>
    </question>
    <answer>
     <para>
      If a section has not been defined in the &ay; profile
      the settings of the general &yast; installation proposal will be used.
      However, you need to specify at least the &rootuser; password to be able
      to log in to the machine after the installation.
     </para>
     <screen>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;users config:type="list"&gt;
    &lt;user&gt;
      &lt;encrypted config:type="boolean"&gt;false&lt;/encrypted&gt;
      &lt;user_password&gt;linux&lt;/user_password&gt;
      &lt;username&gt;root&lt;/username&gt;
    &lt;/user&gt;
  &lt;/users&gt;
&lt;/profile&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.auto_sound">
    <question>
     <para>
      How do I do an automatic installation with autodetection of my sound card?
     </para>
    </question>
    <answer>
     <para>
      Use the following <literal>sound</literal> section in your profile:
     </para>
     <screen>&lt;sound&gt;
  &lt;autoinstall config:type="boolean"&gt;true&lt;/autoinstall&gt;
  &lt;configure_detected config:type="boolean"&gt;true&lt;/configure_detected&gt;
&lt;/sound&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.cd">
    <question>
     <para>
      I want to install from DVD only. Where do I put the &ay; profile?
     </para>
    </question>
    <answer>
     <para>
      Put the profile in the root of the DVD. Refer to it with
      <literal>file:///<replaceable>PROFILE</replaceable>.xml</literal>.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.test_merge">
    <question>
     <para>
      How can I test a merging process on the command line?
     </para>
    </question>
    <answer>
     <para>
      To merge two profiles, <filename>a.xml</filename> with
      <filename>base.xml</filename>, run the following command:
     </para>
     <screen>&prompt.user;/usr/bin/xsltproc --novalid --param replace "'false'" \
--param dontmerge1 "'package'" --param with "'a.xml'" --output out.xml \
/usr/share/autoinstall/xslt/merge.xslt base.xml</screen>
     <para>
      This requires sections in both profiles to be in alphabetical
      order (&lt;software&gt;, for example, needs to be listed after
      &lt;add-on&gt;). If you have created the profile with &yast;, profiles
      are automatically sorted correctly.
     </para>
     <para>
      The <literal>dontmerge1</literal> parameter is optional and an
      example of what to do when you use the <literal>dont_merge</literal>
      element in your profile. See <xref linkend="merging"/> for more
      information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.zypper">
    <question>
     <para>
      May I call Zypper from scripts?
     </para>
    </question>
    <answer>
     <para>
      Zypper can only be called from &ay; init scripts, because during the
      post-script phase, &yast; still has an exclusive lock on the RPM
      database.
     </para>
     <para>
      If you really need to use other script types (for example a post-script)
      you will need to break the lock at your own risk:
     </para>
     <screen>&lt;post-scripts config:type="list"&gt;
  &lt;script&gt;
    &lt;filename&gt;yast_clone.sh&lt;/filename&gt;
    &lt;interpreter&gt;shell&lt;/interpreter&gt;
    &lt;location/&gt;
    &lt;feedback config:type="boolean"&gt;false&lt;/feedback&gt;
    &lt;source&gt;&lt;![CDATA[#!/bin/sh
mv /var/run/zypp.pid /var/run/zypp.sav
zypper in foo
mv /var/run/zypp.sav /var/run/zypp.pid
]]&gt;&lt;/source&gt;
  &lt;/script&gt;
&lt;/post-scripts&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para>
      Is the order of sections in an &ay; profile important?
     </para>
    </question>
    <answer>
     <para>
      Actually the order is not important. The order of sections in the profile
      has no influence on the &ay; workflow. However, if you want to
      <emphasis>merge</emphasis> different profiles, sections need to be in
      alphabetical order.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.insecure">
    <question>
     <para>
      <command>linuxrc</command> blocks the installation with <literal>File not
      signed</literal>. I need to manually interact.
     </para>
    </question>
    <answer>
     <para>
      <command>linuxrc</command> found an unsigned file, such as a driver
      update. To use an unsigned file, you can suppress that message by passing
      <literal>insecure=1</literal> to the <command>linuxrc</command> parameter
      list (together with the <literal>autoyast=...</literal> parameter).
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.net">
    <question>
     <para>
      I want to install from DVD/USB/HD but fetch the XML file from the
      network.
     </para>
    </question>
    <answer>
     <para>
      You need to pass <literal>ifcfg</literal> to <command>linuxrc</command>.
      This is required to set up the network, otherwise &ay; cannot download the
      profile from the remote host. See <xref linkend="ay.adv_network"/> for
      more information.
     </para>
    </answer>
   </qandaentry>
   <qandaentry xml:id="qa.ay.nfsroot">
    <question>
     <para>
      Is installation onto an NFS root (<filename>/</filename>) possible?
     </para>
    </question>
    <answer>
     <para>
      Yes, but it is more complex than other methods. The environment (DHCP,
      TFTP, etc.) must be set up very carefully. The &ay; profile must look
      like the following:
     </para>
     <screen>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE profile&gt;
&lt;profile xmlns="http://www.suse.com/1.0/yast2ns" xmlns:config="http://www.suse.com/1.0/configns"&gt;
  &lt;partitioning config:type="list"&gt;
    &lt;drive&gt;
      &lt;device&gt;/dev/nfs&lt;/device&gt;
      &lt;initialize config:type="boolean"&gt;false&lt;/initialize&gt;
      &lt;type config:type="symbol"&gt;CT_NFS&lt;/type&gt;
      &lt;partitions config:type="list"&gt;
        &lt;partition&gt;
          &lt;filesystem config:type="symbol"&gt;nfs&lt;/filesystem&gt;
          &lt;fstopt&gt;nolock&lt;/fstopt&gt;
          &lt;device&gt;10.10.1.53:/tmp/m4&lt;/device&gt;
          &lt;mount&gt;/&lt;/mount&gt;
        &lt;/partition&gt;
      &lt;/partitions&gt;
      &lt;use&gt;all&lt;/use&gt;
    &lt;/drive&gt;
  &lt;/partitioning&gt;
&lt;/profile&gt;</screen>
    </answer>
   </qandaentry>
   <qandaentry>
    <question>
     <para>
      Where can I ask questions which have not been answered here?
     </para>
    </question>
    <answer>
     <para>
      There is an &ay; mailing list where you can post your questions.
      Join us at <link xlink:href="http://lists.opensuse.org/opensuse-autoinstall/"/>.
     </para>
    </answer>
   </qandaentry>
  </qandaset>
 </appendix>

 <appendix xml:id="appendix.linuxrc">
  <title>高度な <command>linuxrc</command> オプション</title>
  <info/>
  <para>
   <command>linuxrc</command> is a small program that runs after the kernel has
   loaded, but before &ay; or other stages. It prepares the system for
   installation. It allows the user to load modules, start an installed system
   or a rescue system, and to guide the operation of &yast;.
  </para>
  <note>
   <title>&ay; と <command>linuxrc</command> の設定が等価ではない件について</title>
   <para>
    Some <command>linuxrc</command> settings coincidentally have the same names
    as settings used by &ay; in its <filename>autoyast.xml</filename> file. This
    does <emphasis>not</emphasis> mean that they take the same parameters or
    function in the same way. For example, &ay; takes a <command>self_update</command>
    setting. If this value is set to <literal>1</literal>, another setting,
    <command>self_update_url</command> will be read and followed. Although <command>linuxrc</command>
    also has a <command>self_update</command> setting, <command>linuxrc</command>'s
    setting takes values of either <literal>0</literal> or a URL.
   </para>
   <para>
    Do not pass &ay; parameters to <command>linuxrc</command>, as this will
    almost certainly not give the desired results.
   </para>
  </note>
  <para>
   If <command>linuxrc</command> is installed on a machine, information about it
   can be found in the folder <filename>/usr/share/doc/packages/linuxrc/</filename>.
   Alternatively, its documentation can be found online at:
   <link xlink:href="https://en.opensuse.org/SDB:Linuxrc"/>
  </para>
  <note>
   <title>インストール済みのシステムでの <command>linuxrc</command> の実行について</title>
   <para>
    If you run <command>linuxrc</command> on an installed system, it will work
    slightly differently so as not to destroy your installation. As a
    consequence, you cannot test all features this way.
   </para>
  </note>
  <para>
   To keep the <command>linuxrc</command> binary file as small as possible, all
   its libraries and other supplemental files are linked directly into the main
   program binary file. This means that there is no need for any shared
   libraries in the initial RAM disk, <filename>initrd</filename>.
  </para>
  <sect1 xml:id="ay.cmd_parameters">
   <title><command>linuxrc</command> へパラメータを渡す方法</title>

   <para>
    Unless <command>linuxrc</command> is in manual mode, it will look for an
    <filename>info</filename> file in these locations: first
    <filename>/info</filename> on the flash disk and if that does not exist,
    for <filename>/info</filename> in the <filename>initrd</filename>. After
    that, it parses the kernel command line for parameters. You may change the
    <filename>info</filename> file <command>linuxrc</command> reads by setting the
    <filename>info</filename> command line parameter. If you do not want
    <command>linuxrc</command> to read the kernel command line (for example,
    because you need to specify a kernel parameter that <command>linuxrc</command>
    recognizes as well), use <literal>linuxrc=nocmdline</literal>.
   </para>

   <para>
    <command>linuxrc</command> will always look for and parse a file called
    <filename>/linuxrc.config</filename>. Use this file to change default values
    if you need to. In general, it is better to use the <filename>info</filename>
    file instead. Note that <filename>/linuxrc.config</filename> is read before
    any <filename>info</filename> file, even in manual mode.
   </para>
  </sect1>
  <sect1 xml:id="info_file_format">
   <title><filename>info</filename> ファイルの書式</title>

   <para>
    Lines starting with <literal>#</literal> are comments. Valid entries are
    of the form:
   </para>

<screen>key: value</screen>

   <para>
    Note that <literal>value</literal> extends to the end of the line and
    therefore may contain spaces. The matching of <literal>key</literal> is on a
    case-insensitive basis.
   </para>

   <para>
    You can use the same key-value pairs on the kernel command line using
    the syntax <literal>key=value</literal>. Lines that do not have the form
    described above will be ignored.
   </para>

   <para>
    The table below lists important keys and example values. For a complete
    list of <command>linuxrc</command> parameters, refer to <link xlink:href="https://en.opensuse.org/SDB:Linuxrc"/>.
   </para>

   <table>
    <title>高度な <command>linuxrc</command> のキーワード</title>
    <tgroup cols="2">
     <colspec colnum="1" colname="1" colwidth="30*"/>
     <colspec colnum="2" colname="2" colwidth="70*"/>
     <thead>
      <row>
       <entry>
        <para>
         Keyword: Example Value
        </para>
       </entry>
       <entry>
        <para>
         Description
        </para>
       </entry>
      </row>
     </thead>
     <tbody>
      <row>
       <entry>
        <para>
         <literal>addswap: 0|3|/dev/sda5</literal>
        </para>
       </entry>
       <entry>
        <para>
         If 0, never ask for swap; if the argument is a positive number
         <literal>n</literal>, activate the <literal>n</literal>th swap
         partition; if the argument is a partition name, activate this swap
         partition.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>autoyast:
         <replaceable>ftp://AUTOYASTFILE</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the auto installation file; activates auto installation
         mode. See <xref linkend="Commandline.ay"/> for details.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>bootptimeout: 10</literal>
        </para>
       </entry>
       <entry>
        <para>
         10 seconds timeout for BOOTP requests.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>bootpwait: 5</literal>
        </para>
       </entry>
       <entry>
        <para>
         Sleep 5 seconds between network activation and starting bootp.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>dhcptimeout: 60</literal>
        </para>
       </entry>
       <entry>
        <para>
         60 seconds timeout for DHCP requests.
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>display: color|mono|alt</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set the menu color scheme.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>dhcp: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Start the DHCP daemon now&gt;, but see <literal>UseDHCP</literal>
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>domain: &exampledomain;</literal>
        </para>
       </entry>
       <entry>
        <para>
         Set domain name (used for name server lookups)
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>exec: <replaceable>COMMAND</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Run <emphasis>command</emphasis>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>forceinsmod: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Use the <option>-f</option> option (force) when running
         <command>insmod</command> commands.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>forcerootimage: 0|1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load the installation system into RAM disk.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>gateway: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Gateway
        </para>
       </entry>
      </row>
       <row>
       <entry>
        <para>
         <literal>hostip: 10.10.0.2</literal>
        </para>
       </entry>
       <entry>
        <para>
         The client ip address
        </para>
       </entry>
       </row>
      -->
      <row>
       <entry>
        <para>
         <literal>ifcfg:
         <replaceable>NETWORK_CONFIGURATION</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Set up and start the network. See <xref linkend="ay.adv_network"/> for
         more information.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>insmod: <replaceable>MODULE</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Load <replaceable>MODULE</replaceable>.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>install: <replaceable>URL</replaceable></literal>
        </para>
       </entry>
       <entry>
        <para>
         Install from the repository specified with
         <replaceable>URL</replaceable>. For the syntax of
         <replaceable>URL</replaceable> refer to <link xlink:href="https://en.opensuse.org/SDB:Linuxrc#url_descr"/>.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: Either not a linuxrc parameter or deprecated,
           commenting

      <row>
       <entry>
        <para>
         <literal>installdir: /suse/inst-sys</literal>
        </para>
       </entry>
       <entry>
        <para>
         Path to the installation system
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         InstMode: cd|hd|nfs|smb|ftp|http|tftp
        </para>
       </entry>
       <entry>
        <para>
         Set installation mode
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>keytable: de-lat1-nd</literal>
        </para>
       </entry>
       <entry>
        <para>
         Virtual console keyboard map to load.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>language: de_DE</literal>
        </para>
       </entry>
       <entry>
        <para>
         Language preselected for the installation.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>loghost: 10.10.0.22</literal>
        </para>
       </entry>
       <entry>
        <para>
         Enable remote logging via syslog.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>memloadimage: 50000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load installation system into RAM disk if free memory is above
         50000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>memlimit: 10000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Ask for swap if free memory drops below 10000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>mem&yast;: 20000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Run &yast; in text mode if free memory is below 20000 KB.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>mem&yast;Text: 10000</literal>
        </para>
       </entry>
       <entry>
        <para>
         Ask for swap before starting &yast; if free memory is below
         10000 KB.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         <literal>nameserver: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Name Server
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netdevice: eth0</literal>
        </para>
       </entry>
       <entry>
        <para>
         Network interface to use
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>netmask: 255.255.0.0</literal>
        </para>
       </entry>
       <entry>
        <para>
         Network mask
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>proxy: 10.10.0.1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Proxy (either FTP or HTTP).
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rescue: 1|nfs://server/dir</literal>
        </para>
       </entry>
       <entry>
        <para>
         Load the rescue system; the URL variant specifies the location of the
         rescue image explicitly.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rescueimage: /suse/images/rescue</literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the rescue system image.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>rootimage: /suse/images/root</literal>
        </para>
       </entry>
       <entry>
        <para>
         Location of the installation system image.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>textmode: 1</literal>
        </para>
       </entry>
       <entry>
        <para>
         Start &yast; in text mode.
        </para>
       </entry>
      </row>
      <row>
       <entry>
        <para>
         <literal>usbwait: 4</literal>
        </para>
       </entry>
       <entry>
        <para>
         Wait four seconds after loading the USB modules.
        </para>
       </entry>
      </row>
      <!-- fs 2016-07-29: better use ifcfg
      <row>
       <entry>
        <para>
         vlan: <replaceable>VLANID</replaceable>
        </para>
       </entry>
       <entry>
        <para>
         Set a <replaceable>VLANID</replaceable> to enable 802.1q tagged
         VLAN support
        </para>
       </entry>
       </row>
       -->
      <row>
       <entry>
        <para>
         <literal>y2confirm</literal>
        </para>
       </entry>
       <entry>
        <para>
         Overrides the confirm parameter in a control file and requests
         confirmation of installation proposal.
        </para>
       </entry>
      </row>
     </tbody>
    </tgroup>
   </table>
  </sect1>
  <sect1 xml:id="ay.adv_network">
   <title>高度なネットワーク設定</title>

   <para>
    Even if parameters like <literal>hostip</literal>, <literal>nameserver</literal>,
    and <literal>gateway</literal> are passed to <command>linuxrc</command>, the
    network is only started when it is needed (for example, when installing via
    SSH or VNC). Because <literal>autoyast</literal> is not a <command>linuxrc</command>
    parameter (this parameter is ignored by <command>linuxrc</command> and is
    only passed to &yast;), the network will <emphasis>not</emphasis> be started
    automatically when specifying a remote location for the &ay; profile.
   </para>
   <para>
    Therefore, the network needs to be started explicitly. This used to be done
    with the <command>linuxrc</command> parameter <literal>netsetup</literal>.
    Starting with &productname; <phrase os="osuse">13.2</phrase><phrase os="sles;sled">12</phrase>, the parameter <literal>ifcfg</literal> is
    available. It offers more configuration options, for example configuring
    more than one interface. <literal>ifcfg</literal> directly controls the
    content of the <filename>/etc/sysconfig/network/ifcfg-*</filename> files.
   </para>
   <variablelist>
    <varlistentry>
     <term>DHCP Network Configuration</term>
     <listitem>
      <para>
       The general syntax to configure DHCP is
      </para>
      <screen> ifcfg=<replaceable>INTERFACE</replaceable>=<replaceable>DHCP*</replaceable>,<replaceable>OPTION1</replaceable>=<replaceable>VALUE1</replaceable>,<replaceable>OPTION2</replaceable>=<replaceable>VALUE2</replaceable></screen>
      <para>
       where <replaceable>INTERFACE</replaceable> is the interface name, for
       example <literal>eth0</literal>, or <literal>eth*</literal> for all
       interfaces. <replaceable>DHCP*</replaceable> can either be
       <literal>dhcp</literal> (IPv4 and IPv6), <literal>dhcp4</literal>, or
       <literal>dhcp6</literal>.
      </para>
      <para>
       To set up DHCP for <literal>eth0</literal> use:
      </para>
      <screen>ifcfg=eth0=dhcp</screen>
      <para>
       To set up DHCP on all interfaces use:
      </para>
      <screen>ifcfg=eth*=dhcp</screen>
     </listitem>
    </varlistentry>
    <varlistentry>
     <term>Static Network Configuration</term>
     <listitem>
      <para>
       The general syntax to configure a static network is
      </para> <screen>ifcfg=<replaceable>INTERFACE</replaceable>=<replaceable>IP_LIST</replaceable>,<replaceable>GATEWAY_LIST</replaceable>,<replaceable>NAMESERVER_LIST</replaceable>,<replaceable>DOMAINSEARCH_LIST</replaceable>,\
<replaceable>OPTION1=value1</replaceable>,...</screen>
      <para>
       where <replaceable>INTERFACE</replaceable> is the interface name, for
       example <literal>eth0</literal>. If using <literal>eth*</literal>, the
       first device available will be used. The other parameters need to be
       replaced with the respective values in the given order. Example:
      </para>
      <screen>ifcfg=eth0=&wsIip;/24,&gateip;,&dnsip;,&exampledomain;</screen>
      <para>
       When specifying multiple addresses for a parameter, use spaces to separate
       them and quote the complete string. The following example uses two
       name servers and a search list containing two domains.
      </para>
      <screen>ifcfg="eth0=&wsIip;/24,&gateip;,&dnsip; &dnsip117;,&exampledomain; &exampledomain1;"</screen>
     </listitem>
    </varlistentry>
   </variablelist>
   <para>
    For more information refer to <link xlink:href="https://en.opensuse.org/SDB:Linuxrc#Network_Configuration"/>.
   </para>
  </sect1>
 </appendix>
 <xi:include href="ay_12_migrate_15.xml"/>

 <!--taroth 2019-01-18: commenting docupdates for now
     as discussed in doc team meeting-->
 <!--<xi:include os="sles;sled" href="ay_docupdates.xml"/>-->

 <xi:include href="common_legal.xml"/>
</book>
